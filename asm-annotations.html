<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assembler Annotations &mdash; The Linux Kernel 6.0.0-rc5-mxcsr-+ documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_rtd_colors.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CPU Architectures" href="arch.html" />
    <link rel="prev" title="Overview" href="peci/peci.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> The Linux Kernel
          </a>
              <div class="version">
                6.0.0-rc6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking/index.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="mm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="mhi/index.html">MHI</a></li>
<li class="toctree-l1"><a class="reference internal" href="peci/index.html">Linux PECI Subsystem</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Assembler Annotations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rationale">Rationale</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caveat-and-discussion">Caveat and Discussion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#macros-description">Macros Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#instruction-macros">Instruction Macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-macros">Data Macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="#support-macros">Support Macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overriding-macros">Overriding Macros</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="arch.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tools/index.html">Kernel tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="staging/index.html#memory-barriers">Memory Barriers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="translations/index.html">Translations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">The Linux Kernel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Assembler Annotations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/asm-annotations.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="assembler-annotations">
<h1>Assembler Annotations<a class="headerlink" href="#assembler-annotations" title="Permalink to this headline">¶</a></h1>
<p>Copyright (c) 2017-2019 Jiri Slaby</p>
<p>This document describes the new macros for annotation of data and code in
assembly. In particular, it contains information about <code class="docutils literal notranslate"><span class="pre">SYM_FUNC_START</span></code>,
<code class="docutils literal notranslate"><span class="pre">SYM_FUNC_END</span></code>, <code class="docutils literal notranslate"><span class="pre">SYM_CODE_START</span></code>, and similar.</p>
<section id="rationale">
<h2>Rationale<a class="headerlink" href="#rationale" title="Permalink to this headline">¶</a></h2>
<p>Some code like entries, trampolines, or boot code needs to be written in
assembly. The same as in C, such code is grouped into functions and
accompanied with data. Standard assemblers do not force users into precisely
marking these pieces as code, data, or even specifying their length.
Nevertheless, assemblers provide developers with such annotations to aid
debuggers throughout assembly. On top of that, developers also want to mark
some functions as <em>global</em> in order to be visible outside of their translation
units.</p>
<p>Over time, the Linux kernel has adopted macros from various projects (like
<code class="docutils literal notranslate"><span class="pre">binutils</span></code>) to facilitate such annotations. So for historic reasons,
developers have been using <code class="docutils literal notranslate"><span class="pre">ENTRY</span></code>, <code class="docutils literal notranslate"><span class="pre">END</span></code>, <code class="docutils literal notranslate"><span class="pre">ENDPROC</span></code>, and other
annotations in assembly.  Due to the lack of their documentation, the macros
are used in rather wrong contexts at some locations. Clearly, <code class="docutils literal notranslate"><span class="pre">ENTRY</span></code> was
intended to denote the beginning of global symbols (be it data or code).
<code class="docutils literal notranslate"><span class="pre">END</span></code> used to mark the end of data or end of special functions with
<em>non-standard</em> calling convention. In contrast, <code class="docutils literal notranslate"><span class="pre">ENDPROC</span></code> should annotate
only ends of <em>standard</em> functions.</p>
<p>When these macros are used correctly, they help assemblers generate a nice
object with both sizes and types set correctly. For example, the result of
<code class="docutils literal notranslate"><span class="pre">arch/x86/lib/putuser.S</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Num:    Value          Size Type    Bind   Vis      Ndx Name
 25: 0000000000000000    33 FUNC    GLOBAL DEFAULT    1 __put_user_1
 29: 0000000000000030    37 FUNC    GLOBAL DEFAULT    1 __put_user_2
 32: 0000000000000060    36 FUNC    GLOBAL DEFAULT    1 __put_user_4
 35: 0000000000000090    37 FUNC    GLOBAL DEFAULT    1 __put_user_8
</pre></div>
</div>
<p>This is not only important for debugging purposes. When there are properly
annotated objects like this, tools can be run on them to generate more useful
information. In particular, on properly annotated objects, <code class="docutils literal notranslate"><span class="pre">objtool</span></code> can be
run to check and fix the object if needed. Currently, <code class="docutils literal notranslate"><span class="pre">objtool</span></code> can report
missing frame pointer setup/destruction in functions. It can also
automatically generate annotations for <a class="reference internal" href="x86/orc-unwinder.html"><span class="doc">ORC unwinder</span></a>
for most code. Both of these are especially important to support reliable
stack traces which are in turn necessary for <a class="reference internal" href="livepatch/livepatch.html"><span class="doc">Kernel live patching</span></a>.</p>
</section>
<section id="caveat-and-discussion">
<h2>Caveat and Discussion<a class="headerlink" href="#caveat-and-discussion" title="Permalink to this headline">¶</a></h2>
<p>As one might realize, there were only three macros previously. That is indeed
insufficient to cover all the combinations of cases:</p>
<ul class="simple">
<li><p>standard/non-standard function</p></li>
<li><p>code/data</p></li>
<li><p>global/local symbol</p></li>
</ul>
<p>There was a <a class="reference external" href="https://lore.kernel.org/r/20170217104757.28588-1-jslaby&#64;suse.cz">discussion</a> and instead of extending the current <code class="docutils literal notranslate"><span class="pre">ENTRY/END*</span></code>
macros, it was decided that brand new macros should be introduced instead:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>So how about using macro names that actually show the purpose, instead
of importing all the crappy, historic, essentially randomly chosen
debug symbol macro names from the binutils and older kernels?
</pre></div>
</div>
</section>
<section id="macros-description">
<h2>Macros Description<a class="headerlink" href="#macros-description" title="Permalink to this headline">¶</a></h2>
<p>The new macros are prefixed with the <code class="docutils literal notranslate"><span class="pre">SYM_</span></code> prefix and can be divided into
three main groups:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_FUNC_*</span></code> – to annotate C-like functions. This means functions with
standard C calling conventions. For example, on x86, this means that the
stack contains a return address at the predefined place and a return from
the function can happen in a standard way. When frame pointers are enabled,
save/restore of frame pointer shall happen at the start/end of a function,
respectively, too.</p>
<p>Checking tools like <code class="docutils literal notranslate"><span class="pre">objtool</span></code> should ensure such marked functions conform
to these rules. The tools can also easily annotate these functions with
debugging information (like <em>ORC data</em>) automatically.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_CODE_*</span></code> – special functions called with special stack. Be it
interrupt handlers with special stack content, trampolines, or startup
functions.</p>
<p>Checking tools mostly ignore checking of these functions. But some debug
information still can be generated automatically. For correct debug data,
this code needs hints like <code class="docutils literal notranslate"><span class="pre">UNWIND_HINT_REGS</span></code> provided by developers.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_DATA*</span></code> – obviously data belonging to <code class="docutils literal notranslate"><span class="pre">.data</span></code> sections and not to
<code class="docutils literal notranslate"><span class="pre">.text</span></code>. Data do not contain instructions, so they have to be treated
specially by the tools: they should not treat the bytes as instructions,
nor assign any debug information to them.</p></li>
</ol>
<section id="instruction-macros">
<h3>Instruction Macros<a class="headerlink" href="#instruction-macros" title="Permalink to this headline">¶</a></h3>
<p>This section covers <code class="docutils literal notranslate"><span class="pre">SYM_FUNC_*</span></code> and <code class="docutils literal notranslate"><span class="pre">SYM_CODE_*</span></code> enumerated above.</p>
<p><code class="docutils literal notranslate"><span class="pre">objtool</span></code> requires that all code must be contained in an ELF symbol. Symbol
names that have a <code class="docutils literal notranslate"><span class="pre">.L</span></code> prefix do not emit symbol table entries. <code class="docutils literal notranslate"><span class="pre">.L</span></code>
prefixed symbols can be used within a code region, but should be avoided for
denoting a range of code via <code class="docutils literal notranslate"><span class="pre">SYM_*_START/END</span></code> annotations.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_FUNC_START</span></code> and <code class="docutils literal notranslate"><span class="pre">SYM_FUNC_START_LOCAL</span></code> are supposed to be <strong>the
most frequent markings</strong>. They are used for functions with standard calling
conventions – global and local. Like in C, they both align the functions to
architecture specific <code class="docutils literal notranslate"><span class="pre">__ALIGN</span></code> bytes. There are also <code class="docutils literal notranslate"><span class="pre">_NOALIGN</span></code> variants
for special cases where developers do not want this implicit alignment.</p>
<p><code class="docutils literal notranslate"><span class="pre">SYM_FUNC_START_WEAK</span></code> and <code class="docutils literal notranslate"><span class="pre">SYM_FUNC_START_WEAK_NOALIGN</span></code> markings are
also offered as an assembler counterpart to the <em>weak</em> attribute known from
C.</p>
<p>All of these <strong>shall</strong> be coupled with <code class="docutils literal notranslate"><span class="pre">SYM_FUNC_END</span></code>. First, it marks
the sequence of instructions as a function and computes its size to the
generated object file. Second, it also eases checking and processing such
object files as the tools can trivially find exact function boundaries.</p>
<p>So in most cases, developers should write something like in the following
example, having some asm instructions in between the macros, of course:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SYM_FUNC_START(memset)
    ... asm insns ...
SYM_FUNC_END(memset)
</pre></div>
</div>
<p>In fact, this kind of annotation corresponds to the now deprecated <code class="docutils literal notranslate"><span class="pre">ENTRY</span></code>
and <code class="docutils literal notranslate"><span class="pre">ENDPROC</span></code> macros.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_FUNC_ALIAS</span></code>, <code class="docutils literal notranslate"><span class="pre">SYM_FUNC_ALIAS_LOCAL</span></code>, and <code class="docutils literal notranslate"><span class="pre">SYM_FUNC_ALIAS_WEAK</span></code> can
be used to define multiple names for a function. The typical use is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SYM_FUNC_START(__memset)
    ... asm insns ...
SYN_FUNC_END(__memset)
SYM_FUNC_ALIAS(memset, __memset)
</pre></div>
</div>
<p>In this example, one can call <code class="docutils literal notranslate"><span class="pre">__memset</span></code> or <code class="docutils literal notranslate"><span class="pre">memset</span></code> with the same
result, except the debug information for the instructions is generated to
the object file only once – for the non-<code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> case.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_CODE_START</span></code> and <code class="docutils literal notranslate"><span class="pre">SYM_CODE_START_LOCAL</span></code> should be used only in
special cases – if you know what you are doing. This is used exclusively
for interrupt handlers and similar where the calling convention is not the C
one. <code class="docutils literal notranslate"><span class="pre">_NOALIGN</span></code> variants exist too. The use is the same as for the <code class="docutils literal notranslate"><span class="pre">FUNC</span></code>
category above:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SYM_CODE_START_LOCAL(bad_put_user)
    ... asm insns ...
SYM_CODE_END(bad_put_user)
</pre></div>
</div>
<p>Again, every <code class="docutils literal notranslate"><span class="pre">SYM_CODE_START*</span></code> <strong>shall</strong> be coupled by <code class="docutils literal notranslate"><span class="pre">SYM_CODE_END</span></code>.</p>
<p>To some extent, this category corresponds to deprecated <code class="docutils literal notranslate"><span class="pre">ENTRY</span></code> and
<code class="docutils literal notranslate"><span class="pre">END</span></code>. Except <code class="docutils literal notranslate"><span class="pre">END</span></code> had several other meanings too.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_INNER_LABEL*</span></code> is used to denote a label inside some
<code class="docutils literal notranslate"><span class="pre">SYM_{CODE,FUNC}_START</span></code> and <code class="docutils literal notranslate"><span class="pre">SYM_{CODE,FUNC}_END</span></code>.  They are very similar
to C labels, except they can be made global. An example of use:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SYM_CODE_START(ftrace_caller)
    /* save_mcount_regs fills in first two parameters */
    ...

SYM_INNER_LABEL(ftrace_caller_op_ptr, SYM_L_GLOBAL)
    /* Load the ftrace_ops into the 3rd parameter */
    ...

SYM_INNER_LABEL(ftrace_call, SYM_L_GLOBAL)
    call ftrace_stub
    ...
    retq
SYM_CODE_END(ftrace_caller)
</pre></div>
</div>
</li>
</ul>
</section>
<section id="data-macros">
<h3>Data Macros<a class="headerlink" href="#data-macros" title="Permalink to this headline">¶</a></h3>
<p>Similar to instructions, there is a couple of macros to describe data in the
assembly.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_DATA_START</span></code> and <code class="docutils literal notranslate"><span class="pre">SYM_DATA_START_LOCAL</span></code> mark the start of some data
and shall be used in conjunction with either <code class="docutils literal notranslate"><span class="pre">SYM_DATA_END</span></code>, or
<code class="docutils literal notranslate"><span class="pre">SYM_DATA_END_LABEL</span></code>. The latter adds also a label to the end, so that
people can use <code class="docutils literal notranslate"><span class="pre">lstack</span></code> and (local) <code class="docutils literal notranslate"><span class="pre">lstack_end</span></code> in the following
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SYM_DATA_START_LOCAL(lstack)
    .skip 4096
SYM_DATA_END_LABEL(lstack, SYM_L_LOCAL, lstack_end)
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYM_DATA</span></code> and <code class="docutils literal notranslate"><span class="pre">SYM_DATA_LOCAL</span></code> are variants for simple, mostly one-line
data:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SYM_DATA(HEAP,     .long rm_heap)
SYM_DATA(heap_end, .long rm_stack)
</pre></div>
</div>
<p>In the end, they expand to <code class="docutils literal notranslate"><span class="pre">SYM_DATA_START</span></code> with <code class="docutils literal notranslate"><span class="pre">SYM_DATA_END</span></code>
internally.</p>
</li>
</ul>
</section>
<section id="support-macros">
<h3>Support Macros<a class="headerlink" href="#support-macros" title="Permalink to this headline">¶</a></h3>
<p>All the above reduce themselves to some invocation of <code class="docutils literal notranslate"><span class="pre">SYM_START</span></code>,
<code class="docutils literal notranslate"><span class="pre">SYM_END</span></code>, or <code class="docutils literal notranslate"><span class="pre">SYM_ENTRY</span></code> at last. Normally, developers should avoid using
these.</p>
<p>Further, in the above examples, one could see <code class="docutils literal notranslate"><span class="pre">SYM_L_LOCAL</span></code>. There are also
<code class="docutils literal notranslate"><span class="pre">SYM_L_GLOBAL</span></code> and <code class="docutils literal notranslate"><span class="pre">SYM_L_WEAK</span></code>. All are intended to denote linkage of a
symbol marked by them. They are used either in <code class="docutils literal notranslate"><span class="pre">_LABEL</span></code> variants of the
earlier macros, or in <code class="docutils literal notranslate"><span class="pre">SYM_START</span></code>.</p>
</section>
<section id="overriding-macros">
<h3>Overriding Macros<a class="headerlink" href="#overriding-macros" title="Permalink to this headline">¶</a></h3>
<p>Architecture can also override any of the macros in their own
<code class="docutils literal notranslate"><span class="pre">asm/linkage.h</span></code>, including macros specifying the type of a symbol
(<code class="docutils literal notranslate"><span class="pre">SYM_T_FUNC</span></code>, <code class="docutils literal notranslate"><span class="pre">SYM_T_OBJECT</span></code>, and <code class="docutils literal notranslate"><span class="pre">SYM_T_NONE</span></code>).  As every macro
described in this file is surrounded by <code class="docutils literal notranslate"><span class="pre">#ifdef</span></code> + <code class="docutils literal notranslate"><span class="pre">#endif</span></code>, it is enough
to define the macros differently in the aforementioned architecture-dependent
header.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="peci/peci.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="arch.html" class="btn btn-neutral float-right" title="CPU Architectures" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright The kernel development community.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>