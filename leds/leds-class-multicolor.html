
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Multicolor LED handling under Linux &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="One-shot LED Trigger" href="ledtrig-oneshot.html" />
    <link rel="prev" title="Flash LED handling under Linux" href="leds-class-flash.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="multicolor-led-handling-under-linux">
<h1>Multicolor LED handling under Linux<a class="headerlink" href="#multicolor-led-handling-under-linux" title="Permalink to this headline">¶</a></h1>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The multicolor class groups monochrome LEDs and allows controlling two
aspects of the final combined color: hue and lightness. The former is
controlled via the multi_intensity array file and the latter is controlled
via brightness file.</p>
</section>
<section id="multicolor-class-control">
<h2>Multicolor Class Control<a class="headerlink" href="#multicolor-class-control" title="Permalink to this headline">¶</a></h2>
<p>The multicolor class presents files that groups the colors as indexes in an
array.  These files are children under the LED parent node created by the
led_class framework.  The led_class framework is documented in led-class.rst
within this documentation directory.</p>
<p>Each colored LED will be indexed under the multi_* files. The order of the
colors will be arbitrary. The multi_index file can be read to determine the
color name to indexed value.</p>
<p>The multi_index file is an array that contains the string list of the colors as
they are defined in each multi_* array file.</p>
<p>The multi_intensity is an array that can be read or written to for the
individual color intensities.  All elements within this array must be written in
order for the color LED intensities to be updated.</p>
</section>
<section id="directory-layout-example">
<h2>Directory Layout Example<a class="headerlink" href="#directory-layout-example" title="Permalink to this headline">¶</a></h2>
<p>root:/sys/class/leds/multicolor:status# ls -lR
-rw-r–r–    1 root     root          4096 Oct 19 16:16 brightness
-r–r–r–    1 root     root          4096 Oct 19 16:16 max_brightness
-r–r–r–    1 root     root          4096 Oct 19 16:16 multi_index
-rw-r–r–    1 root     root          4096 Oct 19 16:16 multi_intensity</p>
</section>
<section id="multicolor-class-brightness-control">
<h2>Multicolor Class Brightness Control<a class="headerlink" href="#multicolor-class-brightness-control" title="Permalink to this headline">¶</a></h2>
<p>The brightness level for each LED is calculated based on the color LED
intensity setting divided by the global max_brightness setting multiplied by
the requested brightness.</p>
<p>led_brightness = brightness * multi_intensity/max_brightness</p>
<p>Example:
A user first writes the multi_intensity file with the brightness levels
for each LED that are necessary to achieve a certain color output from a
multicolor LED group.</p>
<p>cat /sys/class/leds/multicolor:status/multi_index
green blue red</p>
<p>echo 43 226 138 &gt; /sys/class/leds/multicolor:status/multi_intensity</p>
<dl class="simple">
<dt>red -</dt><dd><p>intensity = 138
max_brightness = 255</p>
</dd>
<dt>green -</dt><dd><p>intensity = 43
max_brightness = 255</p>
</dd>
<dt>blue -</dt><dd><p>intensity = 226
max_brightness = 255</p>
</dd>
</dl>
<p>The user can control the brightness of that multicolor LED group by writing the
global ‘brightness’ control.  Assuming a max_brightness of 255 the user
may want to dim the LED color group to half.  The user would write a value of
128 to the global brightness file then the values written to each LED will be
adjusted base on this value.</p>
<p>cat /sys/class/leds/multicolor:status/max_brightness
255
echo 128 &gt; /sys/class/leds/multicolor:status/brightness</p>
<p>adjusted_red_value = 128 * 138/255 = 69
adjusted_green_value = 128 * 43/255 = 21
adjusted_blue_value = 128 * 226/255 = 113</p>
<p>Reading the global brightness file will return the current brightness value of
the color LED group.</p>
<p>cat /sys/class/leds/multicolor:status/brightness
128</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Multicolor LED handling under Linux</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#multicolor-class-control">Multicolor Class Control</a></li>
<li><a class="reference internal" href="#directory-layout-example">Directory Layout Example</a></li>
<li><a class="reference internal" href="#multicolor-class-brightness-control">Multicolor Class Brightness Control</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/leds/leds-class-multicolor.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/leds/leds-class-multicolor.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>