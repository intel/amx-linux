
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Scheduler debugfs &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Scheduler pelt c program" href="text_files.html" />
    <link rel="prev" title="Scheduler Statistics" href="sched-stats.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="scheduler-debugfs">
<h1>Scheduler debugfs<a class="headerlink" href="#scheduler-debugfs" title="Permalink to this headline">¶</a></h1>
<p>Booting a kernel with CONFIG_SCHED_DEBUG=y will give access to
scheduler specific debug files under /sys/kernel/debug/sched. Some of
those files are described below.</p>
<section id="numa-balancing">
<h2>numa_balancing<a class="headerlink" href="#numa-balancing" title="Permalink to this headline">¶</a></h2>
<p><cite>numa_balancing</cite> directory is used to hold files to control NUMA
balancing feature.  If the system overhead from the feature is too
high then the rate the kernel samples for NUMA hinting faults may be
controlled by the <cite>scan_period_min_ms, scan_delay_ms,
scan_period_max_ms, scan_size_mb</cite> files.</p>
<section id="scan-period-min-ms-scan-delay-ms-scan-period-max-ms-scan-size-mb">
<h3>scan_period_min_ms, scan_delay_ms, scan_period_max_ms, scan_size_mb<a class="headerlink" href="#scan-period-min-ms-scan-delay-ms-scan-period-max-ms-scan-size-mb" title="Permalink to this headline">¶</a></h3>
<p>Automatic NUMA balancing scans tasks address space and unmaps pages to
detect if pages are properly placed or if the data should be migrated to a
memory node local to where the task is running.  Every “scan delay” the task
scans the next “scan size” number of pages in its address space. When the
end of the address space is reached the scanner restarts from the beginning.</p>
<p>In combination, the “scan delay” and “scan size” determine the scan rate.
When “scan delay” decreases, the scan rate increases.  The scan delay and
hence the scan rate of every task is adaptive and depends on historical
behaviour. If pages are properly placed then the scan delay increases,
otherwise the scan delay decreases.  The “scan size” is not adaptive but
the higher the “scan size”, the higher the scan rate.</p>
<p>Higher scan rates incur higher system overhead as page faults must be
trapped and potentially data must be migrated. However, the higher the scan
rate, the more quickly a tasks memory is migrated to a local node if the
workload pattern changes and minimises performance impact due to remote
memory accesses. These files control the thresholds for scan delays and
the number of pages scanned.</p>
<p><code class="docutils literal notranslate"><span class="pre">scan_period_min_ms</span></code> is the minimum time in milliseconds to scan a
tasks virtual memory. It effectively controls the maximum scanning
rate for each task.</p>
<p><code class="docutils literal notranslate"><span class="pre">scan_delay_ms</span></code> is the starting “scan delay” used for a task when it
initially forks.</p>
<p><code class="docutils literal notranslate"><span class="pre">scan_period_max_ms</span></code> is the maximum time in milliseconds to scan a
tasks virtual memory. It effectively controls the minimum scanning
rate for each task.</p>
<p><code class="docutils literal notranslate"><span class="pre">scan_size_mb</span></code> is how many megabytes worth of pages are scanned for
a given scan.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Scheduler debugfs</a><ul>
<li><a class="reference internal" href="#numa-balancing">numa_balancing</a><ul>
<li><a class="reference internal" href="#scan-period-min-ms-scan-delay-ms-scan-period-max-ms-scan-size-mb">scan_period_min_ms, scan_delay_ms, scan_period_max_ms, scan_size_mb</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/scheduler/sched-debug.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/scheduler/sched-debug.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>