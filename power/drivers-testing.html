
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Testing suspend and resume support in device drivers &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Energy Model of devices" href="energy-model.html" />
    <link rel="prev" title="Charger Manager" href="charger-manager.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="testing-suspend-and-resume-support-in-device-drivers">
<h1>Testing suspend and resume support in device drivers<a class="headerlink" href="#testing-suspend-and-resume-support-in-device-drivers" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ol class="upperalpha simple" start="3">
<li><p>2007 Rafael J. Wysocki &lt;<a class="reference external" href="mailto:rjw&#37;&#52;&#48;sisk&#46;pl">rjw<span>&#64;</span>sisk<span>&#46;</span>pl</a>&gt;, GPL</p></li>
</ol>
</div></blockquote>
<section id="preparing-the-test-system">
<h2>1. Preparing the test system<a class="headerlink" href="#preparing-the-test-system" title="Permalink to this headline">¶</a></h2>
<p>Unfortunately, to effectively test the support for the system-wide suspend and
resume transitions in a driver, it is necessary to suspend and resume a fully
functional system with this driver loaded.  Moreover, that should be done
several times, preferably several times in a row, and separately for hibernation
(aka suspend to disk or STD) and suspend to RAM (STR), because each of these
cases involves slightly different operations and different interactions with
the machine’s BIOS.</p>
<p>Of course, for this purpose the test system has to be known to suspend and
resume without the driver being tested.  Thus, if possible, you should first
resolve all suspend/resume-related problems in the test system before you start
testing the new driver.  Please see <a class="reference internal" href="basic-pm-debugging.html"><span class="doc">Debugging hibernation and suspend</span></a>
for more information about the debugging of suspend/resume functionality.</p>
</section>
<section id="testing-the-driver">
<h2>2. Testing the driver<a class="headerlink" href="#testing-the-driver" title="Permalink to this headline">¶</a></h2>
<p>Once you have resolved the suspend/resume-related problems with your test system
without the new driver, you are ready to test it:</p>
<ol class="loweralpha simple">
<li><p>Build the driver as a module, load it and try the test modes of hibernation
(see: <a class="reference internal" href="basic-pm-debugging.html"><span class="doc">Debugging hibernation and suspend</span></a>, 1).</p></li>
<li><p>Load the driver and attempt to hibernate in the “reboot”, “shutdown” and
“platform” modes (see: <a class="reference internal" href="basic-pm-debugging.html"><span class="doc">Debugging hibernation and suspend</span></a>, 1).</p></li>
<li><p>Compile the driver directly into the kernel and try the test modes of
hibernation.</p></li>
<li><p>Attempt to hibernate with the driver compiled directly into the kernel
in the “reboot”, “shutdown” and “platform” modes.</p></li>
<li><p>Try the test modes of suspend (see:
<a class="reference internal" href="basic-pm-debugging.html"><span class="doc">Debugging hibernation and suspend</span></a>, 2).  [As far as the STR tests are
concerned, it should not matter whether or not the driver is built as a
module.]</p></li>
<li><p>Attempt to suspend to RAM using the s2ram tool with the driver loaded
(see: <a class="reference internal" href="basic-pm-debugging.html"><span class="doc">Debugging hibernation and suspend</span></a>, 2).</p></li>
</ol>
<p>Each of the above tests should be repeated several times and the STD tests
should be mixed with the STR tests.  If any of them fails, the driver cannot be
regarded as suspend/resume-safe.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Testing suspend and resume support in device drivers</a><ul>
<li><a class="reference internal" href="#preparing-the-test-system">1. Preparing the test system</a></li>
<li><a class="reference internal" href="#testing-the-driver">2. Testing the driver</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/power/drivers-testing.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/power/drivers-testing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>