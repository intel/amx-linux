
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Driver-specific callbacks &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="rfkill - RF kill switch support" href="../rfkill.html" />
    <link rel="prev" title="PLDM Firmware file format overview" href="file-format.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="driver-specific-callbacks">
<h1>Driver-specific callbacks<a class="headerlink" href="#driver-specific-callbacks" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> module relies on the device driver for implementing device
specific behavior using the following operations.</p>
<section id="match-record">
<h2><code class="docutils literal notranslate"><span class="pre">.match_record</span></code><a class="headerlink" href="#match-record" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.match_record</span></code> operation is used to determine whether a given PLDM
record matches the device being updated. This requires comparing the record
descriptors in the record with information from the device. Many record
descriptors are defined by the PLDM standard, but it is also allowed for
devices to implement their own descriptors.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.match_record</span></code> operation should return true if a given record matches
the device.</p>
</section>
<section id="send-package-data">
<h2><code class="docutils literal notranslate"><span class="pre">.send_package_data</span></code><a class="headerlink" href="#send-package-data" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.send_package_data</span></code> operation is used to send the device-specific
package data in a record to the device firmware. If the matching record
provides package data, <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> will call the <code class="docutils literal notranslate"><span class="pre">.send_package_data</span></code>
function with a pointer to the package data and with the package data
length. The device driver should send this data to firmware.</p>
</section>
<section id="send-component-table">
<h2><code class="docutils literal notranslate"><span class="pre">.send_component_table</span></code><a class="headerlink" href="#send-component-table" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.send_component_table</span></code> operation is used to forward component
information to the device. It is called once for each applicable component,
that is, for each component indicated by the matching record. The
device driver should send the component information to the device firmware,
and wait for a response. The provided transfer flag indicates whether this
is the first, last, or a middle component, and is expected to be forwarded
to firmware as part of the component table information. The driver should an
error in the case when the firmware indicates that the component cannot be
updated, or return zero if the component can be updated.</p>
</section>
<section id="flash-component">
<h2><code class="docutils literal notranslate"><span class="pre">.flash_component</span></code><a class="headerlink" href="#flash-component" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.flash_component</span></code> operation is used to inform the device driver to
flash a given component. The driver must perform any steps necessary to send
the component data to the device.</p>
</section>
<section id="finalize-update">
<h2><code class="docutils literal notranslate"><span class="pre">.finalize_update</span></code><a class="headerlink" href="#finalize-update" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">.finalize_update</span></code> operation is used by the <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> library in
order to allow the device driver to perform any remaining device specific
logic needed to finish the update.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Driver-specific callbacks</a><ul>
<li><a class="reference internal" href="#match-record"><code class="docutils literal notranslate"><span class="pre">.match_record</span></code></a></li>
<li><a class="reference internal" href="#send-package-data"><code class="docutils literal notranslate"><span class="pre">.send_package_data</span></code></a></li>
<li><a class="reference internal" href="#send-component-table"><code class="docutils literal notranslate"><span class="pre">.send_component_table</span></code></a></li>
<li><a class="reference internal" href="#flash-component"><code class="docutils literal notranslate"><span class="pre">.flash_component</span></code></a></li>
<li><a class="reference internal" href="#finalize-update"><code class="docutils literal notranslate"><span class="pre">.finalize_update</span></code></a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/driver-api/pldmfw/driver-ops.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/driver-api/pldmfw/driver-ops.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>