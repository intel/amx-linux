
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>PLDM Firmware file format overview &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Driver-specific callbacks" href="driver-ops.html" />
    <link rel="prev" title="PLDM Firmware Flash Update Library" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pldm-firmware-file-format-overview">
<h1>PLDM Firmware file format overview<a class="headerlink" href="#pldm-firmware-file-format-overview" title="Permalink to this headline">¶</a></h1>
<p>A PLDM firmware package is a binary file which contains a header that
describes the contents of the firmware package. This includes an initial
package header, one or more firmware records, and one or more components
describing the actual flash contents to program.</p>
<p>This diagram provides an overview of the file format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  overall file layout
+----------------------+
|                      |
|  Package Header      |
|                      |
+----------------------+
|                      |
|  Device Records      |
|                      |
+----------------------+
|                      |
|  Component Info      |
|                      |
+----------------------+
|                      |
|  Package Header CRC  |
|                      |
+----------------------+
|                      |
|  Component Image 1   |
|                      |
+----------------------+
|                      |
|  Component Image 2   |
|                      |
+----------------------+
|                      |
|         ...          |
|                      |
+----------------------+
|                      |
|  Component Image N   |
|                      |
+----------------------+
</pre></div>
</div>
<section id="package-header">
<h2>Package Header<a class="headerlink" href="#package-header" title="Permalink to this headline">¶</a></h2>
<p>The package header begins with the UUID of the PLDM file format, and
contains information about the version of the format that the file uses. It
also includes the total header size, a release date, the size of the
component bitmap, and an overall package version.</p>
<p>The following diagram provides an overview of the package header:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>       header layout
+-------------------------+
| PLDM UUID               |
+-------------------------+
| Format Revision         |
+-------------------------+
| Header Size             |
+-------------------------+
| Release Date            |
+-------------------------+
| Component Bitmap Length |
+-------------------------+
| Package Version Info    |
+-------------------------+
</pre></div>
</div>
</section>
<section id="device-records">
<h2>Device Records<a class="headerlink" href="#device-records" title="Permalink to this headline">¶</a></h2>
<p>The device firmware records area starts with a count indicating the total
number of records in the file, followed by each record. A single device
record describes what device matches this record. All valid PLDM firmware
files must contain at least one record, but optionally may contain more than
one record if they support multiple devices.</p>
<p>Each record will identify the device it supports via TLVs that describe the
device, such as the PCI device and vendor information. It will also indicate
which set of components that are used by this device. It is possible that
only subset of provided components will be used by a given record. A record
may also optionally contain device-specific package data that will be used
by the device firmware during the update process.</p>
<p>The following diagram provides an overview of the device record area:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   area layout
+---------------+
|               |
|  Record Count |
|               |
+---------------+
|               |
|  Record 1     |
|               |
+---------------+
|               |
|  Record 2     |
|               |
+---------------+
|               |
|      ...      |
|               |
+---------------+
|               |
|  Record N     |
|               |
+---------------+

     record layout
+-----------------------+
| Record Length         |
+-----------------------+
| Descriptor Count      |
+-----------------------+
| Option Flags          |
+-----------------------+
| Version Settings      |
+-----------------------+
| Package Data Length   |
+-----------------------+
| Applicable Components |
+-----------------------+
| Version String        |
+-----------------------+
| Descriptor TLVs       |
+-----------------------+
| Package Data          |
+-----------------------+
</pre></div>
</div>
</section>
<section id="component-info">
<h2>Component Info<a class="headerlink" href="#component-info" title="Permalink to this headline">¶</a></h2>
<p>The component information area begins with a count of the number of
components. Following this count is a description for each component. The
component information points to the location in the file where the component
data is stored, and includes version data used to identify the version of
the component.</p>
<p>The following diagram provides an overview of the component area:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   area layout
+-----------------+
|                 |
| Component Count |
|                 |
+-----------------+
|                 |
| Component 1     |
|                 |
+-----------------+
|                 |
| Component 2     |
|                 |
+-----------------+
|                 |
|     ...         |
|                 |
+-----------------+
|                 |
| Component N     |
|                 |
+-----------------+

     component layout
+------------------------+
| Classification         |
+------------------------+
| Component Identifier   |
+------------------------+
| Comparison Stamp       |
+------------------------+
| Component Options      |
+------------------------+
| Activation Method      |
+------------------------+
| Location Offset        |
+------------------------+
| Component Size         |
+------------------------+
| Component Version Info |
+------------------------+
| Package Data           |
+------------------------+
</pre></div>
</div>
</section>
<section id="package-header-crc">
<h2>Package Header CRC<a class="headerlink" href="#package-header-crc" title="Permalink to this headline">¶</a></h2>
<p>Following the component information is a short 4-byte CRC calculated over
the contents of all of the header information.</p>
</section>
<section id="component-images">
<h2>Component Images<a class="headerlink" href="#component-images" title="Permalink to this headline">¶</a></h2>
<p>The component images follow the package header information in the PLDM
firmware file. Each of these is simply a binary chunk with its start and
size defined by the matching component structure in the component info area.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PLDM Firmware file format overview</a><ul>
<li><a class="reference internal" href="#package-header">Package Header</a></li>
<li><a class="reference internal" href="#device-records">Device Records</a></li>
<li><a class="reference internal" href="#component-info">Component Info</a></li>
<li><a class="reference internal" href="#package-header-crc">Package Header CRC</a></li>
<li><a class="reference internal" href="#component-images">Component Images</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/driver-api/pldmfw/file-format.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/driver-api/pldmfw/file-format.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>