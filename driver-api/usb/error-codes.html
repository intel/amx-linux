
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>USB Error codes &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Writing USB Device Drivers" href="writing_usb_driver.html" />
    <link rel="prev" title="USB device persistence during system suspend" href="persist.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="usb-error-codes">
<span id="id1"></span><h1>USB Error codes<a class="headerlink" href="#usb-error-codes" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Revised</dt>
<dd class="field-odd"><p>2004-Oct-21</p>
</dd>
</dl>
<p>This is the documentation of (hopefully) all possible error codes (and
their interpretation) that can be returned from usbcore.</p>
<p>Some of them are returned by the Host Controller Drivers (HCDs), which
device drivers only see through usbcore.  As a rule, all the HCDs should
behave the same except for transfer speed dependent behaviors and the
way certain faults are reported.</p>
<section id="error-codes-returned-by-usb-submit-urb">
<h2>Error codes returned by <a class="reference internal" href="usb.html#c.usb_submit_urb" title="usb_submit_urb"><code class="xref c c-func docutils literal notranslate"><span class="pre">usb_submit_urb()</span></code></a><a class="headerlink" href="#error-codes-returned-by-usb-submit-urb" title="Permalink to this headline">¶</a></h2>
<p>Non-USB-specific:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 76%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>URB submission went fine</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-ENOMEM</span></code></p></td>
<td><p>no memory for allocation of internal structures</p></td>
</tr>
</tbody>
</table>
<p>USB-specific:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EBUSY</span></code></p></td>
<td><p>The URB is already active.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-ENODEV</span></code></p></td>
<td><p>specified USB-device or bus doesn’t exist</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-ENOENT</span></code></p></td>
<td><p>specified interface or endpoint does not exist or
is not enabled</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-ENXIO</span></code></p></td>
<td><p>host controller driver does not support queuing of
this type of urb.  (treat as a host controller bug.)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code></p></td>
<td><ol class="loweralpha simple">
<li><p>Invalid transfer type specified (or not supported)</p></li>
<li><p>Invalid or unsupported periodic transfer interval</p></li>
<li><p>ISO: attempted to change transfer interval</p></li>
<li><p>ISO: <code class="docutils literal notranslate"><span class="pre">number_of_packets</span></code> is &lt; 0</p></li>
<li><p>various other cases</p></li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-EXDEV</span></code></p></td>
<td><p>ISO: <code class="docutils literal notranslate"><span class="pre">URB_ISO_ASAP</span></code> wasn’t specified and all the
frames the URB would be scheduled in have already
expired.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EFBIG</span></code></p></td>
<td><p>Host controller driver can’t schedule that many ISO
frames.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-EPIPE</span></code></p></td>
<td><p>The pipe type specified in the URB doesn’t match the
endpoint’s actual type.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EMSGSIZE</span></code></p></td>
<td><ol class="loweralpha simple">
<li><p>endpoint maxpacket size is zero; it is not usable
in the current interface altsetting.</p></li>
<li><p>ISO packet is larger than the endpoint maxpacket.</p></li>
<li><p>requested data transfer length is invalid: negative
or too large for the host controller.</p></li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-EBADR</span></code></p></td>
<td><p>The wLength value in a control URB’s setup packet does
not match the URB’s transfer_buffer_length.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-ENOSPC</span></code></p></td>
<td><p>This request would overcommit the usb bandwidth reserved
for periodic transfers (interrupt, isochronous).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-ESHUTDOWN</span></code></p></td>
<td><p>The device or host controller has been disabled due to
some problem that could not be worked around.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EPERM</span></code></p></td>
<td><p>Submission failed because <code class="docutils literal notranslate"><span class="pre">urb-&gt;reject</span></code> was set.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-EHOSTUNREACH</span></code></p></td>
<td><p>URB was rejected because the device is suspended.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-ENOEXEC</span></code></p></td>
<td><p>A control URB doesn’t contain a Setup packet.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="error-codes-returned-by-in-urb-status-or-in-iso-frame-desc-n-status-for-iso">
<h2>Error codes returned by <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">urb-&gt;status</span></code> or in <code class="docutils literal notranslate"><span class="pre">iso_frame_desc[n].status</span></code> (for ISO)<a class="headerlink" href="#error-codes-returned-by-in-urb-status-or-in-iso-frame-desc-n-status-for-iso" title="Permalink to this headline">¶</a></h2>
<p>USB device drivers may only test urb status values in completion handlers.
This is because otherwise there would be a race between HCDs updating
these values on one CPU, and device drivers testing them on another CPU.</p>
<p>A transfer’s actual_length may be positive even when an error has been
reported.  That’s because transfers often involve several packets, so that
one or more packets could finish before an error stops further endpoint I/O.</p>
<p>For isochronous URBs, the urb status value is non-zero only if the URB is
unlinked, the device is removed, the host controller is disabled, or the total
transferred length is less than the requested length and the
<code class="docutils literal notranslate"><span class="pre">URB_SHORT_NOT_OK</span></code> flag is set.  Completion handlers for isochronous URBs
should only see <code class="docutils literal notranslate"><span class="pre">urb-&gt;status</span></code> set to zero, <code class="docutils literal notranslate"><span class="pre">-ENOENT</span></code>, <code class="docutils literal notranslate"><span class="pre">-ECONNRESET</span></code>,
<code class="docutils literal notranslate"><span class="pre">-ESHUTDOWN</span></code>, or <code class="docutils literal notranslate"><span class="pre">-EREMOTEIO</span></code>. Individual frame descriptor status fields
may report more status codes.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Transfer completed successfully</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-ENOENT</span></code></p></td>
<td><p>URB was synchronously unlinked by
<a class="reference internal" href="usb.html#c.usb_unlink_urb" title="usb_unlink_urb"><code class="xref c c-func docutils literal notranslate"><span class="pre">usb_unlink_urb()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EINPROGRESS</span></code></p></td>
<td><p>URB still pending, no results yet
(That is, if drivers see this it’s a bug.)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-EPROTO</span></code> <a class="footnote-reference brackets" href="#f1" id="id2">1</a>, <a class="footnote-reference brackets" href="#f2" id="id3">2</a></p></td>
<td><ol class="loweralpha simple">
<li><p>bitstuff error</p></li>
<li><p>no response packet received within the
prescribed bus turn-around time</p></li>
<li><p>unknown USB error</p></li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EILSEQ</span></code> <a class="footnote-reference brackets" href="#f1" id="id4">1</a>, <a class="footnote-reference brackets" href="#f2" id="id5">2</a></p></td>
<td><ol class="loweralpha simple">
<li><p>CRC mismatch</p></li>
<li><p>no response packet received within the
prescribed bus turn-around time</p></li>
<li><p>unknown USB error</p></li>
</ol>
<p>Note that often the controller hardware does
not distinguish among cases a), b), and c), so
a driver cannot tell whether there was a
protocol error, a failure to respond (often
caused by device disconnect), or some other
fault.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-ETIME</span></code> <a class="footnote-reference brackets" href="#f2" id="id6">2</a></p></td>
<td><p>No response packet received within the
prescribed bus turn-around time.  This error
may instead be reported as
<code class="docutils literal notranslate"><span class="pre">-EPROTO</span></code> or <code class="docutils literal notranslate"><span class="pre">-EILSEQ</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-ETIMEDOUT</span></code></p></td>
<td><p>Synchronous USB message functions use this code
to indicate timeout expired before the transfer
completed, and no other error was reported
by HC.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-EPIPE</span></code> <a class="footnote-reference brackets" href="#f2" id="id7">2</a></p></td>
<td><p>Endpoint stalled.  For non-control endpoints,
reset this status with
<a class="reference internal" href="usb.html#c.usb_clear_halt" title="usb_clear_halt"><code class="xref c c-func docutils literal notranslate"><span class="pre">usb_clear_halt()</span></code></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-ECOMM</span></code></p></td>
<td><p>During an IN transfer, the host controller
received data from an endpoint faster than it
could be written to system memory</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-ENOSR</span></code></p></td>
<td><p>During an OUT transfer, the host controller
could not retrieve data from system memory fast
enough to keep up with the USB data rate</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EOVERFLOW</span></code> <a class="footnote-reference brackets" href="#f1" id="id8">1</a></p></td>
<td><p>The amount of data returned by the endpoint was
greater than either the max packet size of the
endpoint or the remaining buffer size.
“Babble”.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-EREMOTEIO</span></code></p></td>
<td><p>The data read from the endpoint did not fill
the specified buffer, and <code class="docutils literal notranslate"><span class="pre">URB_SHORT_NOT_OK</span></code>
was set in <code class="docutils literal notranslate"><span class="pre">urb-&gt;transfer_flags</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-ENODEV</span></code></p></td>
<td><p>Device was removed.  Often preceded by a burst
of other errors, since the hub driver doesn’t
detect device removal events immediately.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-EXDEV</span></code></p></td>
<td><p>ISO transfer only partially completed
(only set in <code class="docutils literal notranslate"><span class="pre">iso_frame_desc[n].status</span></code>,
not <code class="docutils literal notranslate"><span class="pre">urb-&gt;status</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code></p></td>
<td><p>ISO madness, if this happens: Log off and
go home</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-ECONNRESET</span></code></p></td>
<td><p>URB was asynchronously unlinked by
<a class="reference internal" href="usb.html#c.usb_unlink_urb" title="usb_unlink_urb"><code class="xref c c-func docutils literal notranslate"><span class="pre">usb_unlink_urb()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-ESHUTDOWN</span></code></p></td>
<td><p>The device or host controller has been
disabled due to some problem that could not
be worked around, such as a physical
disconnect.</p></td>
</tr>
</tbody>
</table>
<dl class="footnote brackets">
<dt class="label" id="f1"><span class="brackets">1</span><span class="fn-backref">(<a href="#id2">1</a>,<a href="#id4">2</a>,<a href="#id8">3</a>)</span></dt>
<dd><p>Error codes like <code class="docutils literal notranslate"><span class="pre">-EPROTO</span></code>, <code class="docutils literal notranslate"><span class="pre">-EILSEQ</span></code> and <code class="docutils literal notranslate"><span class="pre">-EOVERFLOW</span></code> normally
indicate hardware problems such as bad devices (including firmware)
or cables.</p>
</dd>
<dt class="label" id="f2"><span class="brackets">2</span><span class="fn-backref">(<a href="#id3">1</a>,<a href="#id5">2</a>,<a href="#id6">3</a>,<a href="#id7">4</a>)</span></dt>
<dd><p>This is also one of several codes that different kinds of host
controller use to indicate a transfer has failed because of device
disconnect.  In the interval before the hub driver starts disconnect
processing, devices may receive such fault reports for every request.</p>
</dd>
</dl>
</section>
<section id="error-codes-returned-by-usbcore-functions">
<h2>Error codes returned by usbcore-functions<a class="headerlink" href="#error-codes-returned-by-usbcore-functions" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>expect also other submit and transfer status codes</p>
</div>
<p><code class="xref c c-func docutils literal notranslate"><span class="pre">usb_register()</span></code>:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code></p></td>
<td><p>error during registering new driver</p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">usb_get_*/usb_set_*()</span></code>,
<a class="reference internal" href="usb.html#c.usb_control_msg" title="usb_control_msg"><code class="xref c c-func docutils literal notranslate"><span class="pre">usb_control_msg()</span></code></a>,
<a class="reference internal" href="usb.html#c.usb_bulk_msg" title="usb_bulk_msg"><code class="xref c c-func docutils literal notranslate"><span class="pre">usb_bulk_msg()</span></code></a>:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-ETIMEDOUT</span></code></p></td>
<td><p>Timeout expired before the transfer completed.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">USB Error codes</a><ul>
<li><a class="reference internal" href="#error-codes-returned-by-usb-submit-urb">Error codes returned by <code class="xref c c-func docutils literal notranslate"><span class="pre">usb_submit_urb()</span></code></a></li>
<li><a class="reference internal" href="#error-codes-returned-by-in-urb-status-or-in-iso-frame-desc-n-status-for-iso">Error codes returned by <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">urb-&gt;status</span></code> or in <code class="docutils literal notranslate"><span class="pre">iso_frame_desc[n].status</span></code> (for ISO)</a></li>
<li><a class="reference internal" href="#error-codes-returned-by-usbcore-functions">Error codes returned by usbcore-functions</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/driver-api/usb/error-codes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/driver-api/usb/error-codes.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>