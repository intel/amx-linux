
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>PARPORT interface documentation &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PPS - Pulse Per Second" href="pps.html" />
    <link rel="prev" title="NVMEM Subsystem" href="nvmem.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="parport-interface-documentation">
<h1>PARPORT interface documentation<a class="headerlink" href="#parport-interface-documentation" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Time-stamp</dt>
<dd class="field-odd"><p>&lt;2000-02-24 13:30:20 twaugh&gt;</p>
</dd>
</dl>
<p>Described here are the following functions:</p>
<dl class="simple">
<dt>Global functions::</dt><dd><p>parport_register_driver
parport_unregister_driver
parport_enumerate
parport_register_device
parport_unregister_device
parport_claim
parport_claim_or_block
parport_release
parport_yield
parport_yield_blocking
parport_wait_peripheral
parport_poll_peripheral
parport_wait_event
parport_negotiate
parport_read
parport_write
parport_open
parport_close
parport_device_id
parport_device_coords
parport_find_class
parport_find_device
parport_set_timeout</p>
</dd>
</dl>
<p>Port functions (can be overridden by low-level drivers):</p>
<blockquote>
<div><dl class="simple">
<dt>SPP::</dt><dd><p>port-&gt;ops-&gt;read_data
port-&gt;ops-&gt;write_data
port-&gt;ops-&gt;read_status
port-&gt;ops-&gt;read_control
port-&gt;ops-&gt;write_control
port-&gt;ops-&gt;frob_control
port-&gt;ops-&gt;enable_irq
port-&gt;ops-&gt;disable_irq
port-&gt;ops-&gt;data_forward
port-&gt;ops-&gt;data_reverse</p>
</dd>
<dt>EPP::</dt><dd><p>port-&gt;ops-&gt;epp_write_data
port-&gt;ops-&gt;epp_read_data
port-&gt;ops-&gt;epp_write_addr
port-&gt;ops-&gt;epp_read_addr</p>
</dd>
<dt>ECP::</dt><dd><p>port-&gt;ops-&gt;ecp_write_data
port-&gt;ops-&gt;ecp_read_data
port-&gt;ops-&gt;ecp_write_addr</p>
</dd>
<dt>Other::</dt><dd><p>port-&gt;ops-&gt;nibble_read_data
port-&gt;ops-&gt;byte_read_data
port-&gt;ops-&gt;compat_write_data</p>
</dd>
</dl>
</div></blockquote>
<p>The parport subsystem comprises <code class="docutils literal notranslate"><span class="pre">parport</span></code> (the core port-sharing
code), and a variety of low-level drivers that actually do the port
accesses.  Each low-level driver handles a particular style of port
(PC, Amiga, and so on).</p>
<p>The parport interface to the device driver author can be broken down
into global functions and port functions.</p>
<p>The global functions are mostly for communicating between the device
driver and the parport subsystem: acquiring a list of available ports,
claiming a port for exclusive use, and so on.  They also include
<code class="docutils literal notranslate"><span class="pre">generic</span></code> functions for doing standard things that will work on any
IEEE 1284-capable architecture.</p>
<p>The port functions are provided by the low-level drivers, although the
core parport module provides generic <code class="docutils literal notranslate"><span class="pre">defaults</span></code> for some routines.
The port functions can be split into three groups: SPP, EPP, and ECP.</p>
<p>SPP (Standard Parallel Port) functions modify so-called <code class="docutils literal notranslate"><span class="pre">SPP</span></code>
registers: data, status, and control.  The hardware may not actually
have registers exactly like that, but the PC does and this interface is
modelled after common PC implementations.  Other low-level drivers may
be able to emulate most of the functionality.</p>
<p>EPP (Enhanced Parallel Port) functions are provided for reading and
writing in IEEE 1284 EPP mode, and ECP (Extended Capabilities Port)
functions are used for IEEE 1284 ECP mode. (What about BECP? Does
anyone care?)</p>
<p>Hardware assistance for EPP and/or ECP transfers may or may not be
available, and if it is available it may or may not be used.  If
hardware is not used, the transfer will be software-driven.  In order
to cope with peripherals that only tenuously support IEEE 1284, a
low-level driver specific function is provided, for altering ‘fudge
factors’.</p>
<section id="global-functions">
<h2>Global functions<a class="headerlink" href="#global-functions" title="Permalink to this headline">¶</a></h2>
<section id="parport-register-driver-register-a-device-driver-with-parport">
<h3>parport_register_driver - register a device driver with parport<a class="headerlink" href="#parport-register-driver-register-a-device-driver-with-parport" title="Permalink to this headline">¶</a></h3>
<section id="synopsis">
<h4>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_driver {
        const char *name;
        void (*attach) (struct parport *);
        void (*detach) (struct parport *);
        struct parport_driver *next;
};
int parport_register_driver (struct parport_driver *driver);
</pre></div>
</div>
</section>
<section id="description">
<h4>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h4>
<p>In order to be notified about parallel ports when they are detected,
parport_register_driver should be called.  Your driver will
immediately be notified of all ports that have already been detected,
and of each new port as low-level drivers are loaded.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">parport_driver</span></code> contains the textual name of your driver,
a pointer to a function to handle new ports, and a pointer to a
function to handle ports going away due to a low-level driver
unloading.  Ports will only be detached if they are not being used
(i.e. there are no devices registered on them).</p>
<p>The visible parts of the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">parport</span> <span class="pre">*</span></code> argument given to
attach/detach are:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct parport
{
        struct parport *next; /* next parport in list */
        const char *name;     /* port&#39;s name */
        unsigned int modes;   /* bitfield of hardware modes */
        struct parport_device_info probe_info;
                        /* IEEE1284 info */
        int number;           /* parport index */
        struct parport_operations *ops;
        ...
};
</pre></div>
</div>
<p>There are other members of the structure, but they should not be
touched.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">modes</span></code> member summarises the capabilities of the underlying
hardware.  It consists of flags which may be bitwise-ored together:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 62%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>PARPORT_MODE_PCSPP</p></td>
<td><p>IBM PC registers are available,
i.e. functions that act on data,
control and status registers are
probably writing directly to the
hardware.</p></td>
</tr>
<tr class="row-even"><td><p>PARPORT_MODE_TRISTATE</p></td>
<td><p>The data drivers may be turned off.
This allows the data lines to be used
for reverse (peripheral to host)
transfers.</p></td>
</tr>
<tr class="row-odd"><td><p>PARPORT_MODE_COMPAT</p></td>
<td><p>The hardware can assist with
compatibility-mode (printer)
transfers, i.e. compat_write_block.</p></td>
</tr>
<tr class="row-even"><td><p>PARPORT_MODE_EPP</p></td>
<td><p>The hardware can assist with EPP
transfers.</p></td>
</tr>
<tr class="row-odd"><td><p>PARPORT_MODE_ECP</p></td>
<td><p>The hardware can assist with ECP
transfers.</p></td>
</tr>
<tr class="row-even"><td><p>PARPORT_MODE_DMA</p></td>
<td><p>The hardware can use DMA, so you might
want to pass ISA DMA-able memory
(i.e. memory allocated using the
GFP_DMA flag with kmalloc) to the
low-level driver in order to take
advantage of it.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>There may be other flags in <code class="docutils literal notranslate"><span class="pre">modes</span></code> as well.</p>
<p>The contents of <code class="docutils literal notranslate"><span class="pre">modes</span></code> is advisory only.  For example, if the
hardware is capable of DMA, and PARPORT_MODE_DMA is in <code class="docutils literal notranslate"><span class="pre">modes</span></code>, it
doesn’t necessarily mean that DMA will always be used when possible.
Similarly, hardware that is capable of assisting ECP transfers won’t
necessarily be used.</p>
</section>
<section id="return-value">
<h4>RETURN VALUE<a class="headerlink" href="#return-value" title="Permalink to this headline">¶</a></h4>
<p>Zero on success, otherwise an error code.</p>
</section>
<section id="errors">
<h4>ERRORS<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h4>
<p>None. (Can it fail? Why return int?)</p>
</section>
<section id="example">
<h4>EXAMPLE<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static void lp_attach (struct parport *port)
{
        ...
        private = kmalloc (...);
        dev[count++] = parport_register_device (...);
        ...
}

static void lp_detach (struct parport *port)
{
        ...
}

static struct parport_driver lp_driver = {
        &quot;lp&quot;,
        lp_attach,
        lp_detach,
        NULL /* always put NULL here */
};

int lp_init (void)
{
        ...
        if (parport_register_driver (&amp;lp_driver)) {
                /* Failed; nothing we can do. */
                return -EIO;
        }
        ...
}
</pre></div>
</div>
</section>
<section id="see-also">
<h4>SEE ALSO<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h4>
<p>parport_unregister_driver, parport_register_device, parport_enumerate</p>
</section>
</section>
<section id="parport-unregister-driver-tell-parport-to-forget-about-this-driver">
<h3>parport_unregister_driver - tell parport to forget about this driver<a class="headerlink" href="#parport-unregister-driver-tell-parport-to-forget-about-this-driver" title="Permalink to this headline">¶</a></h3>
<section id="id1">
<h4>SYNOPSIS<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_driver {
        const char *name;
        void (*attach) (struct parport *);
        void (*detach) (struct parport *);
        struct parport_driver *next;
};
void parport_unregister_driver (struct parport_driver *driver);
</pre></div>
</div>
</section>
<section id="id2">
<h4>DESCRIPTION<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>This tells parport not to notify the device driver of new ports or of
ports going away.  Registered devices belonging to that driver are NOT
unregistered: parport_unregister_device must be used for each one.</p>
</section>
<section id="id3">
<h4>EXAMPLE<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>void cleanup_module (void)
{
        ...
        /* Stop notifications. */
        parport_unregister_driver (&amp;lp_driver);

        /* Unregister devices. */
        for (i = 0; i &lt; NUM_DEVS; i++)
                parport_unregister_device (dev[i]);
        ...
}
</pre></div>
</div>
</section>
<section id="id4">
<h4>SEE ALSO<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>parport_register_driver, parport_enumerate</p>
</section>
</section>
<section id="parport-enumerate-retrieve-a-list-of-parallel-ports-deprecated">
<h3>parport_enumerate - retrieve a list of parallel ports (DEPRECATED)<a class="headerlink" href="#parport-enumerate-retrieve-a-list-of-parallel-ports-deprecated" title="Permalink to this headline">¶</a></h3>
<section id="id5">
<h4>SYNOPSIS<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport *parport_enumerate (void);
</pre></div>
</div>
</section>
<section id="id6">
<h4>DESCRIPTION<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>Retrieve the first of a list of valid parallel ports for this machine.
Successive parallel ports can be found using the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">parport</span>
<span class="pre">*next</span></code> element of the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">parport</span> <span class="pre">*</span></code> that is returned.  If <code class="docutils literal notranslate"><span class="pre">next</span></code>
is NULL, there are no more parallel ports in the list.  The number of
ports in the list will not exceed PARPORT_MAX.</p>
</section>
<section id="id7">
<h4>RETURN VALUE<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">parport</span> <span class="pre">*</span></code> describing a valid parallel port for the machine,
or NULL if there are none.</p>
</section>
<section id="id8">
<h4>ERRORS<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>This function can return NULL to indicate that there are no parallel
ports to use.</p>
</section>
<section id="id9">
<h4>EXAMPLE<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int detect_device (void)
{
        struct parport *port;

        for (port = parport_enumerate ();
        port != NULL;
        port = port-&gt;next) {
                /* Try to detect a device on the port... */
                ...
        }
        }

        ...
}
</pre></div>
</div>
</section>
<section id="notes">
<h4>NOTES<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h4>
<p>parport_enumerate is deprecated; parport_register_driver should be
used instead.</p>
</section>
<section id="id10">
<h4>SEE ALSO<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p>parport_register_driver, parport_unregister_driver</p>
</section>
</section>
<section id="parport-register-device-register-to-use-a-port">
<h3>parport_register_device - register to use a port<a class="headerlink" href="#parport-register-device-register-to-use-a-port" title="Permalink to this headline">¶</a></h3>
<section id="id11">
<h4>SYNOPSIS<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

typedef int (*preempt_func) (void *handle);
typedef void (*wakeup_func) (void *handle);
typedef int (*irq_func) (int irq, void *handle, struct pt_regs *);

struct pardevice *parport_register_device(struct parport *port,
                                          const char *name,
                                          preempt_func preempt,
                                          wakeup_func wakeup,
                                          irq_func irq,
                                          int flags,
                                          void *handle);
</pre></div>
</div>
</section>
<section id="id12">
<h4>DESCRIPTION<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>Use this function to register your device driver on a parallel port
(<code class="docutils literal notranslate"><span class="pre">port</span></code>).  Once you have done that, you will be able to use
parport_claim and parport_release in order to use the port.</p>
<p>The (<code class="docutils literal notranslate"><span class="pre">name</span></code>) argument is the name of the device that appears in /proc
filesystem. The string must be valid for the whole lifetime of the
device (until parport_unregister_device is called).</p>
<p>This function will register three callbacks into your driver:
<code class="docutils literal notranslate"><span class="pre">preempt</span></code>, <code class="docutils literal notranslate"><span class="pre">wakeup</span></code> and <code class="docutils literal notranslate"><span class="pre">irq</span></code>.  Each of these may be NULL in order to
indicate that you do not want a callback.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">preempt</span></code> function is called, it is because another driver
wishes to use the parallel port.  The <code class="docutils literal notranslate"><span class="pre">preempt</span></code> function should return
non-zero if the parallel port cannot be released yet – if zero is
returned, the port is lost to another driver and the port must be
re-claimed before use.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">wakeup</span></code> function is called once another driver has released the
port and no other driver has yet claimed it.  You can claim the
parallel port from within the <code class="docutils literal notranslate"><span class="pre">wakeup</span></code> function (in which case the
claim is guaranteed to succeed), or choose not to if you don’t need it
now.</p>
<p>If an interrupt occurs on the parallel port your driver has claimed,
the <code class="docutils literal notranslate"><span class="pre">irq</span></code> function will be called. (Write something about shared
interrupts here.)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">handle</span></code> is a pointer to driver-specific data, and is passed to
the callback functions.</p>
<p><code class="docutils literal notranslate"><span class="pre">flags</span></code> may be a bitwise combination of the following flags:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PARPORT_DEV_EXCL</p></td>
<td><p>The device cannot share the parallel port at all.
Use this only when absolutely necessary.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The typedefs are not actually defined – they are only shown in order
to make the function prototype more readable.</p>
<p>The visible parts of the returned <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">pardevice</span></code> are:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct pardevice {
        struct parport *port;   /* Associated port */
        void *private;          /* Device driver&#39;s &#39;handle&#39; */
        ...
};
</pre></div>
</div>
</section>
<section id="id13">
<h4>RETURN VALUE<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">pardevice</span> <span class="pre">*</span></code>: a handle to the registered parallel port
device that can be used for parport_claim, parport_release, etc.</p>
</section>
<section id="id14">
<h4>ERRORS<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>A return value of NULL indicates that there was a problem registering
a device on that port.</p>
</section>
<section id="id15">
<h4>EXAMPLE<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static int preempt (void *handle)
{
        if (busy_right_now)
                return 1;

        must_reclaim_port = 1;
        return 0;
}

static void wakeup (void *handle)
{
        struct toaster *private = handle;
        struct pardevice *dev = private-&gt;dev;
        if (!dev) return; /* avoid races */

        if (want_port)
                parport_claim (dev);
}

static int toaster_detect (struct toaster *private, struct parport *port)
{
        private-&gt;dev = parport_register_device (port, &quot;toaster&quot;, preempt,
                                                wakeup, NULL, 0,
                                                private);
        if (!private-&gt;dev)
                /* Couldn&#39;t register with parport. */
                return -EIO;

        must_reclaim_port = 0;
        busy_right_now = 1;
        parport_claim_or_block (private-&gt;dev);
        ...
        /* Don&#39;t need the port while the toaster warms up. */
        busy_right_now = 0;
        ...
        busy_right_now = 1;
        if (must_reclaim_port) {
                parport_claim_or_block (private-&gt;dev);
                must_reclaim_port = 0;
        }
        ...
}
</pre></div>
</div>
</section>
<section id="id16">
<h4>SEE ALSO<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>parport_unregister_device, parport_claim</p>
</section>
</section>
<section id="parport-unregister-device-finish-using-a-port">
<h3>parport_unregister_device - finish using a port<a class="headerlink" href="#parport-unregister-device-finish-using-a-port" title="Permalink to this headline">¶</a></h3>
<p>SYNPOPSIS</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

void parport_unregister_device (struct pardevice *dev);
</pre></div>
</div>
<section id="id17">
<h4>DESCRIPTION<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<p>This function is the opposite of parport_register_device.  After using
parport_unregister_device, <code class="docutils literal notranslate"><span class="pre">dev</span></code> is no longer a valid device handle.</p>
<p>You should not unregister a device that is currently claimed, although
if you do it will be released automatically.</p>
</section>
<section id="id18">
<h4>EXAMPLE<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>...
kfree (dev-&gt;private); /* before we lose the pointer */
parport_unregister_device (dev);
...
</pre></div>
</div>
</section>
<section id="id19">
<h4>SEE ALSO<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>parport_unregister_driver</p>
</section>
</section>
<section id="parport-claim-parport-claim-or-block-claim-the-parallel-port-for-a-device">
<h3>parport_claim, parport_claim_or_block - claim the parallel port for a device<a class="headerlink" href="#parport-claim-parport-claim-or-block-claim-the-parallel-port-for-a-device" title="Permalink to this headline">¶</a></h3>
<section id="id20">
<h4>SYNOPSIS<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

int parport_claim (struct pardevice *dev);
int parport_claim_or_block (struct pardevice *dev);
</pre></div>
</div>
</section>
<section id="id21">
<h4>DESCRIPTION<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<p>These functions attempt to gain control of the parallel port on which
<code class="docutils literal notranslate"><span class="pre">dev</span></code> is registered.  <code class="docutils literal notranslate"><span class="pre">parport_claim</span></code> does not block, but
<code class="docutils literal notranslate"><span class="pre">parport_claim_or_block</span></code> may do. (Put something here about blocking
interruptibly or non-interruptibly.)</p>
<p>You should not try to claim a port that you have already claimed.</p>
</section>
<section id="id22">
<h4>RETURN VALUE<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p>A return value of zero indicates that the port was successfully
claimed, and the caller now has possession of the parallel port.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">parport_claim_or_block</span></code> blocks before returning successfully, the
return value is positive.</p>
</section>
<section id="id23">
<h4>ERRORS<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>-EAGAIN</p></td>
<td><p>The port is unavailable at the moment, but another attempt
to claim it may succeed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id24">
<h4>SEE ALSO<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<p>parport_release</p>
</section>
</section>
<section id="parport-release-release-the-parallel-port">
<h3>parport_release - release the parallel port<a class="headerlink" href="#parport-release-release-the-parallel-port" title="Permalink to this headline">¶</a></h3>
<section id="id25">
<h4>SYNOPSIS<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

void parport_release (struct pardevice *dev);
</pre></div>
</div>
</section>
<section id="id26">
<h4>DESCRIPTION<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<p>Once a parallel port device has been claimed, it can be released using
<code class="docutils literal notranslate"><span class="pre">parport_release</span></code>.  It cannot fail, but you should not release a
device that you do not have possession of.</p>
</section>
<section id="id27">
<h4>EXAMPLE<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static size_t write (struct pardevice *dev, const void *buf,
                size_t len)
{
        ...
        written = dev-&gt;port-&gt;ops-&gt;write_ecp_data (dev-&gt;port, buf,
                                                len);
        parport_release (dev);
        ...
}
</pre></div>
</div>
</section>
<section id="id28">
<h4>SEE ALSO<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<p>change_mode, parport_claim, parport_claim_or_block, parport_yield</p>
</section>
</section>
<section id="parport-yield-parport-yield-blocking-temporarily-release-a-parallel-port">
<h3>parport_yield, parport_yield_blocking - temporarily release a parallel port<a class="headerlink" href="#parport-yield-parport-yield-blocking-temporarily-release-a-parallel-port" title="Permalink to this headline">¶</a></h3>
<section id="id29">
<h4>SYNOPSIS<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

int parport_yield (struct pardevice *dev)
int parport_yield_blocking (struct pardevice *dev);
</pre></div>
</div>
</section>
<section id="id30">
<h4>DESCRIPTION<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<p>When a driver has control of a parallel port, it may allow another
driver to temporarily <code class="docutils literal notranslate"><span class="pre">borrow</span></code> it.  <code class="docutils literal notranslate"><span class="pre">parport_yield</span></code> does not block;
<code class="docutils literal notranslate"><span class="pre">parport_yield_blocking</span></code> may do.</p>
</section>
<section id="id31">
<h4>RETURN VALUE<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<p>A return value of zero indicates that the caller still owns the port
and the call did not block.</p>
<p>A positive return value from <code class="docutils literal notranslate"><span class="pre">parport_yield_blocking</span></code> indicates that
the caller still owns the port and the call blocked.</p>
<p>A return value of -EAGAIN indicates that the caller no longer owns the
port, and it must be re-claimed before use.</p>
</section>
<section id="id32">
<h4>ERRORS<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>-EAGAIN</p></td>
<td><p>Ownership of the parallel port was given away.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id33">
<h4>SEE ALSO<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<p>parport_release</p>
</section>
</section>
<section id="parport-wait-peripheral-wait-for-status-lines-up-to-35ms">
<h3>parport_wait_peripheral - wait for status lines, up to 35ms<a class="headerlink" href="#parport-wait-peripheral-wait-for-status-lines-up-to-35ms" title="Permalink to this headline">¶</a></h3>
<section id="id34">
<h4>SYNOPSIS<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

int parport_wait_peripheral (struct parport *port,
                             unsigned char mask,
                             unsigned char val);
</pre></div>
</div>
</section>
<section id="id35">
<h4>DESCRIPTION<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<p>Wait for the status lines in mask to match the values in val.</p>
</section>
<section id="id36">
<h4>RETURN VALUE<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>-EINTR</p></td>
<td><p>a signal is pending</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>the status lines in mask have values in val</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>timed out while waiting (35ms elapsed)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id37">
<h4>SEE ALSO<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h4>
<p>parport_poll_peripheral</p>
</section>
</section>
<section id="parport-poll-peripheral-wait-for-status-lines-in-usec">
<h3>parport_poll_peripheral - wait for status lines, in usec<a class="headerlink" href="#parport-poll-peripheral-wait-for-status-lines-in-usec" title="Permalink to this headline">¶</a></h3>
<section id="id38">
<h4>SYNOPSIS<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

int parport_poll_peripheral (struct parport *port,
                             unsigned char mask,
                             unsigned char val,
                             int usec);
</pre></div>
</div>
</section>
<section id="id39">
<h4>DESCRIPTION<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
<p>Wait for the status lines in mask to match the values in val.</p>
</section>
<section id="id40">
<h4>RETURN VALUE<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>-EINTR</p></td>
<td><p>a signal is pending</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>the status lines in mask have values in val</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>timed out while waiting (usec microseconds have elapsed)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id41">
<h4>SEE ALSO<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h4>
<p>parport_wait_peripheral</p>
</section>
</section>
<section id="parport-wait-event-wait-for-an-event-on-a-port">
<h3>parport_wait_event - wait for an event on a port<a class="headerlink" href="#parport-wait-event-wait-for-an-event-on-a-port" title="Permalink to this headline">¶</a></h3>
<section id="id42">
<h4>SYNOPSIS<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

int parport_wait_event (struct parport *port, signed long timeout)
</pre></div>
</div>
</section>
<section id="id43">
<h4>DESCRIPTION<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<p>Wait for an event (e.g. interrupt) on a port.  The timeout is in
jiffies.</p>
</section>
<section id="id44">
<h4>RETURN VALUE<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>success</p></td>
</tr>
<tr class="row-even"><td><p>&lt;0</p></td>
<td><p>error (exit as soon as possible)</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;0</p></td>
<td><p>timed out</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="parport-negotiate-perform-ieee-1284-negotiation">
<h3>parport_negotiate - perform IEEE 1284 negotiation<a class="headerlink" href="#parport-negotiate-perform-ieee-1284-negotiation" title="Permalink to this headline">¶</a></h3>
<section id="id45">
<h4>SYNOPSIS<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

int parport_negotiate (struct parport *, int mode);
</pre></div>
</div>
</section>
<section id="id46">
<h4>DESCRIPTION<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<p>Perform IEEE 1284 negotiation.</p>
</section>
<section id="id47">
<h4>RETURN VALUE<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>handshake OK; IEEE 1284 peripheral and mode available</p></td>
</tr>
<tr class="row-even"><td><p>-1</p></td>
<td><p>handshake failed; peripheral not compliant (or none present)</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>handshake OK; IEEE 1284 peripheral present but mode not
available</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id48">
<h4>SEE ALSO<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<p>parport_read, parport_write</p>
</section>
</section>
<section id="parport-read-read-data-from-device">
<h3>parport_read - read data from device<a class="headerlink" href="#parport-read-read-data-from-device" title="Permalink to this headline">¶</a></h3>
<section id="id49">
<h4>SYNOPSIS<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

ssize_t parport_read (struct parport *, void *buf, size_t len);
</pre></div>
</div>
</section>
<section id="id50">
<h4>DESCRIPTION<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<p>Read data from device in current IEEE 1284 transfer mode.  This only
works for modes that support reverse data transfer.</p>
</section>
<section id="id51">
<h4>RETURN VALUE<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h4>
<p>If negative, an error code; otherwise the number of bytes transferred.</p>
</section>
<section id="id52">
<h4>SEE ALSO<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h4>
<p>parport_write, parport_negotiate</p>
</section>
</section>
<section id="parport-write-write-data-to-device">
<h3>parport_write - write data to device<a class="headerlink" href="#parport-write-write-data-to-device" title="Permalink to this headline">¶</a></h3>
<section id="id53">
<h4>SYNOPSIS<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

ssize_t parport_write (struct parport *, const void *buf, size_t len);
</pre></div>
</div>
</section>
<section id="id54">
<h4>DESCRIPTION<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h4>
<p>Write data to device in current IEEE 1284 transfer mode.  This only
works for modes that support forward data transfer.</p>
</section>
<section id="id55">
<h4>RETURN VALUE<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<p>If negative, an error code; otherwise the number of bytes transferred.</p>
</section>
<section id="id56">
<h4>SEE ALSO<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h4>
<p>parport_read, parport_negotiate</p>
</section>
</section>
<section id="parport-open-register-device-for-particular-device-number">
<h3>parport_open - register device for particular device number<a class="headerlink" href="#parport-open-register-device-for-particular-device-number" title="Permalink to this headline">¶</a></h3>
<section id="id57">
<h4>SYNOPSIS<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct pardevice *parport_open (int devnum, const char *name,
                                int (*pf) (void *),
                                void (*kf) (void *),
                                void (*irqf) (int, void *,
                                              struct pt_regs *),
                                int flags, void *handle);
</pre></div>
</div>
</section>
<section id="id58">
<h4>DESCRIPTION<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h4>
<p>This is like parport_register_device but takes a device number instead
of a pointer to a struct parport.</p>
</section>
<section id="id59">
<h4>RETURN VALUE<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h4>
<p>See parport_register_device.  If no device is associated with devnum,
NULL is returned.</p>
</section>
<section id="id60">
<h4>SEE ALSO<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h4>
<p>parport_register_device</p>
</section>
</section>
<section id="parport-close-unregister-device-for-particular-device-number">
<h3>parport_close - unregister device for particular device number<a class="headerlink" href="#parport-close-unregister-device-for-particular-device-number" title="Permalink to this headline">¶</a></h3>
<section id="id61">
<h4>SYNOPSIS<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

void parport_close (struct pardevice *dev);
</pre></div>
</div>
</section>
<section id="id62">
<h4>DESCRIPTION<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h4>
<p>This is the equivalent of parport_unregister_device for parport_open.</p>
</section>
<section id="id63">
<h4>SEE ALSO<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h4>
<p>parport_unregister_device, parport_open</p>
</section>
</section>
<section id="parport-device-id-obtain-ieee-1284-device-id">
<h3>parport_device_id - obtain IEEE 1284 Device ID<a class="headerlink" href="#parport-device-id-obtain-ieee-1284-device-id" title="Permalink to this headline">¶</a></h3>
<section id="id64">
<h4>SYNOPSIS<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

ssize_t parport_device_id (int devnum, char *buffer, size_t len);
</pre></div>
</div>
</section>
<section id="id65">
<h4>DESCRIPTION<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h4>
<p>Obtains the IEEE 1284 Device ID associated with a given device.</p>
</section>
<section id="id66">
<h4>RETURN VALUE<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h4>
<p>If negative, an error code; otherwise, the number of bytes of buffer
that contain the device ID.  The format of the device ID is as
follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[length][ID]
</pre></div>
</div>
<p>The first two bytes indicate the inclusive length of the entire Device
ID, and are in big-endian order.  The ID is a sequence of pairs of the
form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>key:value;
</pre></div>
</div>
</section>
<section id="id67">
<h4>NOTES<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h4>
<p>Many devices have ill-formed IEEE 1284 Device IDs.</p>
</section>
<section id="id68">
<h4>SEE ALSO<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h4>
<p>parport_find_class, parport_find_device</p>
</section>
</section>
<section id="parport-device-coords-convert-device-number-to-device-coordinates">
<h3>parport_device_coords - convert device number to device coordinates<a class="headerlink" href="#parport-device-coords-convert-device-number-to-device-coordinates" title="Permalink to this headline">¶</a></h3>
<section id="id69">
<h4>SYNOPSIS<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

int parport_device_coords (int devnum, int *parport, int *mux,
                           int *daisy);
</pre></div>
</div>
</section>
<section id="id70">
<h4>DESCRIPTION<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h4>
<p>Convert between device number (zero-based) and device coordinates
(port, multiplexor, daisy chain address).</p>
</section>
<section id="id71">
<h4>RETURN VALUE<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h4>
<p>Zero on success, in which case the coordinates are (<code class="docutils literal notranslate"><span class="pre">*parport</span></code>, <code class="docutils literal notranslate"><span class="pre">*mux</span></code>,
<code class="docutils literal notranslate"><span class="pre">*daisy</span></code>).</p>
</section>
<section id="id72">
<h4>SEE ALSO<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h4>
<p>parport_open, parport_device_id</p>
</section>
</section>
<section id="parport-find-class-find-a-device-by-its-class">
<h3>parport_find_class - find a device by its class<a class="headerlink" href="#parport-find-class-find-a-device-by-its-class" title="Permalink to this headline">¶</a></h3>
<section id="id73">
<h4>SYNOPSIS<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

typedef enum {
        PARPORT_CLASS_LEGACY = 0,       /* Non-IEEE1284 device */
        PARPORT_CLASS_PRINTER,
        PARPORT_CLASS_MODEM,
        PARPORT_CLASS_NET,
        PARPORT_CLASS_HDC,              /* Hard disk controller */
        PARPORT_CLASS_PCMCIA,
        PARPORT_CLASS_MEDIA,            /* Multimedia device */
        PARPORT_CLASS_FDC,              /* Floppy disk controller */
        PARPORT_CLASS_PORTS,
        PARPORT_CLASS_SCANNER,
        PARPORT_CLASS_DIGCAM,
        PARPORT_CLASS_OTHER,            /* Anything else */
        PARPORT_CLASS_UNSPEC,           /* No CLS field in ID */
        PARPORT_CLASS_SCSIADAPTER
} parport_device_class;

int parport_find_class (parport_device_class cls, int from);
</pre></div>
</div>
</section>
<section id="id74">
<h4>DESCRIPTION<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h4>
<p>Find a device by class.  The search starts from device number from+1.</p>
</section>
<section id="id75">
<h4>RETURN VALUE<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h4>
<p>The device number of the next device in that class, or -1 if no such
device exists.</p>
</section>
<section id="id76">
<h4>NOTES<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h4>
<p>Example usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int devnum = -1;
while ((devnum = parport_find_class (PARPORT_CLASS_DIGCAM, devnum)) != -1) {
        struct pardevice *dev = parport_open (devnum, ...);
        ...
}
</pre></div>
</div>
</section>
<section id="id77">
<h4>SEE ALSO<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h4>
<p>parport_find_device, parport_open, parport_device_id</p>
</section>
</section>
<section id="parport-find-device-find-a-device-by-its-class">
<h3>parport_find_device - find a device by its class<a class="headerlink" href="#parport-find-device-find-a-device-by-its-class" title="Permalink to this headline">¶</a></h3>
<section id="id78">
<h4>SYNOPSIS<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

int parport_find_device (const char *mfg, const char *mdl, int from);
</pre></div>
</div>
</section>
<section id="id79">
<h4>DESCRIPTION<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h4>
<p>Find a device by vendor and model.  The search starts from device
number from+1.</p>
</section>
<section id="id80">
<h4>RETURN VALUE<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h4>
<p>The device number of the next device matching the specifications, or
-1 if no such device exists.</p>
</section>
<section id="id81">
<h4>NOTES<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h4>
<p>Example usage:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>int devnum = -1;
while ((devnum = parport_find_device (&quot;IOMEGA&quot;, &quot;ZIP+&quot;, devnum)) != -1) {
        struct pardevice *dev = parport_open (devnum, ...);
        ...
}
</pre></div>
</div>
</section>
<section id="id82">
<h4>SEE ALSO<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h4>
<p>parport_find_class, parport_open, parport_device_id</p>
</section>
</section>
<section id="parport-set-timeout-set-the-inactivity-timeout">
<h3>parport_set_timeout - set the inactivity timeout<a class="headerlink" href="#parport-set-timeout-set-the-inactivity-timeout" title="Permalink to this headline">¶</a></h3>
<section id="id83">
<h4>SYNOPSIS<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

long parport_set_timeout (struct pardevice *dev, long inactivity);
</pre></div>
</div>
</section>
<section id="id84">
<h4>DESCRIPTION<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h4>
<p>Set the inactivity timeout, in jiffies, for a registered device.  The
previous timeout is returned.</p>
</section>
<section id="id85">
<h4>RETURN VALUE<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h4>
<p>The previous timeout, in jiffies.</p>
</section>
<section id="id86">
<h4>NOTES<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h4>
<p>Some of the port-&gt;ops functions for a parport may take time, owing to
delays at the peripheral.  After the peripheral has not responded for
<code class="docutils literal notranslate"><span class="pre">inactivity</span></code> jiffies, a timeout will occur and the blocking function
will return.</p>
<p>A timeout of 0 jiffies is a special case: the function must do as much
as it can without blocking or leaving the hardware in an unknown
state.  If port operations are performed from within an interrupt
handler, for instance, a timeout of 0 jiffies should be used.</p>
<p>Once set for a registered device, the timeout will remain at the set
value until set again.</p>
</section>
<section id="id87">
<h4>SEE ALSO<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h4>
<p>port-&gt;ops-&gt;xxx_read/write_yyy</p>
</section>
</section>
</section>
<section id="port-functions">
<h2>PORT FUNCTIONS<a class="headerlink" href="#port-functions" title="Permalink to this headline">¶</a></h2>
<p>The functions in the port-&gt;ops structure (struct parport_operations)
are provided by the low-level driver responsible for that port.</p>
<section id="port-ops-read-data-read-the-data-register">
<h3>port-&gt;ops-&gt;read_data - read the data register<a class="headerlink" href="#port-ops-read-data-read-the-data-register" title="Permalink to this headline">¶</a></h3>
<section id="id88">
<h4>SYNOPSIS<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        unsigned char (*read_data) (struct parport *port);
        ...
};
</pre></div>
</div>
</section>
<section id="id89">
<h4>DESCRIPTION<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h4>
<p>If port-&gt;modes contains the PARPORT_MODE_TRISTATE flag and the
PARPORT_CONTROL_DIRECTION bit in the control register is set, this
returns the value on the data pins.  If port-&gt;modes contains the
PARPORT_MODE_TRISTATE flag and the PARPORT_CONTROL_DIRECTION bit is
not set, the return value _may_ be the last value written to the data
register.  Otherwise the return value is undefined.</p>
</section>
<section id="id90">
<h4>SEE ALSO<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h4>
<p>write_data, read_status, write_control</p>
</section>
</section>
<section id="port-ops-write-data-write-the-data-register">
<h3>port-&gt;ops-&gt;write_data - write the data register<a class="headerlink" href="#port-ops-write-data-write-the-data-register" title="Permalink to this headline">¶</a></h3>
<section id="id91">
<h4>SYNOPSIS<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        void (*write_data) (struct parport *port, unsigned char d);
        ...
};
</pre></div>
</div>
</section>
<section id="id92">
<h4>DESCRIPTION<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h4>
<p>Writes to the data register.  May have side-effects (a STROBE pulse,
for instance).</p>
</section>
<section id="id93">
<h4>SEE ALSO<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h4>
<p>read_data, read_status, write_control</p>
</section>
</section>
<section id="port-ops-read-status-read-the-status-register">
<h3>port-&gt;ops-&gt;read_status - read the status register<a class="headerlink" href="#port-ops-read-status-read-the-status-register" title="Permalink to this headline">¶</a></h3>
<section id="id94">
<h4>SYNOPSIS<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        unsigned char (*read_status) (struct parport *port);
        ...
};
</pre></div>
</div>
</section>
<section id="id95">
<h4>DESCRIPTION<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h4>
<p>Reads from the status register.  This is a bitmask:</p>
<ul class="simple">
<li><p>PARPORT_STATUS_ERROR (printer fault, “nFault”)</p></li>
<li><p>PARPORT_STATUS_SELECT (on-line, “Select”)</p></li>
<li><p>PARPORT_STATUS_PAPEROUT (no paper, “PError”)</p></li>
<li><p>PARPORT_STATUS_ACK (handshake, “nAck”)</p></li>
<li><p>PARPORT_STATUS_BUSY (busy, “Busy”)</p></li>
</ul>
<p>There may be other bits set.</p>
</section>
<section id="id96">
<h4>SEE ALSO<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h4>
<p>read_data, write_data, write_control</p>
</section>
</section>
<section id="port-ops-read-control-read-the-control-register">
<h3>port-&gt;ops-&gt;read_control - read the control register<a class="headerlink" href="#port-ops-read-control-read-the-control-register" title="Permalink to this headline">¶</a></h3>
<section id="id97">
<h4>SYNOPSIS<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        unsigned char (*read_control) (struct parport *port);
        ...
};
</pre></div>
</div>
</section>
<section id="id98">
<h4>DESCRIPTION<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h4>
<p>Returns the last value written to the control register (either from
write_control or frob_control).  No port access is performed.</p>
</section>
<section id="id99">
<h4>SEE ALSO<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h4>
<p>read_data, write_data, read_status, write_control</p>
</section>
</section>
<section id="port-ops-write-control-write-the-control-register">
<h3>port-&gt;ops-&gt;write_control - write the control register<a class="headerlink" href="#port-ops-write-control-write-the-control-register" title="Permalink to this headline">¶</a></h3>
<section id="id100">
<h4>SYNOPSIS<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        void (*write_control) (struct parport *port, unsigned char s);
        ...
};
</pre></div>
</div>
</section>
<section id="id101">
<h4>DESCRIPTION<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h4>
<p>Writes to the control register. This is a bitmask:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                          _______
- PARPORT_CONTROL_STROBE (nStrobe)
                          _______
- PARPORT_CONTROL_AUTOFD (nAutoFd)
                        _____
- PARPORT_CONTROL_INIT (nInit)
                          _________
- PARPORT_CONTROL_SELECT (nSelectIn)
</pre></div>
</div>
</section>
<section id="id102">
<h4>SEE ALSO<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h4>
<p>read_data, write_data, read_status, frob_control</p>
</section>
</section>
<section id="port-ops-frob-control-write-control-register-bits">
<h3>port-&gt;ops-&gt;frob_control - write control register bits<a class="headerlink" href="#port-ops-frob-control-write-control-register-bits" title="Permalink to this headline">¶</a></h3>
<section id="id103">
<h4>SYNOPSIS<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        unsigned char (*frob_control) (struct parport *port,
                                unsigned char mask,
                                unsigned char val);
        ...
};
</pre></div>
</div>
</section>
<section id="id104">
<h4>DESCRIPTION<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h4>
<p>This is equivalent to reading from the control register, masking out
the bits in mask, exclusive-or’ing with the bits in val, and writing
the result to the control register.</p>
<p>As some ports don’t allow reads from the control port, a software copy
of its contents is maintained, so frob_control is in fact only one
port access.</p>
</section>
<section id="id105">
<h4>SEE ALSO<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h4>
<p>read_data, write_data, read_status, write_control</p>
</section>
</section>
<section id="port-ops-enable-irq-enable-interrupt-generation">
<h3>port-&gt;ops-&gt;enable_irq - enable interrupt generation<a class="headerlink" href="#port-ops-enable-irq-enable-interrupt-generation" title="Permalink to this headline">¶</a></h3>
<section id="id106">
<h4>SYNOPSIS<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        void (*enable_irq) (struct parport *port);
        ...
};
</pre></div>
</div>
</section>
<section id="id107">
<h4>DESCRIPTION<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h4>
<p>The parallel port hardware is instructed to generate interrupts at
appropriate moments, although those moments are
architecture-specific.  For the PC architecture, interrupts are
commonly generated on the rising edge of nAck.</p>
</section>
<section id="id108">
<h4>SEE ALSO<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h4>
<p>disable_irq</p>
</section>
</section>
<section id="port-ops-disable-irq-disable-interrupt-generation">
<h3>port-&gt;ops-&gt;disable_irq - disable interrupt generation<a class="headerlink" href="#port-ops-disable-irq-disable-interrupt-generation" title="Permalink to this headline">¶</a></h3>
<section id="id109">
<h4>SYNOPSIS<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        void (*disable_irq) (struct parport *port);
        ...
};
</pre></div>
</div>
</section>
<section id="id110">
<h4>DESCRIPTION<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h4>
<p>The parallel port hardware is instructed not to generate interrupts.
The interrupt itself is not masked.</p>
</section>
<section id="id111">
<h4>SEE ALSO<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h4>
<p>enable_irq</p>
</section>
</section>
<section id="port-ops-data-forward-enable-data-drivers">
<h3>port-&gt;ops-&gt;data_forward - enable data drivers<a class="headerlink" href="#port-ops-data-forward-enable-data-drivers" title="Permalink to this headline">¶</a></h3>
<section id="id112">
<h4>SYNOPSIS<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        void (*data_forward) (struct parport *port);
        ...
};
</pre></div>
</div>
</section>
<section id="id113">
<h4>DESCRIPTION<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h4>
<p>Enables the data line drivers, for 8-bit host-to-peripheral
communications.</p>
</section>
<section id="id114">
<h4>SEE ALSO<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h4>
<p>data_reverse</p>
</section>
</section>
<section id="port-ops-data-reverse-tristate-the-buffer">
<h3>port-&gt;ops-&gt;data_reverse - tristate the buffer<a class="headerlink" href="#port-ops-data-reverse-tristate-the-buffer" title="Permalink to this headline">¶</a></h3>
<section id="id115">
<h4>SYNOPSIS<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        void (*data_reverse) (struct parport *port);
        ...
};
</pre></div>
</div>
</section>
<section id="id116">
<h4>DESCRIPTION<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h4>
<p>Places the data bus in a high impedance state, if port-&gt;modes has the
PARPORT_MODE_TRISTATE bit set.</p>
</section>
<section id="id117">
<h4>SEE ALSO<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h4>
<p>data_forward</p>
</section>
</section>
<section id="port-ops-epp-write-data-write-epp-data">
<h3>port-&gt;ops-&gt;epp_write_data - write EPP data<a class="headerlink" href="#port-ops-epp-write-data-write-epp-data" title="Permalink to this headline">¶</a></h3>
<section id="id118">
<h4>SYNOPSIS<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*epp_write_data) (struct parport *port, const void *buf,
                                size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id119">
<h4>DESCRIPTION<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h4>
<p>Writes data in EPP mode, and returns the number of bytes written.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter may be one or more of the following,
bitwise-or’ed together:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>PARPORT_EPP_FAST</p></td>
<td><p>Use fast transfers. Some chips provide 16-bit and
32-bit registers.  However, if a transfer
times out, the return value may be unreliable.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id120">
<h4>SEE ALSO<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h4>
<p>epp_read_data, epp_write_addr, epp_read_addr</p>
</section>
</section>
<section id="port-ops-epp-read-data-read-epp-data">
<h3>port-&gt;ops-&gt;epp_read_data - read EPP data<a class="headerlink" href="#port-ops-epp-read-data-read-epp-data" title="Permalink to this headline">¶</a></h3>
<section id="id121">
<h4>SYNOPSIS<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*epp_read_data) (struct parport *port, void *buf,
                                size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id122">
<h4>DESCRIPTION<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h4>
<p>Reads data in EPP mode, and returns the number of bytes read.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter may be one or more of the following,
bitwise-or’ed together:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>PARPORT_EPP_FAST</p></td>
<td><p>Use fast transfers. Some chips provide 16-bit and
32-bit registers.  However, if a transfer
times out, the return value may be unreliable.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id123">
<h4>SEE ALSO<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h4>
<p>epp_write_data, epp_write_addr, epp_read_addr</p>
</section>
</section>
<section id="port-ops-epp-write-addr-write-epp-address">
<h3>port-&gt;ops-&gt;epp_write_addr - write EPP address<a class="headerlink" href="#port-ops-epp-write-addr-write-epp-address" title="Permalink to this headline">¶</a></h3>
<section id="id124">
<h4>SYNOPSIS<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*epp_write_addr) (struct parport *port,
                                const void *buf, size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id125">
<h4>DESCRIPTION<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h4>
<p>Writes EPP addresses (8 bits each), and returns the number written.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter may be one or more of the following,
bitwise-or’ed together:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>PARPORT_EPP_FAST</p></td>
<td><p>Use fast transfers. Some chips provide 16-bit and
32-bit registers.  However, if a transfer
times out, the return value may be unreliable.</p></td>
</tr>
</tbody>
</table>
<p>(Does PARPORT_EPP_FAST make sense for this function?)</p>
</section>
<section id="id126">
<h4>SEE ALSO<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h4>
<p>epp_write_data, epp_read_data, epp_read_addr</p>
</section>
</section>
<section id="port-ops-epp-read-addr-read-epp-address">
<h3>port-&gt;ops-&gt;epp_read_addr - read EPP address<a class="headerlink" href="#port-ops-epp-read-addr-read-epp-address" title="Permalink to this headline">¶</a></h3>
<section id="id127">
<h4>SYNOPSIS<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*epp_read_addr) (struct parport *port, void *buf,
                                size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id128">
<h4>DESCRIPTION<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h4>
<p>Reads EPP addresses (8 bits each), and returns the number read.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter may be one or more of the following,
bitwise-or’ed together:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>PARPORT_EPP_FAST</p></td>
<td><p>Use fast transfers. Some chips provide 16-bit and
32-bit registers.  However, if a transfer
times out, the return value may be unreliable.</p></td>
</tr>
</tbody>
</table>
<p>(Does PARPORT_EPP_FAST make sense for this function?)</p>
</section>
<section id="id129">
<h4>SEE ALSO<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h4>
<p>epp_write_data, epp_read_data, epp_write_addr</p>
</section>
</section>
<section id="port-ops-ecp-write-data-write-a-block-of-ecp-data">
<h3>port-&gt;ops-&gt;ecp_write_data - write a block of ECP data<a class="headerlink" href="#port-ops-ecp-write-data-write-a-block-of-ecp-data" title="Permalink to this headline">¶</a></h3>
<section id="id130">
<h4>SYNOPSIS<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*ecp_write_data) (struct parport *port,
                                const void *buf, size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id131">
<h4>DESCRIPTION<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h4>
<p>Writes a block of ECP data.  The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter is ignored.</p>
</section>
<section id="id132">
<h4>RETURN VALUE<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h4>
<p>The number of bytes written.</p>
</section>
<section id="id133">
<h4>SEE ALSO<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h4>
<p>ecp_read_data, ecp_write_addr</p>
</section>
</section>
<section id="port-ops-ecp-read-data-read-a-block-of-ecp-data">
<h3>port-&gt;ops-&gt;ecp_read_data - read a block of ECP data<a class="headerlink" href="#port-ops-ecp-read-data-read-a-block-of-ecp-data" title="Permalink to this headline">¶</a></h3>
<section id="id134">
<h4>SYNOPSIS<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*ecp_read_data) (struct parport *port,
                                void *buf, size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id135">
<h4>DESCRIPTION<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h4>
<p>Reads a block of ECP data.  The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter is ignored.</p>
</section>
<section id="id136">
<h4>RETURN VALUE<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h4>
<p>The number of bytes read.  NB. There may be more unread data in a
FIFO.  Is there a way of stunning the FIFO to prevent this?</p>
</section>
<section id="id137">
<h4>SEE ALSO<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h4>
<p>ecp_write_block, ecp_write_addr</p>
</section>
</section>
<section id="port-ops-ecp-write-addr-write-a-block-of-ecp-addresses">
<h3>port-&gt;ops-&gt;ecp_write_addr - write a block of ECP addresses<a class="headerlink" href="#port-ops-ecp-write-addr-write-a-block-of-ecp-addresses" title="Permalink to this headline">¶</a></h3>
<section id="id138">
<h4>SYNOPSIS<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*ecp_write_addr) (struct parport *port,
                                const void *buf, size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id139">
<h4>DESCRIPTION<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h4>
<p>Writes a block of ECP addresses.  The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter is ignored.</p>
</section>
<section id="id140">
<h4>RETURN VALUE<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h4>
<p>The number of bytes written.</p>
</section>
<section id="id141">
<h4>NOTES<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h4>
<p>This may use a FIFO, and if so shall not return until the FIFO is empty.</p>
</section>
<section id="id142">
<h4>SEE ALSO<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h4>
<p>ecp_read_data, ecp_write_data</p>
</section>
</section>
<section id="port-ops-nibble-read-data-read-a-block-of-data-in-nibble-mode">
<h3>port-&gt;ops-&gt;nibble_read_data - read a block of data in nibble mode<a class="headerlink" href="#port-ops-nibble-read-data-read-a-block-of-data-in-nibble-mode" title="Permalink to this headline">¶</a></h3>
<section id="id143">
<h4>SYNOPSIS<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*nibble_read_data) (struct parport *port,
                                void *buf, size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id144">
<h4>DESCRIPTION<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h4>
<p>Reads a block of data in nibble mode.  The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter is ignored.</p>
</section>
<section id="id145">
<h4>RETURN VALUE<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h4>
<p>The number of whole bytes read.</p>
</section>
<section id="id146">
<h4>SEE ALSO<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h4>
<p>byte_read_data, compat_write_data</p>
</section>
</section>
<section id="port-ops-byte-read-data-read-a-block-of-data-in-byte-mode">
<h3>port-&gt;ops-&gt;byte_read_data - read a block of data in byte mode<a class="headerlink" href="#port-ops-byte-read-data-read-a-block-of-data-in-byte-mode" title="Permalink to this headline">¶</a></h3>
<section id="id147">
<h4>SYNOPSIS<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*byte_read_data) (struct parport *port,
                                void *buf, size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id148">
<h4>DESCRIPTION<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h4>
<p>Reads a block of data in byte mode.  The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter is ignored.</p>
</section>
<section id="id149">
<h4>RETURN VALUE<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h4>
<p>The number of bytes read.</p>
</section>
<section id="id150">
<h4>SEE ALSO<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h4>
<p>nibble_read_data, compat_write_data</p>
</section>
</section>
<section id="port-ops-compat-write-data-write-a-block-of-data-in-compatibility-mode">
<h3>port-&gt;ops-&gt;compat_write_data - write a block of data in compatibility mode<a class="headerlink" href="#port-ops-compat-write-data-write-a-block-of-data-in-compatibility-mode" title="Permalink to this headline">¶</a></h3>
<section id="id151">
<h4>SYNOPSIS<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;linux/parport.h&gt;

struct parport_operations {
        ...
        size_t (*compat_write_data) (struct parport *port,
                                const void *buf, size_t len, int flags);
        ...
};
</pre></div>
</div>
</section>
<section id="id152">
<h4>DESCRIPTION<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h4>
<p>Writes a block of data in compatibility mode.  The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter
is ignored.</p>
</section>
<section id="id153">
<h4>RETURN VALUE<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h4>
<p>The number of bytes written.</p>
</section>
<section id="id154">
<h4>SEE ALSO<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h4>
<p>nibble_read_data, byte_read_data</p>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PARPORT interface documentation</a><ul>
<li><a class="reference internal" href="#global-functions">Global functions</a><ul>
<li><a class="reference internal" href="#parport-register-driver-register-a-device-driver-with-parport">parport_register_driver - register a device driver with parport</a><ul>
<li><a class="reference internal" href="#synopsis">SYNOPSIS</a></li>
<li><a class="reference internal" href="#description">DESCRIPTION</a></li>
<li><a class="reference internal" href="#return-value">RETURN VALUE</a></li>
<li><a class="reference internal" href="#errors">ERRORS</a></li>
<li><a class="reference internal" href="#example">EXAMPLE</a></li>
<li><a class="reference internal" href="#see-also">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-unregister-driver-tell-parport-to-forget-about-this-driver">parport_unregister_driver - tell parport to forget about this driver</a><ul>
<li><a class="reference internal" href="#id1">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id2">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id3">EXAMPLE</a></li>
<li><a class="reference internal" href="#id4">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-enumerate-retrieve-a-list-of-parallel-ports-deprecated">parport_enumerate - retrieve a list of parallel ports (DEPRECATED)</a><ul>
<li><a class="reference internal" href="#id5">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id6">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id7">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id8">ERRORS</a></li>
<li><a class="reference internal" href="#id9">EXAMPLE</a></li>
<li><a class="reference internal" href="#notes">NOTES</a></li>
<li><a class="reference internal" href="#id10">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-register-device-register-to-use-a-port">parport_register_device - register to use a port</a><ul>
<li><a class="reference internal" href="#id11">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id12">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id13">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id14">ERRORS</a></li>
<li><a class="reference internal" href="#id15">EXAMPLE</a></li>
<li><a class="reference internal" href="#id16">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-unregister-device-finish-using-a-port">parport_unregister_device - finish using a port</a><ul>
<li><a class="reference internal" href="#id17">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id18">EXAMPLE</a></li>
<li><a class="reference internal" href="#id19">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-claim-parport-claim-or-block-claim-the-parallel-port-for-a-device">parport_claim, parport_claim_or_block - claim the parallel port for a device</a><ul>
<li><a class="reference internal" href="#id20">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id21">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id22">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id23">ERRORS</a></li>
<li><a class="reference internal" href="#id24">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-release-release-the-parallel-port">parport_release - release the parallel port</a><ul>
<li><a class="reference internal" href="#id25">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id26">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id27">EXAMPLE</a></li>
<li><a class="reference internal" href="#id28">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-yield-parport-yield-blocking-temporarily-release-a-parallel-port">parport_yield, parport_yield_blocking - temporarily release a parallel port</a><ul>
<li><a class="reference internal" href="#id29">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id30">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id31">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id32">ERRORS</a></li>
<li><a class="reference internal" href="#id33">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-wait-peripheral-wait-for-status-lines-up-to-35ms">parport_wait_peripheral - wait for status lines, up to 35ms</a><ul>
<li><a class="reference internal" href="#id34">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id35">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id36">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id37">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-poll-peripheral-wait-for-status-lines-in-usec">parport_poll_peripheral - wait for status lines, in usec</a><ul>
<li><a class="reference internal" href="#id38">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id39">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id40">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id41">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-wait-event-wait-for-an-event-on-a-port">parport_wait_event - wait for an event on a port</a><ul>
<li><a class="reference internal" href="#id42">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id43">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id44">RETURN VALUE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-negotiate-perform-ieee-1284-negotiation">parport_negotiate - perform IEEE 1284 negotiation</a><ul>
<li><a class="reference internal" href="#id45">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id46">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id47">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id48">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-read-read-data-from-device">parport_read - read data from device</a><ul>
<li><a class="reference internal" href="#id49">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id50">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id51">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id52">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-write-write-data-to-device">parport_write - write data to device</a><ul>
<li><a class="reference internal" href="#id53">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id54">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id55">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id56">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-open-register-device-for-particular-device-number">parport_open - register device for particular device number</a><ul>
<li><a class="reference internal" href="#id57">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id58">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id59">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id60">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-close-unregister-device-for-particular-device-number">parport_close - unregister device for particular device number</a><ul>
<li><a class="reference internal" href="#id61">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id62">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id63">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-device-id-obtain-ieee-1284-device-id">parport_device_id - obtain IEEE 1284 Device ID</a><ul>
<li><a class="reference internal" href="#id64">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id65">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id66">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id67">NOTES</a></li>
<li><a class="reference internal" href="#id68">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-device-coords-convert-device-number-to-device-coordinates">parport_device_coords - convert device number to device coordinates</a><ul>
<li><a class="reference internal" href="#id69">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id70">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id71">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id72">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-find-class-find-a-device-by-its-class">parport_find_class - find a device by its class</a><ul>
<li><a class="reference internal" href="#id73">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id74">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id75">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id76">NOTES</a></li>
<li><a class="reference internal" href="#id77">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-find-device-find-a-device-by-its-class">parport_find_device - find a device by its class</a><ul>
<li><a class="reference internal" href="#id78">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id79">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id80">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id81">NOTES</a></li>
<li><a class="reference internal" href="#id82">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parport-set-timeout-set-the-inactivity-timeout">parport_set_timeout - set the inactivity timeout</a><ul>
<li><a class="reference internal" href="#id83">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id84">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id85">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id86">NOTES</a></li>
<li><a class="reference internal" href="#id87">SEE ALSO</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#port-functions">PORT FUNCTIONS</a><ul>
<li><a class="reference internal" href="#port-ops-read-data-read-the-data-register">port-&gt;ops-&gt;read_data - read the data register</a><ul>
<li><a class="reference internal" href="#id88">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id89">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id90">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-write-data-write-the-data-register">port-&gt;ops-&gt;write_data - write the data register</a><ul>
<li><a class="reference internal" href="#id91">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id92">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id93">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-read-status-read-the-status-register">port-&gt;ops-&gt;read_status - read the status register</a><ul>
<li><a class="reference internal" href="#id94">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id95">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id96">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-read-control-read-the-control-register">port-&gt;ops-&gt;read_control - read the control register</a><ul>
<li><a class="reference internal" href="#id97">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id98">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id99">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-write-control-write-the-control-register">port-&gt;ops-&gt;write_control - write the control register</a><ul>
<li><a class="reference internal" href="#id100">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id101">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id102">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-frob-control-write-control-register-bits">port-&gt;ops-&gt;frob_control - write control register bits</a><ul>
<li><a class="reference internal" href="#id103">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id104">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id105">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-enable-irq-enable-interrupt-generation">port-&gt;ops-&gt;enable_irq - enable interrupt generation</a><ul>
<li><a class="reference internal" href="#id106">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id107">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id108">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-disable-irq-disable-interrupt-generation">port-&gt;ops-&gt;disable_irq - disable interrupt generation</a><ul>
<li><a class="reference internal" href="#id109">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id110">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id111">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-data-forward-enable-data-drivers">port-&gt;ops-&gt;data_forward - enable data drivers</a><ul>
<li><a class="reference internal" href="#id112">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id113">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id114">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-data-reverse-tristate-the-buffer">port-&gt;ops-&gt;data_reverse - tristate the buffer</a><ul>
<li><a class="reference internal" href="#id115">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id116">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id117">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-epp-write-data-write-epp-data">port-&gt;ops-&gt;epp_write_data - write EPP data</a><ul>
<li><a class="reference internal" href="#id118">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id119">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id120">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-epp-read-data-read-epp-data">port-&gt;ops-&gt;epp_read_data - read EPP data</a><ul>
<li><a class="reference internal" href="#id121">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id122">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id123">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-epp-write-addr-write-epp-address">port-&gt;ops-&gt;epp_write_addr - write EPP address</a><ul>
<li><a class="reference internal" href="#id124">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id125">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id126">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-epp-read-addr-read-epp-address">port-&gt;ops-&gt;epp_read_addr - read EPP address</a><ul>
<li><a class="reference internal" href="#id127">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id128">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id129">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-ecp-write-data-write-a-block-of-ecp-data">port-&gt;ops-&gt;ecp_write_data - write a block of ECP data</a><ul>
<li><a class="reference internal" href="#id130">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id131">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id132">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id133">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-ecp-read-data-read-a-block-of-ecp-data">port-&gt;ops-&gt;ecp_read_data - read a block of ECP data</a><ul>
<li><a class="reference internal" href="#id134">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id135">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id136">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id137">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-ecp-write-addr-write-a-block-of-ecp-addresses">port-&gt;ops-&gt;ecp_write_addr - write a block of ECP addresses</a><ul>
<li><a class="reference internal" href="#id138">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id139">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id140">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id141">NOTES</a></li>
<li><a class="reference internal" href="#id142">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-nibble-read-data-read-a-block-of-data-in-nibble-mode">port-&gt;ops-&gt;nibble_read_data - read a block of data in nibble mode</a><ul>
<li><a class="reference internal" href="#id143">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id144">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id145">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id146">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-byte-read-data-read-a-block-of-data-in-byte-mode">port-&gt;ops-&gt;byte_read_data - read a block of data in byte mode</a><ul>
<li><a class="reference internal" href="#id147">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id148">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id149">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id150">SEE ALSO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#port-ops-compat-write-data-write-a-block-of-data-in-compatibility-mode">port-&gt;ops-&gt;compat_write_data - write a block of data in compatibility mode</a><ul>
<li><a class="reference internal" href="#id151">SYNOPSIS</a></li>
<li><a class="reference internal" href="#id152">DESCRIPTION</a></li>
<li><a class="reference internal" href="#id153">RETURN VALUE</a></li>
<li><a class="reference internal" href="#id154">SEE ALSO</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/driver-api/parport-lowlevel.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/driver-api/parport-lowlevel.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>