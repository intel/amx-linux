
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>2.20. V4L2 Media Bus functions and data structures &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.21. V4L2 Memory to Memory functions and data structures" href="v4l2-mem2mem.html" />
    <link rel="prev" title="2.19. V4L2 Media Controller functions and data structures" href="v4l2-mc.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="v4l2-media-bus-functions-and-data-structures">
<h1><span class="section-number">2.20. </span>V4L2 Media Bus functions and data structures<a class="headerlink" href="#v4l2-media-bus-functions-and-data-structures" title="Permalink to this headline">¶</a></h1>
<dl class="type">
<dt id="c.v4l2_mbus_config_mipi_csi2">
struct <code class="sig-name descname">v4l2_mbus_config_mipi_csi2</code><a class="headerlink" href="#c.v4l2_mbus_config_mipi_csi2" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI CSI-2 data bus configuration</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct v4l2_mbus_config_mipi_csi2 {
    unsigned int flags;
    unsigned char data_lanes[V4L2_MBUS_CSI2_MAX_DATA_LANES];
    unsigned char clock_lane;
    unsigned char num_data_lanes;
    bool lane_polarities[1 + V4L2_MBUS_CSI2_MAX_DATA_LANES];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>media bus (V4L2_MBUS_*) flags</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data_lanes</span></code></dt><dd><p>an array of physical data lane indexes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clock_lane</span></code></dt><dd><p>physical lane index of the clock lane</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num_data_lanes</span></code></dt><dd><p>number of data lanes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lane_polarities</span></code></dt><dd><p>polarity of the lanes. The order is the same of
the physical lanes.</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.v4l2_mbus_config_parallel">
struct <code class="sig-name descname">v4l2_mbus_config_parallel</code><a class="headerlink" href="#c.v4l2_mbus_config_parallel" title="Permalink to this definition">¶</a></dt>
<dd><p>parallel data bus configuration</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct v4l2_mbus_config_parallel {
    unsigned int flags;
    unsigned char bus_width;
    unsigned char data_shift;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>media bus (V4L2_MBUS_*) flags</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bus_width</span></code></dt><dd><p>bus width in bits</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data_shift</span></code></dt><dd><p>data shift in bits</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.v4l2_mbus_config_mipi_csi1">
struct <code class="sig-name descname">v4l2_mbus_config_mipi_csi1</code><a class="headerlink" href="#c.v4l2_mbus_config_mipi_csi1" title="Permalink to this definition">¶</a></dt>
<dd><p>CSI-1/CCP2 data bus configuration</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct v4l2_mbus_config_mipi_csi1 {
    unsigned char clock_inv:1;
    unsigned char strobe:1;
    bool lane_polarity[2];
    unsigned char data_lane;
    unsigned char clock_lane;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">clock_inv</span></code></dt><dd><p>polarity of clock/strobe signal
false - not inverted, true - inverted</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">strobe</span></code></dt><dd><p>false - data/clock, true - data/strobe</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lane_polarity</span></code></dt><dd><p>the polarities of the clock (index 0) and data lanes
index (1)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data_lane</span></code></dt><dd><p>the number of the data lane</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clock_lane</span></code></dt><dd><p>the number of the clock lane</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.v4l2_mbus_type">
enum <code class="sig-name descname">v4l2_mbus_type</code><a class="headerlink" href="#c.v4l2_mbus_type" title="Permalink to this definition">¶</a></dt>
<dd><p>media bus type</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_UNKNOWN</span></code></dt><dd><p>unknown bus type, no V4L2 mediabus configuration</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_PARALLEL</span></code></dt><dd><p>parallel interface with hsync and vsync</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_BT656</span></code></dt><dd><p>parallel interface with embedded synchronisation, can
also be used for BT.1120</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_CSI1</span></code></dt><dd><p>MIPI CSI-1 serial interface</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_CCP2</span></code></dt><dd><p>CCP2 (Compact Camera Port 2)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_CSI2_DPHY</span></code></dt><dd><p>MIPI CSI-2 serial interface, with D-PHY</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_CSI2_CPHY</span></code></dt><dd><p>MIPI CSI-2 serial interface, with C-PHY</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_DPI</span></code></dt><dd><p>MIPI VIDEO DPI interface</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">V4L2_MBUS_INVALID</span></code></dt><dd><p>invalid bus type (keep as last)</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.v4l2_mbus_config">
struct <code class="sig-name descname">v4l2_mbus_config</code><a class="headerlink" href="#c.v4l2_mbus_config" title="Permalink to this definition">¶</a></dt>
<dd><p>media bus configuration</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct v4l2_mbus_config {
    enum v4l2_mbus_type type;
    union {
        struct v4l2_mbus_config_parallel parallel;
        struct v4l2_mbus_config_mipi_csi1 mipi_csi1;
        struct v4l2_mbus_config_mipi_csi2 mipi_csi2;
    } bus;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>interface type</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bus</span></code></dt><dd><p>bus configuration data structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bus.parallel</span></code></dt><dd><p>embedded <a class="reference internal" href="#c.v4l2_mbus_config_parallel" title="v4l2_mbus_config_parallel"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_config_parallel</span></code></a>.
Used if the bus is parallel or BT.656.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bus.mipi_csi1</span></code></dt><dd><p>embedded <a class="reference internal" href="#c.v4l2_mbus_config_mipi_csi1" title="v4l2_mbus_config_mipi_csi1"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_config_mipi_csi1</span></code></a>.
Used if the bus is MIPI Alliance’s Camera Serial
Interface version 1 (MIPI CSI1) or Standard
Mobile Imaging Architecture’s Compact Camera Port 2
(SMIA CCP2).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bus.mipi_csi2</span></code></dt><dd><p>embedded <a class="reference internal" href="#c.v4l2_mbus_config_mipi_csi2" title="v4l2_mbus_config_mipi_csi2"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_config_mipi_csi2</span></code></a>.
Used if the bus is MIPI Alliance’s Camera Serial
Interface version 2 (MIPI CSI2).</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.v4l2_fill_pix_format">
void <code class="sig-name descname">v4l2_fill_pix_format</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format">v4l2_pix_format</a><em> *pix_fmt</em>, const struct v4l2_mbus_framefmt<em> *mbus_fmt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.v4l2_fill_pix_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Ancillary routine that fills a <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format</span></code></a> fields from a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span></code>.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format</span> <span class="pre">*pix_fmt</span></code></dt><dd><p>pointer to <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format</span></code></a> to be filled</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span> <span class="pre">*mbus_fmt</span></code></dt><dd><p>pointer to <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span></code> to be used as model</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.v4l2_fill_mbus_format">
void <code class="sig-name descname">v4l2_fill_mbus_format</code><span class="sig-paren">(</span>struct v4l2_mbus_framefmt<em> *mbus_fmt</em>, const struct <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format">v4l2_pix_format</a><em> *pix_fmt</em>, u32<em> code</em><span class="sig-paren">)</span><a class="headerlink" href="#c.v4l2_fill_mbus_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Ancillary routine that fills a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span></code> from a <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format</span></code></a> and a data format code.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span> <span class="pre">*mbus_fmt</span></code></dt><dd><p>pointer to <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span></code> to be filled</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">v4l2_pix_format</span> <span class="pre">*pix_fmt</span></code></dt><dd><p>pointer to <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2.html#c.v4l2_pix_format" title="v4l2_pix_format"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format</span></code></a> to be used as model</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">code</span></code></dt><dd><p>data format code (from <code class="xref c c-type docutils literal notranslate"><span class="pre">enum</span> <span class="pre">v4l2_mbus_pixelcode</span></code>)</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.v4l2_fill_pix_format_mplane">
void <code class="sig-name descname">v4l2_fill_pix_format_mplane</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2-mplane.html#c.v4l2_pix_format_mplane" title="v4l2_pix_format_mplane">v4l2_pix_format_mplane</a><em> *pix_mp_fmt</em>, const struct v4l2_mbus_framefmt<em> *mbus_fmt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.v4l2_fill_pix_format_mplane" title="Permalink to this definition">¶</a></dt>
<dd><p>Ancillary routine that fills a <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2-mplane.html#c.v4l2_pix_format_mplane" title="v4l2_pix_format_mplane"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format_mplane</span></code></a> fields from a media bus structure.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format_mplane</span> <span class="pre">*pix_mp_fmt</span></code></dt><dd><p>pointer to <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2-mplane.html#c.v4l2_pix_format_mplane" title="v4l2_pix_format_mplane"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format_mplane</span></code></a> to be filled</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span> <span class="pre">*mbus_fmt</span></code></dt><dd><p>pointer to <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span></code> to be used as model</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.v4l2_fill_mbus_format_mplane">
void <code class="sig-name descname">v4l2_fill_mbus_format_mplane</code><span class="sig-paren">(</span>struct v4l2_mbus_framefmt<em> *mbus_fmt</em>, const struct <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2-mplane.html#c.v4l2_pix_format_mplane" title="v4l2_pix_format_mplane">v4l2_pix_format_mplane</a><em> *pix_mp_fmt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.v4l2_fill_mbus_format_mplane" title="Permalink to this definition">¶</a></dt>
<dd><p>Ancillary routine that fills a <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span></code> from a <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2-mplane.html#c.v4l2_pix_format_mplane" title="v4l2_pix_format_mplane"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format_mplane</span></code></a>.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span> <span class="pre">*mbus_fmt</span></code></dt><dd><p>pointer to <code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_mbus_framefmt</span></code> to be filled</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">v4l2_pix_format_mplane</span> <span class="pre">*pix_mp_fmt</span></code></dt><dd><p>pointer to <a class="reference internal" href="../../userspace-api/media/v4l/pixfmt-v4l2-mplane.html#c.v4l2_pix_format_mplane" title="v4l2_pix_format_mplane"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">v4l2_pix_format_mplane</span></code></a> to be used as model</p>
</dd>
</dl>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/driver-api/media/v4l2-mediabus.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/driver-api/media/v4l2-mediabus.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>