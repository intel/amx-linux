
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>9.1.2. The cpia2 driver &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="9.1.3. The cx2341x driver" href="cx2341x-devel.html" />
    <link rel="prev" title="9.1.1. The bttv driver" href="bttv-devel.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="the-cpia2-driver">
<h1><span class="section-number">9.1.2. </span>The cpia2 driver<a class="headerlink" href="#the-cpia2-driver" title="Permalink to this headline">¶</a></h1>
<p>Authors: Peter Pregler &lt;<a class="reference external" href="mailto:Peter_Pregler&#37;&#52;&#48;email&#46;com">Peter_Pregler<span>&#64;</span>email<span>&#46;</span>com</a>&gt;,
Scott J. Bertin &lt;<a class="reference external" href="mailto:scottbertin&#37;&#52;&#48;yahoo&#46;com">scottbertin<span>&#64;</span>yahoo<span>&#46;</span>com</a>&gt;, and
Jarl Totland &lt;<a class="reference external" href="mailto:Jarl&#46;Totland&#37;&#52;&#48;bdc&#46;no">Jarl<span>&#46;</span>Totland<span>&#64;</span>bdc<span>&#46;</span>no</a>&gt; for the original cpia driver, which
this one was modelled from.</p>
<section id="notes-to-developers">
<h2><span class="section-number">9.1.2.1. </span>Notes to developers<a class="headerlink" href="#notes-to-developers" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>This is a driver version stripped of the 2.4 back compatibility
and old MJPEG ioctl API. See cpia2.sf.net for 2.4 support.</p></li>
</ul>
</div></blockquote>
</section>
<section id="programmer-s-overview-of-cpia2-driver">
<h2><span class="section-number">9.1.2.2. </span>Programmer’s overview of cpia2 driver<a class="headerlink" href="#programmer-s-overview-of-cpia2-driver" title="Permalink to this headline">¶</a></h2>
<p>Cpia2 is the second generation video coprocessor from VLSI Vision Ltd (now a
division of ST Microelectronics).  There are two versions.  The first is the
STV0672, which is capable of up to 30 frames per second (fps) in frame sizes
up to CIF, and 15 fps for VGA frames.  The STV0676 is an improved version,
which can handle up to 30 fps VGA.  Both coprocessors can be attached to two
CMOS sensors - the vvl6410 CIF sensor and the vvl6500 VGA sensor.  These will
be referred to as the 410 and the 500 sensors, or the CIF and VGA sensors.</p>
<p>The two chipsets operate almost identically.  The core is an 8051 processor,
running two different versions of firmware.  The 672 runs the VP4 video
processor code, the 676 runs VP5.  There are a few differences in register
mappings for the two chips.  In these cases, the symbols defined in the
header files are marked with VP4 or VP5 as part of the symbol name.</p>
<p>The cameras appear externally as three sets of registers. Setting register
values is the only way to control the camera.  Some settings are
interdependant, such as the sequence required to power up the camera. I will
try to make note of all of these cases.</p>
<p>The register sets are called blocks.  Block 0 is the system block.  This
section is always powered on when the camera is plugged in.  It contains
registers that control housekeeping functions such as powering up the video
processor.  The video processor is the VP block.  These registers control
how the video from the sensor is processed.  Examples are timing registers,
user mode (vga, qvga), scaling, cropping, framerates, and so on.  The last
block is the video compressor (VC).  The video stream sent from the camera is
compressed as Motion JPEG (JPEGA).  The VC controls all of the compression
parameters.  Looking at the file cpia2_registers.h, you can get a full view
of these registers and the possible values for most of them.</p>
<p>One or more registers can be set or read by sending a usb control message to
the camera.  There are three modes for this.  Block mode requests a number
of contiguous registers.  Random mode reads or writes random registers with
a tuple structure containing address/value pairs.  The repeat mode is only
used by VP4 to load a firmware patch.  It contains a starting address and
a sequence of bytes to be written into a gpio port.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">9.1.2. The cpia2 driver</a><ul>
<li><a class="reference internal" href="#notes-to-developers">9.1.2.1. Notes to developers</a></li>
<li><a class="reference internal" href="#programmer-s-overview-of-cpia2-driver">9.1.2.2. Programmer’s overview of cpia2 driver</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/driver-api/media/drivers/cpia2_devel.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/driver-api/media/drivers/cpia2_devel.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>