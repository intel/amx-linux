
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Message-based devices &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="InfiniBand and Remote DMA (RDMA) Interfaces" href="infiniband.html" />
    <link rel="prev" title="Component Helper for Aggregate Drivers" href="component.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="message-based-devices">
<h1>Message-based devices<a class="headerlink" href="#message-based-devices" title="Permalink to this headline">¶</a></h1>
<section id="fusion-message-devices">
<h2>Fusion message devices<a class="headerlink" href="#fusion-message-devices" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.mpt_register">
u8 <code class="sig-name descname">mpt_register</code><span class="sig-paren">(</span>MPT_CALLBACK<em> cbfunc</em>, MPT_DRIVER_CLASS<em> dclass</em>, char<em> *func_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register protocol-specific main callback handler.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_CALLBACK</span> <span class="pre">cbfunc</span></code></dt><dd><p>callback function pointer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_DRIVER_CLASS</span> <span class="pre">dclass</span></code></dt><dd><p>Protocol driver’s class (<code class="docutils literal notranslate"><span class="pre">MPT_DRIVER_CLASS</span></code> enum value)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*func_name</span></code></dt><dd><p>call function’s name</p>
<p>This routine is called by a protocol-specific driver (SCSI host,
LAN, SCSI target) to register its reply callback routine.  Each
protocol-specific driver must do this before it will be able to
use any IOC resources, such as obtaining request frames.</p>
</dd>
</dl>
<p><strong>NOTES</strong></p>
<dl>
<dt>The SCSI protocol driver currently calls this routine thrice</dt><dd><p>in order to register separate callbacks; one for “normal” SCSI IO;
one for MptScsiTaskMgmt requests; one for Scan/DV requests.</p>
<p>Returns u8 valued “handle” in the range (and S.O.D. order)
{N,…,7,6,5,…,1} if successful.
A return value of MPT_MAX_PROTOCOL_DRIVERS (including zero!) should be
considered an error by the caller.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_deregister">
void <code class="sig-name descname">mpt_deregister</code><span class="sig-paren">(</span>u8<em> cb_idx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_deregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Deregister a protocol drivers resources.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>previously registered callback handle</p>
<p>Each protocol-specific driver should call this routine when its
module is unloaded.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_event_register">
int <code class="sig-name descname">mpt_event_register</code><span class="sig-paren">(</span>u8<em> cb_idx</em>, MPT_EVHANDLER<em> ev_cbfunc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_event_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register protocol-specific event callback handler.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>previously registered (via mpt_register) callback handle</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_EVHANDLER</span> <span class="pre">ev_cbfunc</span></code></dt><dd><p>callback function</p>
<p>This routine can be called by one or more protocol-specific drivers
if/when they choose to be notified of MPT events.</p>
<p>Returns 0 for success.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_event_deregister">
void <code class="sig-name descname">mpt_event_deregister</code><span class="sig-paren">(</span>u8<em> cb_idx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_event_deregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Deregister protocol-specific event callback handler</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>previously registered callback handle</p>
<p>Each protocol-specific driver should call this routine
when it does not (or can no longer) handle events,
or when its module is unloaded.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_reset_register">
int <code class="sig-name descname">mpt_reset_register</code><span class="sig-paren">(</span>u8<em> cb_idx</em>, MPT_RESETHANDLER<em> reset_func</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_reset_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register protocol-specific IOC reset handler.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>previously registered (via mpt_register) callback handle</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_RESETHANDLER</span> <span class="pre">reset_func</span></code></dt><dd><p>reset function</p>
<p>This routine can be called by one or more protocol-specific drivers
if/when they choose to be notified of IOC resets.</p>
<p>Returns 0 for success.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_reset_deregister">
void <code class="sig-name descname">mpt_reset_deregister</code><span class="sig-paren">(</span>u8<em> cb_idx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_reset_deregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Deregister protocol-specific IOC reset handler.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>previously registered callback handle</p>
<p>Each protocol-specific driver should call this routine
when it does not (or can no longer) handle IOC reset handling,
or when its module is unloaded.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_device_driver_register">
int <code class="sig-name descname">mpt_device_driver_register</code><span class="sig-paren">(</span>struct mpt_pci_driver *<em> dd_cbfunc</em>, u8<em> cb_idx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_device_driver_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register device driver hooks</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mpt_pci_driver</span> <span class="pre">*</span> <span class="pre">dd_cbfunc</span></code></dt><dd><p>driver callbacks struct</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>MPT protocol driver index</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_device_driver_deregister">
void <code class="sig-name descname">mpt_device_driver_deregister</code><span class="sig-paren">(</span>u8<em> cb_idx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_device_driver_deregister" title="Permalink to this definition">¶</a></dt>
<dd><p>DeRegister device driver hooks</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>MPT protocol driver index</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_get_msg_frame">
MPT_FRAME_HDR* <code class="sig-name descname">mpt_get_msg_frame</code><span class="sig-paren">(</span>u8<em> cb_idx</em>, MPT_ADAPTER<em> *ioc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_get_msg_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain an MPT request frame from the pool</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>Handle of registered MPT protocol driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT adapter structure</p>
<p>Obtain an MPT request frame from the pool (of 1024) that are
allocated per MPT adapter.</p>
<p>Returns pointer to a MPT request frame or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if none are available
or IOC is not active.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_put_msg_frame">
void <code class="sig-name descname">mpt_put_msg_frame</code><span class="sig-paren">(</span>u8<em> cb_idx</em>, MPT_ADAPTER<em> *ioc</em>, MPT_FRAME_HDR<em> *mf</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_put_msg_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a protocol-specific MPT request frame to an IOC</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>Handle of registered MPT protocol driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT adapter structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_FRAME_HDR</span> <span class="pre">*mf</span></code></dt><dd><p>Pointer to MPT request frame</p>
<p>This routine posts an MPT request frame to the request post FIFO of a
specific MPT adapter.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_put_msg_frame_hi_pri">
void <code class="sig-name descname">mpt_put_msg_frame_hi_pri</code><span class="sig-paren">(</span>u8<em> cb_idx</em>, MPT_ADAPTER<em> *ioc</em>, MPT_FRAME_HDR<em> *mf</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_put_msg_frame_hi_pri" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a hi-pri protocol-specific MPT request frame</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>Handle of registered MPT protocol driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT adapter structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_FRAME_HDR</span> <span class="pre">*mf</span></code></dt><dd><p>Pointer to MPT request frame</p>
<p>Send a protocol-specific MPT request frame to an IOC using
hi-priority request queue.</p>
<p>This routine posts an MPT request frame to the request post FIFO of a
specific MPT adapter.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_free_msg_frame">
void <code class="sig-name descname">mpt_free_msg_frame</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, MPT_FRAME_HDR<em> *mf</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_free_msg_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Place MPT request frame back on FreeQ.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT adapter structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_FRAME_HDR</span> <span class="pre">*mf</span></code></dt><dd><p>Pointer to MPT request frame</p>
<p>This routine places a MPT request frame back on the MPT adapter’s
FreeQ.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_send_handshake_request">
int <code class="sig-name descname">mpt_send_handshake_request</code><span class="sig-paren">(</span>u8<em> cb_idx</em>, MPT_ADAPTER<em> *ioc</em>, int<em> reqBytes</em>, u32<em> *req</em>, int<em> sleepFlag</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_send_handshake_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Send MPT request via doorbell handshake method.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cb_idx</span></code></dt><dd><p>Handle of registered MPT protocol driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT adapter structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">reqBytes</span></code></dt><dd><p>Size of the request in bytes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">*req</span></code></dt><dd><p>Pointer to MPT request frame</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">sleepFlag</span></code></dt><dd><p>Use schedule if CAN_SLEEP else use udelay.</p>
<p>This routine is used exclusively to send MptScsiTaskMgmt
requests since they are required to be sent via doorbell handshake.</p>
</dd>
</dl>
<p><strong>NOTE</strong></p>
<dl>
<dt>It is the callers responsibility to byte-swap fields in the</dt><dd><p>request which are greater than 1 byte in size.</p>
<p>Returns 0 for success, non-zero for failure.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_verify_adapter">
int <code class="sig-name descname">mpt_verify_adapter</code><span class="sig-paren">(</span>int<em> iocid</em>, MPT_ADAPTER<em> **iocpp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_verify_adapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Given IOC identifier, set pointer to its adapter structure.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">iocid</span></code></dt><dd><p>IOC unique identifier (integer)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">**iocpp</span></code></dt><dd><p>Pointer to pointer to IOC adapter</p>
<p>Given a unique IOC identifier, set pointer to the associated MPT
adapter structure.</p>
<p>Returns iocid and sets iocpp if iocid is found.
Returns -1 if iocid is not found.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_attach">
int <code class="sig-name descname">mpt_attach</code><span class="sig-paren">(</span>struct pci_dev<em> *pdev</em>, const struct <a class="reference internal" href="../PCI/pci.html#c.pci_device_id" title="pci_device_id">pci_device_id</a><em> *id</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_attach" title="Permalink to this definition">¶</a></dt>
<dd><p>Install a PCI intelligent MPT adapter.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">pci_dev</span> <span class="pre">*pdev</span></code></dt><dd><p>Pointer to pci_dev structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">pci_device_id</span> <span class="pre">*id</span></code></dt><dd><p>PCI device ID information</p>
<p>This routine performs all the steps necessary to bring the IOC of
a MPT adapter to a OPERATIONAL state.  This includes registering
memory regions, registering the interrupt, and allocating request
and reply memory pools.</p>
<p>This routine also pre-fetches the LAN MAC address of a Fibre Channel
MPT adapter.</p>
<p>Returns 0 for success, non-zero for failure.</p>
<p>TODO: Add support for polled controllers</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_detach">
void <code class="sig-name descname">mpt_detach</code><span class="sig-paren">(</span>struct pci_dev<em> *pdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_detach" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a PCI intelligent MPT adapter.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">pci_dev</span> <span class="pre">*pdev</span></code></dt><dd><p>Pointer to pci_dev structure</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_suspend">
int <code class="sig-name descname">mpt_suspend</code><span class="sig-paren">(</span>struct pci_dev<em> *pdev</em>, pm_message_t<em> state</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_suspend" title="Permalink to this definition">¶</a></dt>
<dd><p>Fusion MPT base driver suspend routine.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">pci_dev</span> <span class="pre">*pdev</span></code></dt><dd><p>Pointer to pci_dev structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pm_message_t</span> <span class="pre">state</span></code></dt><dd><p>new state to enter</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_resume">
int <code class="sig-name descname">mpt_resume</code><span class="sig-paren">(</span>struct pci_dev<em> *pdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_resume" title="Permalink to this definition">¶</a></dt>
<dd><p>Fusion MPT base driver resume routine.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">pci_dev</span> <span class="pre">*pdev</span></code></dt><dd><p>Pointer to pci_dev structure</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_GetIocState">
u32 <code class="sig-name descname">mpt_GetIocState</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, int<em> cooked</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_GetIocState" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current state of a MPT adapter.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">cooked</span></code></dt><dd><p>Request raw or cooked IOC state</p>
<p>Returns all IOC Doorbell register bits if cooked==0, else just the
Doorbell bits in MPI_IOC_STATE_MASK.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_alloc_fw_memory">
int <code class="sig-name descname">mpt_alloc_fw_memory</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, int<em> size</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_alloc_fw_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>allocate firmware memory</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">size</span></code></dt><dd><p>total FW bytes</p>
<p>If memory has already been allocated, the same (cached) value
is returned.</p>
<p>Return 0 if successful, or non-zero for failure</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_free_fw_memory">
void <code class="sig-name descname">mpt_free_fw_memory</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_free_fw_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>free firmware memory</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
<p>If alt_img is NULL, delete from ioc structure.
Else, delete a secondary image in same format.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptbase_sas_persist_operation">
int <code class="sig-name descname">mptbase_sas_persist_operation</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, u8<em> persist_opcode</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptbase_sas_persist_operation" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform operation on SAS Persistent Table</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">persist_opcode</span></code></dt><dd><p>see below</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>MPI_SAS_OP_CLEAR_NOT_PRESENT</p></td>
<td><p>Free all persist TargetID mappings for
devices not currently present.</p></td>
</tr>
<tr class="row-even"><td><p>MPI_SAS_OP_CLEAR_ALL_PERSISTENT</p></td>
<td><p>Clear al persist TargetID mappings</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p><strong>NOTE</strong></p>
<p>Don’t use not this function during interrupt time.</p>
<blockquote>
<div><p>Returns 0 for success, non-zero error</p>
</div></blockquote>
</div>
<dl class="function">
<dt id="c.mpt_raid_phys_disk_pg0">
int <code class="sig-name descname">mpt_raid_phys_disk_pg0</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, u8<em> phys_disk_num</em>, RaidPhysDiskPage0_t<em> *phys_disk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_raid_phys_disk_pg0" title="Permalink to this definition">¶</a></dt>
<dd><p>returns phys disk page zero</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to a Adapter Structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">phys_disk_num</span></code></dt><dd><p>io unit unique phys disk num generated by the ioc</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RaidPhysDiskPage0_t</span> <span class="pre">*phys_disk</span></code></dt><dd><p>requested payload data returned</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<blockquote>
<div><p>0 on success
-EFAULT if read of config page header fails or data pointer not NULL
-ENOMEM if pci_alloc failed</p>
</div></blockquote>
</div>
<dl class="function">
<dt id="c.mpt_raid_phys_disk_get_num_paths">
int <code class="sig-name descname">mpt_raid_phys_disk_get_num_paths</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, u8<em> phys_disk_num</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_raid_phys_disk_get_num_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>returns number paths associated to this phys_num</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to a Adapter Structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">phys_disk_num</span></code></dt><dd><p>io unit unique phys disk num generated by the ioc</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<blockquote>
<div><p>returns number paths</p>
</div></blockquote>
</div>
<dl class="function">
<dt id="c.mpt_raid_phys_disk_pg1">
int <code class="sig-name descname">mpt_raid_phys_disk_pg1</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, u8<em> phys_disk_num</em>, RaidPhysDiskPage1_t<em> *phys_disk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_raid_phys_disk_pg1" title="Permalink to this definition">¶</a></dt>
<dd><p>returns phys disk page 1</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to a Adapter Structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">phys_disk_num</span></code></dt><dd><p>io unit unique phys disk num generated by the ioc</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RaidPhysDiskPage1_t</span> <span class="pre">*phys_disk</span></code></dt><dd><p>requested payload data returned</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<blockquote>
<div><p>0 on success
-EFAULT if read of config page header fails or data pointer not NULL
-ENOMEM if pci_alloc failed</p>
</div></blockquote>
</div>
<dl class="function">
<dt id="c.mpt_findImVolumes">
int <code class="sig-name descname">mpt_findImVolumes</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_findImVolumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify IDs of hidden disks and RAID Volumes</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to a Adapter Strucutre</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<blockquote>
<div><p>0 on success
-EFAULT if read of config page header fails or data pointer not NULL
-ENOMEM if pci_alloc failed</p>
</div></blockquote>
</div>
<dl class="function">
<dt id="c.mpt_config">
int <code class="sig-name descname">mpt_config</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, CONFIGPARMS<em> *pCfg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic function to issue config message</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to an adapter structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">CONFIGPARMS</span> <span class="pre">*pCfg</span></code></dt><dd><p>Pointer to a configuration structure. Struct contains
action, page address, direction, physical address
and pointer to a configuration page header
Page header is updated.</p>
<blockquote>
<div><p>Returns 0 for success
-EAGAIN if no msg frames currently available
-EFAULT for non-successful reply or no reply (timeout)</p>
</div></blockquote>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_print_ioc_summary">
void <code class="sig-name descname">mpt_print_ioc_summary</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, char<em> *buffer</em>, int<em> *size</em>, int<em> len</em>, int<em> showlan</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_print_ioc_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Write ASCII summary of IOC to a buffer.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*buffer</span></code></dt><dd><p>Pointer to buffer where IOC summary info should be written</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*size</span></code></dt><dd><p>Pointer to number of bytes we wrote (set by this routine)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">len</span></code></dt><dd><p>Offset at which to start writing in buffer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">showlan</span></code></dt><dd><p>Display LAN stuff?</p>
<p>This routine writes (english readable) ASCII text, which represents
a summary of IOC information, to a buffer.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_set_taskmgmt_in_progress_flag">
int <code class="sig-name descname">mpt_set_taskmgmt_in_progress_flag</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_set_taskmgmt_in_progress_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>set flags associated with task management</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
<p>Returns 0 for SUCCESS or -1 if FAILED.</p>
<p>If -1 is return, then it was not possible to set the flags</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_clear_taskmgmt_in_progress_flag">
void <code class="sig-name descname">mpt_clear_taskmgmt_in_progress_flag</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_clear_taskmgmt_in_progress_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>clear flags associated with task management</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_halt_firmware">
void <code class="sig-name descname">mpt_halt_firmware</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_halt_firmware" title="Permalink to this definition">¶</a></dt>
<dd><p>Halts the firmware if it is operational and panic the kernel</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_Soft_Hard_ResetHandler">
int <code class="sig-name descname">mpt_Soft_Hard_ResetHandler</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, int<em> sleepFlag</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_Soft_Hard_ResetHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Try less expensive reset</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">sleepFlag</span></code></dt><dd><p>Indicates if sleep or schedule must be called.</p>
<p>Returns 0 for SUCCESS or -1 if FAILED.
Try for softreset first, only if it fails go for expensive
HardReset.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mpt_HardResetHandler">
int <code class="sig-name descname">mpt_HardResetHandler</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, int<em> sleepFlag</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mpt_HardResetHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic reset handler</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">sleepFlag</span></code></dt><dd><p>Indicates if sleep or schedule must be called.</p>
<p>Issues SCSI Task Management call based on input arg values.
If TaskMgmt fails, returns associated SCSI request.</p>
<p>Remark: _HardResetHandler can be invoked from an interrupt thread (timer)
or a non-interrupt thread.  In the former, must not call schedule().</p>
</dd>
</dl>
<p><strong>Note</strong></p>
<dl>
<dt>A return of -1 is a FATAL error case, as it means a</dt><dd><p>FW reload/initialization failed.</p>
<p>Returns 0 for SUCCESS or -1 if FAILED.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_info">
const char * <code class="sig-name descname">mptscsih_info</code><span class="sig-paren">(</span>struct Scsi_Host<em> *SChost</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return information about MPT adapter</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Scsi_Host</span> <span class="pre">*SChost</span></code></dt><dd><p>Pointer to Scsi_Host structure</p>
<p>(linux scsi_host_template.info routine)</p>
<p>Returns pointer to buffer where information was written.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_qcmd">
int <code class="sig-name descname">mptscsih_qcmd</code><span class="sig-paren">(</span>struct scsi_cmnd<em> *SCpnt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_qcmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Primary Fusion MPT SCSI initiator IO start routine.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">scsi_cmnd</span> <span class="pre">*SCpnt</span></code></dt><dd><p>Pointer to scsi_cmnd structure</p>
<p>(linux scsi_host_template.queuecommand routine)
This is the primary SCSI IO start routine.  Create a MPI SCSIIORequest
from a linux scsi_cmnd request and send it to the IOC.</p>
<p>Returns 0. (rtn value discarded by linux scsi mid-layer)</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_IssueTaskMgmt">
int <code class="sig-name descname">mptscsih_IssueTaskMgmt</code><span class="sig-paren">(</span>MPT_SCSI_HOST<em> *hd</em>, u8<em> type</em>, u8<em> channel</em>, u8<em> id</em>, u64<em> lun</em>, int<em> ctx2abort</em>, ulong<em> timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_IssueTaskMgmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic send Task Management function.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_SCSI_HOST</span> <span class="pre">*hd</span></code></dt><dd><p>Pointer to MPT_SCSI_HOST structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">type</span></code></dt><dd><p>Task Management type</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">channel</span></code></dt><dd><p>channel number for task management</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">id</span></code></dt><dd><p>Logical Target ID for reset (if appropriate)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u64</span> <span class="pre">lun</span></code></dt><dd><p>Logical Unit for reset (if appropriate)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ctx2abort</span></code></dt><dd><p>Context for the task to be aborted (if appropriate)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ulong</span> <span class="pre">timeout</span></code></dt><dd><p>timeout for task management control</p>
<p>Remark: _HardResetHandler can be invoked from an interrupt thread (timer)
or a non-interrupt thread.  In the former, must not call schedule().</p>
<p>Not all fields are meaningfull for all task types.</p>
<p>Returns 0 for SUCCESS, or FAILED.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_abort">
int <code class="sig-name descname">mptscsih_abort</code><span class="sig-paren">(</span>struct scsi_cmnd *<em> SCpnt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_abort" title="Permalink to this definition">¶</a></dt>
<dd><p>Abort linux scsi_cmnd routine, new_eh variant</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">scsi_cmnd</span> <span class="pre">*</span> <span class="pre">SCpnt</span></code></dt><dd><p>Pointer to scsi_cmnd structure, IO to be aborted</p>
<p>(linux scsi_host_template.eh_abort_handler routine)</p>
<p>Returns SUCCESS or FAILED.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_dev_reset">
int <code class="sig-name descname">mptscsih_dev_reset</code><span class="sig-paren">(</span>struct scsi_cmnd *<em> SCpnt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_dev_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a SCSI TARGET_RESET! new_eh variant</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">scsi_cmnd</span> <span class="pre">*</span> <span class="pre">SCpnt</span></code></dt><dd><p>Pointer to scsi_cmnd structure, IO which reset is due to</p>
<p>(linux scsi_host_template.eh_dev_reset_handler routine)</p>
<p>Returns SUCCESS or FAILED.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_bus_reset">
int <code class="sig-name descname">mptscsih_bus_reset</code><span class="sig-paren">(</span>struct scsi_cmnd *<em> SCpnt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_bus_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a SCSI BUS_RESET! new_eh variant</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">scsi_cmnd</span> <span class="pre">*</span> <span class="pre">SCpnt</span></code></dt><dd><p>Pointer to scsi_cmnd structure, IO which reset is due to</p>
<p>(linux scsi_host_template.eh_bus_reset_handler routine)</p>
<p>Returns SUCCESS or FAILED.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_host_reset">
int <code class="sig-name descname">mptscsih_host_reset</code><span class="sig-paren">(</span>struct scsi_cmnd<em> *SCpnt</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_host_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a SCSI host adapter RESET (new_eh variant)</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">scsi_cmnd</span> <span class="pre">*SCpnt</span></code></dt><dd><p>Pointer to scsi_cmnd structure, IO which reset is due to</p>
<p>(linux scsi_host_template.eh_host_reset_handler routine)</p>
<p>Returns SUCCESS or FAILED.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_taskmgmt_complete">
int <code class="sig-name descname">mptscsih_taskmgmt_complete</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, MPT_FRAME_HDR<em> *mf</em>, MPT_FRAME_HDR<em> *mr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_taskmgmt_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Registered with Fusion MPT base driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_FRAME_HDR</span> <span class="pre">*mf</span></code></dt><dd><p>Pointer to SCSI task mgmt request frame</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MPT_FRAME_HDR</span> <span class="pre">*mr</span></code></dt><dd><p>Pointer to SCSI task mgmt reply frame</p>
<p>This routine is called from mptbase.c::mpt_interrupt() at the completion
of any SCSI task management request.
This routine is registered with the MPT (base) driver at driver
load/init time via the <a class="reference internal" href="#c.mpt_register" title="mpt_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">mpt_register()</span></code></a> API call.</p>
<p>Returns 1 indicating alloc’d request frame ptr should be freed.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.mptscsih_get_scsi_lookup">
struct scsi_cmnd * <code class="sig-name descname">mptscsih_get_scsi_lookup</code><span class="sig-paren">(</span>MPT_ADAPTER<em> *ioc</em>, int<em> i</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mptscsih_get_scsi_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>retrieves scmd entry</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">MPT_ADAPTER</span> <span class="pre">*ioc</span></code></dt><dd><p>Pointer to MPT_ADAPTER structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">i</span></code></dt><dd><p>index into the array</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the scsi_cmd pointer</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Message-based devices</a><ul>
<li><a class="reference internal" href="#fusion-message-devices">Fusion message devices</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/driver-api/message-based.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/driver-api/message-based.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>