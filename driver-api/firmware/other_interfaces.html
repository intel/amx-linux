
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Other Firmware Interfaces &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="PINCTRL (PIN CONTROL) subsystem" href="../pin-control.html" />
    <link rel="prev" title="Firmware Upload API" href="fw_upload.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="other-firmware-interfaces">
<h1>Other Firmware Interfaces<a class="headerlink" href="#other-firmware-interfaces" title="Permalink to this headline">¶</a></h1>
<section id="dmi-interfaces">
<h2>DMI Interfaces<a class="headerlink" href="#dmi-interfaces" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.dmi_check_system">
int <code class="sig-name descname">dmi_check_system</code><span class="sig-paren">(</span>const struct dmi_system_id<em> *list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_check_system" title="Permalink to this definition">¶</a></dt>
<dd><p>check system DMI data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_system_id</span> <span class="pre">*list</span></code></dt><dd><p>array of dmi_system_id structures to match against
All non-null elements of the list must match
their slot’s (field index’s) data (i.e., each
list string must be a substring of the specified
DMI slot’s string data) to be considered a
successful match.</p>
<blockquote>
<div><p>Walk the blacklist table running matching functions until someone
returns non zero or we hit the end. Callback function is called for
each successful match. Returns the number of matches.</p>
<p>dmi_setup must be called before this function is called.</p>
</div></blockquote>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.dmi_first_match">
const struct dmi_system_id * <code class="sig-name descname">dmi_first_match</code><span class="sig-paren">(</span>const struct dmi_system_id<em> *list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_first_match" title="Permalink to this definition">¶</a></dt>
<dd><p>find dmi_system_id structure matching system DMI data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_system_id</span> <span class="pre">*list</span></code></dt><dd><p>array of dmi_system_id structures to match against
All non-null elements of the list must match
their slot’s (field index’s) data (i.e., each
list string must be a substring of the specified
DMI slot’s string data) to be considered a
successful match.</p>
<blockquote>
<div><p>Walk the blacklist table until the first match is found.  Return the
pointer to the matching entry or NULL if there’s no match.</p>
<p>dmi_setup must be called before this function is called.</p>
</div></blockquote>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.dmi_get_system_info">
const char * <code class="sig-name descname">dmi_get_system_info</code><span class="sig-paren">(</span>int<em> field</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_system_info" title="Permalink to this definition">¶</a></dt>
<dd><p>return DMI data value</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">field</span></code></dt><dd><p>data index (see enum dmi_field)</p>
<p>Returns one DMI data value, can be used to perform
complex DMI data checks.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.dmi_name_in_vendors">
int <code class="sig-name descname">dmi_name_in_vendors</code><span class="sig-paren">(</span>const char<em> *str</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_name_in_vendors" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if string is in the DMI system or board vendor name</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></dt><dd><p>Case sensitive Name</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.dmi_find_device">
const struct dmi_device * <code class="sig-name descname">dmi_find_device</code><span class="sig-paren">(</span>int<em> type</em>, const char<em> *name</em>, const struct dmi_device<em> *from</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_find_device" title="Permalink to this definition">¶</a></dt>
<dd><p>find onboard device by type/name</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">type</span></code></dt><dd><p>device type or <code class="docutils literal notranslate"><span class="pre">DMI_DEV_TYPE_ANY</span></code> to match all device types</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>device name string or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> to match all</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_device</span> <span class="pre">*from</span></code></dt><dd><p>previous device found in search, or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> for new search.</p>
<p>Iterates through the list of known onboard devices. If a device is
found with a matching <strong>type</strong> and <strong>name</strong>, a pointer to its device
structure is returned.  Otherwise, <code class="docutils literal notranslate"><span class="pre">NULL</span></code> is returned.
A new search is initiated by passing <code class="docutils literal notranslate"><span class="pre">NULL</span></code> as the <strong>from</strong> argument.
If <strong>from</strong> is not <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, searches continue from next device.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.dmi_get_date">
bool <code class="sig-name descname">dmi_get_date</code><span class="sig-paren">(</span>int<em> field</em>, int<em> *yearp</em>, int<em> *monthp</em>, int<em> *dayp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_date" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a DMI date</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">field</span></code></dt><dd><p>data index (see enum dmi_field)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*yearp</span></code></dt><dd><p>optional out parameter for the year</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*monthp</span></code></dt><dd><p>optional out parameter for the month</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*dayp</span></code></dt><dd><p>optional out parameter for the day</p>
<p>The date field is assumed to be in the form resembling
[mm[/dd]]/yy[yy] and the result is stored in the out
parameters any or all of which can be omitted.</p>
<p>If the field doesn’t exist, all out parameters are set to zero
and false is returned.  Otherwise, true is returned with any
invalid part of date set to zero.</p>
<p>On return, year, month and day are guaranteed to be in the
range of [0,9999], [0,12] and [0,31] respectively.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.dmi_get_bios_year">
int <code class="sig-name descname">dmi_get_bios_year</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_bios_year" title="Permalink to this definition">¶</a></dt>
<dd><p>get a year out of DMI_BIOS_DATE field</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div><p>Returns year on success, -ENXIO if DMI is not selected,
or a different negative error code if DMI field is not present
or not parseable.</p>
</div></blockquote>
</div>
<dl class="function">
<dt id="c.dmi_walk">
int <code class="sig-name descname">dmi_walk</code><span class="sig-paren">(</span>void (<em>*decode</em>)(const struct dmi_header *, void *), void<em> *private_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_walk" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk the DMI table and get called back for every record</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*decode)(const</span> <span class="pre">struct</span> <span class="pre">dmi_header</span> <span class="pre">*,</span> <span class="pre">void</span> <span class="pre">*)</span></code></dt><dd><p>Callback function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*private_data</span></code></dt><dd><p>Private data to be passed to the callback function</p>
<p>Returns 0 on success, -ENXIO if DMI is not selected or not present,
or a different negative error code if DMI walking fails.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.dmi_match">
bool <code class="sig-name descname">dmi_match</code><span class="sig-paren">(</span>enum dmi_field<em> f</em>, const char<em> *str</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_match" title="Permalink to this definition">¶</a></dt>
<dd><p>compare a string to the dmi field (if exists)</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">dmi_field</span> <span class="pre">f</span></code></dt><dd><p>DMI field identifier</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></dt><dd><p>string to compare the DMI field to</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns true if the requested field equals to the str (including NULL).</p>
</div>
<dl class="function">
<dt id="c.dmi_memdev_type">
u8 <code class="sig-name descname">dmi_memdev_type</code><span class="sig-paren">(</span>u16<em> handle</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_memdev_type" title="Permalink to this definition">¶</a></dt>
<dd><p>get the memory type</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">handle</span></code></dt><dd><p>DMI structure handle</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Return the DMI memory type of the module in the slot associated with the
given DMI handle, or 0x0 if no such DMI handle exists.</p>
</div>
<dl class="function">
<dt id="c.dmi_memdev_handle">
u16 <code class="sig-name descname">dmi_memdev_handle</code><span class="sig-paren">(</span>int<em> slot</em><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_memdev_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>get the DMI handle of a memory slot</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">slot</span></code></dt><dd><p>slot number</p>
<p>Return the DMI handle associated with a given memory slot, or <code class="docutils literal notranslate"><span class="pre">0xFFFF</span></code>
if there is no such slot.</p>
</dd>
</dl>
</div>
</section>
<section id="edd-interfaces">
<h2>EDD Interfaces<a class="headerlink" href="#edd-interfaces" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.edd_show_raw_data">
ssize_t <code class="sig-name descname">edd_show_raw_data</code><span class="sig-paren">(</span>struct edd_device<em> *edev</em>, char<em> *buf</em><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_show_raw_data" title="Permalink to this definition">¶</a></dt>
<dd><p>copies raw data to buffer for userspace to parse</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*edev</span></code></dt><dd><p>target edd_device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*buf</span></code></dt><dd><p>output buffer</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>number of bytes written, or -EINVAL on failure</p>
</div>
<dl class="function">
<dt id="c.edd_release">
void <code class="sig-name descname">edd_release</code><span class="sig-paren">(</span>struct kobject *<em> kobj</em><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_release" title="Permalink to this definition">¶</a></dt>
<dd><p>free edd structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">kobject</span> <span class="pre">*</span> <span class="pre">kobj</span></code></dt><dd><p>kobject of edd structure</p>
<p>This is called when the refcount of the edd structure
reaches 0. This should happen right after we unregister,
but just in case, we use the release callback anyway.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.edd_dev_is_type">
int <code class="sig-name descname">edd_dev_is_type</code><span class="sig-paren">(</span>struct edd_device<em> *edev</em>, const char<em> *type</em><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_dev_is_type" title="Permalink to this definition">¶</a></dt>
<dd><p>is this EDD device a ‘type’ device?</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*edev</span></code></dt><dd><p>target edd_device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*type</span></code></dt><dd><p>a host bus or interface identifier string per the EDD spec</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns 1 (TRUE) if it is a ‘type’ device, 0 otherwise.</p>
</div>
<dl class="function">
<dt id="c.edd_get_pci_dev">
struct pci_dev * <code class="sig-name descname">edd_get_pci_dev</code><span class="sig-paren">(</span>struct edd_device<em> *edev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_get_pci_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>finds pci_dev that matches edev</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*edev</span></code></dt><dd><p>edd_device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns pci_dev if found, or NULL</p>
</div>
<dl class="function">
<dt id="c.edd_init">
int <code class="sig-name descname">edd_init</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.edd_init" title="Permalink to this definition">¶</a></dt>
<dd><p>creates sysfs tree of EDD data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
</div>
</section>
<section id="generic-system-framebuffers-interface">
<h2>Generic System Framebuffers Interface<a class="headerlink" href="#generic-system-framebuffers-interface" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.sysfb_disable">
void <code class="sig-name descname">sysfb_disable</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.sysfb_disable" title="Permalink to this definition">¶</a></dt>
<dd><p>disable the Generic System Framebuffers support</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This disables the registration of system framebuffer devices that match the
generic drivers that make use of the system framebuffer set up by firmware.</p>
<p>It also unregisters a device if this was already registered by sysfb_init().</p>
<p><strong>Context</strong></p>
<p>The function can sleep. A <strong>disable_lock</strong> mutex is acquired to serialize
against sysfb_init(), that registers a system framebuffer device.</p>
</div>
</section>
<section id="intel-stratix10-soc-service-layer">
<h2>Intel Stratix10 SoC Service Layer<a class="headerlink" href="#intel-stratix10-soc-service-layer" title="Permalink to this headline">¶</a></h2>
<p>Some features of the Intel Stratix10 SoC require a level of privilege
higher than the kernel is granted. Such secure features include
FPGA programming. In terms of the ARMv8 architecture, the kernel runs
at Exception Level 1 (EL1), access to the features requires
Exception Level 3 (EL3).</p>
<p>The Intel Stratix10 SoC service layer provides an in kernel API for
drivers to request access to the secure features. The requests are queued
and processed one by one. ARM’s SMCCC is used to pass the execution
of the requests on to a secure monitor (EL3).</p>
<dl class="type">
<dt id="c.stratix10_svc_command_code">
enum <code class="sig-name descname">stratix10_svc_command_code</code><a class="headerlink" href="#c.stratix10_svc_command_code" title="Permalink to this definition">¶</a></dt>
<dd><p>supported service commands</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_NOOP</span></code></dt><dd><p>do ‘dummy’ request for integration/debug/trouble-shooting</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG</span></code></dt><dd><p>ask for FPGA configuration preparation, return status
is SVC_STATUS_OK</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_DATA_SUBMIT</span></code></dt><dd><p>submit buffer(s) of bit-stream data for the
FPGA configuration, return status is SVC_STATUS_SUBMITTED or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_DATA_CLAIM</span></code></dt><dd><p>check the status of the configuration, return
status is SVC_STATUS_COMPLETED, or SVC_STATUS_BUSY, or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_STATUS</span></code></dt><dd><p>check the status of the configuration, return
status is SVC_STATUS_COMPLETED, or SVC_STATUS_BUSY, or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_STATUS</span></code></dt><dd><p>request remote system update boot log, return status
is log data or SVC_STATUS_RSU_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_UPDATE</span></code></dt><dd><p>set the offset of the bitstream to boot after reboot,
return status is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_NOTIFY</span></code></dt><dd><p>report the status of hard processor system
software to firmware, return status is SVC_STATUS_OK or
SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_RETRY</span></code></dt><dd><p>query firmware for the current image’s retry counter,
return status is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_MAX_RETRY</span></code></dt><dd><p>query firmware for the max retry value,
return status is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_DCMF_VERSION</span></code></dt><dd><p>query firmware for the DCMF version, return status
is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_DCMF_STATUS</span></code></dt><dd><p>query firmware for the DCMF status
return status is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FIRMWARE_VERSION</span></code></dt><dd><p>query running firmware version, return status
is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_REQUEST_SERVICE</span></code></dt><dd><p>request validation of image from firmware,
return status is SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_SEND_CERTIFICATE</span></code></dt><dd><p>send a certificate, return status is
SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_GET_PROVISION_DATA</span></code></dt><dd><p>read the provisioning data, return status is
SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_DATA_ENCRYPTION</span></code></dt><dd><p>encrypt the data, return status is
SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_DATA_DECRYPTION</span></code></dt><dd><p>decrypt the data, return status is
SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_RANDOM_NUMBER_GEN</span></code></dt><dd><p>generate a random number, return status
is SVC_STATUS_OK, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_POLL_SERVICE_STATUS</span></code></dt><dd><p>poll if the service request is complete,
return statis is SVC_STATUS_OK, SVC_STATUS_ERROR or SVC_STATUS_BUSY</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_SMC_SVC_VERSION</span></code></dt><dd><p>Non-mailbox SMC SVC API Version,
return status is SVC_STATUS_OK</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.stratix10_svc_client_msg">
struct <code class="sig-name descname">stratix10_svc_client_msg</code><a class="headerlink" href="#c.stratix10_svc_client_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>message sent by client to service</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_client_msg {
    void *payload;
    size_t payload_length;
    void *payload_output;
    size_t payload_length_output;
    enum stratix10_svc_command_code command;
    u64 arg[3];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">payload</span></code></dt><dd><p>starting address of data need be processed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload_length</span></code></dt><dd><p>to be processed data size in bytes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload_output</span></code></dt><dd><p>starting address of processed data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload_length_output</span></code></dt><dd><p>processed data size in bytes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command</span></code></dt><dd><p>service command</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">arg</span></code></dt><dd><p>args to be passed via registers and not physically mapped buffers</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.stratix10_svc_command_config_type">
struct <code class="sig-name descname">stratix10_svc_command_config_type</code><a class="headerlink" href="#c.stratix10_svc_command_config_type" title="Permalink to this definition">¶</a></dt>
<dd><p>config type</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_command_config_type {
    u32 flags;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>flag bit for the type of FPGA configuration</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.stratix10_svc_cb_data">
struct <code class="sig-name descname">stratix10_svc_cb_data</code><a class="headerlink" href="#c.stratix10_svc_cb_data" title="Permalink to this definition">¶</a></dt>
<dd><p>callback data structure from service layer</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_cb_data {
    u32 status;
    void *kaddr1;
    void *kaddr2;
    void *kaddr3;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code></dt><dd><p>the status of sent command</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr1</span></code></dt><dd><p>address of 1st completed data block</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr2</span></code></dt><dd><p>address of 2nd completed data block</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr3</span></code></dt><dd><p>address of 3rd completed data block</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.stratix10_svc_client">
struct <code class="sig-name descname">stratix10_svc_client</code><a class="headerlink" href="#c.stratix10_svc_client" title="Permalink to this definition">¶</a></dt>
<dd><p>service client structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_client {
    struct device *dev;
    void (*receive_cb)(struct stratix10_svc_client *client, struct stratix10_svc_cb_data *cb_data);
    void *priv;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>the client device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">receive_cb</span></code></dt><dd><p>callback to provide service client the received data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt><dd><p>client private data</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.stratix10_svc_request_channel_byname">
struct stratix10_svc_chan * <code class="sig-name descname">stratix10_svc_request_channel_byname</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.stratix10_svc_client" title="stratix10_svc_client">stratix10_svc_client</a><em> *client</em>, const char<em> *name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_request_channel_byname" title="Permalink to this definition">¶</a></dt>
<dd><p>request a service channel</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_client</span> <span class="pre">*client</span></code></dt><dd><p>pointer to service client</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>service client name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to request a service channel.</p>
<p><strong>Return</strong></p>
<p>a pointer to channel assigned to the client on success,
or ERR_PTR() on error.</p>
</div>
<dl class="function">
<dt id="c.stratix10_svc_free_channel">
void <code class="sig-name descname">stratix10_svc_free_channel</code><span class="sig-paren">(</span>struct stratix10_svc_chan<em> *chan</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_free_channel" title="Permalink to this definition">¶</a></dt>
<dd><p>free service channel</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel to be freed</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to free a service channel.</p>
</div>
<dl class="function">
<dt id="c.stratix10_svc_send">
int <code class="sig-name descname">stratix10_svc_send</code><span class="sig-paren">(</span>struct stratix10_svc_chan<em> *chan</em>, void<em> *msg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_send" title="Permalink to this definition">¶</a></dt>
<dd><p>send a message data to the remote</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel assigned to the client</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*msg</span></code></dt><dd><p>message data to be sent, in the format of
“<a class="reference internal" href="#c.stratix10_svc_client_msg" title="stratix10_svc_client_msg"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_client_msg</span></code></a>”</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to add a message to the service
layer driver’s queue for being sent to the secure world.</p>
<p><strong>Return</strong></p>
<p>0 for success, -ENOMEM or -ENOBUFS on error.</p>
</div>
<dl class="function">
<dt id="c.stratix10_svc_done">
void <code class="sig-name descname">stratix10_svc_done</code><span class="sig-paren">(</span>struct stratix10_svc_chan<em> *chan</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_done" title="Permalink to this definition">¶</a></dt>
<dd><p>complete service request transactions</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel assigned to the client</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function should be called when client has finished its request
or there is an error in the request process. It allows the service layer
to stop the running thread to have maximize savings in kernel resources.</p>
</div>
<dl class="function">
<dt id="c.stratix10_svc_allocate_memory">
void * <code class="sig-name descname">stratix10_svc_allocate_memory</code><span class="sig-paren">(</span>struct stratix10_svc_chan<em> *chan</em>, size_t<em> size</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_allocate_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>allocate memory</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel assigned to the client</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt><dd><p>memory size requested by a specific service client</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Service layer allocates the requested number of bytes buffer from the
memory pool, service client uses this function to get allocated buffers.</p>
<p><strong>Return</strong></p>
<p>address of allocated memory on success, or ERR_PTR() on error.</p>
</div>
<dl class="function">
<dt id="c.stratix10_svc_free_memory">
void <code class="sig-name descname">stratix10_svc_free_memory</code><span class="sig-paren">(</span>struct stratix10_svc_chan<em> *chan</em>, void<em> *kaddr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_free_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>free allocated memory</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel assigned to the client</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*kaddr</span></code></dt><dd><p>memory to be freed</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to free allocated buffers.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Other Firmware Interfaces</a><ul>
<li><a class="reference internal" href="#dmi-interfaces">DMI Interfaces</a></li>
<li><a class="reference internal" href="#edd-interfaces">EDD Interfaces</a></li>
<li><a class="reference internal" href="#generic-system-framebuffers-interface">Generic System Framebuffers Interface</a></li>
<li><a class="reference internal" href="#intel-stratix10-soc-service-layer">Intel Stratix10 SoC Service Layer</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/driver-api/firmware/other_interfaces.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/driver-api/firmware/other_interfaces.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>