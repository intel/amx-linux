
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Notes on Management Module &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The Linux NCR53C8XX/SYM53C8XX drivers README file" href="ncr53c8xx.html" />
    <link rel="prev" title="LPFC Driver Release Notes" href="lpfc.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="notes-on-management-module">
<h1>Notes on Management Module<a class="headerlink" href="#notes-on-management-module" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Different classes of controllers from LSI Logic accept and respond to the
user applications in a similar way. They understand the same firmware control
commands. Furthermore, the applications also can treat different classes of
the controllers uniformly. Hence it is logical to have a single module that
interfaces with the applications on one side and all the low level drivers
on the other.</p>
<p>The advantages, though obvious, are listed for completeness:</p>
<blockquote>
<div><ol class="lowerroman simple">
<li><p>Avoid duplicate code from the low level drivers.</p></li>
<li><p>Unburden the low level drivers from having to export the
character node device and related handling.</p></li>
<li><p>Implement any policy mechanisms in one place.</p></li>
<li><p>Applications have to interface with only module instead of
multiple low level drivers.</p></li>
</ol>
</div></blockquote>
<p>Currently this module (called Common Management Module) is used only to issue
ioctl commands. But this module is envisioned to handle all user space level
interactions. So any ‘proc’, ‘sysfs’ implementations will be localized in this
common module.</p>
</section>
<section id="credits">
<h2>Credits<a class="headerlink" href="#credits" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;Shared code in a third module, a &quot;library module&quot;, is an acceptable
solution. modprobe automatically loads dependent modules, so users
running &quot;modprobe driver1&quot; or &quot;modprobe driver2&quot; would automatically
load the shared library module.&quot;
</pre></div>
</div>
<ul class="simple">
<li><p>Jeff Garzik (<a class="reference external" href="mailto:jgarzik&#37;&#52;&#48;pobox&#46;com">jgarzik<span>&#64;</span>pobox<span>&#46;</span>com</a>), 02.25.2004 LKML</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;As Jeff hinted, if your userspace&lt;-&gt;driver API is consistent between
your new MPT-based RAID controllers and your existing megaraid driver,
then perhaps you need a single small helper module (lsiioctl or some
better name), loaded by both mptraid and megaraid automatically, which
handles registering the /dev/megaraid node dynamically. In this case,
both mptraid and megaraid would register with lsiioctl for each
adapter discovered, and lsiioctl would essentially be a switch,
redirecting userspace tool ioctls to the appropriate driver.&quot;
</pre></div>
</div>
<ul class="simple">
<li><p>Matt Domsch, (<a class="reference external" href="mailto:Matt_Domsch&#37;&#52;&#48;dell&#46;com">Matt_Domsch<span>&#64;</span>dell<span>&#46;</span>com</a>), 02.25.2004 LKML</p></li>
</ul>
</section>
<section id="design">
<h2>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h2>
<p>The Common Management Module is implemented in megaraid_mm.[ch] files. This
module acts as a registry for low level hba drivers. The low level drivers
(currently only megaraid) register each controller with the common module.</p>
<p>The applications interface with the common module via the character device
node exported by the module.</p>
<p>The lower level drivers now understand only a new improved ioctl packet called
uioc_t. The management module converts the older ioctl packets from the older
applications into uioc_t. After driver handles the uioc_t, the common module
will convert that back into the old format before returning to applications.</p>
<p>As new applications evolve and replace the old ones, the old packet format
will be retired.</p>
<p>Common module dedicates one uioc_t packet to each controller registered. This
can easily be more than one. But since megaraid is the only low level driver
today, and it can handle only one ioctl, there is no reason to have more. But
as new controller classes get added, this will be tuned appropriately.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Notes on Management Module</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#credits">Credits</a></li>
<li><a class="reference internal" href="#design">Design</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/scsi/megaraid.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/scsi/megaraid.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>