
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Backlight support &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="VGA Switcheroo" href="vga-switcheroo.html" />
    <link rel="prev" title="drm/komeda Arm display driver" href="komeda-kms.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="backlight-support">
<h1>Backlight support<a class="headerlink" href="#backlight-support" title="Permalink to this headline">¶</a></h1>
<p>The backlight core supports implementing backlight drivers.</p>
<p>A backlight driver registers a driver using
<a class="reference internal" href="#c.devm_backlight_device_register" title="devm_backlight_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_backlight_device_register()</span></code></a>. The properties of the backlight
driver such as type and max_brightness must be specified.
When the core detect changes in for example brightness or power state
the update_status() operation is called. The backlight driver shall
implement this operation and use it to adjust backlight.</p>
<p>Several sysfs attributes are provided by the backlight core:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- brightness         R/W, set the requested brightness level
- actual_brightness  RO, the brightness level used by the HW
- max_brightness     RO, the maximum  brightness level supported
</pre></div>
</div>
<p>See Documentation/ABI/stable/sysfs-class-backlight for the full list.</p>
<p>The backlight can be adjusted using the sysfs interface, and
the backlight driver may also support adjusting backlight using
a hot-key or some other platform or firmware specific way.</p>
<p>The driver must implement the get_brightness() operation if
the HW do not support all the levels that can be specified in
brightness, thus providing user-space access to the actual level
via the actual_brightness attribute.</p>
<p>When the backlight changes this is reported to user-space using
an uevent connected to the actual_brightness attribute.
When brightness is set by platform specific means, for example
a hot-key to adjust backlight, the driver must notify the backlight
core that brightness has changed using <a class="reference internal" href="#c.backlight_force_update" title="backlight_force_update"><code class="xref c c-func docutils literal notranslate"><span class="pre">backlight_force_update()</span></code></a>.</p>
<p>The backlight driver core receives notifications from fbdev and
if the event is FB_EVENT_BLANK and if the value of blank, from the
FBIOBLANK ioctrl, results in a change in the backlight state the
update_status() operation is called.</p>
<dl class="type">
<dt id="c.backlight_update_reason">
enum <code class="sig-name descname">backlight_update_reason</code><a class="headerlink" href="#c.backlight_update_reason" title="Permalink to this definition">¶</a></dt>
<dd><p>what method was used to update backlight</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">BACKLIGHT_UPDATE_HOTKEY</span></code></dt><dd><p>The backlight was updated using a hot-key.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BACKLIGHT_UPDATE_SYSFS</span></code></dt><dd><p>The backlight was updated using sysfs.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>A driver indicates the method (reason) used for updating the backlight
when calling <a class="reference internal" href="#c.backlight_force_update" title="backlight_force_update"><code class="xref c c-func docutils literal notranslate"><span class="pre">backlight_force_update()</span></code></a>.</p>
<dl class="type">
<dt id="c.backlight_type">
enum <code class="sig-name descname">backlight_type</code><a class="headerlink" href="#c.backlight_type" title="Permalink to this definition">¶</a></dt>
<dd><p>the type of backlight control</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">BACKLIGHT_RAW</span></code></dt><dd><p>The backlight is controlled using hardware registers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BACKLIGHT_PLATFORM</span></code></dt><dd><p>The backlight is controlled using a platform-specific interface.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BACKLIGHT_FIRMWARE</span></code></dt><dd><p>The backlight is controlled using a standard firmware interface.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BACKLIGHT_TYPE_MAX</span></code></dt><dd><p>Number of entries.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>The type of interface used to control the backlight.</p>
<dl class="type">
<dt id="c.backlight_notification">
enum <code class="sig-name descname">backlight_notification</code><a class="headerlink" href="#c.backlight_notification" title="Permalink to this definition">¶</a></dt>
<dd><p>the type of notification</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">BACKLIGHT_REGISTERED</span></code></dt><dd><p>The backlight device is registered.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">BACKLIGHT_UNREGISTERED</span></code></dt><dd><p>The backlight revice is unregistered.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>The notifications that is used for notification sent to the receiver
that registered notifications using <a class="reference internal" href="#c.backlight_register_notifier" title="backlight_register_notifier"><code class="xref c c-func docutils literal notranslate"><span class="pre">backlight_register_notifier()</span></code></a>.</p>
<dl class="type">
<dt id="c.backlight_ops">
struct <code class="sig-name descname">backlight_ops</code><a class="headerlink" href="#c.backlight_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>backlight operations</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct backlight_ops {
    unsigned int options;
#define BL_CORE_SUSPENDRESUME   (1 &lt;&lt; 0);
    int (*update_status)(struct backlight_device *);
    int (*get_brightness)(struct backlight_device *);
    int (*check_fb)(struct backlight_device *bd, struct fb_info *info);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">options</span></code></dt><dd><p>Configure how operations are called from the core.</p>
<p>The options parameter is used to adjust the behaviour of the core.
Set BL_CORE_SUSPENDRESUME to get the update_status() operation called
upon suspend and resume.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">update_status</span></code></dt><dd><p>Operation called when properties have changed.</p>
<p>Notify the backlight driver some property has changed.
The update_status operation is protected by the update_lock.</p>
<p>The backlight driver is expected to use <a class="reference internal" href="#c.backlight_is_blank" title="backlight_is_blank"><code class="xref c c-func docutils literal notranslate"><span class="pre">backlight_is_blank()</span></code></a>
to check if the display is blanked and set brightness accordingly.
update_status() is called when any of the properties has changed.</p>
<p>RETURNS:</p>
<p>0 on success, negative error code if any failure occurred.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_brightness</span></code></dt><dd><p>Return the current backlight brightness.</p>
<p>The driver may implement this as a readback from the HW.
This operation is optional and if not present then the current
brightness property value is used.</p>
<p>RETURNS:</p>
<p>A brightness value which is 0 or a positive number.
On failure a negative error code is returned.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">check_fb</span></code></dt><dd><p>Check the framebuffer device.</p>
<p>Check if given framebuffer device is the one bound to this backlight.
This operation is optional and if not implemented it is assumed that the
fbdev is always the one bound to the backlight.</p>
<p>RETURNS:</p>
<p>If info is NULL or the info matches the fbdev bound to the backlight return true.
If info does not match the fbdev bound to the backlight return false.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>The backlight operations are specified when the backlight device is registered.</p>
<dl class="type">
<dt id="c.backlight_properties">
struct <code class="sig-name descname">backlight_properties</code><a class="headerlink" href="#c.backlight_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>backlight properties</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct backlight_properties {
    int brightness;
    int max_brightness;
    int power;
    int fb_blank;
    enum backlight_type type;
    unsigned int state;
#define BL_CORE_SUSPENDED       (1 &lt;&lt; 0)        ;
#define BL_CORE_FBBLANK         (1 &lt;&lt; 1)        ;
    enum backlight_scale scale;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">brightness</span></code></dt><dd><p>The current brightness requested by the user.</p>
<p>The backlight core makes sure the range is (0 to max_brightness)
when the brightness is set via the sysfs attribute:
/sys/class/backlight/&lt;backlight&gt;/brightness.</p>
<p>This value can be set in the backlight_properties passed
to <a class="reference internal" href="#c.devm_backlight_device_register" title="devm_backlight_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_backlight_device_register()</span></code></a> to set a default brightness
value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max_brightness</span></code></dt><dd><p>The maximum brightness value.</p>
<p>This value must be set in the backlight_properties passed to
<a class="reference internal" href="#c.devm_backlight_device_register" title="devm_backlight_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_backlight_device_register()</span></code></a> and shall not be modified by the
driver after registration.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">power</span></code></dt><dd><p>The current power mode.</p>
<p>User space can configure the power mode using the sysfs
attribute: /sys/class/backlight/&lt;backlight&gt;/bl_power
When the power property is updated update_status() is called.</p>
<p>The possible values are: (0: full on, 1 to 3: power saving
modes; 4: full off), see FB_BLANK_XXX.</p>
<p>When the backlight device is enabled <strong>power</strong> is set
to FB_BLANK_UNBLANK. When the backlight device is disabled
<strong>power</strong> is set to FB_BLANK_POWERDOWN.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fb_blank</span></code></dt><dd><p>The power state from the FBIOBLANK ioctl.</p>
<p>When the FBIOBLANK ioctl is called <strong>fb_blank</strong> is set to the
blank parameter and the update_status() operation is called.</p>
<p>When the backlight device is enabled <strong>fb_blank</strong> is set
to FB_BLANK_UNBLANK. When the backlight device is disabled
<strong>fb_blank</strong> is set to FB_BLANK_POWERDOWN.</p>
<p>Backlight drivers should avoid using this property. It has been
replaced by state &amp; BL_CORE_FBLANK (although most drivers should
use <a class="reference internal" href="#c.backlight_is_blank" title="backlight_is_blank"><code class="xref c c-func docutils literal notranslate"><span class="pre">backlight_is_blank()</span></code></a> as the preferred means to get the blank
state).</p>
<p>fb_blank is deprecated and will be removed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>The type of backlight supported.</p>
<p>The backlight type allows userspace to make appropriate
policy decisions based on the backlight type.</p>
<p>This value must be set in the backlight_properties
passed to <a class="reference internal" href="#c.devm_backlight_device_register" title="devm_backlight_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_backlight_device_register()</span></code></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code></dt><dd><p>The state of the backlight core.</p>
<p>The state is a bitmask. BL_CORE_FBBLANK is set when the display
is expected to be blank. BL_CORE_SUSPENDED is set when the
driver is suspended.</p>
<p>backlight drivers are expected to use <a class="reference internal" href="#c.backlight_is_blank" title="backlight_is_blank"><code class="xref c c-func docutils literal notranslate"><span class="pre">backlight_is_blank()</span></code></a>
in their update_status() operation rather than reading the
state property.</p>
<p>The state is maintained by the core and drivers may not modify it.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scale</span></code></dt><dd><p>The type of the brightness scale.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>This structure defines all the properties of a backlight.</p>
<dl class="type">
<dt id="c.backlight_device">
struct <code class="sig-name descname">backlight_device</code><a class="headerlink" href="#c.backlight_device" title="Permalink to this definition">¶</a></dt>
<dd><p>backlight device data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct backlight_device {
    struct backlight_properties props;
    struct mutex update_lock;
    struct mutex ops_lock;
    const struct backlight_ops *ops;
    struct notifier_block fb_notif;
    struct list_head entry;
    struct device dev;
    bool fb_bl_on[FB_MAX];
    int use_count;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">props</span></code></dt><dd><p>Backlight properties</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">update_lock</span></code></dt><dd><p>The lock used when calling the update_status() operation.</p>
<p>update_lock is an internal backlight lock that serialise access
to the update_status() operation. The backlight core holds the update_lock
when calling the update_status() operation. The update_lock shall not
be used by backlight drivers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ops_lock</span></code></dt><dd><p>The lock used around everything related to backlight_ops.</p>
<p>ops_lock is an internal backlight lock that protects the ops pointer
and is used around all accesses to ops and when the operations are
invoked. The ops_lock shall not be used by backlight drivers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ops</span></code></dt><dd><p>Pointer to the backlight operations.</p>
<p>If ops is NULL, the driver that registered this device has been unloaded,
and if class_get_devdata() points to something in the body of that driver,
it is also invalid.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fb_notif</span></code></dt><dd><p>The framebuffer notifier block</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">entry</span></code></dt><dd><p>List entry of all registered backlight devices</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>Parent device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fb_bl_on</span></code></dt><dd><p>The state of individual fbdev’s.</p>
<p>Multiple fbdev’s may share one backlight device. The fb_bl_on
records the state of the individual fbdev.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">use_count</span></code></dt><dd><p>The number of uses of fb_bl_on.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>This structure holds all data required by a backlight device.</p>
<dl class="function">
<dt id="c.backlight_update_status">
int <code class="sig-name descname">backlight_update_status</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a><em> *bd</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_update_status" title="Permalink to this definition">¶</a></dt>
<dd><p>force an update of the backlight device status</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">backlight_device</span> <span class="pre">*bd</span></code></dt><dd><p>the backlight device</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.backlight_enable">
int <code class="sig-name descname">backlight_enable</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a><em> *bd</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable backlight</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">backlight_device</span> <span class="pre">*bd</span></code></dt><dd><p>the backlight device to enable</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.backlight_disable">
int <code class="sig-name descname">backlight_disable</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a><em> *bd</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_disable" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable backlight</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">backlight_device</span> <span class="pre">*bd</span></code></dt><dd><p>the backlight device to disable</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.backlight_is_blank">
bool <code class="sig-name descname">backlight_is_blank</code><span class="sig-paren">(</span>const struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a><em> *bd</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_is_blank" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if display is expected to be blank</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">backlight_device</span> <span class="pre">*bd</span></code></dt><dd><p>the backlight device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Display is expected to be blank if any of these is true:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1) if power in not UNBLANK
2) if fb_blank is not UNBLANK
3) if state indicate BLANK or SUSPENDED
</pre></div>
</div>
<p>Returns true if display is expected to be blank, false otherwise.</p>
</div>
<dl class="function">
<dt id="c.backlight_get_brightness">
int <code class="sig-name descname">backlight_get_brightness</code><span class="sig-paren">(</span>const struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a><em> *bd</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_get_brightness" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current brightness value</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">backlight_device</span> <span class="pre">*bd</span></code></dt><dd><p>the backlight device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the current brightness value, taking in consideration the current
state. If <a class="reference internal" href="#c.backlight_is_blank" title="backlight_is_blank"><code class="xref c c-func docutils literal notranslate"><span class="pre">backlight_is_blank()</span></code></a> returns true then return 0 as brightness
otherwise return the current brightness property value.</p>
<p>Backlight drivers are expected to use this function in their update_status()
operation to get the brightness value.</p>
</div>
<dl class="function">
<dt id="c.bl_get_data">
void * <code class="sig-name descname">bl_get_data</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a><em> *bl_dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.bl_get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>access devdata</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">backlight_device</span> <span class="pre">*bl_dev</span></code></dt><dd><p>pointer to backlight device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>When a backlight device is registered the driver has the possibility
to supply a void * devdata. <a class="reference internal" href="#c.bl_get_data" title="bl_get_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">bl_get_data()</span></code></a> return a pointer to the
devdata.</p>
<p>pointer to devdata stored while registering the backlight device.</p>
<p><strong>Return</strong></p>
</div>
<dl class="function">
<dt id="c.backlight_force_update">
void <code class="sig-name descname">backlight_force_update</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a><em> *bd</em>, enum <a class="reference internal" href="#c.backlight_update_reason" title="backlight_update_reason">backlight_update_reason</a><em> reason</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_force_update" title="Permalink to this definition">¶</a></dt>
<dd><p>tell the backlight subsystem that hardware state has changed</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">backlight_device</span> <span class="pre">*bd</span></code></dt><dd><p>the backlight device to update</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">backlight_update_reason</span> <span class="pre">reason</span></code></dt><dd><p>reason for update</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Updates the internal state of the backlight in response to a hardware event,
and generates an uevent to notify userspace. A backlight driver shall call
<a class="reference internal" href="#c.backlight_force_update" title="backlight_force_update"><code class="xref c c-func docutils literal notranslate"><span class="pre">backlight_force_update()</span></code></a> when the backlight is changed using, for example,
a hot-key. The updated brightness is read using get_brightness() and the
brightness value is reported using an uevent.</p>
</div>
<dl class="function">
<dt id="c.backlight_device_get_by_name">
struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a> * <code class="sig-name descname">backlight_device_get_by_name</code><span class="sig-paren">(</span>const char<em> *name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_device_get_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get backlight device by name</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>Device name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function looks up a backlight device by its name. It obtains a reference
on the backlight device and it is the caller’s responsibility to drop the
reference by calling backlight_put().</p>
<p><strong>Return</strong></p>
<p>A pointer to the backlight device if found, otherwise NULL.</p>
</div>
<dl class="function">
<dt id="c.backlight_register_notifier">
int <code class="sig-name descname">backlight_register_notifier</code><span class="sig-paren">(</span>struct notifier_block<em> *nb</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_register_notifier" title="Permalink to this definition">¶</a></dt>
<dd><p>get notified of backlight (un)registration</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">notifier_block</span> <span class="pre">*nb</span></code></dt><dd><p>notifier block with the notifier to call on backlight (un)registration</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Register a notifier to get notified when backlight devices get registered
or unregistered.</p>
<p>0 on success, otherwise a negative error code</p>
<p><strong>Return</strong></p>
</div>
<dl class="function">
<dt id="c.backlight_unregister_notifier">
int <code class="sig-name descname">backlight_unregister_notifier</code><span class="sig-paren">(</span>struct notifier_block<em> *nb</em><span class="sig-paren">)</span><a class="headerlink" href="#c.backlight_unregister_notifier" title="Permalink to this definition">¶</a></dt>
<dd><p>unregister a backlight notifier</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">notifier_block</span> <span class="pre">*nb</span></code></dt><dd><p>notifier block to unregister</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Register a notifier to get notified when backlight devices get registered
or unregistered.</p>
<p>0 on success, otherwise a negative error code</p>
<p><strong>Return</strong></p>
</div>
<dl class="function">
<dt id="c.devm_backlight_device_register">
struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a> * <code class="sig-name descname">devm_backlight_device_register</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/infrastructure.html#c.device" title="device">device</a><em> *dev</em>, const char<em> *name</em>, struct <a class="reference internal" href="../driver-api/infrastructure.html#c.device" title="device">device</a><em> *parent</em>, void<em> *devdata</em>, const struct <a class="reference internal" href="#c.backlight_ops" title="backlight_ops">backlight_ops</a><em> *ops</em>, const struct <a class="reference internal" href="#c.backlight_properties" title="backlight_properties">backlight_properties</a><em> *props</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_backlight_device_register" title="Permalink to this definition">¶</a></dt>
<dd><p>register a new backlight device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>the device to register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>the name of the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>a pointer to the parent device (often the same as <strong>dev</strong>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*devdata</span></code></dt><dd><p>an optional pointer to be stored for private driver use</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">backlight_ops</span> <span class="pre">*ops</span></code></dt><dd><p>the backlight operations structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">backlight_properties</span> <span class="pre">*props</span></code></dt><dd><p>the backlight properties</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Creates and registers new backlight device. When a backlight device
is registered the configuration must be specified in the <strong>props</strong>
parameter. See description of <a class="reference internal" href="#c.backlight_properties" title="backlight_properties"><code class="xref c c-type docutils literal notranslate"><span class="pre">backlight_properties</span></code></a>.</p>
<p>struct backlight on success, or an ERR_PTR on error</p>
<p><strong>Return</strong></p>
</div>
<dl class="function">
<dt id="c.devm_backlight_device_unregister">
void <code class="sig-name descname">devm_backlight_device_unregister</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/infrastructure.html#c.device" title="device">device</a><em> *dev</em>, struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a><em> *bd</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_backlight_device_unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>unregister backlight device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>the device to unregister</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">backlight_device</span> <span class="pre">*bd</span></code></dt><dd><p>the backlight device to unregister</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Deallocates a backlight allocated with <a class="reference internal" href="#c.devm_backlight_device_register" title="devm_backlight_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_backlight_device_register()</span></code></a>.
Normally this function will not need to be called and the resource management
code will ensure that the resources are freed.</p>
</div>
<dl class="function">
<dt id="c.of_find_backlight_by_node">
struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a> * <code class="sig-name descname">of_find_backlight_by_node</code><span class="sig-paren">(</span>struct device_node<em> *node</em><span class="sig-paren">)</span><a class="headerlink" href="#c.of_find_backlight_by_node" title="Permalink to this definition">¶</a></dt>
<dd><p>find backlight device by device-tree node</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device_node</span> <span class="pre">*node</span></code></dt><dd><p>device-tree node of the backlight device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns a pointer to the backlight device corresponding to the given DT
node or NULL if no such backlight device exists or if the device hasn’t
been probed yet.</p>
<p>This function obtains a reference on the backlight device and it is the
caller’s responsibility to drop the reference by calling <a class="reference internal" href="../driver-api/infrastructure.html#c.put_device" title="put_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">put_device()</span></code></a> on
the backlight device’s .dev field.</p>
</div>
<dl class="function">
<dt id="c.devm_of_find_backlight">
struct <a class="reference internal" href="#c.backlight_device" title="backlight_device">backlight_device</a> * <code class="sig-name descname">devm_of_find_backlight</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/infrastructure.html#c.device" title="device">device</a><em> *dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_of_find_backlight" title="Permalink to this definition">¶</a></dt>
<dd><p>find backlight for a device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>the device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function looks for a property named ‘backlight’ on the DT node
connected to <strong>dev</strong> and looks up the backlight device. The lookup is
device managed so the reference to the backlight device is automatically
dropped on driver detach.</p>
<p>A pointer to the backlight device if found.
Error pointer -EPROBE_DEFER if the DT property is set, but no backlight
device is found. NULL if there’s no backlight property.</p>
<p><strong>Return</strong></p>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/gpu/backlight.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/gpu/backlight.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>