
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Module Parameters &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Core Driver Infrastructure" href="driver-core.html" />
    <link rel="prev" title="drm/amdgpu AMDgpu driver" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-parameters">
<h1>Module Parameters<a class="headerlink" href="#module-parameters" title="Permalink to this headline">¶</a></h1>
<p>The amdgpu driver supports the following module parameters:</p>
<p id="vramlimit-int"><strong>vramlimit (int)</strong></p>
<p>Restrict the total amount of VRAM in MiB for testing.  The default is 0 (Use full VRAM).</p>
<p id="vis-vramlimit-int"><strong>vis_vramlimit (int)</strong></p>
<p>Restrict the amount of CPU visible VRAM in MiB for testing.  The default is 0 (Use full CPU visible VRAM).</p>
<p id="gartsize-uint"><strong>gartsize (uint)</strong></p>
<p>Restrict the size of GART (for kernel use) in Mib (32, 64, etc.) for testing.
The default is -1 (The size depends on asic).</p>
<p id="gttsize-int"><strong>gttsize (int)</strong></p>
<p>Restrict the size of GTT domain (for userspace use) in MiB for testing.
The default is -1 (Use 1/2 RAM, minimum value is 3GB).</p>
<p id="moverate-int"><strong>moverate (int)</strong></p>
<p>Set maximum buffer migration rate in MB/s. The default is -1 (8 MB/s).</p>
<p id="audio-int"><strong>audio (int)</strong></p>
<p>Set HDMI/DPAudio. Only affects non-DC display handling. The default is -1 (Enabled), set 0 to disabled it.</p>
<p id="disp-priority-int"><strong>disp_priority (int)</strong></p>
<p>Set display Priority (1 = normal, 2 = high). Only affects non-DC display handling. The default is 0 (auto).</p>
<p id="hw-i2c-int"><strong>hw_i2c (int)</strong></p>
<p>To enable hw i2c engine. Only affects non-DC display handling. The default is 0 (Disabled).</p>
<p id="pcie-gen2-int"><strong>pcie_gen2 (int)</strong></p>
<p>To disable PCIE Gen2/3 mode (0 = disable, 1 = enable). The default is -1 (auto, enabled).</p>
<p id="msi-int"><strong>msi (int)</strong></p>
<p>To disable Message Signaled Interrupts (MSI) functionality (1 = enable, 0 = disable). The default is -1 (auto, enabled).</p>
<p id="lockup-timeout-string"><strong>lockup_timeout (string)</strong></p>
<p>Set GPU scheduler timeout value in ms.</p>
<p>The format can be [Non-Compute] or [GFX,Compute,SDMA,Video]. That is there can be one or
multiple values specified. 0 and negative values are invalidated. They will be adjusted
to the default timeout.</p>
<ul class="simple">
<li><p>With one value specified, the setting will apply to all non-compute jobs.</p></li>
<li><p>With multiple values specified, the first one will be for GFX.
The second one is for Compute. The third and fourth ones are
for SDMA and Video.</p></li>
</ul>
<p>By default(with no lockup_timeout settings), the timeout for all non-compute(GFX, SDMA and Video)
jobs is 10000. The timeout for compute is 60000.</p>
<p id="dpm-int"><strong>dpm (int)</strong></p>
<p>Override for dynamic power management setting
(0 = disable, 1 = enable)
The default is -1 (auto).</p>
<p id="fw-load-type-int"><strong>fw_load_type (int)</strong></p>
<p>Set different firmware loading type for debugging, if supported.
Set to 0 to force direct loading if supported by the ASIC.  Set
to -1 to select the default loading mode for the ASIC, as defined
by the driver.  The default is -1 (auto).</p>
<p id="aspm-int"><strong>aspm (int)</strong></p>
<p>To disable ASPM (1 = enable, 0 = disable). The default is -1 (auto, enabled).</p>
<p id="runpm-int"><strong>runpm (int)</strong></p>
<p>Override for runtime power management control for dGPUs. The amdgpu driver can dynamically power down
the dGPUs when they are idle if supported. The default is -1 (auto enable).
Setting the value to 0 disables this functionality.</p>
<p id="ip-block-mask-uint"><strong>ip_block_mask (uint)</strong></p>
<p>Override what IP blocks are enabled on the GPU. Each GPU is a collection of IP blocks (gfx, display, video, etc.).
Use this parameter to disable specific blocks. Note that the IP blocks do not have a fixed index. Some asics may not have
some IPs or may include multiple instances of an IP so the ordering various from asic to asic. See the driver output in
the kernel log for the list of IPs on the asic. The default is 0xffffffff (enable all blocks on a device).</p>
<p id="bapm-int"><strong>bapm (int)</strong></p>
<p>Bidirectional Application Power Management (BAPM) used to dynamically share TDP between CPU and GPU. Set value 0 to disable it.
The default -1 (auto, enabled)</p>
<p id="deep-color-int"><strong>deep_color (int)</strong></p>
<p>Set 1 to enable Deep Color support. Only affects non-DC display handling. The default is 0 (disabled).</p>
<p id="vm-size-int"><strong>vm_size (int)</strong></p>
<p>Override the size of the GPU’s per client virtual address space in GiB.  The default is -1 (automatic for each asic).</p>
<p id="vm-fragment-size-int"><strong>vm_fragment_size (int)</strong></p>
<p>Override VM fragment size in bits (4, 5, etc. 4 = 64K, 9 = 2M). The default is -1 (automatic for each asic).</p>
<p id="vm-block-size-int"><strong>vm_block_size (int)</strong></p>
<p>Override VM page table size in bits (default depending on vm_size and hw setup). The default is -1 (automatic for each asic).</p>
<p id="vm-fault-stop-int"><strong>vm_fault_stop (int)</strong></p>
<p>Stop on VM fault for debugging (0 = never, 1 = print first, 2 = always). The default is 0 (No stop).</p>
<p id="vm-debug-int"><strong>vm_debug (int)</strong></p>
<p>Debug VM handling (0 = disabled, 1 = enabled). The default is 0 (Disabled).</p>
<p id="vm-update-mode-int"><strong>vm_update_mode (int)</strong></p>
<p>Override VM update mode. VM updated by using CPU (0 = never, 1 = Graphics only, 2 = Compute only, 3 = Both). The default
is -1 (Only in large BAR(LB) systems Compute VM tables will be updated by CPU, otherwise 0, never).</p>
<p id="exp-hw-support-int"><strong>exp_hw_support (int)</strong></p>
<p>Enable experimental hw support (1 = enable). The default is 0 (disabled).</p>
<p id="dc-int"><strong>dc (int)</strong></p>
<p>Disable/Enable Display Core driver for debugging (1 = enable, 0 = disable). The default is -1 (automatic for each asic).</p>
<p id="sched-jobs-int"><strong>sched_jobs (int)</strong></p>
<p>Override the max number of jobs supported in the sw queue. The default is 32.</p>
<p id="sched-hw-submission-int"><strong>sched_hw_submission (int)</strong></p>
<p>Override the max number of HW submissions. The default is 2.</p>
<p id="ppfeaturemask-hexint"><strong>ppfeaturemask (hexint)</strong></p>
<p>Override power features enabled. See enum PP_FEATURE_MASK in drivers/gpu/drm/amd/include/amd_shared.h.
The default is the current set of stable power features.</p>
<p id="forcelongtraining-uint"><strong>forcelongtraining (uint)</strong></p>
<p>Force long memory training in resume.
The default is zero, indicates short training in resume.</p>
<p id="pcie-gen-cap-uint"><strong>pcie_gen_cap (uint)</strong></p>
<p>Override PCIE gen speed capabilities. See the CAIL flags in drivers/gpu/drm/amd/include/amd_pcie.h.
The default is 0 (automatic for each asic).</p>
<p id="pcie-lane-cap-uint"><strong>pcie_lane_cap (uint)</strong></p>
<p>Override PCIE lanes capabilities. See the CAIL flags in drivers/gpu/drm/amd/include/amd_pcie.h.
The default is 0 (automatic for each asic).</p>
<p id="cg-mask-ullong"><strong>cg_mask (ullong)</strong></p>
<p>Override Clockgating features enabled on GPU (0 = disable clock gating). See the AMD_CG_SUPPORT flags in
drivers/gpu/drm/amd/include/amd_shared.h. The default is 0xffffffffffffffff (all enabled).</p>
<p id="pg-mask-uint"><strong>pg_mask (uint)</strong></p>
<p>Override Powergating features enabled on GPU (0 = disable power gating). See the AMD_PG_SUPPORT flags in
drivers/gpu/drm/amd/include/amd_shared.h. The default is 0xffffffff (all enabled).</p>
<p id="sdma-phase-quantum-uint"><strong>sdma_phase_quantum (uint)</strong></p>
<p>Override SDMA context switch phase quantum (x 1K GPU clock cycles, 0 = no change). The default is 32.</p>
<p id="disable-cu-charp"><strong>disable_cu (charp)</strong></p>
<p>Set to disable CUs (It’s set like se.sh.cu,…). The default is NULL.</p>
<p id="virtual-display-charp"><strong>virtual_display (charp)</strong></p>
<p>Set to enable virtual display feature. This feature provides a virtual display hardware on headless boards
or in virtualized environments. It will be set like xxxx:xx:xx.x,x;xxxx:xx:xx.x,x. It’s the pci address of
the device, plus the number of crtcs to expose. E.g., 0000:26:00.0,4 would enable 4 virtual crtcs on the pci
device at 26:00.0. The default is NULL.</p>
<p id="job-hang-limit-int"><strong>job_hang_limit (int)</strong></p>
<p>Set how much time allow a job hang and not drop it. The default is 0.</p>
<p id="lbpw-int"><strong>lbpw (int)</strong></p>
<p>Override Load Balancing Per Watt (LBPW) support (1 = enable, 0 = disable). The default is -1 (auto, enabled).</p>
<p id="gpu-recovery-int"><strong>gpu_recovery (int)</strong></p>
<p>Set to enable GPU recovery mechanism (1 = enable, 0 = disable). The default is -1 (auto, disabled except SRIOV).</p>
<p id="emu-mode-int"><strong>emu_mode (int)</strong></p>
<p>Set value 1 to enable emulation mode. This is only needed when running on an emulator. The default is 0 (disabled).</p>
<p id="ras-enable-int"><strong>ras_enable (int)</strong></p>
<p>Enable RAS features on the GPU (0 = disable, 1 = enable, -1 = auto (default))</p>
<p id="ras-mask-uint"><strong>ras_mask (uint)</strong></p>
<p>Mask of RAS features to enable (default 0xffffffff), only valid when ras_enable == 1
See the flags in drivers/gpu/drm/amd/amdgpu/amdgpu_ras.h</p>
<p id="timeout-fatal-disable-bool"><strong>timeout_fatal_disable (bool)</strong></p>
<p>Disable Watchdog timeout fatal error event</p>
<p id="timeout-period-uint"><strong>timeout_period (uint)</strong></p>
<p>Modify the watchdog timeout max_cycles as (1 &lt;&lt; period)</p>
<p id="si-support-int"><strong>si_support (int)</strong></p>
<p>Set SI support driver. This parameter works after set config CONFIG_DRM_AMDGPU_SI. For SI asic, when radeon driver is enabled,
set value 0 to use radeon driver, while set value 1 to use amdgpu driver. The default is using radeon driver when it available,
otherwise using amdgpu driver.</p>
<p id="cik-support-int"><strong>cik_support (int)</strong></p>
<p>Set CIK support driver. This parameter works after set config CONFIG_DRM_AMDGPU_CIK. For CIK asic, when radeon driver is enabled,
set value 0 to use radeon driver, while set value 1 to use amdgpu driver. The default is using radeon driver when it available,
otherwise using amdgpu driver.</p>
<p id="smu-memory-pool-size-uint"><strong>smu_memory_pool_size (uint)</strong></p>
<p>It is used to reserve gtt for smu debug usage, setting value 0 to disable it. The actual size is value * 256MiB.
E.g. 0x1 = 256Mbyte, 0x2 = 512Mbyte, 0x4 = 1 Gbyte, 0x8 = 2GByte. The default is 0 (disabled).</p>
<p id="async-gfx-ring-int"><strong>async_gfx_ring (int)</strong></p>
<p>It is used to enable gfx rings that could be configured with different prioritites or equal priorities</p>
<p id="mcbp-int"><strong>mcbp (int)</strong></p>
<p>It is used to enable mid command buffer preemption. (0 = disabled (default), 1 = enabled)</p>
<p id="discovery-int"><strong>discovery (int)</strong></p>
<p>Allow driver to discover hardware IP information from IP Discovery table at the top of VRAM.
(-1 = auto (default), 0 = disabled, 1 = enabled, 2 = use ip_discovery table from file)</p>
<p id="mes-int"><strong>mes (int)</strong></p>
<p>Enable Micro Engine Scheduler. This is a new hw scheduling engine for gfx, sdma, and compute.
(0 = disabled (default), 1 = enabled)</p>
<p id="mes-kiq-int"><strong>mes_kiq (int)</strong></p>
<p>Enable Micro Engine Scheduler KIQ. This is a new engine pipe for kiq.
(0 = disabled (default), 1 = enabled)</p>
<p id="noretry-int"><strong>noretry (int)</strong></p>
<p>Disable XNACK retry in the SQ by default on GFXv9 hardware. On ASICs that
do not support per-process XNACK this also disables retry page faults.
(0 = retry enabled, 1 = retry disabled, -1 auto (default))</p>
<p id="force-asic-type-int"><strong>force_asic_type (int)</strong></p>
<p>A non negative value used to specify the asic type for all supported GPUs.</p>
<p id="use-xgmi-p2p-int"><strong>use_xgmi_p2p (int)</strong></p>
<p>Enables/disables XGMI P2P interface (0 = disable, 1 = enable).</p>
<p id="sched-policy-int"><strong>sched_policy (int)</strong></p>
<p>Set scheduling policy. Default is HWS(hardware scheduling) with over-subscription.
Setting 1 disables over-subscription. Setting 2 disables HWS and statically
assigns queues to HQDs.</p>
<p id="hws-max-conc-proc-int"><strong>hws_max_conc_proc (int)</strong></p>
<p>Maximum number of processes that HWS can schedule concurrently. The maximum is the
number of VMIDs assigned to the HWS, which is also the default.</p>
<p id="cwsr-enable-int"><strong>cwsr_enable (int)</strong></p>
<p>CWSR(compute wave store and resume) allows the GPU to preempt shader execution in
the middle of a compute wave. Default is 1 to enable this feature. Setting 0
disables it.</p>
<p id="max-num-of-queues-per-device-int"><strong>max_num_of_queues_per_device (int)</strong></p>
<p>Maximum number of queues per device. Valid setting is between 1 and 4096. Default
is 4096.</p>
<p id="send-sigterm-int"><strong>send_sigterm (int)</strong></p>
<p>Send sigterm to HSA process on unhandled exceptions. Default is not to send sigterm
but just print errors on dmesg. Setting 1 enables sending sigterm.</p>
<p id="debug-largebar-int"><strong>debug_largebar (int)</strong></p>
<p>Set debug_largebar as 1 to enable simulating large-bar capability on non-large bar
system. This limits the VRAM size reported to ROCm applications to the visible
size, usually 256MB.
Default value is 0, diabled.</p>
<p id="ignore-crat-int"><strong>ignore_crat (int)</strong></p>
<p>Ignore CRAT table during KFD initialization. By default, KFD uses the ACPI CRAT
table to get information about AMD APUs. This option can serve as a workaround on
systems with a broken CRAT table.</p>
<p>Default is auto (according to asic type, iommu_v2, and crat table, to decide
whether use CRAT)</p>
<p id="halt-if-hws-hang-int"><strong>halt_if_hws_hang (int)</strong></p>
<p>Halt if HWS hang is detected. Default value, 0, disables the halt on hang.
Setting 1 enables halt on hang.</p>
<p id="hws-gws-support-bool"><strong>hws_gws_support(bool)</strong></p>
<p>Assume that HWS supports GWS barriers regardless of what firmware version
check says. Default value: false (rely on MEC2 firmware version check).</p>
<p id="queue-preemption-timeout-ms-int"><strong>queue_preemption_timeout_ms (int)</strong></p>
<p>queue preemption timeout in ms (1 = Minimum, 9000 = default)</p>
<p id="debug-evictions-bool"><strong>debug_evictions(bool)</strong></p>
<p>Enable extra debug messages to help determine the cause of evictions</p>
<p id="no-system-mem-limit-bool"><strong>no_system_mem_limit(bool)</strong></p>
<p>Disable system memory limit, to support multiple process shared memory</p>
<p id="no-queue-eviction-on-vm-fault-int"><strong>no_queue_eviction_on_vm_fault (int)</strong></p>
<p>If set, process queues will not be evicted on gpuvm fault. This is to keep the wavefront context for debugging (0 = queue eviction, 1 = no queue eviction). The default is 0 (queue eviction).</p>
<p id="pcie-p2p-bool"><strong>pcie_p2p (bool)</strong></p>
<p>Enable PCIe P2P (requires large-BAR). Default value: true (on)</p>
<p id="dcfeaturemask-uint"><strong>dcfeaturemask (uint)</strong></p>
<p>Override display features enabled. See enum DC_FEATURE_MASK in drivers/gpu/drm/amd/include/amd_shared.h.
The default is the current set of stable display features.</p>
<p id="dcdebugmask-uint"><strong>dcdebugmask (uint)</strong></p>
<p>Override display features enabled. See enum DC_DEBUG_MASK in drivers/gpu/drm/amd/include/amd_shared.h.</p>
<p id="abmlevel-uint"><strong>abmlevel (uint)</strong></p>
<p>Override the default ABM (Adaptive Backlight Management) level used for DC
enabled hardware. Requires DMCU to be supported and loaded.
Valid levels are 0-4. A value of 0 indicates that ABM should be disabled by
default. Values 1-4 control the maximum allowable brightness reduction via
the ABM algorithm, with 1 being the least reduction and 4 being the most
reduction.</p>
<p>Defaults to 0, or disabled. Userspace can still override this level later
after boot.</p>
<p id="tmz-int"><strong>tmz (int)</strong></p>
<p>Trusted Memory Zone (TMZ) is a method to protect data being written
to or read from memory.</p>
<p>The default value: 0 (off).  TODO: change to auto till it is completed.</p>
<p id="freesync-video-uint"><strong>freesync_video (uint)</strong></p>
<p>Enable the optimization to adjust front porch timing to achieve seamless
mode change experience when setting a freesync supported mode for which full
modeset is not needed.</p>
<p>The Display Core will add a set of modes derived from the base FreeSync
video mode into the corresponding connector’s mode list based on commonly
used refresh rates and VRR range of the connected display, when users enable
this feature. From the userspace perspective, they can see a seamless mode
change experience when the change between different refresh rates under the
same resolution. Additionally, userspace applications such as Video playback
can read this modeset list and change the refresh rate based on the video
frame rate. Finally, the userspace can also derive an appropriate mode for a
particular refresh rate based on the FreeSync Mode and add it to the
connector’s mode list.</p>
<p>Note: This is an experimental feature.</p>
<p>The default value: 0 (off).</p>
<p id="reset-method-int"><strong>reset_method (int)</strong></p>
<p>GPU reset method (-1 = auto (default), 0 = legacy, 1 = mode0, 2 = mode1, 3 = mode2, 4 = baco)</p>
<p id="bad-page-threshold-int-bad-page-threshold-is-specifies-the"><strong>bad_page_threshold (int) Bad page threshold is specifies the</strong></p>
<p>threshold value of faulty pages detected by RAS ECC, which may
result in the GPU entering bad status when the number of total
faulty pages by ECC exceeds the threshold value.</p>
<p id="vcnfw-log-int"><strong>vcnfw_log (int)</strong></p>
<p>Enable vcnfw log output for debugging, the default is disabled.</p>
<p id="smu-pptable-id-int"><strong>smu_pptable_id (int)</strong></p>
<p>Used to override pptable id. id = 0 use VBIOS pptable.
id &gt; 0 use the soft pptable with specicfied id.</p>
<dl class="function">
<dt id="c.amdgpu_drv_delayed_reset_work_handler">
void <code class="sig-name descname">amdgpu_drv_delayed_reset_work_handler</code><span class="sig-paren">(</span>struct work_struct<em> *work</em><span class="sig-paren">)</span><a class="headerlink" href="#c.amdgpu_drv_delayed_reset_work_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>work handler for reset</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">work_struct</span> <span class="pre">*work</span></code></dt><dd><p>work_struct.</p>
</dd>
</dl>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/gpu/amdgpu/module-parameters.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/gpu/amdgpu/module-parameters.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>