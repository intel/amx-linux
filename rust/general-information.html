
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>General Information &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Coding Guidelines" href="coding-guidelines.html" />
    <link rel="prev" title="Quick Start" href="quick-start.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="general-information">
<h1>General Information<a class="headerlink" href="#general-information" title="Permalink to this headline">¶</a></h1>
<p>This document contains useful information to know when working with
the Rust support in the kernel.</p>
<section id="code-documentation">
<h2>Code documentation<a class="headerlink" href="#code-documentation" title="Permalink to this headline">¶</a></h2>
<p>Rust kernel code is documented using <code class="docutils literal notranslate"><span class="pre">rustdoc</span></code>, its built-in documentation
generator.</p>
<p>The generated HTML docs include integrated search, linked items (e.g. types,
functions, constants), source code, etc. They may be read at (TODO: link when
in mainline and generated alongside the rest of the documentation):</p>
<blockquote>
<div><p><a class="reference external" href="http://kernel.org/">http://kernel.org/</a></p>
</div></blockquote>
<p>The docs can also be easily generated and read locally. This is quite fast
(same order as compiling the code itself) and no special tools or environment
are needed. This has the added advantage that they will be tailored to
the particular kernel configuration used. To generate them, use the <code class="docutils literal notranslate"><span class="pre">rustdoc</span></code>
target with the same invocation used for compilation, e.g.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make LLVM=1 rustdoc
</pre></div>
</div>
<p>To read the docs locally in your web browser, run e.g.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>xdg-open rust/doc/kernel/index.html
</pre></div>
</div>
<p>To learn about how to write the documentation, please see <a class="reference internal" href="coding-guidelines.html"><span class="doc">Coding Guidelines</span></a>.</p>
</section>
<section id="extra-lints">
<h2>Extra lints<a class="headerlink" href="#extra-lints" title="Permalink to this headline">¶</a></h2>
<p>While <code class="docutils literal notranslate"><span class="pre">rustc</span></code> is a very helpful compiler, some extra lints and analyses are
available via <code class="docutils literal notranslate"><span class="pre">clippy</span></code>, a Rust linter. To enable it, pass <code class="docutils literal notranslate"><span class="pre">CLIPPY=1</span></code> to
the same invocation used for compilation, e.g.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make LLVM=1 CLIPPY=1
</pre></div>
</div>
<p>Please note that Clippy may change code generation, thus it should not be
enabled while building a production kernel.</p>
</section>
<section id="abstractions-vs-bindings">
<h2>Abstractions vs. bindings<a class="headerlink" href="#abstractions-vs-bindings" title="Permalink to this headline">¶</a></h2>
<p>Abstractions are Rust code wrapping kernel functionality from the C side.</p>
<p>In order to use functions and types from the C side, bindings are created.
Bindings are the declarations for Rust of those functions and types from
the C side.</p>
<p>For instance, one may write a <code class="docutils literal notranslate"><span class="pre">Mutex</span></code> abstraction in Rust which wraps
a <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mutex</span></code> from the C side and calls its functions through the bindings.</p>
<p>Abstractions are not available for all the kernel internal APIs and concepts,
but it is intended that coverage is expanded as time goes on. “Leaf” modules
(e.g. drivers) should not use the C bindings directly. Instead, subsystems
should provide as-safe-as-possible abstractions as needed.</p>
</section>
<section id="conditional-compilation">
<h2>Conditional compilation<a class="headerlink" href="#conditional-compilation" title="Permalink to this headline">¶</a></h2>
<p>Rust code has access to conditional compilation based on the kernel
configuration:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="cp">#[cfg(CONFIG_X)]</span><span class="w">       </span><span class="c1">// Enabled               (`y` or `m`)</span>
<span class="cp">#[cfg(CONFIG_X=</span><span class="s">&quot;y&quot;</span><span class="cp">)]</span><span class="w">   </span><span class="c1">// Enabled as a built-in (`y`)</span>
<span class="cp">#[cfg(CONFIG_X=</span><span class="s">&quot;m&quot;</span><span class="cp">)]</span><span class="w">   </span><span class="c1">// Enabled as a module   (`m`)</span>
<span class="cp">#[cfg(not(CONFIG_X))]</span><span class="w">  </span><span class="c1">// Disabled</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">General Information</a><ul>
<li><a class="reference internal" href="#code-documentation">Code documentation</a></li>
<li><a class="reference internal" href="#extra-lints">Extra lints</a></li>
<li><a class="reference internal" href="#abstractions-vs-bindings">Abstractions vs. bindings</a></li>
<li><a class="reference internal" href="#conditional-compilation">Conditional compilation</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/rust/general-information.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/rust/general-information.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>