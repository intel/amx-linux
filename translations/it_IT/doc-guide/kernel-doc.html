
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Scrivere i commenti in kernel-doc &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Includere gli i file di intestazione uAPI" href="parse-headers.html" />
    <link rel="prev" title="Usare Sphinx per la documentazione del kernel" href="sphinx.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In caso di dubbi sulla correttezza del contenuto di questa traduzione,
l’unico riferimento valido è la documentazione ufficiale in inglese.
Per maggiori informazioni consultate le <a class="reference internal" href="../index.html#it-disclaimer"><span class="std std-ref">avvertenze</span></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Per leggere la documentazione originale in inglese:
<a class="reference internal" href="../../../doc-guide/index.html#doc-guide"><span class="std std-ref">Documentation/doc-guide/index.rst</span></a></p>
</div>
<section id="scrivere-i-commenti-in-kernel-doc">
<span id="it-kernel-doc"></span><h1>Scrivere i commenti in kernel-doc<a class="headerlink" href="#scrivere-i-commenti-in-kernel-doc" title="Permalink to this headline">¶</a></h1>
<p>Nei file sorgenti del kernel Linux potrete trovare commenti di documentazione
strutturanti secondo il formato kernel-doc. Essi possono descrivere funzioni,
tipi di dati, e l’architettura del codice.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il formato kernel-doc può sembrare simile a gtk-doc o Doxygen ma
in realtà è molto differente per ragioni storiche. I sorgenti del kernel
contengono decine di migliaia di commenti kernel-doc. Siete pregati
d’attenervi allo stile qui descritto.</p>
</div>
<p>La struttura kernel-doc è estratta a partire dai commenti; da questi viene
generato il <a class="reference external" href="http://www.sphinx-doc.org/en/stable/domains.html">dominio Sphinx per il C</a> con un’adeguata descrizione per le
funzioni ed i tipi di dato con i loro relativi collegamenti. Le descrizioni
vengono filtrare per cercare i riferimenti ed i marcatori.</p>
<p>Vedere di seguito per maggiori dettagli.</p>
<p>Tutte le funzioni esportate verso i moduli esterni utilizzando
<code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL</span></code> o <code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL_GPL</span></code> dovrebbero avere un commento
kernel-doc. Quando l’intenzione è di utilizzarle nei moduli, anche le funzioni
e le strutture dati nei file d’intestazione dovrebbero avere dei commenti
kernel-doc.</p>
<p>È considerata una buona pratica quella di fornire una documentazione formattata
secondo kernel-doc per le funzioni che sono visibili da altri file del kernel
(ovvero, che non siano dichiarate utilizzando <code class="docutils literal notranslate"><span class="pre">static</span></code>). Raccomandiamo,
inoltre, di fornire una documentazione kernel-doc anche per procedure private
(ovvero, dichiarate “static”) al fine di fornire una struttura più coerente
dei sorgenti. Quest’ultima raccomandazione ha una priorità più bassa ed è a
discrezione dal manutentore (MAINTAINER) del file sorgente.</p>
<p>Sicuramente la documentazione formattata con kernel-doc è necessaria per
le funzioni che sono esportate verso i moduli esterni utilizzando
<code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL</span></code> o <code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL_GPL</span></code>.</p>
<p>Cerchiamo anche di fornire una documentazione formattata secondo kernel-doc
per le funzioni che sono visibili da altri file del kernel (ovvero, che non
siano dichiarate utilizzando “static”)</p>
<p>Raccomandiamo, inoltre, di fornire una documentazione formattata con kernel-doc
anche per procedure private (ovvero, dichiarate “static”) al fine di fornire
una struttura più coerente dei sorgenti. Questa raccomandazione ha una priorità
più bassa ed è a discrezione dal manutentore (MAINTAINER) del file sorgente.</p>
<p>Le strutture dati visibili nei file di intestazione dovrebbero essere anch’esse
documentate utilizzando commenti formattati con kernel-doc.</p>
<section id="come-formattare-i-commenti-kernel-doc">
<h2>Come formattare i commenti kernel-doc<a class="headerlink" href="#come-formattare-i-commenti-kernel-doc" title="Permalink to this headline">¶</a></h2>
<p>I commenti kernel-doc iniziano con il marcatore <code class="docutils literal notranslate"><span class="pre">/**</span></code>. Il programma
<code class="docutils literal notranslate"><span class="pre">kernel-doc</span></code> estrarrà i commenti marchiati in questo modo. Il resto
del commento è formattato come un normale commento multilinea, ovvero
con un asterisco all’inizio d’ogni riga e che si conclude con <code class="docutils literal notranslate"><span class="pre">*/</span></code>
su una riga separata.</p>
<p>I commenti kernel-doc di funzioni e tipi dovrebbero essere posizionati
appena sopra la funzione od il tipo che descrivono. Questo allo scopo di
aumentare la probabilità che chi cambia il codice si ricordi di aggiornare
anche la documentazione. I commenti kernel-doc di tipo più generale possono
essere posizionati ovunque nel file.</p>
<p>Al fine di verificare che i commenti siano formattati correttamente, potete
eseguire il programma <code class="docutils literal notranslate"><span class="pre">kernel-doc</span></code> con un livello di verbosità alto e senza
che questo produca alcuna documentazione. Per esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scripts/kernel-doc -v -none drivers/foo/bar.c
</pre></div>
</div>
<p>Il formato della documentazione è verificato della procedura di generazione
del kernel quando viene richiesto di effettuare dei controlli extra con GCC:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make W=n
</pre></div>
</div>
</section>
<section id="documentare-le-funzioni">
<h2>Documentare le funzioni<a class="headerlink" href="#documentare-le-funzioni" title="Permalink to this headline">¶</a></h2>
<p>Generalmente il formato di un commento kernel-doc per funzioni e
macro simil-funzioni è il seguente:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * function_name() - Brief description of function.
 * @arg1: Describe the first argument.
 * @arg2: Describe the second argument.
 *        One can provide multiple line descriptions
 *        for arguments.
 *
 * A longer description, with more discussion of the function function_name()
 * that might be useful to those using or modifying it. Begins with an
 * empty comment line, and may include additional embedded empty
 * comment lines.
 *
 * The longer description may have multiple paragraphs.
 *
 * Context: Describes whether the function can sleep, what locks it takes,
 *          releases, or expects to be held. It can extend over multiple
 *          lines.
 * Return: Describe the return value of function_name.
 *
 * The return value description can also have multiple paragraphs, and should
 * be placed at the end of the comment block.
 */
</pre></div>
</div>
<p>La descrizione introduttiva (<em>brief description</em>) che segue il nome della
funzione può continuare su righe successive e termina con la descrizione di
un argomento, una linea di commento vuota, oppure la fine del commento.</p>
<section id="parametri-delle-funzioni">
<h3>Parametri delle funzioni<a class="headerlink" href="#parametri-delle-funzioni" title="Permalink to this headline">¶</a></h3>
<p>Ogni argomento di una funzione dovrebbe essere descritto in ordine, subito
dopo la descrizione introduttiva.  Non lasciare righe vuote né fra la
descrizione introduttiva e quella degli argomenti, né fra gli argomenti.</p>
<p>Ogni <code class="docutils literal notranslate"><span class="pre">&#64;argument:</span></code> può estendersi su più righe.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Se la descrizione di <code class="docutils literal notranslate"><span class="pre">&#64;argument:</span></code> si estende su più righe,
la continuazione dovrebbe iniziare alla stessa colonna della riga
precedente:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>* @argument: some long description
*            that continues on next lines
</pre></div>
</div>
<p>or:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>* @argument:
*         some long description
*         that continues on next lines
</pre></div>
</div>
</div>
<p>Se una funzione ha un numero variabile di argomento, la sua descrizione
dovrebbe essere scritta con la notazione kernel-doc:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>* @...: description
</pre></div>
</div>
</section>
<section id="contesto-delle-funzioni">
<h3>Contesto delle funzioni<a class="headerlink" href="#contesto-delle-funzioni" title="Permalink to this headline">¶</a></h3>
<p>Il contesto in cui le funzioni vengono chiamate viene descritto in una
sezione chiamata <code class="docutils literal notranslate"><span class="pre">Context</span></code>. Questo dovrebbe informare sulla possibilità
che una funzione dorma (<em>sleep</em>) o che possa essere chiamata in un contesto
d’interruzione, così come i <em>lock</em> che prende, rilascia e che si aspetta che
vengano presi dal chiamante.</p>
<p>Esempi:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>* Context: Any context.
* Context: Any context. Takes and releases the RCU lock.
* Context: Any context. Expects &lt;lock&gt; to be held by caller.
* Context: Process context. May sleep if @gfp flags permit.
* Context: Process context. Takes and releases &lt;mutex&gt;.
* Context: Softirq or process context. Takes and releases &lt;lock&gt;, BH-safe.
* Context: Interrupt context.
</pre></div>
</div>
</section>
<section id="valore-di-ritorno">
<h3>Valore di ritorno<a class="headerlink" href="#valore-di-ritorno" title="Permalink to this headline">¶</a></h3>
<p>Il valore di ritorno, se c’è, viene descritto in una sezione dedicata di nome
<code class="docutils literal notranslate"><span class="pre">Return</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic">
<li><p>La descrizione multiriga non riconosce il termine d’una riga, per cui
se provate a formattare bene il vostro testo come nel seguente esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>* Return:
* 0 - OK
* -EINVAL - invalid argument
* -ENOMEM - out of memory
</pre></div>
</div>
<p>le righe verranno unite e il risultato sarà:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Return: 0 - OK -EINVAL - invalid argument -ENOMEM - out of memory
</pre></div>
</div>
<p>Quindi, se volete che le righe vengano effettivamente generate, dovete
utilizzare una lista ReST, ad esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>* Return:
* * 0             - OK to runtime suspend the device
* * -EBUSY        - Device should not be runtime suspended
</pre></div>
</div>
</li>
<li><p>Se il vostro testo ha delle righe che iniziano con una frase seguita dai
due punti, allora ognuna di queste frasi verrà considerata come il nome
di una nuova sezione, e probabilmente non produrrà gli effetti desiderati.</p></li>
</ol>
</div>
</section>
</section>
<section id="documentare-strutture-unioni-ed-enumerazioni">
<h2>Documentare strutture, unioni ed enumerazioni<a class="headerlink" href="#documentare-strutture-unioni-ed-enumerazioni" title="Permalink to this headline">¶</a></h2>
<p>Generalmente il formato di un commento kernel-doc per struct, <a class="reference internal" href="../../../networking/ieee802154.html#c.ed" title="ed"><code class="xref c c-type docutils literal notranslate"><span class="pre">union</span> <span class="pre">ed</span></code></a> enum è:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * struct struct_name - Brief description.
 * @member1: Description of member1.
 * @member2: Description of member2.
 *           One can provide multiple line descriptions
 *           for members.
 *
 * Description of the structure.
 */
</pre></div>
</div>
<p>Nell’esempio qui sopra, potete sostituire <code class="docutils literal notranslate"><span class="pre">struct</span></code> con <code class="docutils literal notranslate"><span class="pre">union</span></code> o <code class="docutils literal notranslate"><span class="pre">enum</span></code>
per descrivere unioni ed enumerati. <code class="docutils literal notranslate"><span class="pre">member</span></code> viene usato per indicare i
membri di strutture ed unioni, ma anche i valori di un tipo enumerato.</p>
<p>La descrizione introduttiva (<em>brief description</em>) che segue il nome della
funzione può continuare su righe successive e termina con la descrizione di
un argomento, una linea di commento vuota, oppure la fine del commento.</p>
<section id="membri">
<h3>Membri<a class="headerlink" href="#membri" title="Permalink to this headline">¶</a></h3>
<p>I membri di strutture, unioni ed enumerati devo essere documentati come i
parametri delle funzioni; seguono la descrizione introduttiva e possono
estendersi su più righe.</p>
<p>All’interno d’una struttura o d’un unione, potete utilizzare le etichette
<code class="docutils literal notranslate"><span class="pre">private:</span></code> e <code class="docutils literal notranslate"><span class="pre">public:</span></code>. I campi che sono nell’area <code class="docutils literal notranslate"><span class="pre">private:</span></code> non
verranno inclusi nella documentazione finale.</p>
<p>Le etichette <code class="docutils literal notranslate"><span class="pre">private:</span></code> e <code class="docutils literal notranslate"><span class="pre">public:</span></code> devono essere messe subito dopo
il marcatore di un commento <code class="docutils literal notranslate"><span class="pre">/*</span></code>. Opzionalmente, possono includere commenti
fra <code class="docutils literal notranslate"><span class="pre">:</span></code> e il marcatore di fine commento <code class="docutils literal notranslate"><span class="pre">*/</span></code>.</p>
<p>Esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * struct my_struct - short description
 * @a: first member
 * @b: second member
 * @d: fourth member
 *
 * Longer description
 */
struct my_struct {
    int a;
    int b;
/* private: internal use only */
    int c;
/* public: the next one is public */
    int d;
};
</pre></div>
</div>
</section>
<section id="strutture-ed-unioni-annidate">
<h3>Strutture ed unioni annidate<a class="headerlink" href="#strutture-ed-unioni-annidate" title="Permalink to this headline">¶</a></h3>
<p>È possibile documentare strutture ed unioni annidate, ad esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * struct nested_foobar - a struct with nested unions and structs
 * @memb1: first member of anonymous union/anonymous struct
 * @memb2: second member of anonymous union/anonymous struct
 * @memb3: third member of anonymous union/anonymous struct
 * @memb4: fourth member of anonymous union/anonymous struct
 * @bar: non-anonymous union
 * @bar.st1: struct st1 inside @bar
 * @bar.st2: struct st2 inside @bar
 * @bar.st1.memb1: first member of struct st1 on union bar
 * @bar.st1.memb2: second member of struct st1 on union bar
 * @bar.st2.memb1: first member of struct st2 on union bar
 * @bar.st2.memb2: second member of struct st2 on union bar
 */
struct nested_foobar {
  /* Anonymous union/struct*/
  union {
    struct {
      int memb1;
      int memb2;
  }
    struct {
      void *memb3;
      int memb4;
    }
  }
  union {
    struct {
      int memb1;
      int memb2;
    } st1;
    struct {
      void *memb1;
      int memb2;
    } st2;
  } bar;
};
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Quando documentate una struttura od unione annidata, ad esempio
di nome <code class="docutils literal notranslate"><span class="pre">foo</span></code>, il suo campo <code class="docutils literal notranslate"><span class="pre">bar</span></code> dev’essere documentato
usando <code class="docutils literal notranslate"><span class="pre">&#64;foo.bar:</span></code></p></li>
<li><p>Quando la struttura od unione annidata è anonima, il suo campo
<code class="docutils literal notranslate"><span class="pre">bar</span></code> dev’essere documentato usando <code class="docutils literal notranslate"><span class="pre">&#64;bar:</span></code></p></li>
</ol>
</div>
</section>
<section id="commenti-in-linea-per-la-documentazione-dei-membri">
<h3>Commenti in linea per la documentazione dei membri<a class="headerlink" href="#commenti-in-linea-per-la-documentazione-dei-membri" title="Permalink to this headline">¶</a></h3>
<p>I membri d’una struttura possono essere documentati in linea all’interno
della definizione stessa. Ci sono due stili: una singola riga di commento
che inizia con <code class="docutils literal notranslate"><span class="pre">/**</span></code> e finisce con <code class="docutils literal notranslate"><span class="pre">*/</span></code>; commenti multi riga come
qualsiasi altro commento kernel-doc:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * struct foo - Brief description.
 * @foo: The Foo member.
 */
struct foo {
      int foo;
      /**
       * @bar: The Bar member.
       */
      int bar;
      /**
       * @baz: The Baz member.
       *
       * Here, the member description may contain several paragraphs.
       */
      int baz;
      union {
              /** @foobar: Single line description. */
              int foobar;
      };
      /** @bar2: Description for struct @bar2 inside @foo */
      struct {
              /**
               * @bar2.barbar: Description for @barbar inside @foo.bar2
               */
              int barbar;
      } bar2;
};
</pre></div>
</div>
</section>
</section>
<section id="documentazione-dei-tipi-di-dato">
<h2>Documentazione dei tipi di dato<a class="headerlink" href="#documentazione-dei-tipi-di-dato" title="Permalink to this headline">¶</a></h2>
<p>Generalmente il formato di un commento kernel-doc per typedef è
il seguente:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * typedef type_name - Brief description.
 *
 * Description of the type.
 */
</pre></div>
</div>
<p>Anche i tipi di dato per prototipi di funzione possono essere documentati:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * typedef type_name - Brief description.
 * @arg1: description of arg1
 * @arg2: description of arg2
 *
 * Description of the type.
 *
 * Context: Locking context.
 * Return: Meaning of the return value.
 */
 typedef void (*type_name)(struct v4l2_ctrl *arg1, void *arg2);
</pre></div>
</div>
</section>
<section id="marcatori-e-riferimenti">
<h2>Marcatori e riferimenti<a class="headerlink" href="#marcatori-e-riferimenti" title="Permalink to this headline">¶</a></h2>
<p>All’interno dei commenti di tipo kernel-doc vengono riconosciuti i seguenti
<em>pattern</em> che vengono convertiti in marcatori reStructuredText ed in riferimenti
del <a class="reference external" href="http://www.sphinx-doc.org/en/stable/domains.html">dominio Sphinx per il C</a>.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Questi sono riconosciuti <strong>solo</strong> all’interno di commenti
kernel-doc, e <strong>non</strong> all’interno di documenti reStructuredText.</p>
</div>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">funcname()</span></code></dt><dd><p>Riferimento ad una funzione.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&#64;parameter</span></code></dt><dd><p>Nome di un parametro di una funzione (nessun riferimento, solo formattazione).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">%CONST</span></code></dt><dd><p>Il nome di una costante (nessun riferimento, solo formattazione)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">``literal``</span></code></dt><dd><p>Un blocco di testo che deve essere riportato così com’è. La rappresentazione
finale utilizzerà caratteri a <code class="docutils literal notranslate"><span class="pre">spaziatura</span> <span class="pre">fissa</span></code>.</p>
<p>Questo è utile se dovete utilizzare caratteri speciali che altrimenti
potrebbero assumere un significato diverso in kernel-doc o in reStructuredText</p>
<p>Questo è particolarmente utile se dovete scrivere qualcosa come <code class="docutils literal notranslate"><span class="pre">%ph</span></code>
all’interno della descrizione di una funzione.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">$ENVVAR</span></code></dt><dd><p>Il nome di una variabile d’ambiente (nessun riferimento, solo formattazione).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;struct</span> <span class="pre">name</span></code></dt><dd><p>Riferimento ad una struttura.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;enum</span> <span class="pre">name</span></code></dt><dd><p>Riferimento ad un’enumerazione.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;typedef</span> <span class="pre">name</span></code></dt><dd><p>Riferimento ad un tipo di dato.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;struct_name-&gt;member</span></code> or <code class="docutils literal notranslate"><span class="pre">&amp;struct_name.member</span></code></dt><dd><p>Riferimento ad un membro di una struttura o di un’unione. Il riferimento sarà
la struttura o l’unione, non il memembro.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&amp;name</span></code></dt><dd><p>Un generico riferimento ad un tipo. Usate, preferibilmente, il riferimento
completo come descritto sopra. Questo è dedicato ai commenti obsoleti.</p>
</dd>
</dl>
<section id="riferimenti-usando-restructuredtext">
<h3>Riferimenti usando reStructuredText<a class="headerlink" href="#riferimenti-usando-restructuredtext" title="Permalink to this headline">¶</a></h3>
<p>Nei documenti reStructuredText non serve alcuna sintassi speciale per
fare riferimento a funzioni e tipi definiti nei commenti
kernel-doc. Sarà sufficiente terminare i nomi di funzione con <code class="docutils literal notranslate"><span class="pre">()</span></code>,
e scrivere <code class="docutils literal notranslate"><span class="pre">struct</span></code>, <code class="docutils literal notranslate"><span class="pre">union</span></code>, <code class="docutils literal notranslate"><span class="pre">enum</span></code>, o <code class="docutils literal notranslate"><span class="pre">typedef</span></code> prima di un
tipo. Per esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>See foo()
See struct foo.
See union bar.
See enum baz.
See typedef meh.
</pre></div>
</div>
<p>Tuttavia, la personalizzazione dei collegamenti è possibile solo con
la seguente sintassi:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>See :c:func:`my custom link text for function foo &lt;foo&gt;`.
See :c:type:`my custom link text for struct bar &lt;bar&gt;`.
</pre></div>
</div>
</section>
</section>
<section id="commenti-per-una-documentazione-generale">
<h2>Commenti per una documentazione generale<a class="headerlink" href="#commenti-per-una-documentazione-generale" title="Permalink to this headline">¶</a></h2>
<p>Al fine d’avere il codice ed i commenti nello stesso file, potete includere
dei blocchi di documentazione kernel-doc con un formato libero invece
che nel formato specifico per funzioni, strutture, unioni, enumerati o tipi
di dato. Per esempio, questo tipo di commento potrebbe essere usato per la
spiegazione delle operazioni di un driver o di una libreria</p>
<p>Questo s’ottiene utilizzando la parola chiave <code class="docutils literal notranslate"><span class="pre">DOC:</span></code> a cui viene associato
un titolo.</p>
<p>Generalmente il formato di un commento generico o di visione d’insieme è
il seguente:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * DOC: Theory of Operation
 *
 * The whizbang foobar is a dilly of a gizmo. It can do whatever you
 * want it to do, at any time. It reads your mind. Here&#39;s how it works.
 *
 * foo bar splat
 *
 * The only drawback to this gizmo is that is can sometimes damage
 * hardware, software, or its subject(s).
 */
</pre></div>
</div>
<p>Il titolo che segue <code class="docutils literal notranslate"><span class="pre">DOC:</span></code> funziona da intestazione all’interno del file
sorgente, ma anche come identificatore per l’estrazione di questi commenti di
documentazione. Quindi, il titolo dev’essere unico all’interno del file.</p>
</section>
</section>
<section id="includere-i-commenti-di-tipo-kernel-doc">
<h1>Includere i commenti di tipo kernel-doc<a class="headerlink" href="#includere-i-commenti-di-tipo-kernel-doc" title="Permalink to this headline">¶</a></h1>
<p>I commenti di documentazione possono essere inclusi in un qualsiasi documento
di tipo reStructuredText mediante l’apposita direttiva nell’estensione
kernel-doc per Sphinx.</p>
<p>Le direttive kernel-doc sono nel formato:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-doc:: source
   :option:
</pre></div>
</div>
<p>Il campo <em>source</em> è il percorso ad un file sorgente, relativo alla cartella
principale dei sorgenti del kernel. La direttiva supporta le seguenti opzioni:</p>
<dl>
<dt>export: <em>[source-pattern …]</em></dt><dd><p>Include la documentazione per tutte le funzioni presenti nel file sorgente
(<em>source</em>) che sono state esportate utilizzando <code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL</span></code> o
<code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL_GPL</span></code> in <em>source</em> o in qualsiasi altro <em>source-pattern</em>
specificato.</p>
<p>Il campo <em>source-patter</em> è utile quando i commenti kernel-doc sono stati
scritti nei file d’intestazione, mentre <code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL</span></code> e
<code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL_GPL</span></code> si trovano vicino alla definizione delle funzioni.</p>
<p>Esempi:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-doc:: lib/bitmap.c
   :export:

.. kernel-doc:: include/net/mac80211.h
   :export: net/mac80211/*.c
</pre></div>
</div>
</dd>
<dt>internal: <em>[source-pattern …]</em></dt><dd><p>Include la documentazione per tutte le funzioni ed i tipi presenti nel file
sorgente (<em>source</em>) che <strong>non</strong> sono stati esportati utilizzando
<code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL</span></code> o <code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL_GPL</span></code> né in <em>source</em> né in qualsiasi
altro <em>source-pattern</em> specificato.</p>
<p>Esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-doc:: drivers/gpu/drm/i915/intel_audio.c
   :internal:
</pre></div>
</div>
</dd>
<dt>identifiers: <em>[ function/type …]</em></dt><dd><p>Include la documentazione per ogni <em>function</em> e <em>type</em>  in <em>source</em>.
Se non vengono esplicitamente specificate le funzioni da includere, allora
verranno incluse tutte quelle disponibili in <em>source</em>.</p>
<p>Esempi:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-doc:: lib/bitmap.c
   :identifiers: bitmap_parselist bitmap_parselist_user

.. kernel-doc:: lib/idr.c
   :identifiers:
</pre></div>
</div>
</dd>
<dt>functions: <em>[ function …]</em></dt><dd><p>Questo è uno pseudonimo, deprecato, per la direttiva ‘identifiers’.</p>
</dd>
<dt>doc: <em>title</em></dt><dd><p>Include la documentazione del paragrafo <code class="docutils literal notranslate"><span class="pre">DOC:</span></code> identificato dal titolo
(<em>title</em>) all’interno del file sorgente (<em>source</em>). Gli spazi in <em>title</em> sono
permessi; non virgolettate <em>title</em>. Il campo <em>title</em> è utilizzato per
identificare un paragrafo e per questo non viene incluso nella documentazione
finale. Verificate d’avere l’intestazione appropriata nei documenti
reStructuredText.</p>
<p>Esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-doc:: drivers/gpu/drm/i915/intel_audio.c
   :doc: High Definition Audio over HDMI and Display Port
</pre></div>
</div>
</dd>
</dl>
<p>Senza alcuna opzione, la direttiva kernel-doc include tutti i commenti di
documentazione presenti nel file sorgente (<em>source</em>).</p>
<p>L’estensione kernel-doc fa parte dei sorgenti del kernel, la si può trovare
in <code class="docutils literal notranslate"><span class="pre">Documentation/sphinx/kerneldoc.py</span></code>. Internamente, viene utilizzato
lo script <code class="docutils literal notranslate"><span class="pre">scripts/kernel-doc</span></code> per estrarre i commenti di documentazione
dai file sorgenti.</p>
<section id="come-utilizzare-kernel-doc-per-generare-pagine-man">
<h2>Come utilizzare kernel-doc per generare pagine man<a class="headerlink" href="#come-utilizzare-kernel-doc-per-generare-pagine-man" title="Permalink to this headline">¶</a></h2>
<p>Se volete utilizzare kernel-doc solo per generare delle pagine man, potete
farlo direttamente dai sorgenti del kernel:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ scripts/kernel-doc -man $(git grep -l &#39;/\*\*&#39; -- :^Documentation :^tools) | scripts/split-man.pl /tmp/man
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Scrivere i commenti in kernel-doc</a><ul>
<li><a class="reference internal" href="#come-formattare-i-commenti-kernel-doc">Come formattare i commenti kernel-doc</a></li>
<li><a class="reference internal" href="#documentare-le-funzioni">Documentare le funzioni</a><ul>
<li><a class="reference internal" href="#parametri-delle-funzioni">Parametri delle funzioni</a></li>
<li><a class="reference internal" href="#contesto-delle-funzioni">Contesto delle funzioni</a></li>
<li><a class="reference internal" href="#valore-di-ritorno">Valore di ritorno</a></li>
</ul>
</li>
<li><a class="reference internal" href="#documentare-strutture-unioni-ed-enumerazioni">Documentare strutture, unioni ed enumerazioni</a><ul>
<li><a class="reference internal" href="#membri">Membri</a></li>
<li><a class="reference internal" href="#strutture-ed-unioni-annidate">Strutture ed unioni annidate</a></li>
<li><a class="reference internal" href="#commenti-in-linea-per-la-documentazione-dei-membri">Commenti in linea per la documentazione dei membri</a></li>
</ul>
</li>
<li><a class="reference internal" href="#documentazione-dei-tipi-di-dato">Documentazione dei tipi di dato</a></li>
<li><a class="reference internal" href="#marcatori-e-riferimenti">Marcatori e riferimenti</a><ul>
<li><a class="reference internal" href="#riferimenti-usando-restructuredtext">Riferimenti usando reStructuredText</a></li>
</ul>
</li>
<li><a class="reference internal" href="#commenti-per-una-documentazione-generale">Commenti per una documentazione generale</a></li>
</ul>
</li>
<li><a class="reference internal" href="#includere-i-commenti-di-tipo-kernel-doc">Includere i commenti di tipo kernel-doc</a><ul>
<li><a class="reference internal" href="#come-utilizzare-kernel-doc-per-generare-pagine-man">Come utilizzare kernel-doc per generare pagine man</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/translations/it_IT/doc-guide/kernel-doc.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/translations/it_IT/doc-guide/kernel-doc.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>