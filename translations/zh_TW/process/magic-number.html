
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Linux 魔術數 &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="爲什麼不應該使用「volatile」類型" href="volatile-considered-harmful.html" />
    <link rel="prev" title="被限制的硬體問題" href="embargoed-hardware-issues.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>此文件的目的是爲讓中文讀者更容易閱讀和理解，而不是作爲一個分支。因此，
如果您對此文件有任何意見或改動，請先嘗試更新原始英文文件。如果要更改或
修正某處翻譯文件，請將意見或補丁發送給維護者（聯繫方式見下）。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>如果您發現本文檔與原始文件有任何不同或者有翻譯問題，請聯繫該文件的譯者，
或者發送電子郵件給胡皓文以獲取幫助：&lt;<a class="reference external" href="mailto:src&#46;res&#37;&#52;&#48;email&#46;cn">src<span>&#46;</span>res<span>&#64;</span>email<span>&#46;</span>cn</a>&gt;。</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Original</dt>
<dd class="field-odd"><p><a class="reference internal" href="../../../process/magic-number.html#magicnumbers"><span class="std std-ref">Documentation/process/magic-number.rst</span></a></p>
</dd>
</dl>
<p>如果想評論或更新本文的內容，請直接發信到LKML。如果你使用英文交流有困難的話，也可
以向中文版維護者求助。如果本翻譯更新不及時或者翻譯存在問題，請聯繫中文版維護者:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>中文版維護者： 賈威威 Jia Wei Wei &lt;harryxiyou@gmail.com&gt;
中文版翻譯者： 賈威威 Jia Wei Wei &lt;harryxiyou@gmail.com&gt;
中文版校譯者： 賈威威 Jia Wei Wei &lt;harryxiyou@gmail.com&gt;
              胡皓文 Hu Haowen &lt;src.res@email.cn&gt;
</pre></div>
</div>
<section id="linux">
<h1>Linux 魔術數<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h1>
<p>這個文件是有關當前使用的魔術值註冊表。當你給一個結構添加了一個魔術值，你也應該把這個魔術值添加到這個文件，因爲我們最好把用於各種結構的魔術值統一起來。</p>
<p>使用魔術值來保護內核數據結構是一個非常好的主意。這就允許你在運行期檢查(a)一個結構是否已經被攻擊，或者(b)你已經給一個例行程序通過了一個錯誤的結構。後一種情況特別地有用—特別是當你通過一個空指針指向結構體的時候。tty源碼，例如，經常通過特定驅動使用這種方法並且反覆地排列特定方面的結構。</p>
<p>使用魔術值的方法是在結構的開始處聲明的，如下:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct tty_ldisc {
        int     magic;
        ...
};
</pre></div>
</div>
<p>當你以後給內核添加增強功能的時候，請遵守這條規則！這樣就會節省數不清的調試時間，特別是一些古怪的情況，例如，數組超出範圍並且重新寫了超出部分。遵守這個規則，‪這些情況可以被快速地，安全地避免。</p>
<blockquote>
<div><dl class="simple">
<dt>Theodore Ts’o</dt><dd><p>31 Mar 94</p>
</dd>
</dl>
</div></blockquote>
<p>給當前的Linux 2.1.55添加魔術表。</p>
<blockquote>
<div><p>Michael Chastain
&lt;<a class="reference external" href="mailto:mec&#37;&#52;&#48;shout&#46;net">mailto:mec<span>&#64;</span>shout<span>&#46;</span>net</a>&gt;
22 Sep 1997</p>
</div></blockquote>
<p>現在應該最新的Linux 2.1.112.因爲在特性凍結期間，不能在2.2.x前改變任何東西。這些條目被數域所排序。</p>
<blockquote>
<div><p>Krzysztof G.Baranowski
&lt;mailto: <a class="reference external" href="mailto:kgb&#37;&#52;&#48;knm&#46;org&#46;pl">kgb<span>&#64;</span>knm<span>&#46;</span>org<span>&#46;</span>pl</a>&gt;
29 Jul 1998</p>
</div></blockquote>
<p>更新魔術表到Linux 2.5.45。剛好越過特性凍結，但是有可能還會有一些新的魔術值在2.6.x之前融入到內核中。</p>
<blockquote>
<div><p>Petr Baudis
&lt;<a class="reference external" href="mailto:pasky&#37;&#52;&#48;ucw&#46;cz">pasky<span>&#64;</span>ucw<span>&#46;</span>cz</a>&gt;
03 Nov 2002</p>
</div></blockquote>
<p>更新魔術表到Linux 2.5.74。</p>
<blockquote>
<div><p>Fabian Frederick
&lt;<a class="reference external" href="mailto:ffrederick&#37;&#52;&#48;users&#46;sourceforge&#46;net">ffrederick<span>&#64;</span>users<span>&#46;</span>sourceforge<span>&#46;</span>net</a>&gt;
09 Jul 2003</p>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 16%" />
<col style="width: 23%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>魔術數名</p></th>
<th class="head"><p>數字</p></th>
<th class="head"><p>結構</p></th>
<th class="head"><p>文件</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PG_MAGIC</p></td>
<td><p>‘P’</p></td>
<td><p>pg_{read,write}_hdr</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">include/linux/pg.h</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>APM_BIOS_MAGIC</p></td>
<td><p>0x4101</p></td>
<td><p>apm_user</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">arch/x86/kernel/apm_32.c</span></code></p></td>
</tr>
<tr class="row-even"><td><p>FASYNC_MAGIC</p></td>
<td><p>0x4601</p></td>
<td><p>fasync_struct</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">include/linux/fs.h</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>SLIP_MAGIC</p></td>
<td><p>0x5302</p></td>
<td><p>slip</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drivers/net/slip.h</span></code></p></td>
</tr>
<tr class="row-even"><td><p>MGSLPC_MAGIC</p></td>
<td><p>0x5402</p></td>
<td><p>mgslpc_info</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drivers/char/pcmcia/synclink_cs.c</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>BAYCOM_MAGIC</p></td>
<td><p>0x19730510</p></td>
<td><p>baycom_state</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drivers/net/baycom_epp.c</span></code></p></td>
</tr>
<tr class="row-even"><td><p>HDLCDRV_MAGIC</p></td>
<td><p>0x5ac6e778</p></td>
<td><p>hdlcdrv_state</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">include/linux/hdlcdrv.h</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>KV_MAGIC</p></td>
<td><p>0x5f4b565f</p></td>
<td><p>kernel_vars_s</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">arch/mips/include/asm/sn/klkernvars.h</span></code></p></td>
</tr>
<tr class="row-even"><td><p>CODA_MAGIC</p></td>
<td><p>0xC0DAC0DA</p></td>
<td><p>coda_file_info</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fs/coda/coda_fs_i.h</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>YAM_MAGIC</p></td>
<td><p>0xF10A7654</p></td>
<td><p>yam_port</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drivers/net/hamradio/yam.c</span></code></p></td>
</tr>
<tr class="row-even"><td><p>CCB_MAGIC</p></td>
<td><p>0xf2691ad2</p></td>
<td><p>ccb</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drivers/scsi/ncr53c8xx.c</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>QUEUE_MAGIC_FREE</p></td>
<td><p>0xf7e1c9a3</p></td>
<td><p>queue_entry</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drivers/scsi/arm/queue.c</span></code></p></td>
</tr>
<tr class="row-even"><td><p>QUEUE_MAGIC_USED</p></td>
<td><p>0xf7e1cc33</p></td>
<td><p>queue_entry</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drivers/scsi/arm/queue.c</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>NMI_MAGIC</p></td>
<td><p>0x48414d4d455201</p></td>
<td><p>nmi_s</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">arch/mips/include/asm/sn/nmi.h</span></code></p></td>
</tr>
</tbody>
</table>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/translations/zh_TW/process/magic-number.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/translations/zh_TW/process/magic-number.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>