
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>What is matroxfb? &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Metronomefb" href="metronomefb.html" />
    <link rel="prev" title="What is lxfb?" href="lxfb.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="what-is-matroxfb">
<h1>What is matroxfb?<a class="headerlink" href="#what-is-matroxfb" title="Permalink to this headline">¶</a></h1>
<p>This is a driver for a graphic framebuffer for Matrox devices on
Alpha, Intel and PPC boxes.</p>
<p>Advantages:</p>
<blockquote>
<div><ul class="simple">
<li><p>It provides a nice large console (128 cols + 48 lines with 1024x768)
without using tiny, unreadable fonts.</p></li>
<li><p>You can run XF{68,86}_FBDev or XFree86 fbdev driver on top of /dev/fb0</p></li>
<li><p>Most important: boot logo :-)</p></li>
</ul>
</div></blockquote>
<p>Disadvantages:</p>
<blockquote>
<div><ul class="simple">
<li><p>graphic mode is slower than text mode… but you should not notice
if you use same resolution as you used in textmode.</p></li>
</ul>
</div></blockquote>
<section id="how-to-use-it">
<h2>How to use it?<a class="headerlink" href="#how-to-use-it" title="Permalink to this headline">¶</a></h2>
<p>Switching modes is done using the video=matroxfb:vesa:… boot parameter
or using <cite>fbset</cite> program.</p>
<p>If you want, for example, enable a resolution of 1280x1024x24bpp you should
pass to the kernel this command line: “video=matroxfb:vesa:0x1BB”.</p>
<p>You should compile in both vgacon (to boot if you remove you Matrox from
box) and matroxfb (for graphics mode). You should not compile-in vesafb
unless you have primary display on non-Matrox VBE2.0 device (see
<a class="reference internal" href="vesafb.html"><span class="doc">What is vesafb?</span></a> for details).</p>
<p>Currently supported video modes are (through vesa:… interface, PowerMac
has [as addon] compatibility code):</p>
<section id="graphic-modes">
<h3>Graphic modes<a class="headerlink" href="#graphic-modes" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>bpp</p></th>
<th class="head"><p>640x400</p></th>
<th class="head"><p>640x480</p></th>
<th class="head"><p>768x576</p></th>
<th class="head"><p>800x600</p></th>
<th class="head"><p>960x720</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>4</p></td>
<td></td>
<td><p>0x12</p></td>
<td></td>
<td><p>0x102</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>0x100</p></td>
<td><p>0x101</p></td>
<td><p>0x180</p></td>
<td><p>0x103</p></td>
<td><p>0x188</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td></td>
<td><p>0x110</p></td>
<td><p>0x181</p></td>
<td><p>0x113</p></td>
<td><p>0x189</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td></td>
<td><p>0x111</p></td>
<td><p>0x182</p></td>
<td><p>0x114</p></td>
<td><p>0x18A</p></td>
</tr>
<tr class="row-even"><td><p>24</p></td>
<td></td>
<td><p>0x1B2</p></td>
<td><p>0x184</p></td>
<td><p>0x1B5</p></td>
<td><p>0x18C</p></td>
</tr>
<tr class="row-odd"><td><p>32</p></td>
<td></td>
<td><p>0x112</p></td>
<td><p>0x183</p></td>
<td><p>0x115</p></td>
<td><p>0x18B</p></td>
</tr>
</tbody>
</table>
</section>
<section id="graphic-modes-continued">
<h3>Graphic modes (continued)<a class="headerlink" href="#graphic-modes-continued" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 7%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>bpp</p></th>
<th class="head"><p>1024x768</p></th>
<th class="head"><p>1152x864</p></th>
<th class="head"><p>1280x1024</p></th>
<th class="head"><p>1408x1056</p></th>
<th class="head"><p>1600x1200</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>4</p></td>
<td><p>0x104</p></td>
<td></td>
<td><p>0x106</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>0x105</p></td>
<td><p>0x190</p></td>
<td><p>0x107</p></td>
<td><p>0x198</p></td>
<td><p>0x11C</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>0x116</p></td>
<td><p>0x191</p></td>
<td><p>0x119</p></td>
<td><p>0x199</p></td>
<td><p>0x11D</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>0x117</p></td>
<td><p>0x192</p></td>
<td><p>0x11A</p></td>
<td><p>0x19A</p></td>
<td><p>0x11E</p></td>
</tr>
<tr class="row-even"><td><p>24</p></td>
<td><p>0x1B8</p></td>
<td><p>0x194</p></td>
<td><p>0x1BB</p></td>
<td><p>0x19C</p></td>
<td><p>0x1BF</p></td>
</tr>
<tr class="row-odd"><td><p>32</p></td>
<td><p>0x118</p></td>
<td><p>0x193</p></td>
<td><p>0x11B</p></td>
<td><p>0x19B</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="text-modes">
<h3>Text modes<a class="headerlink" href="#text-modes" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>text</p></th>
<th class="head"><p>640x400</p></th>
<th class="head"><p>640x480</p></th>
<th class="head"><p>1056x344</p></th>
<th class="head"><p>1056x400</p></th>
<th class="head"><p>1056x480</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>8x8</p></td>
<td><p>0x1C0</p></td>
<td><p>0x108</p></td>
<td><p>0x10A</p></td>
<td><p>0x10B</p></td>
<td><p>0x10C</p></td>
</tr>
<tr class="row-odd"><td><p>8x16</p></td>
<td><p>2, 3, 7</p></td>
<td></td>
<td></td>
<td><p>0x109</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>You can enter these number either hexadecimal (leading <cite>0x</cite>) or decimal
(0x100 = 256). You can also use value + 512 to achieve compatibility
with your old number passed to vesafb.</p>
<p>Non-listed number can be achieved by more complicated command-line, for
example 1600x1200x32bpp can be specified by <cite>video=matroxfb:vesa:0x11C,depth:32</cite>.</p>
</section>
</section>
<section id="x11">
<h2>X11<a class="headerlink" href="#x11" title="Permalink to this headline">¶</a></h2>
<p>XF{68,86}_FBDev should work just fine, but it is non-accelerated. On non-intel
architectures there are some glitches for 24bpp videomodes. 8, 16 and 32bpp
works fine.</p>
<p>Running another (accelerated) X-Server like XF86_SVGA works too. But (at least)
XFree servers have big troubles in multihead configurations (even on first
head, not even talking about second). Running XFree86 4.x accelerated mga
driver is possible, but you must not enable DRI - if you do, resolution and
color depth of your X desktop must match resolution and color depths of your
virtual consoles, otherwise X will corrupt accelerator settings.</p>
</section>
<section id="svgalib">
<h2>SVGALib<a class="headerlink" href="#svgalib" title="Permalink to this headline">¶</a></h2>
<p>Driver contains SVGALib compatibility code. It is turned on by choosing textual
mode for console. You can do it at boot time by using videomode
2,3,7,0x108-0x10C or 0x1C0. At runtime, <cite>fbset -depth 0</cite> does this work.
Unfortunately, after SVGALib application exits, screen contents is corrupted.
Switching to another console and back fixes it. I hope that it is SVGALib’s
problem and not mine, but I’m not sure.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>You can pass kernel command line options to matroxfb with
<cite>video=matroxfb:option1,option2:value2,option3</cite> (multiple options should be
separated by comma, values are separated from options by <cite>:</cite>).
Accepted options:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>mem:X</p></td>
<td><p>size of memory (X can be in megabytes, kilobytes or bytes)
You can only decrease value determined by driver because of
it always probe for memory. Default is to use whole detected
memory usable for on-screen display (i.e. max. 8 MB).</p></td>
</tr>
<tr class="row-even"><td><p>disabled</p></td>
<td><p>do not load driver; you can use also <cite>off</cite>, but <cite>disabled</cite>
is here too.</p></td>
</tr>
<tr class="row-odd"><td><p>enabled</p></td>
<td><p>load driver, if you have <cite>video=matroxfb:disabled</cite> in LILO
configuration, you can override it by this (you cannot override
<cite>off</cite>). It is default.</p></td>
</tr>
<tr class="row-even"><td><p>noaccel</p></td>
<td><p>do not use acceleration engine. It does not work on Alphas.</p></td>
</tr>
<tr class="row-odd"><td><p>accel</p></td>
<td><p>use acceleration engine. It is default.</p></td>
</tr>
<tr class="row-even"><td><p>nopan</p></td>
<td><p>create initial consoles with vyres = yres, thus disabling virtual
scrolling.</p></td>
</tr>
<tr class="row-odd"><td><p>pan</p></td>
<td><p>create initial consoles as tall as possible (vyres = memory/vxres).
It is default.</p></td>
</tr>
<tr class="row-even"><td><p>nopciretry</p></td>
<td><p>disable PCI retries. It is needed for some broken chipsets,
it is autodetected for intel’s 82437. In this case device does
not comply to PCI 2.1 specs (it will not guarantee that every
transaction terminate with success or retry in 32 PCLK).</p></td>
</tr>
<tr class="row-odd"><td><p>pciretry</p></td>
<td><p>enable PCI retries. It is default, except for intel’s 82437.</p></td>
</tr>
<tr class="row-even"><td><p>novga</p></td>
<td><p>disables VGA I/O ports. It is default if BIOS did not enable
device. You should not use this option, some boards then do not
restart without power off.</p></td>
</tr>
<tr class="row-odd"><td><p>vga</p></td>
<td><p>preserve state of VGA I/O ports. It is default. Driver does not
enable VGA I/O if BIOS did not it (it is not safe to enable it in
most cases).</p></td>
</tr>
<tr class="row-even"><td><p>nobios</p></td>
<td><p>disables BIOS ROM. It is default if BIOS did not enable BIOS
itself. You should not use this option, some boards then do not
restart without power off.</p></td>
</tr>
<tr class="row-odd"><td><p>bios</p></td>
<td><p>preserve state of BIOS ROM. It is default. Driver does not enable
BIOS if BIOS was not enabled before.</p></td>
</tr>
<tr class="row-even"><td><p>noinit</p></td>
<td><p>tells driver, that devices were already initialized. You should use
it if you have G100 and/or if driver cannot detect memory, you see
strange pattern on screen and so on. Devices not enabled by BIOS
are still initialized. It is default.</p></td>
</tr>
<tr class="row-odd"><td><p>init</p></td>
<td><p>driver initializes every device it knows about.</p></td>
</tr>
<tr class="row-even"><td><p>memtype</p></td>
<td><p>specifies memory type, implies ‘init’. This is valid only for G200
and G400 and has following meaning:</p>
<blockquote>
<div><dl class="simple">
<dt>G200:</dt><dd><ul class="simple">
<li><p>0 -&gt; 2x128Kx32 chips, 2MB onboard, probably sgram</p></li>
<li><p>1 -&gt; 2x128Kx32 chips, 4MB onboard, probably sgram</p></li>
<li><p>2 -&gt; 2x256Kx32 chips, 4MB onboard, probably sgram</p></li>
<li><p>3 -&gt; 2x256Kx32 chips, 8MB onboard, probably sgram</p></li>
<li><p>4 -&gt; 2x512Kx16 chips, 8/16MB onboard, probably sdram only</p></li>
<li><p>5 -&gt; same as above</p></li>
<li><p>6 -&gt; 4x128Kx32 chips, 4MB onboard, probably sgram</p></li>
<li><p>7 -&gt; 4x128Kx32 chips, 8MB onboard, probably sgram</p></li>
</ul>
</dd>
<dt>G400:</dt><dd><ul class="simple">
<li><p>0 -&gt; 2x512Kx16 SDRAM, 16/32MB</p></li>
<li><p>2x512Kx32 SGRAM, 16/32MB</p></li>
<li><p>1 -&gt; 2x256Kx32 SGRAM, 8/16MB</p></li>
<li><p>2 -&gt; 4x128Kx32 SGRAM, 8/16MB</p></li>
<li><p>3 -&gt; 4x512Kx32 SDRAM, 32MB</p></li>
<li><p>4 -&gt; 4x256Kx32 SGRAM, 16/32MB</p></li>
<li><p>5 -&gt; 2x1Mx32 SDRAM, 32MB</p></li>
<li><p>6 -&gt; reserved</p></li>
<li><p>7 -&gt; reserved</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p>You should use sdram or sgram parameter in addition to memtype
parameter.</p>
</td>
</tr>
<tr class="row-odd"><td><p>nomtrr</p></td>
<td><p>disables write combining on frame buffer. This slows down driver
but there is reported minor incompatibility between GUS DMA and
XFree under high loads if write combining is enabled (sound
dropouts).</p></td>
</tr>
<tr class="row-even"><td><p>mtrr</p></td>
<td><p>enables write combining on frame buffer. It speeds up video
accesses much. It is default. You must have MTRR support enabled
in kernel and your CPU must have MTRR (f.e. Pentium II have them).</p></td>
</tr>
<tr class="row-odd"><td><p>sgram</p></td>
<td><p>tells to driver that you have Gxx0 with SGRAM memory. It has no
effect without <cite>init</cite>.</p></td>
</tr>
<tr class="row-even"><td><p>sdram</p></td>
<td><p>tells to driver that you have Gxx0 with SDRAM memory.
It is a default.</p></td>
</tr>
<tr class="row-odd"><td><p>inv24</p></td>
<td><p>change timings parameters for 24bpp modes on Millennium and
Millennium II. Specify this if you see strange color shadows
around  characters.</p></td>
</tr>
<tr class="row-even"><td><p>noinv24</p></td>
<td><p>use standard timings. It is the default.</p></td>
</tr>
<tr class="row-odd"><td><p>inverse</p></td>
<td><p>invert colors on screen (for LCD displays)</p></td>
</tr>
<tr class="row-even"><td><p>noinverse</p></td>
<td><p>show true colors on screen. It is default.</p></td>
</tr>
<tr class="row-odd"><td><p>dev:X</p></td>
<td><p>bind driver to device X. Driver numbers device from 0 up to N,
where device 0 is first <cite>known</cite> device found, 1 second and so on.
lspci lists devices in this order.
Default is <cite>every</cite> known device.</p></td>
</tr>
<tr class="row-even"><td><p>nohwcursor</p></td>
<td><p>disables hardware cursor (use software cursor instead).</p></td>
</tr>
<tr class="row-odd"><td><p>hwcursor</p></td>
<td><p>enables hardware cursor. It is default. If you are using
non-accelerated mode (<cite>noaccel</cite> or <cite>fbset -accel false</cite>), software
cursor is used (except for text mode).</p></td>
</tr>
<tr class="row-even"><td><p>noblink</p></td>
<td><p>disables cursor blinking. Cursor in text mode always blinks (hw
limitation).</p></td>
</tr>
<tr class="row-odd"><td><p>blink</p></td>
<td><p>enables cursor blinking. It is default.</p></td>
</tr>
<tr class="row-even"><td><p>nofastfont</p></td>
<td><p>disables fastfont feature. It is default.</p></td>
</tr>
<tr class="row-odd"><td><p>fastfont:X</p></td>
<td><p>enables fastfont feature. X specifies size of memory reserved for
font data, it must be &gt;= (fontwidth*fontheight*chars_in_font)/8.
It is faster on Gx00 series, but slower on older cards.</p></td>
</tr>
<tr class="row-even"><td><p>grayscale</p></td>
<td><p>enable grayscale summing. It works in PSEUDOCOLOR modes (text,
4bpp, 8bpp). In DIRECTCOLOR modes it is limited to characters
displayed through putc/putcs. Direct accesses to framebuffer
can paint colors.</p></td>
</tr>
<tr class="row-odd"><td><p>nograyscale</p></td>
<td><p>disable grayscale summing. It is default.</p></td>
</tr>
<tr class="row-even"><td><p>cross4MB</p></td>
<td><p>enables that pixel line can cross 4MB boundary. It is default for
non-Millennium.</p></td>
</tr>
<tr class="row-odd"><td><p>nocross4MB</p></td>
<td><p>pixel line must not cross 4MB boundary. It is default for
Millennium I or II, because of these devices have hardware
limitations which do not allow this. But this option is
incompatible with some (if not all yet released) versions of
XF86_FBDev.</p></td>
</tr>
<tr class="row-even"><td><p>dfp</p></td>
<td><p>enables digital flat panel interface. This option is incompatible
with secondary (TV) output - if DFP is active, TV output must be
inactive and vice versa. DFP always uses same timing as primary
(monitor) output.</p></td>
</tr>
<tr class="row-odd"><td><p>dfp:X</p></td>
<td><p>use settings X for digital flat panel interface. X is number from
0 to 0xFF, and meaning of each individual bit is described in
G400 manual, in description of DAC register 0x1F. For normal
operation you should set all bits to zero, except lowest bit. This
lowest bit selects who is source of display clocks, whether G400,
or panel. Default value is now read back from hardware - so you
should specify this value only if you are also using <cite>init</cite>
parameter.</p></td>
</tr>
<tr class="row-even"><td><p>outputs:XYZ</p></td>
<td><p>set mapping between CRTC and outputs. Each letter can have value
of 0 (for no CRTC), 1 (CRTC1) or 2 (CRTC2), and first letter
corresponds to primary analog output, second letter to the
secondary analog output and third letter to the DVI output.
Default setting is 100 for cards below G400 or G400 without DFP,
101 for G400 with DFP, and 111 for G450 and G550. You can set
mapping only on first card, use matroxset for setting up other
devices.</p></td>
</tr>
<tr class="row-odd"><td><p>vesa:X</p></td>
<td><p>selects startup videomode. X is number from 0 to 0x1FF, see table
above for detailed explanation. Default is 640x480x8bpp if driver
has 8bpp support. Otherwise first available of 640x350x4bpp,
640x480x15bpp, 640x480x24bpp, 640x480x32bpp or 80x25 text
(80x25 text is always available).</p></td>
</tr>
</tbody>
</table>
<p>If you are not satisfied with videomode selected by <cite>vesa</cite> option, you
can modify it with these options:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>xres:X</p></td>
<td><p>horizontal resolution, in pixels. Default is derived from <cite>vesa</cite>
option.</p></td>
</tr>
<tr class="row-even"><td><p>yres:X</p></td>
<td><p>vertical resolution, in pixel lines. Default is derived from <cite>vesa</cite>
option.</p></td>
</tr>
<tr class="row-odd"><td><p>upper:X</p></td>
<td><p>top boundary: lines between end of VSYNC pulse and start of first
pixel line of picture. Default is derived from <cite>vesa</cite> option.</p></td>
</tr>
<tr class="row-even"><td><p>lower:X</p></td>
<td><p>bottom boundary: lines between end of picture and start of VSYNC
pulse. Default is derived from <cite>vesa</cite> option.</p></td>
</tr>
<tr class="row-odd"><td><p>vslen:X</p></td>
<td><p>length of VSYNC pulse, in lines. Default is derived from <cite>vesa</cite>
option.</p></td>
</tr>
<tr class="row-even"><td><p>left:X</p></td>
<td><p>left boundary: pixels between end of HSYNC pulse and first pixel.
Default is derived from <cite>vesa</cite> option.</p></td>
</tr>
<tr class="row-odd"><td><p>right:X</p></td>
<td><p>right boundary: pixels between end of picture and start of HSYNC
pulse. Default is derived from <cite>vesa</cite> option.</p></td>
</tr>
<tr class="row-even"><td><p>hslen:X</p></td>
<td><p>length of HSYNC pulse, in pixels. Default is derived from <cite>vesa</cite>
option.</p></td>
</tr>
<tr class="row-odd"><td><p>pixclock:X</p></td>
<td><p>dotclocks, in ps (picoseconds). Default is derived from <cite>vesa</cite>
option and from <cite>fh</cite> and <cite>fv</cite> options.</p></td>
</tr>
<tr class="row-even"><td><p>sync:X</p></td>
<td><p>sync. pulse - bit 0 inverts HSYNC polarity, bit 1 VSYNC polarity.
If bit 3 (value 0x08) is set, composite sync instead of HSYNC is
generated. If bit 5 (value 0x20) is set, sync on green is turned
on. Do not forget that if you want sync on green, you also probably
want composite sync.
Default depends on <cite>vesa</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p>depth:X</p></td>
<td><p>Bits per pixel: 0=text, 4,8,15,16,24 or 32. Default depends on
<cite>vesa</cite>.</p></td>
</tr>
</tbody>
</table>
<p>If you know capabilities of your monitor, you can specify some (or all) of
<cite>maxclk</cite>, <cite>fh</cite> and <cite>fv</cite>. In this case, <cite>pixclock</cite> is computed so that
pixclock &lt;= maxclk, real_fh &lt;= fh and real_fv &lt;= fv.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>maxclk:X</p></td>
<td><p>maximum dotclock. X can be specified in MHz, kHz or Hz. Default is
<cite>don`t care</cite>.</p></td>
</tr>
<tr class="row-even"><td><p>fh:X</p></td>
<td><p>maximum horizontal synchronization frequency. X can be specified
in kHz or Hz. Default is <cite>don’t care</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p>fv:X</p></td>
<td><p>maximum vertical frequency. X must be specified in Hz. Default is
70 for modes derived from <cite>vesa</cite> with yres &lt;= 400, 60Hz for
yres &gt; 400.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>There are known and unknown bugs, features and misfeatures.
Currently there are following known bugs:</p>
<blockquote>
<div><ul class="simple">
<li><p>SVGALib does not restore screen on exit</p></li>
<li><p>generic fbcon-cfbX procedures do not work on Alphas. Due to this,
<cite>noaccel</cite> (and cfb4 accel) driver does not work on Alpha. So everyone
with access to <cite>/dev/fb*</cite> on Alpha can hang machine (you should restrict
access to <cite>/dev/fb*</cite> - everyone with access to this device can destroy
your monitor, believe me…).</p></li>
<li><p>24bpp does not support correctly XF-FBDev on big-endian architectures.</p></li>
<li><p>interlaced text mode is not supported; it looks like hardware limitation,
but I’m not sure.</p></li>
<li><p>Gxx0 SGRAM/SDRAM is not autodetected.</p></li>
<li><p>maybe more…</p></li>
</ul>
</div></blockquote>
<p>And following misfeatures:</p>
<blockquote>
<div><ul>
<li><p>SVGALib does not restore screen on exit.</p></li>
<li><p>pixclock for text modes is limited by hardware to</p>
<blockquote>
<div><ul class="simple">
<li><p>83 MHz on G200</p></li>
<li><p>66 MHz on Millennium I</p></li>
<li><p>60 MHz on Millennium II</p></li>
</ul>
</div></blockquote>
<p>Because I have no access to other devices, I do not know specific
frequencies for them. So driver does not check this and allows you to
set frequency higher that this. It causes sparks, black holes and other
pretty effects on screen. Device was not destroyed during tests. :-)</p>
</li>
<li><p>my Millennium G200 oscillator has frequency range from 35 MHz to 380 MHz
(and it works with 8bpp on about 320 MHz dotclocks (and changed mclk)).
But Matrox says on product sheet that VCO limit is 50-250 MHz, so I believe
them (maybe that chip overheats, but it has a very big cooler (G100 has
none), so it should work).</p></li>
<li><p>special mixed video/graphics videomodes of Mystique and Gx00 - 2G8V16 and
G16V16 are not supported</p></li>
<li><p>color keying is not supported</p></li>
<li><p>feature connector of Mystique and Gx00 is set to VGA mode (it is disabled
by BIOS)</p></li>
<li><p>DDC (monitor detection) is supported through dualhead driver</p></li>
<li><p>some check for input values are not so strict how it should be (you can
specify vslen=4000 and so on).</p></li>
<li><p>maybe more…</p></li>
</ul>
</div></blockquote>
<p>And following features:</p>
<blockquote>
<div><ul class="simple">
<li><p>4bpp is available only on Millennium I and Millennium II. It is hardware
limitation.</p></li>
<li><p>selection between 1:5:5:5 and 5:6:5 16bpp videomode is done by -rgba
option of fbset: “fbset -depth 16 -rgba 5,5,5” selects 1:5:5:5, anything
else selects 5:6:5 mode.</p></li>
<li><p>text mode uses 6 bit VGA palette instead of 8 bit (one of 262144 colors
instead of one of 16M colors). It is due to hardware limitation of
Millennium I/II and SVGALib compatibility.</p></li>
</ul>
</div></blockquote>
</section>
<section id="benchmarks">
<h2>Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this headline">¶</a></h2>
<p>It is time to redraw whole screen 1000 times in 1024x768, 60Hz. It is
time for draw 6144000 characters on screen through /dev/vcsa
(for 32bpp it is about 3GB of data (exactly 3000 MB); for 8x16 font in
16 seconds, i.e. 187 MBps).
Times were obtained from one older version of driver, now they are about 3%
faster, it is kernel-space only time on P-II/350 MHz, Millennium I in 33 MHz
PCI slot, G200 in AGP 2x slot. I did not test vgacon:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NOACCEL
      8x16                 12x22
      Millennium I  G200   Millennium I  G200
8bpp    16.42         9.54   12.33         9.13
16bpp   21.00        15.70   19.11        15.02
24bpp   36.66        36.66   35.00        35.00
32bpp   35.00        30.00   33.85        28.66

ACCEL, nofastfont
      8x16                 12x22                6x11
      Millennium I  G200   Millennium I  G200   Millennium I  G200
8bpp     7.79         7.24   13.55         7.78   30.00        21.01
16bpp    9.13         7.78   16.16         7.78   30.00        21.01
24bpp   14.17        10.72   18.69        10.24   34.99        21.01
32bpp   16.15      16.16   18.73        13.09   34.99        21.01

ACCEL, fastfont
      8x16                 12x22                6x11
      Millennium I  G200   Millennium I  G200   Millennium I  G200
8bpp     8.41         6.01    6.54         4.37   16.00        10.51
16bpp    9.54         9.12    8.76         6.17   17.52        14.01
24bpp   15.00        12.36   11.67        10.00   22.01        18.32
32bpp   16.18        18.29*  12.71        12.74   24.44        21.00

TEXT
      8x16
      Millennium I  G200
TEXT     3.29         1.50

* Yes, it is slower than Millennium I.
</pre></div>
</div>
</section>
<section id="dualhead-g400">
<h2>Dualhead G400<a class="headerlink" href="#dualhead-g400" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Driver supports dualhead G400 with some limitations:</dt><dd><ul class="simple">
<li><p>secondary head shares videomemory with primary head. It is not problem
if you have 32MB of videoram, but if you have only 16MB, you may have
to think twice before choosing videomode (for example twice 1880x1440x32bpp
is not possible).</p></li>
<li><p>due to hardware limitation, secondary head can use only 16 and 32bpp
videomodes.</p></li>
<li><p>secondary head is not accelerated. There were bad problems with accelerated
XFree when secondary head used to use acceleration.</p></li>
<li><p>secondary head always powerups in <a class="reference external" href="mailto:640x480&#37;&#52;&#48;60-32">640x480<span>&#64;</span>60-32</a> videomode. You have to use
fbset to change this mode.</p></li>
<li><p>secondary head always powerups in monitor mode. You have to use fbmatroxset
to change it to TV mode. Also, you must select at least 525 lines for
NTSC output and 625 lines for PAL output.</p></li>
<li><p>kernel is not fully multihead ready. So some things are impossible to do.</p></li>
<li><p>if you compiled it as module, you must insert i2c-matroxfb, matroxfb_maven
and matroxfb_crtc2 into kernel.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="dualhead-g450">
<h2>Dualhead G450<a class="headerlink" href="#dualhead-g450" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Driver supports dualhead G450 with some limitations:</dt><dd><ul class="simple">
<li><p>secondary head shares videomemory with primary head. It is not problem
if you have 32MB of videoram, but if you have only 16MB, you may have
to think twice before choosing videomode.</p></li>
<li><p>due to hardware limitation, secondary head can use only 16 and 32bpp
videomodes.</p></li>
<li><p>secondary head is not accelerated.</p></li>
<li><p>secondary head always powerups in <a class="reference external" href="mailto:640x480&#37;&#52;&#48;60-32">640x480<span>&#64;</span>60-32</a> videomode. You have to use
fbset to change this mode.</p></li>
<li><p>TV output is not supported</p></li>
<li><p>kernel is not fully multihead ready, so some things are impossible to do.</p></li>
<li><p>if you compiled it as module, you must insert matroxfb_g450 and matroxfb_crtc2
into kernel.</p></li>
</ul>
</dd>
</dl>
<p>Petr Vandrovec &lt;<a class="reference external" href="mailto:vandrove&#37;&#52;&#48;vc&#46;cvut&#46;cz">vandrove<span>&#64;</span>vc<span>&#46;</span>cvut<span>&#46;</span>cz</a>&gt;</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What is matroxfb?</a><ul>
<li><a class="reference internal" href="#how-to-use-it">How to use it?</a><ul>
<li><a class="reference internal" href="#graphic-modes">Graphic modes</a></li>
<li><a class="reference internal" href="#graphic-modes-continued">Graphic modes (continued)</a></li>
<li><a class="reference internal" href="#text-modes">Text modes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#x11">X11</a></li>
<li><a class="reference internal" href="#svgalib">SVGALib</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
<li><a class="reference internal" href="#benchmarks">Benchmarks</a></li>
<li><a class="reference internal" href="#dualhead-g400">Dualhead G400</a></li>
<li><a class="reference internal" href="#dualhead-g450">Dualhead G450</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/fb/matroxfb.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/fb/matroxfb.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>