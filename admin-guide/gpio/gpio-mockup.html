
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>GPIO Testing Driver &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Configfs GPIO Simulator" href="gpio-sim.html" />
    <link rel="prev" title="GPIO Sysfs Interface for Userspace" href="sysfs.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="gpio-testing-driver">
<h1>GPIO Testing Driver<a class="headerlink" href="#gpio-testing-driver" title="Permalink to this headline">¶</a></h1>
<p>The GPIO Testing Driver (gpio-mockup) provides a way to create simulated GPIO
chips for testing purposes. The lines exposed by these chips can be accessed
using the standard GPIO character device interface as well as manipulated
using the dedicated debugfs directory structure.</p>
<section id="creating-simulated-chips-using-module-params">
<h2>Creating simulated chips using module params<a class="headerlink" href="#creating-simulated-chips-using-module-params" title="Permalink to this headline">¶</a></h2>
<p>When loading the gpio-mockup driver a number of parameters can be passed to the
module.</p>
<blockquote>
<div><p>gpio_mockup_ranges</p>
<blockquote>
<div><p>This parameter takes an argument in the form of an array of integer
pairs. Each pair defines the base GPIO number (non-negative integer)
and the first number after the last of this chip. If the base GPIO
is -1, the gpiolib will assign it automatically. while the following
parameter is the number of lines exposed by the chip.</p>
<p>Example: gpio_mockup_ranges=-1,8,-1,16,405,409</p>
<p>The line above creates three chips. The first one will expose 8 lines,
the second 16 and the third 4. The base GPIO for the third chip is set
to 405 while for two first chips it will be assigned automatically.</p>
</div></blockquote>
<p>gpio_mockup_named_lines</p>
<blockquote>
<div><p>This parameter doesn’t take any arguments. It lets the driver know that
GPIO lines exposed by it should be named.</p>
<p>The name format is: gpio-mockup-X-Y where X is mockup chip’s ID
and Y is the line offset.</p>
</div></blockquote>
</div></blockquote>
</section>
<section id="manipulating-simulated-lines">
<h2>Manipulating simulated lines<a class="headerlink" href="#manipulating-simulated-lines" title="Permalink to this headline">¶</a></h2>
<p>Each mockup chip creates its own subdirectory in /sys/kernel/debug/gpio-mockup/.
The directory is named after the chip’s label. A symlink is also created, named
after the chip’s name, which points to the label directory.</p>
<p>Inside each subdirectory, there’s a separate attribute for each GPIO line. The
name of the attribute represents the line’s offset in the chip.</p>
<p>Reading from a line attribute returns the current value. Writing to it (0 or 1)
changes the configuration of the simulated pull-up/pull-down resistor
(1 - pull-up, 0 - pull-down).</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">GPIO Testing Driver</a><ul>
<li><a class="reference internal" href="#creating-simulated-chips-using-module-params">Creating simulated chips using module params</a></li>
<li><a class="reference internal" href="#manipulating-simulated-lines">Manipulating simulated lines</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/admin-guide/gpio/gpio-mockup.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/admin-guide/gpio/gpio-mockup.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>