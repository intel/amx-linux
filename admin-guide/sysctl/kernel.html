
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Documentation for /proc/sys/kernel/ &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Documentation for /proc/sys/net/" href="net.html" />
    <link rel="prev" title="Documentation for /proc/sys/fs/" href="fs.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="documentation-for-proc-sys-kernel">
<h1>Documentation for /proc/sys/kernel/<a class="headerlink" href="#documentation-for-proc-sys-kernel" title="Permalink to this headline">¶</a></h1>
<p>Copyright (c) 1998, 1999,  Rik van Riel &lt;<a class="reference external" href="mailto:riel&#37;&#52;&#48;nl&#46;linux&#46;org">riel<span>&#64;</span>nl<span>&#46;</span>linux<span>&#46;</span>org</a>&gt;</p>
<p>Copyright (c) 2009,        Shen Feng&lt;<a class="reference external" href="mailto:shen&#37;&#52;&#48;cn&#46;fujitsu&#46;com">shen<span>&#64;</span>cn<span>&#46;</span>fujitsu<span>&#46;</span>com</a>&gt;</p>
<p>For general info and legal blurb, please look in
<a class="reference internal" href="index.html"><span class="doc">Documentation for /proc/sys</span></a>.</p>
<hr class="docutils" />
<p>This file contains documentation for the sysctl files in
<code class="docutils literal notranslate"><span class="pre">/proc/sys/kernel/</span></code>.</p>
<p>The files in this directory can be used to tune and monitor
miscellaneous and general things in the operation of the Linux
kernel. Since some of the files <em>can</em> be used to screw up your
system, it is advisable to read both documentation and source
before actually making adjustments.</p>
<p>Currently, these files might (depending on your configuration)
show up in <code class="docutils literal notranslate"><span class="pre">/proc/sys/kernel</span></code>:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#acct" id="id2">acct</a></p></li>
<li><p><a class="reference internal" href="#acpi-video-flags" id="id3">acpi_video_flags</a></p></li>
<li><p><a class="reference internal" href="#arch" id="id4">arch</a></p></li>
<li><p><a class="reference internal" href="#auto-msgmni" id="id5">auto_msgmni</a></p></li>
<li><p><a class="reference internal" href="#bootloader-type-x86-only" id="id6">bootloader_type (x86 only)</a></p></li>
<li><p><a class="reference internal" href="#bootloader-version-x86-only" id="id7">bootloader_version (x86 only)</a></p></li>
<li><p><a class="reference internal" href="#bpf-stats-enabled" id="id8">bpf_stats_enabled</a></p></li>
<li><p><a class="reference internal" href="#cad-pid" id="id9">cad_pid</a></p></li>
<li><p><a class="reference internal" href="#cap-last-cap" id="id10">cap_last_cap</a></p></li>
<li><p><a class="reference internal" href="#core-pattern" id="id11">core_pattern</a></p></li>
<li><p><a class="reference internal" href="#core-pipe-limit" id="id12">core_pipe_limit</a></p></li>
<li><p><a class="reference internal" href="#core-uses-pid" id="id13">core_uses_pid</a></p></li>
<li><p><a class="reference internal" href="#ctrl-alt-del" id="id14">ctrl-alt-del</a></p></li>
<li><p><a class="reference internal" href="#dmesg-restrict" id="id15">dmesg_restrict</a></p></li>
<li><p><a class="reference internal" href="#domainname-hostname" id="id16">domainname &amp; hostname</a></p></li>
<li><p><a class="reference internal" href="#firmware-config" id="id17">firmware_config</a></p></li>
<li><p><a class="reference internal" href="#ftrace-dump-on-oops" id="id18">ftrace_dump_on_oops</a></p></li>
<li><p><a class="reference internal" href="#ftrace-enabled-stack-tracer-enabled" id="id19">ftrace_enabled, stack_tracer_enabled</a></p></li>
<li><p><a class="reference internal" href="#hardlockup-all-cpu-backtrace" id="id20">hardlockup_all_cpu_backtrace</a></p></li>
<li><p><a class="reference internal" href="#hardlockup-panic" id="id21">hardlockup_panic</a></p></li>
<li><p><a class="reference internal" href="#hotplug" id="id22">hotplug</a></p></li>
<li><p><a class="reference internal" href="#hung-task-all-cpu-backtrace" id="id23">hung_task_all_cpu_backtrace</a></p></li>
<li><p><a class="reference internal" href="#hung-task-panic" id="id24">hung_task_panic</a></p></li>
<li><p><a class="reference internal" href="#hung-task-check-count" id="id25">hung_task_check_count</a></p></li>
<li><p><a class="reference internal" href="#hung-task-timeout-secs" id="id26">hung_task_timeout_secs</a></p></li>
<li><p><a class="reference internal" href="#hung-task-check-interval-secs" id="id27">hung_task_check_interval_secs</a></p></li>
<li><p><a class="reference internal" href="#hung-task-warnings" id="id28">hung_task_warnings</a></p></li>
<li><p><a class="reference internal" href="#hyperv-record-panic-msg" id="id29">hyperv_record_panic_msg</a></p></li>
<li><p><a class="reference internal" href="#ignore-unaligned-usertrap" id="id30">ignore-unaligned-usertrap</a></p></li>
<li><p><a class="reference internal" href="#kexec-load-disabled" id="id31">kexec_load_disabled</a></p></li>
<li><p><a class="reference internal" href="#kptr-restrict" id="id32">kptr_restrict</a></p></li>
<li><p><a class="reference internal" href="#modprobe" id="id33">modprobe</a></p></li>
<li><p><a class="reference internal" href="#modules-disabled" id="id34">modules_disabled</a></p></li>
<li><p><a class="reference internal" href="#msgmax-msgmnb-and-msgmni" id="id35">msgmax, msgmnb, and msgmni</a></p></li>
<li><p><a class="reference internal" href="#msg-next-id-sem-next-id-and-shm-next-id-system-v-ipc" id="id36">msg_next_id, sem_next_id, and shm_next_id (System V IPC)</a></p></li>
<li><p><a class="reference internal" href="#ngroups-max" id="id37">ngroups_max</a></p></li>
<li><p><a class="reference internal" href="#nmi-watchdog" id="id38">nmi_watchdog</a></p></li>
<li><p><a class="reference internal" href="#nmi-wd-lpm-factor-ppc-only" id="id39">nmi_wd_lpm_factor (PPC only)</a></p></li>
<li><p><a class="reference internal" href="#numa-balancing" id="id40">numa_balancing</a></p></li>
<li><p><a class="reference internal" href="#numa-balancing-promote-rate-limit-mbps" id="id41">numa_balancing_promote_rate_limit_MBps</a></p></li>
<li><p><a class="reference internal" href="#oops-all-cpu-backtrace" id="id42">oops_all_cpu_backtrace</a></p></li>
<li><p><a class="reference internal" href="#oops-limit" id="id43">oops_limit</a></p></li>
<li><p><a class="reference internal" href="#osrelease-ostype-version" id="id44">osrelease, ostype &amp; version</a></p></li>
<li><p><a class="reference internal" href="#overflowgid-overflowuid" id="id45">overflowgid &amp; overflowuid</a></p></li>
<li><p><a class="reference internal" href="#panic" id="id46">panic</a></p></li>
<li><p><a class="reference internal" href="#panic-on-io-nmi" id="id47">panic_on_io_nmi</a></p></li>
<li><p><a class="reference internal" href="#panic-on-oops" id="id48">panic_on_oops</a></p></li>
<li><p><a class="reference internal" href="#panic-on-stackoverflow" id="id49">panic_on_stackoverflow</a></p></li>
<li><p><a class="reference internal" href="#panic-on-unrecovered-nmi" id="id50">panic_on_unrecovered_nmi</a></p></li>
<li><p><a class="reference internal" href="#panic-on-warn" id="id51">panic_on_warn</a></p></li>
<li><p><a class="reference internal" href="#panic-print" id="id52">panic_print</a></p></li>
<li><p><a class="reference internal" href="#panic-on-rcu-stall" id="id53">panic_on_rcu_stall</a></p></li>
<li><p><a class="reference internal" href="#max-rcu-stall-to-panic" id="id54">max_rcu_stall_to_panic</a></p></li>
<li><p><a class="reference internal" href="#perf-cpu-time-max-percent" id="id55">perf_cpu_time_max_percent</a></p></li>
<li><p><a class="reference internal" href="#perf-event-paranoid" id="id56">perf_event_paranoid</a></p></li>
<li><p><a class="reference internal" href="#perf-event-max-stack" id="id57">perf_event_max_stack</a></p></li>
<li><p><a class="reference internal" href="#perf-event-mlock-kb" id="id58">perf_event_mlock_kb</a></p></li>
<li><p><a class="reference internal" href="#perf-event-max-contexts-per-stack" id="id59">perf_event_max_contexts_per_stack</a></p></li>
<li><p><a class="reference internal" href="#perf-user-access-arm64-only" id="id60">perf_user_access (arm64 only)</a></p></li>
<li><p><a class="reference internal" href="#pid-max" id="id61">pid_max</a></p></li>
<li><p><a class="reference internal" href="#ns-last-pid" id="id62">ns_last_pid</a></p></li>
<li><p><a class="reference internal" href="#powersave-nap-ppc-only" id="id63">powersave-nap (PPC only)</a></p></li>
<li><p><a class="reference internal" href="#printk" id="id64">printk</a></p></li>
<li><p><a class="reference internal" href="#printk-delay" id="id65">printk_delay</a></p></li>
<li><p><a class="reference internal" href="#printk-ratelimit" id="id66">printk_ratelimit</a></p></li>
<li><p><a class="reference internal" href="#printk-ratelimit-burst" id="id67">printk_ratelimit_burst</a></p></li>
<li><p><a class="reference internal" href="#printk-devkmsg" id="id68">printk_devkmsg</a></p></li>
<li><p><a class="reference internal" href="#pty" id="id69">pty</a></p></li>
<li><p><a class="reference internal" href="#random" id="id70">random</a></p></li>
<li><p><a class="reference internal" href="#randomize-va-space" id="id71">randomize_va_space</a></p></li>
<li><p><a class="reference internal" href="#real-root-dev" id="id72">real-root-dev</a></p></li>
<li><p><a class="reference internal" href="#reboot-cmd-sparc-only" id="id73">reboot-cmd (SPARC only)</a></p></li>
<li><p><a class="reference internal" href="#sched-energy-aware" id="id74">sched_energy_aware</a></p></li>
<li><p><a class="reference internal" href="#task-delayacct" id="id75">task_delayacct</a></p></li>
<li><p><a class="reference internal" href="#sched-schedstats" id="id76">sched_schedstats</a></p></li>
<li><p><a class="reference internal" href="#sched-util-clamp-min" id="id77">sched_util_clamp_min</a></p></li>
<li><p><a class="reference internal" href="#sched-util-clamp-max" id="id78">sched_util_clamp_max</a></p></li>
<li><p><a class="reference internal" href="#sched-util-clamp-min-rt-default" id="id79">sched_util_clamp_min_rt_default</a></p></li>
<li><p><a class="reference internal" href="#seccomp" id="id80">seccomp</a></p></li>
<li><p><a class="reference internal" href="#sg-big-buff" id="id81">sg-big-buff</a></p></li>
<li><p><a class="reference internal" href="#shmall" id="id82">shmall</a></p></li>
<li><p><a class="reference internal" href="#shmmax" id="id83">shmmax</a></p></li>
<li><p><a class="reference internal" href="#shmmni" id="id84">shmmni</a></p></li>
<li><p><a class="reference internal" href="#shm-rmid-forced" id="id85">shm_rmid_forced</a></p></li>
<li><p><a class="reference internal" href="#sysctl-writes-strict" id="id86">sysctl_writes_strict</a></p></li>
<li><p><a class="reference internal" href="#softlockup-all-cpu-backtrace" id="id87">softlockup_all_cpu_backtrace</a></p></li>
<li><p><a class="reference internal" href="#softlockup-panic" id="id88">softlockup_panic</a></p></li>
<li><p><a class="reference internal" href="#soft-watchdog" id="id89">soft_watchdog</a></p></li>
<li><p><a class="reference internal" href="#split-lock-mitigate-x86-only" id="id90">split_lock_mitigate (x86 only)</a></p></li>
<li><p><a class="reference internal" href="#stack-erasing" id="id91">stack_erasing</a></p></li>
<li><p><a class="reference internal" href="#stop-a-sparc-only" id="id92">stop-a (SPARC only)</a></p></li>
<li><p><a class="reference internal" href="#sysrq" id="id93">sysrq</a></p></li>
<li><p><a class="reference internal" href="#tainted" id="id94">tainted</a></p></li>
<li><p><a class="reference internal" href="#threads-max" id="id95">threads-max</a></p></li>
<li><p><a class="reference internal" href="#traceoff-on-warning" id="id96">traceoff_on_warning</a></p></li>
<li><p><a class="reference internal" href="#tracepoint-printk" id="id97">tracepoint_printk</a></p></li>
<li><p><a class="reference internal" href="#unaligned-dump-stack-ia64" id="id98">unaligned-dump-stack (ia64)</a></p></li>
<li><p><a class="reference internal" href="#unaligned-trap" id="id99">unaligned-trap</a></p></li>
<li><p><a class="reference internal" href="#unknown-nmi-panic" id="id100">unknown_nmi_panic</a></p></li>
<li><p><a class="reference internal" href="#unprivileged-bpf-disabled" id="id101">unprivileged_bpf_disabled</a></p></li>
<li><p><a class="reference internal" href="#warn-limit" id="id102">warn_limit</a></p></li>
<li><p><a class="reference internal" href="#watchdog" id="id103">watchdog</a></p></li>
<li><p><a class="reference internal" href="#watchdog-cpumask" id="id104">watchdog_cpumask</a></p></li>
<li><p><a class="reference internal" href="#watchdog-thresh" id="id105">watchdog_thresh</a></p></li>
</ul>
</div>
<section id="acct">
<h2><a class="toc-backref" href="#id2">acct</a><a class="headerlink" href="#acct" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>highwater lowwater frequency
</pre></div>
</div>
<p>If BSD-style process accounting is enabled these values control
its behaviour. If free space on filesystem where the log lives
goes below <code class="docutils literal notranslate"><span class="pre">lowwater</span></code>% accounting suspends. If free space gets
above <code class="docutils literal notranslate"><span class="pre">highwater</span></code>% accounting resumes. <code class="docutils literal notranslate"><span class="pre">frequency</span></code> determines
how often do we check the amount of free space (value is in
seconds). Default:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>4 2 30
</pre></div>
</div>
<p>That is, suspend accounting if free space drops below 2%; resume it
if it increases to at least 4%; consider information about amount of
free space valid for 30 seconds.</p>
</section>
<section id="acpi-video-flags">
<h2><a class="toc-backref" href="#id3">acpi_video_flags</a><a class="headerlink" href="#acpi-video-flags" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../../power/video.html"><span class="doc">Video issues with S3 resume</span></a>. This allows the video resume mode to be set,
in a similar fashion to the <code class="docutils literal notranslate"><span class="pre">acpi_sleep</span></code> kernel parameter, by
combining the following values:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>1</p></td>
<td><p>s3_bios</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>s3_mode</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>s3_beep</p></td>
</tr>
</tbody>
</table>
</section>
<section id="arch">
<h2><a class="toc-backref" href="#id4">arch</a><a class="headerlink" href="#arch" title="Permalink to this headline">¶</a></h2>
<p>The machine hardware name, the same output as <code class="docutils literal notranslate"><span class="pre">uname</span> <span class="pre">-m</span></code>
(e.g. <code class="docutils literal notranslate"><span class="pre">x86_64</span></code> or <code class="docutils literal notranslate"><span class="pre">aarch64</span></code>).</p>
</section>
<section id="auto-msgmni">
<h2><a class="toc-backref" href="#id5">auto_msgmni</a><a class="headerlink" href="#auto-msgmni" title="Permalink to this headline">¶</a></h2>
<p>This variable has no effect and may be removed in future kernel
releases. Reading it always returns 0.
Up to Linux 3.17, it enabled/disabled automatic recomputing of
<a class="reference internal" href="#msgmni">msgmni</a>
upon memory add/remove or upon IPC namespace creation/removal.
Echoing “1” into this file enabled msgmni automatic recomputing.
Echoing “0” turned it off. The default value was 1.</p>
</section>
<section id="bootloader-type-x86-only">
<h2><a class="toc-backref" href="#id6">bootloader_type (x86 only)</a><a class="headerlink" href="#bootloader-type-x86-only" title="Permalink to this headline">¶</a></h2>
<p>This gives the bootloader type number as indicated by the bootloader,
shifted left by 4, and OR’d with the low four bits of the bootloader
version.  The reason for this encoding is that this used to match the
<code class="docutils literal notranslate"><span class="pre">type_of_loader</span></code> field in the kernel header; the encoding is kept for
backwards compatibility.  That is, if the full bootloader type number
is 0x15 and the full version number is 0x234, this file will contain
the value 340 = 0x154.</p>
<p>See the <code class="docutils literal notranslate"><span class="pre">type_of_loader</span></code> and <code class="docutils literal notranslate"><span class="pre">ext_loader_type</span></code> fields in
<a class="reference internal" href="../../x86/boot.html"><span class="doc">The Linux/x86 Boot Protocol</span></a> for additional information.</p>
</section>
<section id="bootloader-version-x86-only">
<h2><a class="toc-backref" href="#id7">bootloader_version (x86 only)</a><a class="headerlink" href="#bootloader-version-x86-only" title="Permalink to this headline">¶</a></h2>
<p>The complete bootloader version number.  In the example above, this
file will contain the value 564 = 0x234.</p>
<p>See the <code class="docutils literal notranslate"><span class="pre">type_of_loader</span></code> and <code class="docutils literal notranslate"><span class="pre">ext_loader_ver</span></code> fields in
<a class="reference internal" href="../../x86/boot.html"><span class="doc">The Linux/x86 Boot Protocol</span></a> for additional information.</p>
</section>
<section id="bpf-stats-enabled">
<h2><a class="toc-backref" href="#id8">bpf_stats_enabled</a><a class="headerlink" href="#bpf-stats-enabled" title="Permalink to this headline">¶</a></h2>
<p>Controls whether the kernel should collect statistics on BPF programs
(total time spent running, number of times run…). Enabling
statistics causes a slight reduction in performance on each program
run. The statistics can be seen using <code class="docutils literal notranslate"><span class="pre">bpftool</span></code>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Don’t collect statistics (default).</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Collect statistics.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cad-pid">
<h2><a class="toc-backref" href="#id9">cad_pid</a><a class="headerlink" href="#cad-pid" title="Permalink to this headline">¶</a></h2>
<p>This is the pid which will be signalled on reboot (notably, by
Ctrl-Alt-Delete). Writing a value to this file which doesn’t
correspond to a running process will result in <code class="docutils literal notranslate"><span class="pre">-ESRCH</span></code>.</p>
<p>See also <a class="reference internal" href="#ctrl-alt-del">ctrl-alt-del</a>.</p>
</section>
<section id="cap-last-cap">
<h2><a class="toc-backref" href="#id10">cap_last_cap</a><a class="headerlink" href="#cap-last-cap" title="Permalink to this headline">¶</a></h2>
<p>Highest valid capability of the running kernel.  Exports
<code class="docutils literal notranslate"><span class="pre">CAP_LAST_CAP</span></code> from the kernel.</p>
</section>
<section id="core-pattern">
<span id="id1"></span><h2><a class="toc-backref" href="#id11">core_pattern</a><a class="headerlink" href="#core-pattern" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">core_pattern</span></code> is used to specify a core dumpfile pattern name.</p>
<ul>
<li><p>max length 127 characters; default value is “core”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">core_pattern</span></code> is used as a pattern template for the output
filename; certain string patterns (beginning with ‘%’) are
substituted with their actual values.</p></li>
<li><p>backward compatibility with <code class="docutils literal notranslate"><span class="pre">core_uses_pid</span></code>:</p>
<blockquote>
<div><p>If <code class="docutils literal notranslate"><span class="pre">core_pattern</span></code> does not include “%p” (default does not)
and <code class="docutils literal notranslate"><span class="pre">core_uses_pid</span></code> is set, then .PID will be appended to
the filename.</p>
</div></blockquote>
</li>
<li><p>corename format specifiers</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>%&lt;NUL&gt;</p></td>
<td><p>‘%’ is dropped</p></td>
</tr>
<tr class="row-even"><td><p>%%</p></td>
<td><p>output one ‘%’</p></td>
</tr>
<tr class="row-odd"><td><p>%p</p></td>
<td><p>pid</p></td>
</tr>
<tr class="row-even"><td><p>%P</p></td>
<td><p>global pid (init PID namespace)</p></td>
</tr>
<tr class="row-odd"><td><p>%i</p></td>
<td><p>tid</p></td>
</tr>
<tr class="row-even"><td><p>%I</p></td>
<td><p>global tid (init PID namespace)</p></td>
</tr>
<tr class="row-odd"><td><p>%u</p></td>
<td><p>uid (in initial user namespace)</p></td>
</tr>
<tr class="row-even"><td><p>%g</p></td>
<td><p>gid (in initial user namespace)</p></td>
</tr>
<tr class="row-odd"><td><p>%d</p></td>
<td><p>dump mode, matches <code class="docutils literal notranslate"><span class="pre">PR_SET_DUMPABLE</span></code> and
<code class="docutils literal notranslate"><span class="pre">/proc/sys/fs/suid_dumpable</span></code></p></td>
</tr>
<tr class="row-even"><td><p>%s</p></td>
<td><p>signal number</p></td>
</tr>
<tr class="row-odd"><td><p>%t</p></td>
<td><p>UNIX time of dump</p></td>
</tr>
<tr class="row-even"><td><p>%h</p></td>
<td><p>hostname</p></td>
</tr>
<tr class="row-odd"><td><p>%e</p></td>
<td><p>executable filename (may be shortened, could be changed by prctl etc)</p></td>
</tr>
<tr class="row-even"><td><p>%f</p></td>
<td><p>executable filename</p></td>
</tr>
<tr class="row-odd"><td><p>%E</p></td>
<td><p>executable path</p></td>
</tr>
<tr class="row-even"><td><p>%c</p></td>
<td><p>maximum size of core file by resource limit RLIMIT_CORE</p></td>
</tr>
<tr class="row-odd"><td><p>%C</p></td>
<td><p>CPU the task ran on</p></td>
</tr>
<tr class="row-even"><td><p>%&lt;OTHER&gt;</p></td>
<td><p>both are dropped</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p>If the first character of the pattern is a ‘|’, the kernel will treat
the rest of the pattern as a command to run.  The core dump will be
written to the standard input of that program instead of to a file.</p></li>
</ul>
</section>
<section id="core-pipe-limit">
<h2><a class="toc-backref" href="#id12">core_pipe_limit</a><a class="headerlink" href="#core-pipe-limit" title="Permalink to this headline">¶</a></h2>
<p>This sysctl is only applicable when <a class="reference internal" href="#core-pattern">core_pattern</a> is configured to
pipe core files to a user space helper (when the first character of
<code class="docutils literal notranslate"><span class="pre">core_pattern</span></code> is a ‘|’, see above).
When collecting cores via a pipe to an application, it is occasionally
useful for the collecting application to gather data about the
crashing process from its <code class="docutils literal notranslate"><span class="pre">/proc/pid</span></code> directory.
In order to do this safely, the kernel must wait for the collecting
process to exit, so as not to remove the crashing processes proc files
prematurely.
This in turn creates the possibility that a misbehaving userspace
collecting process can block the reaping of a crashed process simply
by never exiting.
This sysctl defends against that.
It defines how many concurrent crashing processes may be piped to user
space applications in parallel.
If this value is exceeded, then those crashing processes above that
value are noted via the kernel log and their cores are skipped.
0 is a special value, indicating that unlimited processes may be
captured in parallel, but that no waiting will take place (i.e. the
collecting process is not guaranteed access to <code class="docutils literal notranslate"><span class="pre">/proc/&lt;crashing</span>
<span class="pre">pid&gt;/</span></code>).
This value defaults to 0.</p>
</section>
<section id="core-uses-pid">
<h2><a class="toc-backref" href="#id13">core_uses_pid</a><a class="headerlink" href="#core-uses-pid" title="Permalink to this headline">¶</a></h2>
<p>The default coredump filename is “core”.  By setting
<code class="docutils literal notranslate"><span class="pre">core_uses_pid</span></code> to 1, the coredump filename becomes core.PID.
If <a class="reference internal" href="#core-pattern">core_pattern</a> does not include “%p” (default does not)
and <code class="docutils literal notranslate"><span class="pre">core_uses_pid</span></code> is set, then .PID will be appended to
the filename.</p>
</section>
<section id="ctrl-alt-del">
<h2><a class="toc-backref" href="#id14">ctrl-alt-del</a><a class="headerlink" href="#ctrl-alt-del" title="Permalink to this headline">¶</a></h2>
<p>When the value in this file is 0, ctrl-alt-del is trapped and
sent to the <code class="docutils literal notranslate"><span class="pre">init(1)</span></code> program to handle a graceful restart.
When, however, the value is &gt; 0, Linux’s reaction to a Vulcan
Nerve Pinch (tm) will be an immediate reboot, without even
syncing its dirty buffers.</p>
<dl class="simple">
<dt>Note:</dt><dd><p>when a program (like dosemu) has the keyboard in ‘raw’
mode, the ctrl-alt-del is intercepted by the program before it
ever reaches the kernel tty layer, and it’s up to the program
to decide what to do with it.</p>
</dd>
</dl>
</section>
<section id="dmesg-restrict">
<h2><a class="toc-backref" href="#id15">dmesg_restrict</a><a class="headerlink" href="#dmesg-restrict" title="Permalink to this headline">¶</a></h2>
<p>This toggle indicates whether unprivileged users are prevented
from using <code class="docutils literal notranslate"><span class="pre">dmesg(8)</span></code> to view messages from the kernel’s log
buffer.
When <code class="docutils literal notranslate"><span class="pre">dmesg_restrict</span></code> is set to 0 there are no restrictions.
When <code class="docutils literal notranslate"><span class="pre">dmesg_restrict</span></code> is set to 1, users must have
<code class="docutils literal notranslate"><span class="pre">CAP_SYSLOG</span></code> to use <code class="docutils literal notranslate"><span class="pre">dmesg(8)</span></code>.</p>
<p>The kernel config option <code class="docutils literal notranslate"><span class="pre">CONFIG_SECURITY_DMESG_RESTRICT</span></code> sets the
default value of <code class="docutils literal notranslate"><span class="pre">dmesg_restrict</span></code>.</p>
</section>
<section id="domainname-hostname">
<h2><a class="toc-backref" href="#id16">domainname &amp; hostname</a><a class="headerlink" href="#domainname-hostname" title="Permalink to this headline">¶</a></h2>
<p>These files can be used to set the NIS/YP domainname and the
hostname of your box in exactly the same way as the commands
domainname and hostname, i.e.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># echo &quot;darkstar&quot; &gt; /proc/sys/kernel/hostname
# echo &quot;mydomain&quot; &gt; /proc/sys/kernel/domainname
</pre></div>
</div>
<p>has the same effect as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># hostname &quot;darkstar&quot;
# domainname &quot;mydomain&quot;
</pre></div>
</div>
<p>Note, however, that the classic darkstar.frop.org has the
hostname “darkstar” and DNS (Internet Domain Name Server)
domainname “frop.org”, not to be confused with the NIS (Network
Information Service) or YP (Yellow Pages) domainname. These two
domain names are in general different. For a detailed discussion
see the <code class="docutils literal notranslate"><span class="pre">hostname(1)</span></code> man page.</p>
</section>
<section id="firmware-config">
<h2><a class="toc-backref" href="#id17">firmware_config</a><a class="headerlink" href="#firmware-config" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../../driver-api/firmware/fallback-mechanisms.html"><span class="doc">Fallback mechanisms</span></a>.</p>
<p>The entries in this directory allow the firmware loader helper
fallback to be controlled:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">force_sysfs_fallback</span></code>, when set to 1, forces the use of the
fallback;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore_sysfs_fallback</span></code>, when set to 1, ignores any fallback.</p></li>
</ul>
</section>
<section id="ftrace-dump-on-oops">
<h2><a class="toc-backref" href="#id18">ftrace_dump_on_oops</a><a class="headerlink" href="#ftrace-dump-on-oops" title="Permalink to this headline">¶</a></h2>
<p>Determines whether <code class="docutils literal notranslate"><span class="pre">ftrace_dump()</span></code> should be called on an oops (or
kernel panic). This will output the contents of the ftrace buffers to
the console.  This is very useful for capturing traces that lead to
crashes and outputting them to a serial console.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disabled (default).</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Dump buffers of all CPUs.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Dump the buffer of the CPU that triggered the oops.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ftrace-enabled-stack-tracer-enabled">
<h2><a class="toc-backref" href="#id19">ftrace_enabled, stack_tracer_enabled</a><a class="headerlink" href="#ftrace-enabled-stack-tracer-enabled" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../../trace/ftrace.html"><span class="doc">ftrace - Function Tracer</span></a>.</p>
</section>
<section id="hardlockup-all-cpu-backtrace">
<h2><a class="toc-backref" href="#id20">hardlockup_all_cpu_backtrace</a><a class="headerlink" href="#hardlockup-all-cpu-backtrace" title="Permalink to this headline">¶</a></h2>
<p>This value controls the hard lockup detector behavior when a hard
lockup condition is detected as to whether or not to gather further
debug information. If enabled, arch-specific all-CPU stack dumping
will be initiated.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Do nothing. This is the default behavior.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>On detection capture more debug information.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hardlockup-panic">
<h2><a class="toc-backref" href="#id21">hardlockup_panic</a><a class="headerlink" href="#hardlockup-panic" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control whether the kernel panics
when a hard lockup is detected.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 4%" />
<col style="width: 96%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Don’t panic on hard lockup.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Panic on hard lockup.</p></td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="../lockup-watchdogs.html"><span class="doc">Softlockup detector and hardlockup detector (aka nmi_watchdog)</span></a> for more information.
This can also be set using the nmi_watchdog kernel parameter.</p>
</section>
<section id="hotplug">
<h2><a class="toc-backref" href="#id22">hotplug</a><a class="headerlink" href="#hotplug" title="Permalink to this headline">¶</a></h2>
<p>Path for the hotplug policy agent.
Default value is <code class="docutils literal notranslate"><span class="pre">CONFIG_UEVENT_HELPER_PATH</span></code>, which in turn defaults
to the empty string.</p>
<p>This file only exists when <code class="docutils literal notranslate"><span class="pre">CONFIG_UEVENT_HELPER</span></code> is enabled. Most
modern systems rely exclusively on the netlink-based uevent source and
don’t need this.</p>
</section>
<section id="hung-task-all-cpu-backtrace">
<h2><a class="toc-backref" href="#id23">hung_task_all_cpu_backtrace</a><a class="headerlink" href="#hung-task-all-cpu-backtrace" title="Permalink to this headline">¶</a></h2>
<p>If this option is set, the kernel will send an NMI to all CPUs to dump
their backtraces when a hung task is detected. This file shows up if
CONFIG_DETECT_HUNG_TASK and CONFIG_SMP are enabled.</p>
<p>0: Won’t show all CPUs backtraces when a hung task is detected.
This is the default behavior.</p>
<p>1: Will non-maskably interrupt all CPUs and dump their backtraces when
a hung task is detected.</p>
</section>
<section id="hung-task-panic">
<h2><a class="toc-backref" href="#id24">hung_task_panic</a><a class="headerlink" href="#hung-task-panic" title="Permalink to this headline">¶</a></h2>
<p>Controls the kernel’s behavior when a hung task is detected.
This file shows up if <code class="docutils literal notranslate"><span class="pre">CONFIG_DETECT_HUNG_TASK</span></code> is enabled.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Continue operation. This is the default behavior.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Panic immediately.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hung-task-check-count">
<h2><a class="toc-backref" href="#id25">hung_task_check_count</a><a class="headerlink" href="#hung-task-check-count" title="Permalink to this headline">¶</a></h2>
<p>The upper bound on the number of tasks that are checked.
This file shows up if <code class="docutils literal notranslate"><span class="pre">CONFIG_DETECT_HUNG_TASK</span></code> is enabled.</p>
</section>
<section id="hung-task-timeout-secs">
<h2><a class="toc-backref" href="#id26">hung_task_timeout_secs</a><a class="headerlink" href="#hung-task-timeout-secs" title="Permalink to this headline">¶</a></h2>
<p>When a task in D state did not get scheduled
for more than this value report a warning.
This file shows up if <code class="docutils literal notranslate"><span class="pre">CONFIG_DETECT_HUNG_TASK</span></code> is enabled.</p>
<p>0 means infinite timeout, no checking is done.</p>
<p>Possible values to set are in range {0:<code class="docutils literal notranslate"><span class="pre">LONG_MAX</span></code>/<code class="docutils literal notranslate"><span class="pre">HZ</span></code>}.</p>
</section>
<section id="hung-task-check-interval-secs">
<h2><a class="toc-backref" href="#id27">hung_task_check_interval_secs</a><a class="headerlink" href="#hung-task-check-interval-secs" title="Permalink to this headline">¶</a></h2>
<p>Hung task check interval. If hung task checking is enabled
(see <a class="reference internal" href="#hung-task-timeout-secs">hung_task_timeout_secs</a>), the check is done every
<code class="docutils literal notranslate"><span class="pre">hung_task_check_interval_secs</span></code> seconds.
This file shows up if <code class="docutils literal notranslate"><span class="pre">CONFIG_DETECT_HUNG_TASK</span></code> is enabled.</p>
<p>0 (default) means use <code class="docutils literal notranslate"><span class="pre">hung_task_timeout_secs</span></code> as checking
interval.</p>
<p>Possible values to set are in range {0:<code class="docutils literal notranslate"><span class="pre">LONG_MAX</span></code>/<code class="docutils literal notranslate"><span class="pre">HZ</span></code>}.</p>
</section>
<section id="hung-task-warnings">
<h2><a class="toc-backref" href="#id28">hung_task_warnings</a><a class="headerlink" href="#hung-task-warnings" title="Permalink to this headline">¶</a></h2>
<p>The maximum number of warnings to report. During a check interval
if a hung task is detected, this value is decreased by 1.
When this value reaches 0, no more warnings will be reported.
This file shows up if <code class="docutils literal notranslate"><span class="pre">CONFIG_DETECT_HUNG_TASK</span></code> is enabled.</p>
<p>-1: report an infinite number of warnings.</p>
</section>
<section id="hyperv-record-panic-msg">
<h2><a class="toc-backref" href="#id29">hyperv_record_panic_msg</a><a class="headerlink" href="#hyperv-record-panic-msg" title="Permalink to this headline">¶</a></h2>
<p>Controls whether the panic kmsg data should be reported to Hyper-V.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Do not report panic kmsg data.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Report the panic kmsg data. This is the default behavior.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ignore-unaligned-usertrap">
<h2><a class="toc-backref" href="#id30">ignore-unaligned-usertrap</a><a class="headerlink" href="#ignore-unaligned-usertrap" title="Permalink to this headline">¶</a></h2>
<p>On architectures where unaligned accesses cause traps, and where this
feature is supported (<code class="docutils literal notranslate"><span class="pre">CONFIG_SYSCTL_ARCH_UNALIGN_NO_WARN</span></code>;
currently, <code class="docutils literal notranslate"><span class="pre">arc</span></code>, <code class="docutils literal notranslate"><span class="pre">ia64</span></code> and <code class="docutils literal notranslate"><span class="pre">loongarch</span></code>), controls whether all
unaligned traps are logged.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Log all unaligned accesses.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Only warn the first time a process traps. This is the default
setting.</p></td>
</tr>
</tbody>
</table>
<p>See also <a class="reference internal" href="#unaligned-trap">unaligned-trap</a> and <a class="reference internal" href="#unaligned-dump-stack">unaligned-dump-stack</a>. On <code class="docutils literal notranslate"><span class="pre">ia64</span></code>,
this allows system administrators to override the
<code class="docutils literal notranslate"><span class="pre">IA64_THREAD_UAC_NOPRINT</span></code> <code class="docutils literal notranslate"><span class="pre">prctl</span></code> and avoid logs being flooded.</p>
</section>
<section id="kexec-load-disabled">
<h2><a class="toc-backref" href="#id31">kexec_load_disabled</a><a class="headerlink" href="#kexec-load-disabled" title="Permalink to this headline">¶</a></h2>
<p>A toggle indicating if the <code class="docutils literal notranslate"><span class="pre">kexec_load</span></code> syscall has been disabled.
This value defaults to 0 (false: <code class="docutils literal notranslate"><span class="pre">kexec_load</span></code> enabled), but can be
set to 1 (true: <code class="docutils literal notranslate"><span class="pre">kexec_load</span></code> disabled).
Once true, kexec can no longer be used, and the toggle cannot be set
back to false.
This allows a kexec image to be loaded before disabling the syscall,
allowing a system to set up (and later use) an image without it being
altered.
Generally used together with the <a class="reference internal" href="#modules-disabled">modules_disabled</a> sysctl.</p>
</section>
<section id="kptr-restrict">
<h2><a class="toc-backref" href="#id32">kptr_restrict</a><a class="headerlink" href="#kptr-restrict" title="Permalink to this headline">¶</a></h2>
<p>This toggle indicates whether restrictions are placed on
exposing kernel addresses via <code class="docutils literal notranslate"><span class="pre">/proc</span></code> and other interfaces.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">kptr_restrict</span></code> is set to 0 (the default) the address is hashed
before printing.
(This is the equivalent to %p.)</p>
<p>When <code class="docutils literal notranslate"><span class="pre">kptr_restrict</span></code> is set to 1, kernel pointers printed using the
%pK format specifier will be replaced with 0s unless the user has
<code class="docutils literal notranslate"><span class="pre">CAP_SYSLOG</span></code> and effective user and group ids are equal to the real
ids.
This is because %pK checks are done at read() time rather than open()
time, so if permissions are elevated between the open() and the read()
(e.g via a setuid binary) then %pK will not leak kernel pointers to
unprivileged users.
Note, this is a temporary solution only.
The correct long-term solution is to do the permission checks at
open() time.
Consider removing world read permissions from files that use %pK, and
using <a class="reference internal" href="#dmesg-restrict">dmesg_restrict</a> to protect against uses of %pK in <code class="docutils literal notranslate"><span class="pre">dmesg(8)</span></code>
if leaking kernel pointer values to unprivileged users is a concern.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">kptr_restrict</span></code> is set to 2, kernel pointers printed using
%pK will be replaced with 0s regardless of privileges.</p>
</section>
<section id="modprobe">
<h2><a class="toc-backref" href="#id33">modprobe</a><a class="headerlink" href="#modprobe" title="Permalink to this headline">¶</a></h2>
<p>The full path to the usermode helper for autoloading kernel modules,
by default <code class="docutils literal notranslate"><span class="pre">CONFIG_MODPROBE_PATH</span></code>, which in turn defaults to
“/sbin/modprobe”.  This binary is executed when the kernel requests a
module.  For example, if userspace passes an unknown filesystem type
to mount(), then the kernel will automatically request the
corresponding filesystem module by executing this usermode helper.
This usermode helper should insert the needed module into the kernel.</p>
<p>This sysctl only affects module autoloading.  It has no effect on the
ability to explicitly insert modules.</p>
<p>This sysctl can be used to debug module loading requests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo &#39;#! /bin/sh&#39; &gt; /tmp/modprobe
echo &#39;echo &quot;$@&quot; &gt;&gt; /tmp/modprobe.log&#39; &gt;&gt; /tmp/modprobe
echo &#39;exec /sbin/modprobe &quot;$@&quot;&#39; &gt;&gt; /tmp/modprobe
chmod a+x /tmp/modprobe
echo /tmp/modprobe &gt; /proc/sys/kernel/modprobe
</pre></div>
</div>
<p>Alternatively, if this sysctl is set to the empty string, then module
autoloading is completely disabled.  The kernel will not try to
execute a usermode helper at all, nor will it call the
kernel_module_request LSM hook.</p>
<p>If CONFIG_STATIC_USERMODEHELPER=y is set in the kernel configuration,
then the configured static usermode helper overrides this sysctl,
except that the empty string is still accepted to completely disable
module autoloading as described above.</p>
</section>
<section id="modules-disabled">
<h2><a class="toc-backref" href="#id34">modules_disabled</a><a class="headerlink" href="#modules-disabled" title="Permalink to this headline">¶</a></h2>
<p>A toggle value indicating if modules are allowed to be loaded
in an otherwise modular kernel.  This toggle defaults to off
(0), but can be set true (1).  Once true, modules can be
neither loaded nor unloaded, and the toggle cannot be set back
to false.  Generally used with the <a class="reference internal" href="#kexec-load-disabled">kexec_load_disabled</a> toggle.</p>
</section>
<section id="msgmax-msgmnb-and-msgmni">
<span id="msgmni"></span><h2><a class="toc-backref" href="#id35">msgmax, msgmnb, and msgmni</a><a class="headerlink" href="#msgmax-msgmnb-and-msgmni" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">msgmax</span></code> is the maximum size of an IPC message, in bytes. 8192 by
default (<code class="docutils literal notranslate"><span class="pre">MSGMAX</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">msgmnb</span></code> is the maximum size of an IPC queue, in bytes. 16384 by
default (<code class="docutils literal notranslate"><span class="pre">MSGMNB</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">msgmni</span></code> is the maximum number of IPC queues. 32000 by default
(<code class="docutils literal notranslate"><span class="pre">MSGMNI</span></code>).</p>
</section>
<section id="msg-next-id-sem-next-id-and-shm-next-id-system-v-ipc">
<h2><a class="toc-backref" href="#id36">msg_next_id, sem_next_id, and shm_next_id (System V IPC)</a><a class="headerlink" href="#msg-next-id-sem-next-id-and-shm-next-id-system-v-ipc" title="Permalink to this headline">¶</a></h2>
<p>These three toggles allows to specify desired id for next allocated IPC
object: message, semaphore or shared memory respectively.</p>
<p>By default they are equal to -1, which means generic allocation logic.
Possible values to set are in range {0:<code class="docutils literal notranslate"><span class="pre">INT_MAX</span></code>}.</p>
<dl class="simple">
<dt>Notes:</dt><dd><ol class="arabic simple">
<li><p>kernel doesn’t guarantee, that new object will have desired id. So,
it’s up to userspace, how to handle an object with “wrong” id.</p></li>
<li><p>Toggle with non-default value will be set back to -1 by kernel after
successful IPC object allocation. If an IPC object allocation syscall
fails, it is undefined if the value remains unmodified or is reset to -1.</p></li>
</ol>
</dd>
</dl>
</section>
<section id="ngroups-max">
<h2><a class="toc-backref" href="#id37">ngroups_max</a><a class="headerlink" href="#ngroups-max" title="Permalink to this headline">¶</a></h2>
<p>Maximum number of supplementary groups, _i.e._ the maximum size which
<code class="docutils literal notranslate"><span class="pre">setgroups</span></code> will accept. Exports <code class="docutils literal notranslate"><span class="pre">NGROUPS_MAX</span></code> from the kernel.</p>
</section>
<section id="nmi-watchdog">
<h2><a class="toc-backref" href="#id38">nmi_watchdog</a><a class="headerlink" href="#nmi-watchdog" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control the NMI watchdog
(i.e. the hard lockup detector) on x86 systems.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disable the hard lockup detector.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Enable the hard lockup detector.</p></td>
</tr>
</tbody>
</table>
<p>The hard lockup detector monitors each CPU for its ability to respond to
timer interrupts. The mechanism utilizes CPU performance counter registers
that are programmed to generate Non-Maskable Interrupts (NMIs) periodically
while a CPU is busy. Hence, the alternative name ‘NMI watchdog’.</p>
<p>The NMI watchdog is disabled by default if the kernel is running as a guest
in a KVM virtual machine. This default can be overridden by adding:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nmi_watchdog=1
</pre></div>
</div>
<p>to the guest kernel command line (see
<a class="reference internal" href="../kernel-parameters.html"><span class="doc">The kernel’s command-line parameters</span></a>).</p>
</section>
<section id="nmi-wd-lpm-factor-ppc-only">
<h2><a class="toc-backref" href="#id39">nmi_wd_lpm_factor (PPC only)</a><a class="headerlink" href="#nmi-wd-lpm-factor-ppc-only" title="Permalink to this headline">¶</a></h2>
<p>Factor to apply to the NMI watchdog timeout (only when <code class="docutils literal notranslate"><span class="pre">nmi_watchdog</span></code> is
set to 1). This factor represents the percentage added to
<code class="docutils literal notranslate"><span class="pre">watchdog_thresh</span></code> when calculating the NMI watchdog timeout during an
LPM. The soft lockup timeout is not impacted.</p>
<p>A value of 0 means no change. The default value is 200 meaning the NMI
watchdog is set to 30s (based on <code class="docutils literal notranslate"><span class="pre">watchdog_thresh</span></code> equal to 10).</p>
</section>
<section id="numa-balancing">
<h2><a class="toc-backref" href="#id40">numa_balancing</a><a class="headerlink" href="#numa-balancing" title="Permalink to this headline">¶</a></h2>
<p>Enables/disables and configures automatic page fault based NUMA memory
balancing.  Memory is moved automatically to nodes that access it often.
The value to set can be the result of ORing the following:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>NUMA_BALANCING_DISABLED</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>NUMA_BALANCING_NORMAL</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>NUMA_BALANCING_MEMORY_TIERING</p></td>
</tr>
</tbody>
</table>
<p>Or NUMA_BALANCING_NORMAL to optimize page placement among different
NUMA nodes to reduce remote accessing.  On NUMA machines, there is a
performance penalty if remote memory is accessed by a CPU. When this
feature is enabled the kernel samples what task thread is accessing
memory by periodically unmapping pages and later trapping a page
fault. At the time of the page fault, it is determined if the data
being accessed should be migrated to a local memory node.</p>
<p>The unmapping of pages and trapping faults incur additional overhead that
ideally is offset by improved memory locality but there is no universal
guarantee. If the target workload is already bound to NUMA nodes then this
feature should be disabled.</p>
<p>Or NUMA_BALANCING_MEMORY_TIERING to optimize page placement among
different types of memory (represented as different NUMA nodes) to
place the hot pages in the fast memory.  This is implemented based on
unmapping and page fault too.</p>
</section>
<section id="numa-balancing-promote-rate-limit-mbps">
<h2><a class="toc-backref" href="#id41">numa_balancing_promote_rate_limit_MBps</a><a class="headerlink" href="#numa-balancing-promote-rate-limit-mbps" title="Permalink to this headline">¶</a></h2>
<p>Too high promotion/demotion throughput between different memory types
may hurt application latency.  This can be used to rate limit the
promotion throughput.  The per-node max promotion throughput in MB/s
will be limited to be no more than the set value.</p>
<p>A rule of thumb is to set this to less than 1/10 of the PMEM node
write bandwidth.</p>
</section>
<section id="oops-all-cpu-backtrace">
<h2><a class="toc-backref" href="#id42">oops_all_cpu_backtrace</a><a class="headerlink" href="#oops-all-cpu-backtrace" title="Permalink to this headline">¶</a></h2>
<p>If this option is set, the kernel will send an NMI to all CPUs to dump
their backtraces when an oops event occurs. It should be used as a last
resort in case a panic cannot be triggered (to protect VMs running, for
example) or kdump can’t be collected. This file shows up if CONFIG_SMP
is enabled.</p>
<p>0: Won’t show all CPUs backtraces when an oops is detected.
This is the default behavior.</p>
<p>1: Will non-maskably interrupt all CPUs and dump their backtraces when
an oops event is detected.</p>
</section>
<section id="oops-limit">
<h2><a class="toc-backref" href="#id43">oops_limit</a><a class="headerlink" href="#oops-limit" title="Permalink to this headline">¶</a></h2>
<p>Number of kernel oopses after which the kernel should panic when
<code class="docutils literal notranslate"><span class="pre">panic_on_oops</span></code> is not set. Setting this to 0 disables checking
the count. Setting this to  1 has the same effect as setting
<code class="docutils literal notranslate"><span class="pre">panic_on_oops=1</span></code>. The default value is 10000.</p>
</section>
<section id="osrelease-ostype-version">
<h2><a class="toc-backref" href="#id44">osrelease, ostype &amp; version</a><a class="headerlink" href="#osrelease-ostype-version" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># cat osrelease
2.1.88
# cat ostype
Linux
# cat version
#5 Wed Feb 25 21:49:24 MET 1998
</pre></div>
</div>
<p>The files <code class="docutils literal notranslate"><span class="pre">osrelease</span></code> and <code class="docutils literal notranslate"><span class="pre">ostype</span></code> should be clear enough.
<code class="docutils literal notranslate"><span class="pre">version</span></code>
needs a little more clarification however. The ‘#5’ means that
this is the fifth kernel built from this source base and the
date behind it indicates the time the kernel was built.
The only way to tune these values is to rebuild the kernel :-)</p>
</section>
<section id="overflowgid-overflowuid">
<h2><a class="toc-backref" href="#id45">overflowgid &amp; overflowuid</a><a class="headerlink" href="#overflowgid-overflowuid" title="Permalink to this headline">¶</a></h2>
<p>if your architecture did not always support 32-bit UIDs (i.e. arm,
i386, m68k, sh, and sparc32), a fixed UID and GID will be returned to
applications that use the old 16-bit UID/GID system calls, if the
actual UID or GID would exceed 65535.</p>
<p>These sysctls allow you to change the value of the fixed UID and GID.
The default is 65534.</p>
</section>
<section id="panic">
<h2><a class="toc-backref" href="#id46">panic</a><a class="headerlink" href="#panic" title="Permalink to this headline">¶</a></h2>
<p>The value in this file determines the behaviour of the kernel on a
panic:</p>
<ul class="simple">
<li><p>if zero, the kernel will loop forever;</p></li>
<li><p>if negative, the kernel will reboot immediately;</p></li>
<li><p>if positive, the kernel will reboot after the corresponding number
of seconds.</p></li>
</ul>
<p>When you use the software watchdog, the recommended setting is 60.</p>
</section>
<section id="panic-on-io-nmi">
<h2><a class="toc-backref" href="#id47">panic_on_io_nmi</a><a class="headerlink" href="#panic-on-io-nmi" title="Permalink to this headline">¶</a></h2>
<p>Controls the kernel’s behavior when a CPU receives an NMI caused by
an IO error.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Try to continue operation (default).</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Panic immediately. The IO error triggered an NMI. This indicates a
serious system condition which could result in IO data corruption.
Rather than continuing, panicking might be a better choice. Some
servers issue this sort of NMI when the dump button is pushed,
and you can use this option to take a crash dump.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="panic-on-oops">
<h2><a class="toc-backref" href="#id48">panic_on_oops</a><a class="headerlink" href="#panic-on-oops" title="Permalink to this headline">¶</a></h2>
<p>Controls the kernel’s behaviour when an oops or BUG is encountered.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Try to continue operation.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Panic immediately.  If the <cite>panic</cite> sysctl is also non-zero then the
machine will be rebooted.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="panic-on-stackoverflow">
<h2><a class="toc-backref" href="#id49">panic_on_stackoverflow</a><a class="headerlink" href="#panic-on-stackoverflow" title="Permalink to this headline">¶</a></h2>
<p>Controls the kernel’s behavior when detecting the overflows of
kernel, IRQ and exception stacks except a user stack.
This file shows up if <code class="docutils literal notranslate"><span class="pre">CONFIG_DEBUG_STACKOVERFLOW</span></code> is enabled.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 4%" />
<col style="width: 96%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Try to continue operation.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Panic immediately.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="panic-on-unrecovered-nmi">
<h2><a class="toc-backref" href="#id50">panic_on_unrecovered_nmi</a><a class="headerlink" href="#panic-on-unrecovered-nmi" title="Permalink to this headline">¶</a></h2>
<p>The default Linux behaviour on an NMI of either memory or unknown is
to continue operation. For many environments such as scientific
computing it is preferable that the box is taken out and the error
dealt with than an uncorrected parity/ECC error get propagated.</p>
<p>A small number of systems do generate NMIs for bizarre random reasons
such as power management so the default is off. That sysctl works like
the existing panic controls already in that directory.</p>
</section>
<section id="panic-on-warn">
<h2><a class="toc-backref" href="#id51">panic_on_warn</a><a class="headerlink" href="#panic-on-warn" title="Permalink to this headline">¶</a></h2>
<p>Calls <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> in the WARN() path when set to 1.  This is useful to avoid
a kernel rebuild when attempting to kdump at the location of a WARN().</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Only WARN(), default behaviour.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Call <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> after printing out WARN() location.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="panic-print">
<h2><a class="toc-backref" href="#id52">panic_print</a><a class="headerlink" href="#panic-print" title="Permalink to this headline">¶</a></h2>
<p>Bitmask for printing system info when panic happens. User can chose
combination of the following bits:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 91%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>bit 0</p></td>
<td><p>print all tasks info</p></td>
</tr>
<tr class="row-even"><td><p>bit 1</p></td>
<td><p>print system memory info</p></td>
</tr>
<tr class="row-odd"><td><p>bit 2</p></td>
<td><p>print timer info</p></td>
</tr>
<tr class="row-even"><td><p>bit 3</p></td>
<td><p>print locks info if <code class="docutils literal notranslate"><span class="pre">CONFIG_LOCKDEP</span></code> is on</p></td>
</tr>
<tr class="row-odd"><td><p>bit 4</p></td>
<td><p>print ftrace buffer</p></td>
</tr>
<tr class="row-even"><td><p>bit 5</p></td>
<td><p>print all printk messages in buffer</p></td>
</tr>
<tr class="row-odd"><td><p>bit 6</p></td>
<td><p>print all CPUs backtrace (if available in the arch)</p></td>
</tr>
</tbody>
</table>
<p>So for example to print tasks and memory info on panic, user can:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 3 &gt; /proc/sys/kernel/panic_print
</pre></div>
</div>
</section>
<section id="panic-on-rcu-stall">
<h2><a class="toc-backref" href="#id53">panic_on_rcu_stall</a><a class="headerlink" href="#panic-on-rcu-stall" title="Permalink to this headline">¶</a></h2>
<p>When set to 1, calls <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> after RCU stall detection messages. This
is useful to define the root cause of RCU stalls using a vmcore.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Do not <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> when RCU stall takes place, default behavior.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p><a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> after printing RCU stall messages.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="max-rcu-stall-to-panic">
<h2><a class="toc-backref" href="#id54">max_rcu_stall_to_panic</a><a class="headerlink" href="#max-rcu-stall-to-panic" title="Permalink to this headline">¶</a></h2>
<p>When <code class="docutils literal notranslate"><span class="pre">panic_on_rcu_stall</span></code> is set to 1, this value determines the
number of times that RCU can stall before <a class="reference internal" href="../../driver-api/basics.html#c.panic" title="panic"><code class="xref c c-func docutils literal notranslate"><span class="pre">panic()</span></code></a> is called.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">panic_on_rcu_stall</span></code> is set to 0, this value is has no effect.</p>
</section>
<section id="perf-cpu-time-max-percent">
<h2><a class="toc-backref" href="#id55">perf_cpu_time_max_percent</a><a class="headerlink" href="#perf-cpu-time-max-percent" title="Permalink to this headline">¶</a></h2>
<p>Hints to the kernel how much CPU time it should be allowed to
use to handle perf sampling events.  If the perf subsystem
is informed that its samples are exceeding this limit, it
will drop its sampling frequency to attempt to reduce its CPU
usage.</p>
<p>Some perf sampling happens in NMIs.  If these samples
unexpectedly take too long to execute, the NMIs can become
stacked up next to each other so much that nothing else is
allowed to execute.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disable the mechanism.  Do not monitor or correct perf’s
sampling rate no matter how CPU time it takes.</p></td>
</tr>
<tr class="row-even"><td><p>1-100</p></td>
<td><p>Attempt to throttle perf’s sample rate to this
percentage of CPU.  Note: the kernel calculates an
“expected” length of each sample event.  100 here means
100% of that expected length.  Even if this is set to
100, you may still see sample throttling if this
length is exceeded.  Set to 0 if you truly do not care
how much CPU is consumed.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="perf-event-paranoid">
<h2><a class="toc-backref" href="#id56">perf_event_paranoid</a><a class="headerlink" href="#perf-event-paranoid" title="Permalink to this headline">¶</a></h2>
<p>Controls use of the performance events system by unprivileged
users (without CAP_PERFMON).  The default value is 2.</p>
<p>For backward compatibility reasons access to system performance
monitoring and observability remains open for CAP_SYS_ADMIN
privileged processes but CAP_SYS_ADMIN usage for secure system
performance monitoring and observability operations is discouraged
with respect to CAP_PERFMON use cases.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 4%" />
<col style="width: 96%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>-1</p></td>
<td><p>Allow use of (almost) all events by all users.</p>
<p>Ignore mlock limit after perf_event_mlock_kb without
<code class="docutils literal notranslate"><span class="pre">CAP_IPC_LOCK</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><p>&gt;=0</p></td>
<td><p>Disallow ftrace function tracepoint by users without
<code class="docutils literal notranslate"><span class="pre">CAP_PERFMON</span></code>.</p>
<p>Disallow raw tracepoint access by users without <code class="docutils literal notranslate"><span class="pre">CAP_PERFMON</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>&gt;=1</p></td>
<td><p>Disallow CPU event access by users without <code class="docutils literal notranslate"><span class="pre">CAP_PERFMON</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>&gt;=2</p></td>
<td><p>Disallow kernel profiling by users without <code class="docutils literal notranslate"><span class="pre">CAP_PERFMON</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="perf-event-max-stack">
<h2><a class="toc-backref" href="#id57">perf_event_max_stack</a><a class="headerlink" href="#perf-event-max-stack" title="Permalink to this headline">¶</a></h2>
<p>Controls maximum number of stack frames to copy for (<code class="docutils literal notranslate"><span class="pre">attr.sample_type</span> <span class="pre">&amp;</span>
<span class="pre">PERF_SAMPLE_CALLCHAIN</span></code>) configured events, for instance, when using
‘<code class="docutils literal notranslate"><span class="pre">perf</span> <span class="pre">record</span> <span class="pre">-g</span></code>’ or ‘<code class="docutils literal notranslate"><span class="pre">perf</span> <span class="pre">trace</span> <span class="pre">--call-graph</span> <span class="pre">fp</span></code>’.</p>
<p>This can only be done when no events are in use that have callchains
enabled, otherwise writing to this file will return <code class="docutils literal notranslate"><span class="pre">-EBUSY</span></code>.</p>
<p>The default value is 127.</p>
</section>
<section id="perf-event-mlock-kb">
<h2><a class="toc-backref" href="#id58">perf_event_mlock_kb</a><a class="headerlink" href="#perf-event-mlock-kb" title="Permalink to this headline">¶</a></h2>
<p>Control size of per-cpu ring buffer not counted against mlock limit.</p>
<p>The default value is 512 + 1 page</p>
</section>
<section id="perf-event-max-contexts-per-stack">
<h2><a class="toc-backref" href="#id59">perf_event_max_contexts_per_stack</a><a class="headerlink" href="#perf-event-max-contexts-per-stack" title="Permalink to this headline">¶</a></h2>
<p>Controls maximum number of stack frame context entries for
(<code class="docutils literal notranslate"><span class="pre">attr.sample_type</span> <span class="pre">&amp;</span> <span class="pre">PERF_SAMPLE_CALLCHAIN</span></code>) configured events, for
instance, when using ‘<code class="docutils literal notranslate"><span class="pre">perf</span> <span class="pre">record</span> <span class="pre">-g</span></code>’ or ‘<code class="docutils literal notranslate"><span class="pre">perf</span> <span class="pre">trace</span> <span class="pre">--call-graph</span> <span class="pre">fp</span></code>’.</p>
<p>This can only be done when no events are in use that have callchains
enabled, otherwise writing to this file will return <code class="docutils literal notranslate"><span class="pre">-EBUSY</span></code>.</p>
<p>The default value is 8.</p>
</section>
<section id="perf-user-access-arm64-only">
<h2><a class="toc-backref" href="#id60">perf_user_access (arm64 only)</a><a class="headerlink" href="#perf-user-access-arm64-only" title="Permalink to this headline">¶</a></h2>
<p>Controls user space access for reading perf event counters. When set to 1,
user space can read performance monitor counter registers directly.</p>
<p>The default value is 0 (access disabled).</p>
<p>See <a class="reference internal" href="../../arm64/perf.html"><span class="doc">Perf</span></a> for more information.</p>
</section>
<section id="pid-max">
<h2><a class="toc-backref" href="#id61">pid_max</a><a class="headerlink" href="#pid-max" title="Permalink to this headline">¶</a></h2>
<p>PID allocation wrap value.  When the kernel’s next PID value
reaches this value, it wraps back to a minimum PID value.
PIDs of value <code class="docutils literal notranslate"><span class="pre">pid_max</span></code> or larger are not allocated.</p>
</section>
<section id="ns-last-pid">
<h2><a class="toc-backref" href="#id62">ns_last_pid</a><a class="headerlink" href="#ns-last-pid" title="Permalink to this headline">¶</a></h2>
<p>The last pid allocated in the current (the one task using this sysctl
lives in) pid namespace. When selecting a pid for a next task on fork
kernel tries to allocate a number starting from this one.</p>
</section>
<section id="powersave-nap-ppc-only">
<h2><a class="toc-backref" href="#id63">powersave-nap (PPC only)</a><a class="headerlink" href="#powersave-nap-ppc-only" title="Permalink to this headline">¶</a></h2>
<p>If set, Linux-PPC will use the ‘nap’ mode of powersaving,
otherwise the ‘doze’ mode will be used.</p>
</section>
<hr class="docutils" />
<section id="printk">
<h2><a class="toc-backref" href="#id64">printk</a><a class="headerlink" href="#printk" title="Permalink to this headline">¶</a></h2>
<p>The four values in printk denote: <code class="docutils literal notranslate"><span class="pre">console_loglevel</span></code>,
<code class="docutils literal notranslate"><span class="pre">default_message_loglevel</span></code>, <code class="docutils literal notranslate"><span class="pre">minimum_console_loglevel</span></code> and
<code class="docutils literal notranslate"><span class="pre">default_console_loglevel</span></code> respectively.</p>
<p>These values influence <a class="reference internal" href="../../core-api/printk-basics.html#c.printk" title="printk"><code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code></a> behavior when printing or
logging error messages. See ‘<code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">2</span> <span class="pre">syslog</span></code>’ for more info on
the different loglevels.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>console_loglevel</p></td>
<td><p>messages with a higher priority than
this will be printed to the console</p></td>
</tr>
<tr class="row-even"><td><p>default_message_loglevel</p></td>
<td><p>messages without an explicit priority
will be printed with this priority</p></td>
</tr>
<tr class="row-odd"><td><p>minimum_console_loglevel</p></td>
<td><p>minimum (highest) value to which
console_loglevel can be set</p></td>
</tr>
<tr class="row-even"><td><p>default_console_loglevel</p></td>
<td><p>default value for console_loglevel</p></td>
</tr>
</tbody>
</table>
</section>
<section id="printk-delay">
<h2><a class="toc-backref" href="#id65">printk_delay</a><a class="headerlink" href="#printk-delay" title="Permalink to this headline">¶</a></h2>
<p>Delay each printk message in <code class="docutils literal notranslate"><span class="pre">printk_delay</span></code> milliseconds</p>
<p>Value from 0 - 10000 is allowed.</p>
</section>
<section id="printk-ratelimit">
<h2><a class="toc-backref" href="#id66">printk_ratelimit</a><a class="headerlink" href="#printk-ratelimit" title="Permalink to this headline">¶</a></h2>
<p>Some warning messages are rate limited. <code class="docutils literal notranslate"><span class="pre">printk_ratelimit</span></code> specifies
the minimum length of time between these messages (in seconds).
The default value is 5 seconds.</p>
<p>A value of 0 will disable rate limiting.</p>
</section>
<section id="printk-ratelimit-burst">
<h2><a class="toc-backref" href="#id67">printk_ratelimit_burst</a><a class="headerlink" href="#printk-ratelimit-burst" title="Permalink to this headline">¶</a></h2>
<p>While long term we enforce one message per <a class="reference internal" href="#printk-ratelimit">printk_ratelimit</a>
seconds, we do allow a burst of messages to pass through.
<code class="docutils literal notranslate"><span class="pre">printk_ratelimit_burst</span></code> specifies the number of messages we can
send before ratelimiting kicks in.</p>
<p>The default value is 10 messages.</p>
</section>
<section id="printk-devkmsg">
<h2><a class="toc-backref" href="#id68">printk_devkmsg</a><a class="headerlink" href="#printk-devkmsg" title="Permalink to this headline">¶</a></h2>
<p>Control the logging to <code class="docutils literal notranslate"><span class="pre">/dev/kmsg</span></code> from userspace:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>ratelimit</p></td>
<td><p>default, ratelimited</p></td>
</tr>
<tr class="row-even"><td><p>on</p></td>
<td><p>unlimited logging to /dev/kmsg from userspace</p></td>
</tr>
<tr class="row-odd"><td><p>off</p></td>
<td><p>logging to /dev/kmsg disabled</p></td>
</tr>
</tbody>
</table>
<p>The kernel command line parameter <code class="docutils literal notranslate"><span class="pre">printk.devkmsg=</span></code> overrides this and is
a one-time setting until next reboot: once set, it cannot be changed by
this sysctl interface anymore.</p>
</section>
<hr class="docutils" />
<section id="pty">
<h2><a class="toc-backref" href="#id69">pty</a><a class="headerlink" href="#pty" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../../filesystems/devpts.html"><span class="doc">The Devpts Filesystem</span></a>.</p>
</section>
<section id="random">
<h2><a class="toc-backref" href="#id70">random</a><a class="headerlink" href="#random" title="Permalink to this headline">¶</a></h2>
<p>This is a directory, with the following entries:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boot_id</span></code>: a UUID generated the first time this is retrieved, and
unvarying after that;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uuid</span></code>: a UUID generated every time this is retrieved (this can
thus be used to generate UUIDs at will);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entropy_avail</span></code>: the pool’s entropy count, in bits;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">poolsize</span></code>: the entropy pool size, in bits;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">urandom_min_reseed_secs</span></code>: obsolete (used to determine the minimum
number of seconds between urandom pool reseeding). This file is
writable for compatibility purposes, but writing to it has no effect
on any RNG behavior;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_wakeup_threshold</span></code>: when the entropy count drops below this
(as a number of bits), processes waiting to write to <code class="docutils literal notranslate"><span class="pre">/dev/random</span></code>
are woken up. This file is writable for compatibility purposes, but
writing to it has no effect on any RNG behavior.</p></li>
</ul>
</section>
<section id="randomize-va-space">
<h2><a class="toc-backref" href="#id71">randomize_va_space</a><a class="headerlink" href="#randomize-va-space" title="Permalink to this headline">¶</a></h2>
<p>This option can be used to select the type of process address
space randomization that is used in the system, for architectures
that support this feature.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Turn the process address space randomization off.  This is the
default for architectures that do not support this feature anyways,
and kernels that are booted with the “norandmaps” parameter.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Make the addresses of mmap base, stack and VDSO page randomized.
This, among other things, implies that shared libraries will be
loaded to random addresses.  Also for PIE-linked binaries, the
location of code start is randomized.  This is the default if the
<code class="docutils literal notranslate"><span class="pre">CONFIG_COMPAT_BRK</span></code> option is enabled.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Additionally enable heap randomization.  This is the default if
<code class="docutils literal notranslate"><span class="pre">CONFIG_COMPAT_BRK</span></code> is disabled.</p>
<p>There are a few legacy applications out there (such as some ancient
versions of libc.so.5 from 1996) that assume that brk area starts
just after the end of the code+bss.  These applications break when
start of the brk area is randomized.  There are however no known
non-legacy applications that would be broken this way, so for most
systems it is safe to choose full randomization.</p>
<p>Systems with ancient and/or broken binaries should be configured
with <code class="docutils literal notranslate"><span class="pre">CONFIG_COMPAT_BRK</span></code> enabled, which excludes the heap from process
address space randomization.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="real-root-dev">
<h2><a class="toc-backref" href="#id72">real-root-dev</a><a class="headerlink" href="#real-root-dev" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../initrd.html"><span class="doc">Using the initial RAM disk (initrd)</span></a>.</p>
</section>
<section id="reboot-cmd-sparc-only">
<h2><a class="toc-backref" href="#id73">reboot-cmd (SPARC only)</a><a class="headerlink" href="#reboot-cmd-sparc-only" title="Permalink to this headline">¶</a></h2>
<p>??? This seems to be a way to give an argument to the Sparc
ROM/Flash boot loader. Maybe to tell it what to do after
rebooting. ???</p>
</section>
<section id="sched-energy-aware">
<h2><a class="toc-backref" href="#id74">sched_energy_aware</a><a class="headerlink" href="#sched-energy-aware" title="Permalink to this headline">¶</a></h2>
<p>Enables/disables Energy Aware Scheduling (EAS). EAS starts
automatically on platforms where it can run (that is,
platforms with asymmetric CPU topologies and having an Energy
Model available). If your platform happens to meet the
requirements for EAS but you do not want to use it, change
this value to 0.</p>
</section>
<section id="task-delayacct">
<h2><a class="toc-backref" href="#id75">task_delayacct</a><a class="headerlink" href="#task-delayacct" title="Permalink to this headline">¶</a></h2>
<p>Enables/disables task delay accounting (see
<a class="reference internal" href="../../accounting/delay-accounting.html"><span class="doc">Delay accounting</span></a>. Enabling this feature incurs
a small amount of overhead in the scheduler but is useful for debugging
and performance tuning. It is required by some tools such as iotop.</p>
</section>
<section id="sched-schedstats">
<h2><a class="toc-backref" href="#id76">sched_schedstats</a><a class="headerlink" href="#sched-schedstats" title="Permalink to this headline">¶</a></h2>
<p>Enables/disables scheduler statistics. Enabling this feature
incurs a small amount of overhead in the scheduler but is
useful for debugging and performance tuning.</p>
</section>
<section id="sched-util-clamp-min">
<h2><a class="toc-backref" href="#id77">sched_util_clamp_min</a><a class="headerlink" href="#sched-util-clamp-min" title="Permalink to this headline">¶</a></h2>
<p>Max allowed <em>minimum</em> utilization.</p>
<p>Default value is 1024, which is the maximum possible value.</p>
<p>It means that any requested uclamp.min value cannot be greater than
sched_util_clamp_min, i.e., it is restricted to the range
[0:sched_util_clamp_min].</p>
</section>
<section id="sched-util-clamp-max">
<h2><a class="toc-backref" href="#id78">sched_util_clamp_max</a><a class="headerlink" href="#sched-util-clamp-max" title="Permalink to this headline">¶</a></h2>
<p>Max allowed <em>maximum</em> utilization.</p>
<p>Default value is 1024, which is the maximum possible value.</p>
<p>It means that any requested uclamp.max value cannot be greater than
sched_util_clamp_max, i.e., it is restricted to the range
[0:sched_util_clamp_max].</p>
</section>
<section id="sched-util-clamp-min-rt-default">
<h2><a class="toc-backref" href="#id79">sched_util_clamp_min_rt_default</a><a class="headerlink" href="#sched-util-clamp-min-rt-default" title="Permalink to this headline">¶</a></h2>
<p>By default Linux is tuned for performance. Which means that RT tasks always run
at the highest frequency and most capable (highest capacity) CPU (in
heterogeneous systems).</p>
<p>Uclamp achieves this by setting the requested uclamp.min of all RT tasks to
1024 by default, which effectively boosts the tasks to run at the highest
frequency and biases them to run on the biggest CPU.</p>
<p>This knob allows admins to change the default behavior when uclamp is being
used. In battery powered devices particularly, running at the maximum
capacity and frequency will increase energy consumption and shorten the battery
life.</p>
<p>This knob is only effective for RT tasks which the user hasn’t modified their
requested uclamp.min value via sched_setattr() syscall.</p>
<p>This knob will not escape the range constraint imposed by sched_util_clamp_min
defined above.</p>
<p>For example if</p>
<blockquote>
<div><p>sched_util_clamp_min_rt_default = 800
sched_util_clamp_min = 600</p>
</div></blockquote>
<p>Then the boost will be clamped to 600 because 800 is outside of the permissible
range of [0:600]. This could happen for instance if a powersave mode will
restrict all boosts temporarily by modifying sched_util_clamp_min. As soon as
this restriction is lifted, the requested sched_util_clamp_min_rt_default
will take effect.</p>
</section>
<section id="seccomp">
<h2><a class="toc-backref" href="#id80">seccomp</a><a class="headerlink" href="#seccomp" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../../userspace-api/seccomp_filter.html"><span class="doc">Seccomp BPF (SECure COMPuting with filters)</span></a>.</p>
</section>
<section id="sg-big-buff">
<h2><a class="toc-backref" href="#id81">sg-big-buff</a><a class="headerlink" href="#sg-big-buff" title="Permalink to this headline">¶</a></h2>
<p>This file shows the size of the generic SCSI (sg) buffer.
You can’t tune it just yet, but you could change it on
compile time by editing <code class="docutils literal notranslate"><span class="pre">include/scsi/sg.h</span></code> and changing
the value of <code class="docutils literal notranslate"><span class="pre">SG_BIG_BUFF</span></code>.</p>
<p>There shouldn’t be any reason to change this value. If
you can come up with one, you probably know what you
are doing anyway :)</p>
</section>
<section id="shmall">
<h2><a class="toc-backref" href="#id82">shmall</a><a class="headerlink" href="#shmall" title="Permalink to this headline">¶</a></h2>
<p>This parameter sets the total amount of shared memory pages that
can be used system wide. Hence, <code class="docutils literal notranslate"><span class="pre">shmall</span></code> should always be at least
<code class="docutils literal notranslate"><span class="pre">ceil(shmmax/PAGE_SIZE)</span></code>.</p>
<p>If you are not sure what the default <code class="docutils literal notranslate"><span class="pre">PAGE_SIZE</span></code> is on your Linux
system, you can run the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># getconf PAGE_SIZE
</pre></div>
</div>
</section>
<section id="shmmax">
<h2><a class="toc-backref" href="#id83">shmmax</a><a class="headerlink" href="#shmmax" title="Permalink to this headline">¶</a></h2>
<p>This value can be used to query and set the run time limit
on the maximum shared memory segment size that can be created.
Shared memory segments up to 1Gb are now supported in the
kernel.  This value defaults to <code class="docutils literal notranslate"><span class="pre">SHMMAX</span></code>.</p>
</section>
<section id="shmmni">
<h2><a class="toc-backref" href="#id84">shmmni</a><a class="headerlink" href="#shmmni" title="Permalink to this headline">¶</a></h2>
<p>This value determines the maximum number of shared memory segments.
4096 by default (<code class="docutils literal notranslate"><span class="pre">SHMMNI</span></code>).</p>
</section>
<section id="shm-rmid-forced">
<h2><a class="toc-backref" href="#id85">shm_rmid_forced</a><a class="headerlink" href="#shm-rmid-forced" title="Permalink to this headline">¶</a></h2>
<p>Linux lets you set resource limits, including how much memory one
process can consume, via <code class="docutils literal notranslate"><span class="pre">setrlimit(2)</span></code>.  Unfortunately, shared memory
segments are allowed to exist without association with any process, and
thus might not be counted against any resource limits.  If enabled,
shared memory segments are automatically destroyed when their attach
count becomes zero after a detach or a process termination.  It will
also destroy segments that were created, but never attached to, on exit
from the process.  The only use left for <code class="docutils literal notranslate"><span class="pre">IPC_RMID</span></code> is to immediately
destroy an unattached segment.  Of course, this breaks the way things are
defined, so some applications might stop working.  Note that this
feature will do you no good unless you also configure your resource
limits (in particular, <code class="docutils literal notranslate"><span class="pre">RLIMIT_AS</span></code> and <code class="docutils literal notranslate"><span class="pre">RLIMIT_NPROC</span></code>).  Most systems don’t
need this.</p>
<p>Note that if you change this from 0 to 1, already created segments
without users and with a dead originative process will be destroyed.</p>
</section>
<section id="sysctl-writes-strict">
<h2><a class="toc-backref" href="#id86">sysctl_writes_strict</a><a class="headerlink" href="#sysctl-writes-strict" title="Permalink to this headline">¶</a></h2>
<p>Control how file position affects the behavior of updating sysctl values
via the <code class="docutils literal notranslate"><span class="pre">/proc/sys</span></code> interface:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>-1</p></td>
<td><p>Legacy per-write sysctl value handling, with no printk warnings.
Each write syscall must fully contain the sysctl value to be
written, and multiple writes on the same sysctl file descriptor
will rewrite the sysctl value, regardless of file position.</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Same behavior as above, but warn about processes that perform writes
to a sysctl file descriptor when the file position is not 0.</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>(default) Respect file position when writing sysctl strings. Multiple
writes will append to the sysctl value buffer. Anything past the max
length of the sysctl value buffer will be ignored. Writes to numeric
sysctl entries must always be at file position 0 and the value must
be fully contained in the buffer sent in the write syscall.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="softlockup-all-cpu-backtrace">
<h2><a class="toc-backref" href="#id87">softlockup_all_cpu_backtrace</a><a class="headerlink" href="#softlockup-all-cpu-backtrace" title="Permalink to this headline">¶</a></h2>
<p>This value controls the soft lockup detector thread’s behavior
when a soft lockup condition is detected as to whether or not
to gather further debug information. If enabled, each cpu will
be issued an NMI and instructed to capture stack trace.</p>
<p>This feature is only applicable for architectures which support
NMI.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Do nothing. This is the default behavior.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>On detection capture more debug information.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="softlockup-panic">
<h2><a class="toc-backref" href="#id88">softlockup_panic</a><a class="headerlink" href="#softlockup-panic" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control whether the kernel panics
when a soft lockup is detected.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Don’t panic on soft lockup.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Panic on soft lockup.</p></td>
</tr>
</tbody>
</table>
<p>This can also be set using the softlockup_panic kernel parameter.</p>
</section>
<section id="soft-watchdog">
<h2><a class="toc-backref" href="#id89">soft_watchdog</a><a class="headerlink" href="#soft-watchdog" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control the soft lockup detector.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disable the soft lockup detector.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Enable the soft lockup detector.</p></td>
</tr>
</tbody>
</table>
<p>The soft lockup detector monitors CPUs for threads that are hogging the CPUs
without rescheduling voluntarily, and thus prevent the ‘migration/N’ threads
from running, causing the watchdog work fail to execute. The mechanism depends
on the CPUs ability to respond to timer interrupts which are needed for the
watchdog work to be queued by the watchdog timer function, otherwise the NMI
watchdog — if enabled — can detect a hard lockup condition.</p>
</section>
<section id="split-lock-mitigate-x86-only">
<h2><a class="toc-backref" href="#id90">split_lock_mitigate (x86 only)</a><a class="headerlink" href="#split-lock-mitigate-x86-only" title="Permalink to this headline">¶</a></h2>
<p>On x86, each “split lock” imposes a system-wide performance penalty. On larger
systems, large numbers of split locks from unprivileged users can result in
denials of service to well-behaved and potentially more important users.</p>
<p>The kernel mitigates these bad users by detecting split locks and imposing
penalties: forcing them to wait and only allowing one core to execute split
locks at a time.</p>
<p>These mitigations can make those bad applications unbearably slow. Setting
split_lock_mitigate=0 may restore some application performance, but will also
increase system exposure to denial of service attacks from split lock users.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disable the mitigation mode - just warns the split lock on kernel log
and exposes the system to denials of service from the split lockers.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Enable the mitigation mode (this is the default) - penalizes the split
lockers with intentional performance degradation.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stack-erasing">
<h2><a class="toc-backref" href="#id91">stack_erasing</a><a class="headerlink" href="#stack-erasing" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to control kernel stack erasing at the end
of syscalls for kernels built with <code class="docutils literal notranslate"><span class="pre">CONFIG_GCC_PLUGIN_STACKLEAK</span></code>.</p>
<p>That erasing reduces the information which kernel stack leak bugs
can reveal and blocks some uninitialized stack variable attacks.
The tradeoff is the performance impact: on a single CPU system kernel
compilation sees a 1% slowdown, other systems and workloads may vary.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 1%" />
<col style="width: 99%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Kernel stack erasing is disabled, STACKLEAK_METRICS are not updated.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Kernel stack erasing is enabled (default), it is performed before
returning to the userspace at the end of syscalls.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stop-a-sparc-only">
<h2><a class="toc-backref" href="#id92">stop-a (SPARC only)</a><a class="headerlink" href="#stop-a-sparc-only" title="Permalink to this headline">¶</a></h2>
<p>Controls Stop-A:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Stop-A has no effect.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Stop-A breaks to the PROM (default).</p></td>
</tr>
</tbody>
</table>
<p>Stop-A is always enabled on a panic, so that the user can return to
the boot PROM.</p>
</section>
<section id="sysrq">
<h2><a class="toc-backref" href="#id93">sysrq</a><a class="headerlink" href="#sysrq" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../sysrq.html"><span class="doc">Linux Magic System Request Key Hacks</span></a>.</p>
</section>
<section id="tainted">
<h2><a class="toc-backref" href="#id94">tainted</a><a class="headerlink" href="#tainted" title="Permalink to this headline">¶</a></h2>
<p>Non-zero if the kernel has been tainted. Numeric values, which can be
ORed together. The letters are seen in “Tainted” line of Oops reports.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 7%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>1</p></td>
<td><p><cite>(P)</cite></p></td>
<td><p>proprietary module was loaded</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p><cite>(F)</cite></p></td>
<td><p>module was force loaded</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p><cite>(S)</cite></p></td>
<td><p>kernel running on an out of specification system</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p><cite>(R)</cite></p></td>
<td><p>module was force unloaded</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p><cite>(M)</cite></p></td>
<td><p>processor reported a Machine Check Exception (MCE)</p></td>
</tr>
<tr class="row-even"><td><p>32</p></td>
<td><p><cite>(B)</cite></p></td>
<td><p>bad page referenced or some unexpected page flags</p></td>
</tr>
<tr class="row-odd"><td><p>64</p></td>
<td><p><cite>(U)</cite></p></td>
<td><p>taint requested by userspace application</p></td>
</tr>
<tr class="row-even"><td><p>128</p></td>
<td><p><cite>(D)</cite></p></td>
<td><p>kernel died recently, i.e. there was an OOPS or BUG</p></td>
</tr>
<tr class="row-odd"><td><p>256</p></td>
<td><p><cite>(A)</cite></p></td>
<td><p>an ACPI table was overridden by user</p></td>
</tr>
<tr class="row-even"><td><p>512</p></td>
<td><p><cite>(W)</cite></p></td>
<td><p>kernel issued warning</p></td>
</tr>
<tr class="row-odd"><td><p>1024</p></td>
<td><p><cite>(C)</cite></p></td>
<td><p>staging driver was loaded</p></td>
</tr>
<tr class="row-even"><td><p>2048</p></td>
<td><p><cite>(I)</cite></p></td>
<td><p>workaround for bug in platform firmware applied</p></td>
</tr>
<tr class="row-odd"><td><p>4096</p></td>
<td><p><cite>(O)</cite></p></td>
<td><p>externally-built (“out-of-tree”) module was loaded</p></td>
</tr>
<tr class="row-even"><td><p>8192</p></td>
<td><p><cite>(E)</cite></p></td>
<td><p>unsigned module was loaded</p></td>
</tr>
<tr class="row-odd"><td><p>16384</p></td>
<td><p><cite>(L)</cite></p></td>
<td><p>soft lockup occurred</p></td>
</tr>
<tr class="row-even"><td><p>32768</p></td>
<td><p><cite>(K)</cite></p></td>
<td><p>kernel has been live patched</p></td>
</tr>
<tr class="row-odd"><td><p>65536</p></td>
<td><p><cite>(X)</cite></p></td>
<td><p>Auxiliary taint, defined and used by for distros</p></td>
</tr>
<tr class="row-even"><td><p>131072</p></td>
<td><p><cite>(T)</cite></p></td>
<td><p>The kernel was built with the struct randomization plugin</p></td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="../tainted-kernels.html"><span class="doc">Tainted kernels</span></a> for more information.</p>
<dl class="simple">
<dt>Note:</dt><dd><p>writes to this sysctl interface will fail with <code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> if the kernel is
booted with the command line option <code class="docutils literal notranslate"><span class="pre">panic_on_taint=&lt;bitmask&gt;,nousertaint</span></code>
and any of the ORed together values being written to <code class="docutils literal notranslate"><span class="pre">tainted</span></code> match with
the bitmask declared on panic_on_taint.
See <a class="reference internal" href="../kernel-parameters.html"><span class="doc">The kernel’s command-line parameters</span></a> for more details on
that particular kernel command line option and its optional
<code class="docutils literal notranslate"><span class="pre">nousertaint</span></code> switch.</p>
</dd>
</dl>
</section>
<section id="threads-max">
<h2><a class="toc-backref" href="#id95">threads-max</a><a class="headerlink" href="#threads-max" title="Permalink to this headline">¶</a></h2>
<p>This value controls the maximum number of threads that can be created
using <code class="docutils literal notranslate"><span class="pre">fork()</span></code>.</p>
<p>During initialization the kernel sets this value such that even if the
maximum number of threads is created, the thread structures occupy only
a part (1/8th) of the available RAM pages.</p>
<p>The minimum value that can be written to <code class="docutils literal notranslate"><span class="pre">threads-max</span></code> is 1.</p>
<p>The maximum value that can be written to <code class="docutils literal notranslate"><span class="pre">threads-max</span></code> is given by the
constant <code class="docutils literal notranslate"><span class="pre">FUTEX_TID_MASK</span></code> (0x3fffffff).</p>
<p>If a value outside of this range is written to <code class="docutils literal notranslate"><span class="pre">threads-max</span></code> an
<code class="docutils literal notranslate"><span class="pre">EINVAL</span></code> error occurs.</p>
</section>
<section id="traceoff-on-warning">
<h2><a class="toc-backref" href="#id96">traceoff_on_warning</a><a class="headerlink" href="#traceoff-on-warning" title="Permalink to this headline">¶</a></h2>
<p>When set, disables tracing (see <a class="reference internal" href="../../trace/ftrace.html"><span class="doc">ftrace - Function Tracer</span></a>) when a
<code class="docutils literal notranslate"><span class="pre">WARN()</span></code> is hit.</p>
</section>
<section id="tracepoint-printk">
<h2><a class="toc-backref" href="#id97">tracepoint_printk</a><a class="headerlink" href="#tracepoint-printk" title="Permalink to this headline">¶</a></h2>
<p>When tracepoints are sent to <a class="reference internal" href="../../core-api/printk-basics.html#c.printk" title="printk"><code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code></a> (enabled by the <code class="docutils literal notranslate"><span class="pre">tp_printk</span></code>
boot parameter), this entry provides runtime control:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 0 &gt; /proc/sys/kernel/tracepoint_printk
</pre></div>
</div>
<p>will stop tracepoints from being sent to <a class="reference internal" href="../../core-api/printk-basics.html#c.printk" title="printk"><code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code></a>, and:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 1 &gt; /proc/sys/kernel/tracepoint_printk
</pre></div>
</div>
<p>will send them to <a class="reference internal" href="../../core-api/printk-basics.html#c.printk" title="printk"><code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code></a> again.</p>
<p>This only works if the kernel was booted with <code class="docutils literal notranslate"><span class="pre">tp_printk</span></code> enabled.</p>
<p>See <a class="reference internal" href="../kernel-parameters.html"><span class="doc">The kernel’s command-line parameters</span></a> and
<a class="reference internal" href="../../trace/boottime-trace.html"><span class="doc">Boot-time tracing</span></a>.</p>
</section>
<section id="unaligned-dump-stack-ia64">
<span id="unaligned-dump-stack"></span><h2><a class="toc-backref" href="#id98">unaligned-dump-stack (ia64)</a><a class="headerlink" href="#unaligned-dump-stack-ia64" title="Permalink to this headline">¶</a></h2>
<p>When logging unaligned accesses, controls whether the stack is
dumped.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Do not dump the stack. This is the default setting.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Dump the stack.</p></td>
</tr>
</tbody>
</table>
<p>See also <a class="reference internal" href="#ignore-unaligned-usertrap">ignore-unaligned-usertrap</a>.</p>
</section>
<section id="unaligned-trap">
<h2><a class="toc-backref" href="#id99">unaligned-trap</a><a class="headerlink" href="#unaligned-trap" title="Permalink to this headline">¶</a></h2>
<p>On architectures where unaligned accesses cause traps, and where this
feature is supported (<code class="docutils literal notranslate"><span class="pre">CONFIG_SYSCTL_ARCH_UNALIGN_ALLOW</span></code>; currently,
<code class="docutils literal notranslate"><span class="pre">arc</span></code>, <code class="docutils literal notranslate"><span class="pre">parisc</span></code> and <code class="docutils literal notranslate"><span class="pre">loongarch</span></code>), controls whether unaligned traps
are caught and emulated (instead of failing).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Do not emulate unaligned accesses.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Emulate unaligned accesses. This is the default setting.</p></td>
</tr>
</tbody>
</table>
<p>See also <a class="reference internal" href="#ignore-unaligned-usertrap">ignore-unaligned-usertrap</a>.</p>
</section>
<section id="unknown-nmi-panic">
<h2><a class="toc-backref" href="#id100">unknown_nmi_panic</a><a class="headerlink" href="#unknown-nmi-panic" title="Permalink to this headline">¶</a></h2>
<p>The value in this file affects behavior of handling NMI. When the
value is non-zero, unknown NMI is trapped and then panic occurs. At
that time, kernel debugging information is displayed on console.</p>
<p>NMI switch that most IA32 servers have fires unknown NMI up, for
example.  If a system hangs up, try pressing the NMI switch.</p>
</section>
<section id="unprivileged-bpf-disabled">
<h2><a class="toc-backref" href="#id101">unprivileged_bpf_disabled</a><a class="headerlink" href="#unprivileged-bpf-disabled" title="Permalink to this headline">¶</a></h2>
<p>Writing 1 to this entry will disable unprivileged calls to <code class="docutils literal notranslate"><span class="pre">bpf()</span></code>;
once disabled, calling <code class="docutils literal notranslate"><span class="pre">bpf()</span></code> without <code class="docutils literal notranslate"><span class="pre">CAP_SYS_ADMIN</span></code> or <code class="docutils literal notranslate"><span class="pre">CAP_BPF</span></code>
will return <code class="docutils literal notranslate"><span class="pre">-EPERM</span></code>. Once set to 1, this can’t be cleared from the
running kernel anymore.</p>
<p>Writing 2 to this entry will also disable unprivileged calls to <code class="docutils literal notranslate"><span class="pre">bpf()</span></code>,
however, an admin can still change this setting later on, if needed, by
writing 0 or 1 to this entry.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">BPF_UNPRIV_DEFAULT_OFF</span></code> is enabled in the kernel config, then this
entry will default to 2 instead of 0.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 98%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Unprivileged calls to <code class="docutils literal notranslate"><span class="pre">bpf()</span></code> are enabled</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Unprivileged calls to <code class="docutils literal notranslate"><span class="pre">bpf()</span></code> are disabled without recovery</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Unprivileged calls to <code class="docutils literal notranslate"><span class="pre">bpf()</span></code> are disabled</p></td>
</tr>
</tbody>
</table>
</section>
<section id="warn-limit">
<h2><a class="toc-backref" href="#id102">warn_limit</a><a class="headerlink" href="#warn-limit" title="Permalink to this headline">¶</a></h2>
<p>Number of kernel warnings after which the kernel should panic when
<code class="docutils literal notranslate"><span class="pre">panic_on_warn</span></code> is not set. Setting this to 0 disables checking
the warning count. Setting this to 1 has the same effect as setting
<code class="docutils literal notranslate"><span class="pre">panic_on_warn=1</span></code>. The default value is 0.</p>
</section>
<section id="watchdog">
<h2><a class="toc-backref" href="#id103">watchdog</a><a class="headerlink" href="#watchdog" title="Permalink to this headline">¶</a></h2>
<p>This parameter can be used to disable or enable the soft lockup detector
<em>and</em> the NMI watchdog (i.e. the hard lockup detector) at the same time.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disable both lockup detectors.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Enable both lockup detectors.</p></td>
</tr>
</tbody>
</table>
<p>The soft lockup detector and the NMI watchdog can also be disabled or
enabled individually, using the <code class="docutils literal notranslate"><span class="pre">soft_watchdog</span></code> and <code class="docutils literal notranslate"><span class="pre">nmi_watchdog</span></code>
parameters.
If the <code class="docutils literal notranslate"><span class="pre">watchdog</span></code> parameter is read, for example by executing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cat /proc/sys/kernel/watchdog
</pre></div>
</div>
<p>the output of this command (0 or 1) shows the logical OR of
<code class="docutils literal notranslate"><span class="pre">soft_watchdog</span></code> and <code class="docutils literal notranslate"><span class="pre">nmi_watchdog</span></code>.</p>
</section>
<section id="watchdog-cpumask">
<h2><a class="toc-backref" href="#id104">watchdog_cpumask</a><a class="headerlink" href="#watchdog-cpumask" title="Permalink to this headline">¶</a></h2>
<p>This value can be used to control on which cpus the watchdog may run.
The default cpumask is all possible cores, but if <code class="docutils literal notranslate"><span class="pre">NO_HZ_FULL</span></code> is
enabled in the kernel config, and cores are specified with the
<code class="docutils literal notranslate"><span class="pre">nohz_full=</span></code> boot argument, those cores are excluded by default.
Offline cores can be included in this mask, and if the core is later
brought online, the watchdog will be started based on the mask value.</p>
<p>Typically this value would only be touched in the <code class="docutils literal notranslate"><span class="pre">nohz_full</span></code> case
to re-enable cores that by default were not running the watchdog,
if a kernel lockup was suspected on those cores.</p>
<p>The argument value is the standard cpulist format for cpumasks,
so for example to enable the watchdog on cores 0, 2, 3, and 4 you
might say:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echo 0,2-4 &gt; /proc/sys/kernel/watchdog_cpumask
</pre></div>
</div>
</section>
<section id="watchdog-thresh">
<h2><a class="toc-backref" href="#id105">watchdog_thresh</a><a class="headerlink" href="#watchdog-thresh" title="Permalink to this headline">¶</a></h2>
<p>This value can be used to control the frequency of hrtimer and NMI
events and the soft and hard lockup thresholds. The default threshold
is 10 seconds.</p>
<p>The softlockup threshold is (<code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">watchdog_thresh</span></code>). Setting this
tunable to zero will disable lockup detection altogether.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Documentation for /proc/sys/kernel/</a><ul>
<li><a class="reference internal" href="#acct">acct</a></li>
<li><a class="reference internal" href="#acpi-video-flags">acpi_video_flags</a></li>
<li><a class="reference internal" href="#arch">arch</a></li>
<li><a class="reference internal" href="#auto-msgmni">auto_msgmni</a></li>
<li><a class="reference internal" href="#bootloader-type-x86-only">bootloader_type (x86 only)</a></li>
<li><a class="reference internal" href="#bootloader-version-x86-only">bootloader_version (x86 only)</a></li>
<li><a class="reference internal" href="#bpf-stats-enabled">bpf_stats_enabled</a></li>
<li><a class="reference internal" href="#cad-pid">cad_pid</a></li>
<li><a class="reference internal" href="#cap-last-cap">cap_last_cap</a></li>
<li><a class="reference internal" href="#core-pattern">core_pattern</a></li>
<li><a class="reference internal" href="#core-pipe-limit">core_pipe_limit</a></li>
<li><a class="reference internal" href="#core-uses-pid">core_uses_pid</a></li>
<li><a class="reference internal" href="#ctrl-alt-del">ctrl-alt-del</a></li>
<li><a class="reference internal" href="#dmesg-restrict">dmesg_restrict</a></li>
<li><a class="reference internal" href="#domainname-hostname">domainname &amp; hostname</a></li>
<li><a class="reference internal" href="#firmware-config">firmware_config</a></li>
<li><a class="reference internal" href="#ftrace-dump-on-oops">ftrace_dump_on_oops</a></li>
<li><a class="reference internal" href="#ftrace-enabled-stack-tracer-enabled">ftrace_enabled, stack_tracer_enabled</a></li>
<li><a class="reference internal" href="#hardlockup-all-cpu-backtrace">hardlockup_all_cpu_backtrace</a></li>
<li><a class="reference internal" href="#hardlockup-panic">hardlockup_panic</a></li>
<li><a class="reference internal" href="#hotplug">hotplug</a></li>
<li><a class="reference internal" href="#hung-task-all-cpu-backtrace">hung_task_all_cpu_backtrace</a></li>
<li><a class="reference internal" href="#hung-task-panic">hung_task_panic</a></li>
<li><a class="reference internal" href="#hung-task-check-count">hung_task_check_count</a></li>
<li><a class="reference internal" href="#hung-task-timeout-secs">hung_task_timeout_secs</a></li>
<li><a class="reference internal" href="#hung-task-check-interval-secs">hung_task_check_interval_secs</a></li>
<li><a class="reference internal" href="#hung-task-warnings">hung_task_warnings</a></li>
<li><a class="reference internal" href="#hyperv-record-panic-msg">hyperv_record_panic_msg</a></li>
<li><a class="reference internal" href="#ignore-unaligned-usertrap">ignore-unaligned-usertrap</a></li>
<li><a class="reference internal" href="#kexec-load-disabled">kexec_load_disabled</a></li>
<li><a class="reference internal" href="#kptr-restrict">kptr_restrict</a></li>
<li><a class="reference internal" href="#modprobe">modprobe</a></li>
<li><a class="reference internal" href="#modules-disabled">modules_disabled</a></li>
<li><a class="reference internal" href="#msgmax-msgmnb-and-msgmni">msgmax, msgmnb, and msgmni</a></li>
<li><a class="reference internal" href="#msg-next-id-sem-next-id-and-shm-next-id-system-v-ipc">msg_next_id, sem_next_id, and shm_next_id (System V IPC)</a></li>
<li><a class="reference internal" href="#ngroups-max">ngroups_max</a></li>
<li><a class="reference internal" href="#nmi-watchdog">nmi_watchdog</a></li>
<li><a class="reference internal" href="#nmi-wd-lpm-factor-ppc-only">nmi_wd_lpm_factor (PPC only)</a></li>
<li><a class="reference internal" href="#numa-balancing">numa_balancing</a></li>
<li><a class="reference internal" href="#numa-balancing-promote-rate-limit-mbps">numa_balancing_promote_rate_limit_MBps</a></li>
<li><a class="reference internal" href="#oops-all-cpu-backtrace">oops_all_cpu_backtrace</a></li>
<li><a class="reference internal" href="#oops-limit">oops_limit</a></li>
<li><a class="reference internal" href="#osrelease-ostype-version">osrelease, ostype &amp; version</a></li>
<li><a class="reference internal" href="#overflowgid-overflowuid">overflowgid &amp; overflowuid</a></li>
<li><a class="reference internal" href="#panic">panic</a></li>
<li><a class="reference internal" href="#panic-on-io-nmi">panic_on_io_nmi</a></li>
<li><a class="reference internal" href="#panic-on-oops">panic_on_oops</a></li>
<li><a class="reference internal" href="#panic-on-stackoverflow">panic_on_stackoverflow</a></li>
<li><a class="reference internal" href="#panic-on-unrecovered-nmi">panic_on_unrecovered_nmi</a></li>
<li><a class="reference internal" href="#panic-on-warn">panic_on_warn</a></li>
<li><a class="reference internal" href="#panic-print">panic_print</a></li>
<li><a class="reference internal" href="#panic-on-rcu-stall">panic_on_rcu_stall</a></li>
<li><a class="reference internal" href="#max-rcu-stall-to-panic">max_rcu_stall_to_panic</a></li>
<li><a class="reference internal" href="#perf-cpu-time-max-percent">perf_cpu_time_max_percent</a></li>
<li><a class="reference internal" href="#perf-event-paranoid">perf_event_paranoid</a></li>
<li><a class="reference internal" href="#perf-event-max-stack">perf_event_max_stack</a></li>
<li><a class="reference internal" href="#perf-event-mlock-kb">perf_event_mlock_kb</a></li>
<li><a class="reference internal" href="#perf-event-max-contexts-per-stack">perf_event_max_contexts_per_stack</a></li>
<li><a class="reference internal" href="#perf-user-access-arm64-only">perf_user_access (arm64 only)</a></li>
<li><a class="reference internal" href="#pid-max">pid_max</a></li>
<li><a class="reference internal" href="#ns-last-pid">ns_last_pid</a></li>
<li><a class="reference internal" href="#powersave-nap-ppc-only">powersave-nap (PPC only)</a></li>
<li><a class="reference internal" href="#printk">printk</a></li>
<li><a class="reference internal" href="#printk-delay">printk_delay</a></li>
<li><a class="reference internal" href="#printk-ratelimit">printk_ratelimit</a></li>
<li><a class="reference internal" href="#printk-ratelimit-burst">printk_ratelimit_burst</a></li>
<li><a class="reference internal" href="#printk-devkmsg">printk_devkmsg</a></li>
<li><a class="reference internal" href="#pty">pty</a></li>
<li><a class="reference internal" href="#random">random</a></li>
<li><a class="reference internal" href="#randomize-va-space">randomize_va_space</a></li>
<li><a class="reference internal" href="#real-root-dev">real-root-dev</a></li>
<li><a class="reference internal" href="#reboot-cmd-sparc-only">reboot-cmd (SPARC only)</a></li>
<li><a class="reference internal" href="#sched-energy-aware">sched_energy_aware</a></li>
<li><a class="reference internal" href="#task-delayacct">task_delayacct</a></li>
<li><a class="reference internal" href="#sched-schedstats">sched_schedstats</a></li>
<li><a class="reference internal" href="#sched-util-clamp-min">sched_util_clamp_min</a></li>
<li><a class="reference internal" href="#sched-util-clamp-max">sched_util_clamp_max</a></li>
<li><a class="reference internal" href="#sched-util-clamp-min-rt-default">sched_util_clamp_min_rt_default</a></li>
<li><a class="reference internal" href="#seccomp">seccomp</a></li>
<li><a class="reference internal" href="#sg-big-buff">sg-big-buff</a></li>
<li><a class="reference internal" href="#shmall">shmall</a></li>
<li><a class="reference internal" href="#shmmax">shmmax</a></li>
<li><a class="reference internal" href="#shmmni">shmmni</a></li>
<li><a class="reference internal" href="#shm-rmid-forced">shm_rmid_forced</a></li>
<li><a class="reference internal" href="#sysctl-writes-strict">sysctl_writes_strict</a></li>
<li><a class="reference internal" href="#softlockup-all-cpu-backtrace">softlockup_all_cpu_backtrace</a></li>
<li><a class="reference internal" href="#softlockup-panic">softlockup_panic</a></li>
<li><a class="reference internal" href="#soft-watchdog">soft_watchdog</a></li>
<li><a class="reference internal" href="#split-lock-mitigate-x86-only">split_lock_mitigate (x86 only)</a></li>
<li><a class="reference internal" href="#stack-erasing">stack_erasing</a></li>
<li><a class="reference internal" href="#stop-a-sparc-only">stop-a (SPARC only)</a></li>
<li><a class="reference internal" href="#sysrq">sysrq</a></li>
<li><a class="reference internal" href="#tainted">tainted</a></li>
<li><a class="reference internal" href="#threads-max">threads-max</a></li>
<li><a class="reference internal" href="#traceoff-on-warning">traceoff_on_warning</a></li>
<li><a class="reference internal" href="#tracepoint-printk">tracepoint_printk</a></li>
<li><a class="reference internal" href="#unaligned-dump-stack-ia64">unaligned-dump-stack (ia64)</a></li>
<li><a class="reference internal" href="#unaligned-trap">unaligned-trap</a></li>
<li><a class="reference internal" href="#unknown-nmi-panic">unknown_nmi_panic</a></li>
<li><a class="reference internal" href="#unprivileged-bpf-disabled">unprivileged_bpf_disabled</a></li>
<li><a class="reference internal" href="#warn-limit">warn_limit</a></li>
<li><a class="reference internal" href="#watchdog">watchdog</a></li>
<li><a class="reference internal" href="#watchdog-cpumask">watchdog_cpumask</a></li>
<li><a class="reference internal" href="#watchdog-thresh">watchdog_thresh</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/admin-guide/sysctl/kernel.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/admin-guide/sysctl/kernel.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>