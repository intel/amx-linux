
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>TODO &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Changes" href="changes.html" />
    <link rel="prev" title="Usage" href="usage.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="todo">
<h1>TODO<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h1>
<p>Version 2.14 December 21, 2018</p>
<section id="a-partial-list-of-missing-features">
<h2>A Partial List of Missing Features<a class="headerlink" href="#a-partial-list-of-missing-features" title="Permalink to this headline">¶</a></h2>
<p>Contributions are welcome.  There are plenty of opportunities
for visible, important contributions to this module.  Here
is a partial list of the known problems and missing features:</p>
<ol class="loweralpha simple">
<li><p>SMB3 (and SMB3.1.1) missing optional features:</p>
<ul class="simple">
<li><p>multichannel (partially integrated), integration of multichannel with RDMA</p></li>
<li><p>directory leases (improved metadata caching). Currently only implemented for root dir</p></li>
<li><p>T10 copy offload ie “ODX” (copy chunk, and “Duplicate Extents” ioctl
currently the only two server side copy mechanisms supported)</p></li>
</ul>
</li>
<li><p>improved sparse file support (fiemap and SEEK_HOLE are implemented
but additional features would be supportable by the protocol such
as FALLOC_FL_COLLAPSE_RANGE and FALLOC_FL_INSERT_RANGE)</p></li>
<li><p>Directory entry caching relies on a 1 second timer, rather than
using Directory Leases, currently only the root file handle is cached longer
by leveraging Directory Leases</p></li>
<li><dl class="simple">
<dt>quota support (needs minor kernel change since quota calls otherwise</dt><dd><p>won’t make it to network filesystems or deviceless filesystems).</p>
</dd>
</dl>
</li>
<li><p>Additional use cases can be optimized to use “compounding” (e.g.
open/query/close and open/setinfo/close) to reduce the number of
roundtrips to the server and improve performance. Various cases
(stat, statfs, create, unlink, mkdir, xattrs) already have been improved by
using compounding but more can be done. In addition we could
significantly reduce redundant opens by using deferred close (with
handle caching leases) and better using reference counters on file
handles.</p></li>
<li><p>Finish inotify support so kde and gnome file list windows
will autorefresh (partially complete by Asser). Needs minor kernel
vfs change to support removing D_NOTIFY on a file.</p></li>
<li><p>Add GUI tool to configure /proc/fs/cifs settings and for display of
the CIFS statistics (started)</p></li>
<li><p>implement support for security and trusted categories of xattrs
(requires minor protocol extension) to enable better support for SELINUX</p></li>
<li><p>Add support for tree connect contexts (see MS-SMB2) a new SMB3.1.1 protocol
feature (may be especially useful for virtualization).</p></li>
<li><p>Create UID mapping facility so server UIDs can be mapped on a per
mount or a per server basis to client UIDs or nobody if no mapping
exists. Also better integration with winbind for resolving SID owners</p></li>
<li><p>Add tools to take advantage of more smb3 specific ioctls and features
(passthrough ioctl/fsctl is now implemented in cifs.ko to allow
sending various SMB3 fsctls and query info and set info calls
directly from user space) Add tools to make setting various non-POSIX
metadata attributes easier from tools (e.g. extending what was done
in smb-info tool).</p></li>
<li><p>encrypted file support (currently the attribute showing the file is
encrypted on the server is reported, but changing the attribute is not
supported).</p></li>
<li><p>improved stats gathering tools (perhaps integration with nfsometer?)
to extend and make easier to use what is currently in /proc/fs/cifs/Stats</p></li>
<li><p>Add support for claims based ACLs (“DAC”)</p></li>
<li><p>mount helper GUI (to simplify the various configuration options on mount)</p></li>
<li><p>Expand support for witness protocol to allow for notification of share
move, and server network adapter changes. Currently only notifications by
the witness protocol for server move is supported by the Linux client.</p></li>
<li><p>Allow mount.cifs to be more verbose in reporting errors with dialect
or unsupported feature errors. This would now be easier due to the
implementation of the new mount API.</p></li>
<li><p>updating cifs documentation, and user guide.</p></li>
<li><p>Addressing bugs found by running a broader set of xfstests in standard
file system xfstest suite.</p></li>
<li><p>split cifs and smb3 support into separate modules so legacy (and less
secure) CIFS dialect can be disabled in environments that don’t need it
and simplify the code.</p></li>
</ol>
<ol class="loweralpha simple" start="22">
<li><p>Additional testing of POSIX Extensions for SMB3.1.1</p></li>
<li><p>Add support for additional strong encryption types, and additional spnego
authentication mechanisms (see MS-SMB2).  GCM-256 is now partially implemented.</p></li>
<li><p>Finish support for SMB3.1.1 compression</p></li>
</ol>
</section>
<section id="known-bugs">
<h2>Known Bugs<a class="headerlink" href="#known-bugs" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="https://bugzilla.samba.org">https://bugzilla.samba.org</a> - search on product “CifsVFS” for
current bug list.  Also check <a class="reference external" href="http://bugzilla.kernel.org">http://bugzilla.kernel.org</a> (Product = File System, Component = CIFS)</p>
<ol class="arabic simple">
<li><p>existing symbolic links (Windows reparse points) are recognized but
can not be created remotely. They are implemented for Samba and those that
support the CIFS Unix extensions, although earlier versions of Samba
overly restrict the pathnames.</p></li>
<li><p>follow_link and readdir code does not follow dfs junctions
but recognizes them</p></li>
</ol>
</section>
<section id="misc-testing-to-do">
<h2>Misc testing to do<a class="headerlink" href="#misc-testing-to-do" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>check out max path names and max path name components against various server
types. Try nested symlinks (8 deep). Return max path name in stat -f information</p></li>
<li><p>Improve xfstest’s cifs/smb3 enablement and adapt xfstests where needed to test
cifs/smb3 better</p></li>
<li><p>Additional performance testing and optimization using iozone and similar -
there are some easy changes that can be done to parallelize sequential writes,
and when signing is disabled to request larger read sizes (larger than
negotiated size) and send larger write sizes to modern servers.</p></li>
<li><p>More exhaustively test against less common servers</p></li>
<li><p>Continue to extend the smb3 “buildbot” which does automated xfstesting
against Windows, Samba and Azure currently - to add additional tests and
to allow the buildbot to execute the tests faster. The URL for the
buildbot is: <a class="reference external" href="http://smb3-test-rhel-75.southcentralus.cloudapp.azure.com">http://smb3-test-rhel-75.southcentralus.cloudapp.azure.com</a></p></li>
<li><p>Address various coverity warnings (most are not bugs per-se, but
the more warnings are addressed, the easier it is to spot real
problems that static analyzers will point out in the future).</p></li>
</ol>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">TODO</a><ul>
<li><a class="reference internal" href="#a-partial-list-of-missing-features">A Partial List of Missing Features</a></li>
<li><a class="reference internal" href="#known-bugs">Known Bugs</a></li>
<li><a class="reference internal" href="#misc-testing-to-do">Misc testing to do</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/admin-guide/cifs/todo.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/admin-guide/cifs/todo.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>