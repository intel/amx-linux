
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Toshiba HDD Active Protection Sensor &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Parallel port LCD/Keypad Panel support" href="../lcd-panel-cgram.html" />
    <link rel="prev" title="ThinkPad ACPI Extras Driver" href="thinkpad-acpi.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="toshiba-hdd-active-protection-sensor">
<h1>Toshiba HDD Active Protection Sensor<a class="headerlink" href="#toshiba-hdd-active-protection-sensor" title="Permalink to this headline">¶</a></h1>
<p>Kernel driver: toshiba_haps</p>
<p>Author: Azael Avalos &lt;<a class="reference external" href="mailto:coproscefalo&#37;&#52;&#48;gmail&#46;com">coproscefalo<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</p>
<section id="description">
<h2>1. Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This driver provides support for the accelerometer found in various Toshiba
laptops, being called “Toshiba HDD Protection - Shock Sensor” officially,
and detects laptops automatically with this device.
On Windows, Toshiba provided software monitors this device and provides
automatic HDD protection (head unload) on sudden moves or harsh vibrations,
however, this driver only provides a notification via a sysfs file to let
userspace tools or daemons act accordingly, as well as providing a sysfs
file to set the desired protection level or sensor sensibility.</p>
</section>
<section id="interface">
<h2>2. Interface<a class="headerlink" href="#interface" title="Permalink to this headline">¶</a></h2>
<p>This device comes with 3 methods:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 95%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>_STA</p></td>
<td><p>Checks existence of the device, returning Zero if the device does not
exists or is not supported.</p></td>
</tr>
<tr class="row-even"><td><p>PTLV</p></td>
<td><p>Sets the desired protection level.</p></td>
</tr>
<tr class="row-odd"><td><p>RSSS</p></td>
<td><p>Shuts down the HDD protection interface for a few seconds,
then restores normal operation.</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Note:</dt><dd><p>The presence of Solid State Drives (SSD) can make this driver to fail loading,
given the fact that such drives have no movable parts, and thus, not requiring
any “protection” as well as failing during the evaluation of the _STA method
found under this device.</p>
</dd>
</dl>
</section>
<section id="accelerometer-axes">
<h2>3. Accelerometer axes<a class="headerlink" href="#accelerometer-axes" title="Permalink to this headline">¶</a></h2>
<p>This device does not report any axes, however, to query the sensor position
a couple HCI (Hardware Configuration Interface) calls (0x6D and 0xA6) are
provided to query such information, handled by the kernel module toshiba_acpi
since kernel version 3.15.</p>
</section>
<section id="supported-devices">
<h2>4. Supported devices<a class="headerlink" href="#supported-devices" title="Permalink to this headline">¶</a></h2>
<p>This driver binds itself to the ACPI device TOS620A, and any Toshiba laptop
with this device is supported, given the fact that they have the presence of
conventional HDD and not only SSD, or a combination of both HDD and SSD.</p>
</section>
<section id="usage">
<h2>5. Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The sysfs files under /sys/devices/LNXSYSTM:00/LNXSYBUS:00/TOS620A:00/ are:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>protection_level</p></td>
<td><p>The protection_level is readable and writeable, and
provides a way to let userspace query the current protection
level, as well as set the desired protection level, the
available protection levels are:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>============   =======   ==========   ========
0 - Disabled   1 - Low   2 - Medium   3 - High
============   =======   ==========   ========
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>reset_protection</p></td>
<td><p>The reset_protection entry is writeable only, being “1”
the only parameter it accepts, it is used to trigger
a reset of the protection interface.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Toshiba HDD Active Protection Sensor</a><ul>
<li><a class="reference internal" href="#description">1. Description</a></li>
<li><a class="reference internal" href="#interface">2. Interface</a></li>
<li><a class="reference internal" href="#accelerometer-axes">3. Accelerometer axes</a></li>
<li><a class="reference internal" href="#supported-devices">4. Supported devices</a></li>
<li><a class="reference internal" href="#usage">5. Usage</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/admin-guide/laptops/toshiba_haps.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/admin-guide/laptops/toshiba_haps.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>