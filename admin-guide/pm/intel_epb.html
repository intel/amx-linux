
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Intel Performance and Energy Bias Hint &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Intel(R) Speed Select Technology User Guide" href="intel-speed-select.html" />
    <link rel="prev" title="Legacy Documentation of CPU Performance Scaling Drivers" href="cpufreq_drivers.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="intel-performance-and-energy-bias-hint">
<h1>Intel Performance and Energy Bias Hint<a class="headerlink" href="#intel-performance-and-energy-bias-hint" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Copyright</dt>
<dd class="field-odd"><p>© 2019 Intel Corporation</p>
</dd>
<dt class="field-even">Author</dt>
<dd class="field-even"><p>Rafael J. Wysocki &lt;<a class="reference external" href="mailto:rafael&#46;j&#46;wysocki&#37;&#52;&#48;intel&#46;com">rafael<span>&#46;</span>j<span>&#46;</span>wysocki<span>&#64;</span>intel<span>&#46;</span>com</a>&gt;</p>
</dd>
</dl>
<p>The Performance and Energy Bias Hint (EPB) allows software to specify its
preference with respect to the power-performance tradeoffs present in the
processor.  Generally, the EPB is expected to be set by user space (directly
via sysfs or with the help of the x86_energy_perf_policy tool), but there are
two reasons for the kernel to update it.</p>
<p>First, there are systems where the platform firmware resets the EPB during
system-wide transitions from sleep states back into the working state
effectively causing the previous EPB updates by user space to be lost.
Thus the kernel needs to save the current EPB values for all CPUs during
system-wide transitions to sleep states and restore them on the way back to
the working state.  That can be achieved by saving EPB for secondary CPUs
when they are taken offline during transitions into system sleep states and
for the boot CPU in a syscore suspend operation, so that it can be restored
for the boot CPU in a syscore resume operation and for the other CPUs when
they are brought back online.  However, CPUs that are already offline when
a system-wide PM transition is started are not taken offline again, but their
EPB values may still be reset by the platform firmware during the transition,
so in fact it is necessary to save the EPB of any CPU taken offline and to
restore it when the given CPU goes back online at all times.</p>
<p>Second, on many systems the initial EPB value coming from the platform
firmware is 0 (‘performance’) and at least on some of them that is because
the platform firmware does not initialize EPB at all with the assumption that
the OS will do that anyway.  That sometimes is problematic, as it may cause
the system battery to drain too fast, for example, so it is better to adjust
it on CPU bring-up and if the initial EPB value for a given CPU is 0, the
kernel changes it to 6 (‘normal’).</p>
<section id="intel-performance-and-energy-bias-attribute-in-sysfs">
<h2>Intel Performance and Energy Bias Attribute in <code class="docutils literal notranslate"><span class="pre">sysfs</span></code><a class="headerlink" href="#intel-performance-and-energy-bias-attribute-in-sysfs" title="Permalink to this headline">¶</a></h2>
<p>The Intel Performance and Energy Bias Hint (EPB) value for a given (logical) CPU
can be checked or updated through a <code class="docutils literal notranslate"><span class="pre">sysfs</span></code> attribute (file) under
<code class="file docutils literal notranslate"><span class="pre">/sys/devices/system/cpu/cpu&lt;N&gt;/power/</span></code>, where the CPU number <code class="docutils literal notranslate"><span class="pre">&lt;N&gt;</span></code>
is allocated at the system initialization time:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">energy_perf_bias</span></code></dt><dd><p>Shows the current EPB value for the CPU in a sliding scale 0 - 15, where
a value of 0 corresponds to a hint preference for highest performance
and a value of 15 corresponds to the maximum energy savings.</p>
<p>In order to update the EPB value for the CPU, this attribute can be
written to, either with a number in the 0 - 15 sliding scale above, or
with one of the strings: “performance”, “balance-performance”, “normal”,
“balance-power”, “power” that represent values reflected by their
meaning.</p>
<p>This attribute is present for all online CPUs supporting the EPB
feature.</p>
</dd>
</dl>
<p>Note that while the EPB interface to the processor is defined at the logical CPU
level, the physical register backing it may be shared by multiple CPUs (for
example, SMT siblings or cores in one package).  For this reason, updating the
EPB value for one CPU may cause the EPB values for other CPUs to change.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Intel Performance and Energy Bias Hint</a><ul>
<li><a class="reference internal" href="#intel-performance-and-energy-bias-attribute-in-sysfs">Intel Performance and Energy Bias Attribute in <code class="docutils literal notranslate"><span class="pre">sysfs</span></code></a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/admin-guide/pm/intel_epb.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/admin-guide/pm/intel_epb.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>