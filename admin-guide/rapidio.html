
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>RapidIO Subsystem Guide &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reliability, Availability and Serviceability" href="ras.html" />
    <link rel="prev" title="Linux Plug and Play Documentation" href="pnp.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="rapidio-subsystem-guide">
<h1>RapidIO Subsystem Guide<a class="headerlink" href="#rapidio-subsystem-guide" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Matt Porter</p>
</dd>
</dl>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>RapidIO is a high speed switched fabric interconnect with features aimed
at the embedded market. RapidIO provides support for memory-mapped I/O
as well as message-based transactions over the switched fabric network.
RapidIO has a standardized discovery mechanism not unlike the PCI bus
standard that allows simple detection of devices in a network.</p>
<p>This documentation is provided for developers intending to support
RapidIO on new architectures, write new drivers, or to understand the
subsystem internals.</p>
</section>
<section id="known-bugs-and-limitations">
<h2>Known Bugs and Limitations<a class="headerlink" href="#known-bugs-and-limitations" title="Permalink to this headline">¶</a></h2>
<section id="bugs">
<h3>Bugs<a class="headerlink" href="#bugs" title="Permalink to this headline">¶</a></h3>
<p>None. ;)</p>
</section>
<section id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Access/management of RapidIO memory regions is not supported</p></li>
<li><p>Multiple host enumeration is not supported</p></li>
</ol>
</section>
</section>
<section id="rapidio-driver-interface">
<h2>RapidIO driver interface<a class="headerlink" href="#rapidio-driver-interface" title="Permalink to this headline">¶</a></h2>
<p>Drivers are provided a set of calls in order to interface with the
subsystem to gather info on devices, request/map memory region
resources, and manage mailboxes/doorbells.</p>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.rio_local_read_config_32">
int <code class="sig-name descname">rio_local_read_config_32</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u32<em> offset</em>, u32 *<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_local_read_config_32" title="Permalink to this definition">¶</a></dt>
<dd><p>Read 32 bits from local configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into local configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">*</span> <span class="pre">data</span></code></dt><dd><p>Pointer to read data into</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads 32 bits of data from the specified offset within the local
device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_local_write_config_32">
int <code class="sig-name descname">rio_local_write_config_32</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u32<em> offset</em>, u32<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_local_write_config_32" title="Permalink to this definition">¶</a></dt>
<dd><p>Write 32 bits to local configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into local configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">data</span></code></dt><dd><p>Data to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes 32 bits of data to the specified offset within the local
device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_local_read_config_16">
int <code class="sig-name descname">rio_local_read_config_16</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u32<em> offset</em>, u16 *<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_local_read_config_16" title="Permalink to this definition">¶</a></dt>
<dd><p>Read 16 bits from local configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into local configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">*</span> <span class="pre">data</span></code></dt><dd><p>Pointer to read data into</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads 16 bits of data from the specified offset within the local
device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_local_write_config_16">
int <code class="sig-name descname">rio_local_write_config_16</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u32<em> offset</em>, u16<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_local_write_config_16" title="Permalink to this definition">¶</a></dt>
<dd><p>Write 16 bits to local configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into local configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">data</span></code></dt><dd><p>Data to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes 16 bits of data to the specified offset within the local
device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_local_read_config_8">
int <code class="sig-name descname">rio_local_read_config_8</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u32<em> offset</em>, u8 *<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_local_read_config_8" title="Permalink to this definition">¶</a></dt>
<dd><p>Read 8 bits from local configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into local configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*</span> <span class="pre">data</span></code></dt><dd><p>Pointer to read data into</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads 8 bits of data from the specified offset within the local
device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_local_write_config_8">
int <code class="sig-name descname">rio_local_write_config_8</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u32<em> offset</em>, u8<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_local_write_config_8" title="Permalink to this definition">¶</a></dt>
<dd><p>Write 8 bits to local configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into local configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">data</span></code></dt><dd><p>Data to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes 8 bits of data to the specified offset within the local
device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_read_config_32">
int <code class="sig-name descname">rio_read_config_32</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u32<em> offset</em>, u32 *<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_read_config_32" title="Permalink to this definition">¶</a></dt>
<dd><p>Read 32 bits from configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into device configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">*</span> <span class="pre">data</span></code></dt><dd><p>Pointer to read data into</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads 32 bits of data from the specified offset within the
RIO device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_write_config_32">
int <code class="sig-name descname">rio_write_config_32</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u32<em> offset</em>, u32<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_write_config_32" title="Permalink to this definition">¶</a></dt>
<dd><p>Write 32 bits to configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into device configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">data</span></code></dt><dd><p>Data to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes 32 bits of data to the specified offset within the
RIO device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_read_config_16">
int <code class="sig-name descname">rio_read_config_16</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u32<em> offset</em>, u16 *<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_read_config_16" title="Permalink to this definition">¶</a></dt>
<dd><p>Read 16 bits from configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into device configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">*</span> <span class="pre">data</span></code></dt><dd><p>Pointer to read data into</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads 16 bits of data from the specified offset within the
RIO device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_write_config_16">
int <code class="sig-name descname">rio_write_config_16</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u32<em> offset</em>, u16<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_write_config_16" title="Permalink to this definition">¶</a></dt>
<dd><p>Write 16 bits to configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into device configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">data</span></code></dt><dd><p>Data to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes 16 bits of data to the specified offset within the
RIO device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_read_config_8">
int <code class="sig-name descname">rio_read_config_8</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u32<em> offset</em>, u8 *<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_read_config_8" title="Permalink to this definition">¶</a></dt>
<dd><p>Read 8 bits from configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into device configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*</span> <span class="pre">data</span></code></dt><dd><p>Pointer to read data into</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads 8 bits of data from the specified offset within the
RIO device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_write_config_8">
int <code class="sig-name descname">rio_write_config_8</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u32<em> offset</em>, u8<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_write_config_8" title="Permalink to this definition">¶</a></dt>
<dd><p>Write 8 bits to configuration space</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into device configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">data</span></code></dt><dd><p>Data to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes 8 bits of data to the specified offset within the
RIO device’s configuration space.</p>
</div>
<dl class="function">
<dt id="c.rio_send_doorbell">
int <code class="sig-name descname">rio_send_doorbell</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u16<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_send_doorbell" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a doorbell message to a device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">data</span></code></dt><dd><p>Doorbell message data</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Send a doorbell message to a RIO device. The doorbell message
has a 16-bit info field provided by the <strong>data</strong> argument.</p>
</div>
<dl class="function">
<dt id="c.rio_init_mbox_res">
void <code class="sig-name descname">rio_init_mbox_res</code><span class="sig-paren">(</span>struct resource<em> *res</em>, int<em> start</em>, int<em> end</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_init_mbox_res" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a RIO mailbox resource</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">resource</span> <span class="pre">*res</span></code></dt><dd><p>resource struct</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">start</span></code></dt><dd><p>start of mailbox range</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">end</span></code></dt><dd><p>end of mailbox range</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used to initialize the fields of a resource
for use as a mailbox resource.  It initializes a range of
mailboxes using the start and end arguments.</p>
</div>
<dl class="function">
<dt id="c.rio_init_dbell_res">
void <code class="sig-name descname">rio_init_dbell_res</code><span class="sig-paren">(</span>struct resource<em> *res</em>, u16<em> start</em>, u16<em> end</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_init_dbell_res" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a RIO doorbell resource</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">resource</span> <span class="pre">*res</span></code></dt><dd><p>resource struct</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">start</span></code></dt><dd><p>start of doorbell range</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">end</span></code></dt><dd><p>end of doorbell range</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used to initialize the fields of a resource
for use as a doorbell resource.  It initializes a range of
doorbell messages using the start and end arguments.</p>
</div>
<dl class="function">
<dt id="c.RIO_DEVICE">
<code class="sig-name descname">RIO_DEVICE</code><span class="sig-paren">(</span><em>dev</em>, <em>ven</em><span class="sig-paren">)</span><a class="headerlink" href="#c.RIO_DEVICE" title="Permalink to this definition">¶</a></dt>
<dd><p>macro used to describe a specific RIO device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>the 16 bit RIO device ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ven</span></code></dt><dd><p>the 16 bit RIO vendor ID</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This macro is used to create a <a class="reference internal" href="../driver-api/basics.html#c.rio_device_id" title="rio_device_id"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_device_id</span></code></a> that matches a
specific device.  The assembly vendor and assembly device fields
will be set to <code class="docutils literal notranslate"><span class="pre">RIO_ANY_ID</span></code>.</p>
</div>
<dl class="function">
<dt id="c.rio_add_outb_message">
int <code class="sig-name descname">rio_add_outb_message</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, int<em> mbox</em>, void<em> *buffer</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_add_outb_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Add RIO message to an outbound mailbox queue</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port containing the outbound queue</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device the message is be sent to</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mbox</span></code></dt><dd><p>The outbound mailbox queue</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*buffer</span></code></dt><dd><p>Pointer to the message buffer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt><dd><p>Length of the message buffer</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Adds a RIO message buffer to an outbound mailbox queue for
transmission. Returns 0 on success.</p>
</div>
<dl class="function">
<dt id="c.rio_add_inb_buffer">
int <code class="sig-name descname">rio_add_inb_buffer</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> mbox</em>, void<em> *buffer</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_add_inb_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Add buffer to an inbound mailbox queue</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port containing the inbound mailbox</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mbox</span></code></dt><dd><p>The inbound mailbox number</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*buffer</span></code></dt><dd><p>Pointer to the message buffer</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Adds a buffer to an inbound mailbox queue for reception. Returns
0 on success.</p>
</div>
<dl class="function">
<dt id="c.rio_get_inb_message">
void * <code class="sig-name descname">rio_get_inb_message</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> mbox</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_get_inb_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Get A RIO message from an inbound mailbox queue</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port containing the inbound mailbox</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mbox</span></code></dt><dd><p>The inbound mailbox number</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Get a RIO message from an inbound mailbox queue. Returns 0 on success.</p>
</div>
<dl class="function">
<dt id="c.rio_name">
const char * <code class="sig-name descname">rio_name</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the unique RIO device identifier</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Get the unique RIO device identifier. Returns the device
identifier string.</p>
</div>
<dl class="function">
<dt id="c.rio_get_drvdata">
void * <code class="sig-name descname">rio_get_drvdata</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_get_drvdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get RIO driver specific data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Get RIO driver specific data. Returns a pointer to the
driver specific data.</p>
</div>
<dl class="function">
<dt id="c.rio_set_drvdata">
void <code class="sig-name descname">rio_set_drvdata</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, void<em> *data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_set_drvdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Set RIO driver specific data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Pointer to driver specific data</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Set RIO driver specific data. device struct driver data pointer
is set to the <strong>data</strong> argument.</p>
</div>
<dl class="function">
<dt id="c.rio_dev_get">
struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a> * <code class="sig-name descname">rio_dev_get</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_dev_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Increments the reference count of the RIO device structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device being referenced</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Each live reference to a device should be refcounted.</p>
<p>Drivers for RIO devices should normally record such references in
their probe() methods, when they bind to a device, and release
them by calling <a class="reference internal" href="#c.rio_dev_put" title="rio_dev_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">rio_dev_put()</span></code></a>, in their disconnect() methods.</p>
</div>
<dl class="function">
<dt id="c.rio_dev_put">
void <code class="sig-name descname">rio_dev_put</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_dev_put" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a use of the RIO device structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device being disconnected</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Must be called when a user of a device is finished with it.
When the last user of the device calls this function, the
memory of the device is freed.</p>
</div>
<dl class="function">
<dt id="c.rio_register_driver">
int <code class="sig-name descname">rio_register_driver</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_driver" title="rio_driver">rio_driver</a><em> *rdrv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_register_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>register a new RIO driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_driver</span> <span class="pre">*rdrv</span></code></dt><dd><p>the RIO driver structure to register</p>
<p>Adds a <a class="reference internal" href="#c.rio_driver" title="rio_driver"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_driver</span></code></a> to the list of registered drivers.
Returns a negative value on error, otherwise 0. If no error
occurred, the driver remains registered even if no device
was claimed during registration.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_unregister_driver">
void <code class="sig-name descname">rio_unregister_driver</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_driver" title="rio_driver">rio_driver</a><em> *rdrv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_unregister_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>unregister a RIO driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_driver</span> <span class="pre">*rdrv</span></code></dt><dd><p>the RIO driver structure to unregister</p>
<p>Deletes the <a class="reference internal" href="#c.rio_driver" title="rio_driver"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_driver</span></code></a> from the list of registered RIO
drivers, gives it a chance to clean up by calling its remove()
function for each device it was responsible for, and marks those
devices as driverless.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_local_get_device_id">
u16 <code class="sig-name descname">rio_local_get_device_id</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_local_get_device_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the base/extended device id for a port</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>RIO master port from which to get the deviceid</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads the base/extended device id from the local device
implementing the master port. Returns the 8/16-bit device
id.</p>
</div>
<dl class="function">
<dt id="c.rio_query_mport">
int <code class="sig-name descname">rio_query_mport</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, struct <a class="reference internal" href="#c.rio_mport_attr" title="rio_mport_attr">rio_mport_attr</a><em> *mport_attr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_query_mport" title="Permalink to this definition">¶</a></dt>
<dd><p>Query mport device attributes</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>mport device to query</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport_attr</span> <span class="pre">*mport_attr</span></code></dt><dd><p>mport attributes data structure</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns attributes of specified mport through the
pointer to attributes data structure.</p>
</div>
<dl class="function">
<dt id="c.rio_alloc_net">
struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a> * <code class="sig-name descname">rio_alloc_net</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_alloc_net" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate and initialize a new RIO network data structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port associated with the RIO network</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocates a RIO network structure, initializes per-network
list heads, and adds the associated master port to the
network list of associated master ports. Returns a
RIO network pointer on success or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_local_set_device_id">
void <code class="sig-name descname">rio_local_set_device_id</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u16<em> did</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_local_set_device_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the base/extended device id for a port</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>RIO master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">did</span></code></dt><dd><p>Device ID value to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes the base/extended device id from a device.</p>
</div>
<dl class="function">
<dt id="c.rio_add_device">
int <code class="sig-name descname">rio_add_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_add_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a RIO device to the device model</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Adds the RIO device to the global device list and adds the RIO
device to the RIO device list.  Creates the generic sysfs nodes
for an RIO device.</p>
</div>
<dl class="function">
<dt id="c.rio_request_inb_mbox">
int <code class="sig-name descname">rio_request_inb_mbox</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, void<em> *dev_id</em>, int<em> mbox</em>, int<em> entries</em>, void (<em>*minb</em>)(struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a> * mport, void *dev_id, int mbox, int slot)<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_request_inb_mbox" title="Permalink to this definition">¶</a></dt>
<dd><p>request inbound mailbox service</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port from which to allocate the mailbox resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*dev_id</span></code></dt><dd><p>Device specific pointer to pass on event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mbox</span></code></dt><dd><p>Mailbox number to claim</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">entries</span></code></dt><dd><p>Number of entries in inbound mailbox queue</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*minb)</span> <span class="pre">(struct</span> <span class="pre">rio_mport</span> <span class="pre">*</span> <span class="pre">mport,</span> <span class="pre">void</span> <span class="pre">*dev_id,</span> <span class="pre">int</span> <span class="pre">mbox,</span> <span class="pre">int</span> <span class="pre">slot)</span></code></dt><dd><p>Callback to execute when inbound message is received</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Requests ownership of an inbound mailbox resource and binds
a callback function to the resource. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on success.</p>
</div>
<dl class="function">
<dt id="c.rio_release_inb_mbox">
int <code class="sig-name descname">rio_release_inb_mbox</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> mbox</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_release_inb_mbox" title="Permalink to this definition">¶</a></dt>
<dd><p>release inbound mailbox message service</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port from which to release the mailbox resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mbox</span></code></dt><dd><p>Mailbox number to release</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Releases ownership of an inbound mailbox resource. Returns 0
if the request has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_request_outb_mbox">
int <code class="sig-name descname">rio_request_outb_mbox</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, void<em> *dev_id</em>, int<em> mbox</em>, int<em> entries</em>, void (<em>*moutb</em>)(struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a> * mport, void *dev_id, int mbox, int slot)<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_request_outb_mbox" title="Permalink to this definition">¶</a></dt>
<dd><p>request outbound mailbox service</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port from which to allocate the mailbox resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*dev_id</span></code></dt><dd><p>Device specific pointer to pass on event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mbox</span></code></dt><dd><p>Mailbox number to claim</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">entries</span></code></dt><dd><p>Number of entries in outbound mailbox queue</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*moutb)</span> <span class="pre">(struct</span> <span class="pre">rio_mport</span> <span class="pre">*</span> <span class="pre">mport,</span> <span class="pre">void</span> <span class="pre">*dev_id,</span> <span class="pre">int</span> <span class="pre">mbox,</span> <span class="pre">int</span> <span class="pre">slot)</span></code></dt><dd><p>Callback to execute when outbound message is sent</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Requests ownership of an outbound mailbox resource and binds
a callback function to the resource. Returns 0 on success.</p>
</div>
<dl class="function">
<dt id="c.rio_release_outb_mbox">
int <code class="sig-name descname">rio_release_outb_mbox</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> mbox</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_release_outb_mbox" title="Permalink to this definition">¶</a></dt>
<dd><p>release outbound mailbox message service</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port from which to release the mailbox resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mbox</span></code></dt><dd><p>Mailbox number to release</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Releases ownership of an inbound mailbox resource. Returns 0
if the request has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_request_inb_dbell">
int <code class="sig-name descname">rio_request_inb_dbell</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, void<em> *dev_id</em>, u16<em> start</em>, u16<em> end</em>, void (<em>*dinb</em>)(struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a> * mport, void *dev_id, u16 src, u16 dst, u16 info)<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_request_inb_dbell" title="Permalink to this definition">¶</a></dt>
<dd><p>request inbound doorbell message service</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port from which to allocate the doorbell resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*dev_id</span></code></dt><dd><p>Device specific pointer to pass on event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">start</span></code></dt><dd><p>Doorbell info range start</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">end</span></code></dt><dd><p>Doorbell info range end</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*dinb)</span> <span class="pre">(struct</span> <span class="pre">rio_mport</span> <span class="pre">*</span> <span class="pre">mport,</span> <span class="pre">void</span> <span class="pre">*dev_id,</span> <span class="pre">u16</span> <span class="pre">src,</span> <span class="pre">u16</span> <span class="pre">dst,</span> <span class="pre">u16</span> <span class="pre">info)</span></code></dt><dd><p>Callback to execute when doorbell is received</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Requests ownership of an inbound doorbell resource and binds
a callback function to the resource. Returns 0 if the request
has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_release_inb_dbell">
int <code class="sig-name descname">rio_release_inb_dbell</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u16<em> start</em>, u16<em> end</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_release_inb_dbell" title="Permalink to this definition">¶</a></dt>
<dd><p>release inbound doorbell message service</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port from which to release the doorbell resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">start</span></code></dt><dd><p>Doorbell info range start</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">end</span></code></dt><dd><p>Doorbell info range end</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Releases ownership of an inbound doorbell resource and removes
callback from the doorbell event list. Returns 0 if the request
has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_request_outb_dbell">
struct resource * <code class="sig-name descname">rio_request_outb_dbell</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u16<em> start</em>, u16<em> end</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_request_outb_dbell" title="Permalink to this definition">¶</a></dt>
<dd><p>request outbound doorbell message range</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device from which to allocate the doorbell resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">start</span></code></dt><dd><p>Doorbell message range start</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">end</span></code></dt><dd><p>Doorbell message range end</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Requests ownership of a doorbell message range. Returns a resource
if the request has been satisfied or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_release_outb_dbell">
int <code class="sig-name descname">rio_release_outb_dbell</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, struct resource<em> *res</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_release_outb_dbell" title="Permalink to this definition">¶</a></dt>
<dd><p>release outbound doorbell message range</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device from which to release the doorbell resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">resource</span> <span class="pre">*res</span></code></dt><dd><p>Doorbell resource to be freed</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Releases ownership of a doorbell message range. Returns 0 if the
request has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_add_mport_pw_handler">
int <code class="sig-name descname">rio_add_mport_pw_handler</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, void<em> *context</em>, int (<em>*pwcback</em>)(struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a> *mport, void *context, union rio_pw_msg *msg, int step)<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_add_mport_pw_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>add port-write message handler into the list of mport specific pw handlers</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port to bind the portwrite callback</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*context</span></code></dt><dd><p>Handler specific context to pass on event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">(*pwcback)(struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport,</span> <span class="pre">void</span> <span class="pre">*context,</span> <span class="pre">union</span> <span class="pre">rio_pw_msg</span> <span class="pre">*msg,</span> <span class="pre">int</span> <span class="pre">step)</span></code></dt><dd><p>Callback to execute when portwrite is received</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns 0 if the request has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_del_mport_pw_handler">
int <code class="sig-name descname">rio_del_mport_pw_handler</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, void<em> *context</em>, int (<em>*pwcback</em>)(struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a> *mport, void *context, union rio_pw_msg *msg, int step)<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_del_mport_pw_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>remove port-write message handler from the list of mport specific pw handlers</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port to bind the portwrite callback</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*context</span></code></dt><dd><p>Registered handler specific context to pass on event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">(*pwcback)(struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport,</span> <span class="pre">void</span> <span class="pre">*context,</span> <span class="pre">union</span> <span class="pre">rio_pw_msg</span> <span class="pre">*msg,</span> <span class="pre">int</span> <span class="pre">step)</span></code></dt><dd><p>Registered callback function</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns 0 if the request has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_request_inb_pwrite">
int <code class="sig-name descname">rio_request_inb_pwrite</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, int (<em>*pwcback</em>)(struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a> *rdev, union rio_pw_msg *msg, int step)<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_request_inb_pwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>request inbound port-write message service for specific RapidIO device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device to which register inbound port-write callback routine</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">(*pwcback)(struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev,</span> <span class="pre">union</span> <span class="pre">rio_pw_msg</span> <span class="pre">*msg,</span> <span class="pre">int</span> <span class="pre">step)</span></code></dt><dd><p>Callback routine to execute when port-write is received</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Binds a port-write callback function to the RapidIO device.
Returns 0 if the request has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_release_inb_pwrite">
int <code class="sig-name descname">rio_release_inb_pwrite</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_release_inb_pwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>release inbound port-write message service associated with specific RapidIO device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device which registered for inbound port-write callback</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Removes callback from the rio_dev structure. Returns 0 if the request
has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_pw_enable">
void <code class="sig-name descname">rio_pw_enable</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> enable</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_pw_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables/disables port-write handling by a master port</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port associated with port-write handling</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">enable</span></code></dt><dd><p>1=enable,  0=disable</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_map_inb_region">
int <code class="sig-name descname">rio_map_inb_region</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, dma_addr_t<em> local</em>, u64<em> rbase</em>, u32<em> size</em>, u32<em> rflags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_map_inb_region" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Map inbound memory region.</p></li>
</ul>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dma_addr_t</span> <span class="pre">local</span></code></dt><dd><p>physical address of memory region to be mapped</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u64</span> <span class="pre">rbase</span></code></dt><dd><p>RIO base address assigned to this window</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">size</span></code></dt><dd><p>Size of the memory region</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">rflags</span></code></dt><dd><p>Flags for mapping.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 – Success.</p>
<p><strong>Description</strong></p>
<p>This function will create the mapping from RIO space to local memory.</p>
</div>
<dl class="function">
<dt id="c.rio_unmap_inb_region">
void <code class="sig-name descname">rio_unmap_inb_region</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, dma_addr_t<em> lstart</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_unmap_inb_region" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Unmap the inbound memory region</p></li>
</ul>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dma_addr_t</span> <span class="pre">lstart</span></code></dt><dd><p>physical address of memory region to be unmapped</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_map_outb_region">
int <code class="sig-name descname">rio_map_outb_region</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u16<em> destid</em>, u64<em> rbase</em>, u32<em> size</em>, u32<em> rflags</em>, dma_addr_t<em> *local</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_map_outb_region" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Map outbound memory region.</p></li>
</ul>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>destination id window points to</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u64</span> <span class="pre">rbase</span></code></dt><dd><p>RIO base address window translates to</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">size</span></code></dt><dd><p>Size of the memory region</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">rflags</span></code></dt><dd><p>Flags for mapping.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dma_addr_t</span> <span class="pre">*local</span></code></dt><dd><p>physical address of memory region mapped</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 – Success.</p>
<p><strong>Description</strong></p>
<p>This function will create the mapping from RIO space to local memory.</p>
</div>
<dl class="function">
<dt id="c.rio_unmap_outb_region">
void <code class="sig-name descname">rio_unmap_outb_region</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u16<em> destid</em>, u64<em> rstart</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_unmap_outb_region" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Unmap the inbound memory region</p></li>
</ul>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>destination id mapping points to</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u64</span> <span class="pre">rstart</span></code></dt><dd><p>RIO base address window translates to</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_mport_get_physefb">
u32 <code class="sig-name descname">rio_mport_get_physefb</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, int<em> local</em>, u16<em> destid</em>, u8<em> hopcount</em>, u32<em> *rmap</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_mport_get_physefb" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function that returns register offset for Physical Layer Extended Features Block.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to issue transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">local</span></code></dt><dd><p>Indicate a local master port or remote device access</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of switch hops to the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">*rmap</span></code></dt><dd><p>pointer to location to store register map type info</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_get_comptag">
struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a> * <code class="sig-name descname">rio_get_comptag</code><span class="sig-paren">(</span>u32<em> comp_tag</em>, struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *from</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_get_comptag" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin or continue searching for a RIO device by component tag</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">comp_tag</span></code></dt><dd><p>RIO component tag to match</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*from</span></code></dt><dd><p>Previous RIO device found in search, or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> for new search</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Iterates through the list of known RIO devices. If a RIO device is
found with a matching <strong>comp_tag</strong>, a pointer to its device
structure is returned. Otherwise, <code class="docutils literal notranslate"><span class="pre">NULL</span></code> is returned. A new search
is initiated by passing <code class="docutils literal notranslate"><span class="pre">NULL</span></code> to the <strong>from</strong> argument. Otherwise, if
<strong>from</strong> is not <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, searches continue from next device on the global
list.</p>
</div>
<dl class="function">
<dt id="c.rio_set_port_lockout">
int <code class="sig-name descname">rio_set_port_lockout</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u32<em> pnum</em>, int<em> lock</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_set_port_lockout" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets/clears LOCKOUT bit (RIO EM 1.3) for a switch port.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>Pointer to RIO device control structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">pnum</span></code></dt><dd><p>Switch port number to set LOCKOUT bit</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">lock</span></code></dt><dd><p>Operation : set (=1) or clear (=0)</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_enable_rx_tx_port">
int <code class="sig-name descname">rio_enable_rx_tx_port</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, int<em> local</em>, u16<em> destid</em>, u8<em> hopcount</em>, u8<em> port_num</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_enable_rx_tx_port" title="Permalink to this definition">¶</a></dt>
<dd><p>enable input receiver and output transmitter of given port</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port associated with the RIO network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">local</span></code></dt><dd><p>local=1 select local port otherwise a far device is reached</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of the device to check host bit</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of hops to reach the target</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">port_num</span></code></dt><dd><p>Port (-number on switch) to enable on a far end device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns 0 or 1 from on General Control Command and Status Register
(EXT_PTR+0x3C)</p>
</div>
<dl class="function">
<dt id="c.rio_mport_chk_dev_access">
int <code class="sig-name descname">rio_mport_chk_dev_access</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u16<em> destid</em>, u8<em> hopcount</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_mport_chk_dev_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate access to the specified device.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port to send transactions</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Device destination ID in network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of hops into the network</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_inb_pwrite_handler">
int <code class="sig-name descname">rio_inb_pwrite_handler</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, union rio_pw_msg<em> *pw_msg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_inb_pwrite_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>inbound port-write message handler</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>mport device associated with port-write</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">union</span> <span class="pre">rio_pw_msg</span> <span class="pre">*pw_msg</span></code></dt><dd><p>pointer to inbound port-write message</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Processes an inbound port-write message. Returns 0 if the request
has been satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_mport_get_efb">
u32 <code class="sig-name descname">rio_mport_get_efb</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, int<em> local</em>, u16<em> destid</em>, u8<em> hopcount</em>, u32<em> from</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_mport_get_efb" title="Permalink to this definition">¶</a></dt>
<dd><p>get pointer to next extended features block</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to issue transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">local</span></code></dt><dd><p>Indicate a local master port or remote device access</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of switch hops to the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">from</span></code></dt><dd><p>Offset of  current Extended Feature block header (if 0 starts
from ExtFeaturePtr)</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_mport_get_feature">
u32 <code class="sig-name descname">rio_mport_get_feature</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a> *<em> port</em>, int<em> local</em>, u16<em> destid</em>, u8<em> hopcount</em>, int<em> ftr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_mport_get_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>query for devices’ extended features</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*</span> <span class="pre">port</span></code></dt><dd><p>Master port to issue transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">local</span></code></dt><dd><p>Indicate a local master port or remote device access</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of switch hops to the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ftr</span></code></dt><dd><p>Extended feature code</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Tell if a device supports a given RapidIO capability.
Returns the offset of the requested extended feature
block within the device’s RIO configuration space or
0 in case the device does not support it.</p>
</div>
<dl class="function">
<dt id="c.rio_lock_device">
int <code class="sig-name descname">rio_lock_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u16<em> destid</em>, u8<em> hopcount</em>, int<em> wait_ms</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_lock_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquires host device lock for specified device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to send transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID for device/switch</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Hopcount to reach switch</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">wait_ms</span></code></dt><dd><p>Max wait time in msec (0 = no timeout)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Attepts to acquire host device lock for specified device
Returns 0 if device lock acquired or EINVAL if timeout expires.</p>
</div>
<dl class="function">
<dt id="c.rio_unlock_device">
int <code class="sig-name descname">rio_unlock_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u16<em> destid</em>, u8<em> hopcount</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_unlock_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases host device lock for specified device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to send transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID for device/switch</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Hopcount to reach switch</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns 0 if device lock released or EINVAL if fails.</p>
</div>
<dl class="function">
<dt id="c.rio_route_add_entry">
int <code class="sig-name descname">rio_route_add_entry</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u16<em> table</em>, u16<em> route_destid</em>, u8<em> route_port</em>, int<em> lock</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_route_add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a route entry to a switch routing table</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">table</span></code></dt><dd><p>Routing table ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">route_destid</span></code></dt><dd><p>Destination ID to be routed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">route_port</span></code></dt><dd><p>Port number to be routed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">lock</span></code></dt><dd><p>apply a hardware lock on switch device flag (1=lock, 0=no_lock)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>If available calls the switch specific add_entry() method to add a route
entry into a switch routing table. Otherwise uses standard RT update method
as defined by RapidIO specification. A specific routing table can be selected
using the <strong>table</strong> argument if a switch has per port routing tables or
the standard (or global) table may be used by passing
<code class="docutils literal notranslate"><span class="pre">RIO_GLOBAL_TABLE</span></code> in <strong>table</strong>.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_route_get_entry">
int <code class="sig-name descname">rio_route_get_entry</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u16<em> table</em>, u16<em> route_destid</em>, u8<em> *route_port</em>, int<em> lock</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_route_get_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an entry from a switch routing table</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">table</span></code></dt><dd><p>Routing table ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">route_destid</span></code></dt><dd><p>Destination ID to be routed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*route_port</span></code></dt><dd><p>Pointer to read port number into</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">lock</span></code></dt><dd><p>apply a hardware lock on switch device flag (1=lock, 0=no_lock)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>If available calls the switch specific get_entry() method to fetch a route
entry from a switch routing table. Otherwise uses standard RT read method
as defined by RapidIO specification. A specific routing table can be selected
using the <strong>table</strong> argument if a switch has per port routing tables or
the standard (or global) table may be used by passing
<code class="docutils literal notranslate"><span class="pre">RIO_GLOBAL_TABLE</span></code> in <strong>table</strong>.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_route_clr_table">
int <code class="sig-name descname">rio_route_clr_table</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u16<em> table</em>, int<em> lock</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_route_clr_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear a switch routing table</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">table</span></code></dt><dd><p>Routing table ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">lock</span></code></dt><dd><p>apply a hardware lock on switch device flag (1=lock, 0=no_lock)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>If available calls the switch specific clr_table() method to clear a switch
routing table. Otherwise uses standard RT write method as defined by RapidIO
specification. A specific routing table can be selected using the <strong>table</strong>
argument if a switch has per port routing tables or the standard (or global)
table may be used by passing <code class="docutils literal notranslate"><span class="pre">RIO_GLOBAL_TABLE</span></code> in <strong>table</strong>.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_request_mport_dma">
struct dma_chan * <code class="sig-name descname">rio_request_mport_dma</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_request_mport_dma" title="Permalink to this definition">¶</a></dt>
<dd><p>request RapidIO capable DMA channel associated with specified local RapidIO mport device.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO mport to perform DMA data transfers</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns pointer to allocated DMA channel or NULL if failed.</p>
</div>
<dl class="function">
<dt id="c.rio_request_dma">
struct dma_chan * <code class="sig-name descname">rio_request_dma</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_request_dma" title="Permalink to this definition">¶</a></dt>
<dd><p>request RapidIO capable DMA channel that supports specified target RapidIO device.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device associated with DMA transfer</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns pointer to allocated DMA channel or NULL if failed.</p>
</div>
<dl class="function">
<dt id="c.rio_release_dma">
void <code class="sig-name descname">rio_release_dma</code><span class="sig-paren">(</span>struct dma_chan<em> *dchan</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_release_dma" title="Permalink to this definition">¶</a></dt>
<dd><p>release specified DMA channel</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">dma_chan</span> <span class="pre">*dchan</span></code></dt><dd><p>DMA channel to release</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_dma_prep_xfer">
struct dma_async_tx_descriptor * <code class="sig-name descname">rio_dma_prep_xfer</code><span class="sig-paren">(</span>struct dma_chan<em> *dchan</em>, u16<em> destid</em>, struct rio_dma_data<em> *data</em>, enum dma_transfer_direction<em> direction</em>, unsigned long<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_dma_prep_xfer" title="Permalink to this definition">¶</a></dt>
<dd><p>RapidIO specific wrapper for device_prep_slave_sg callback defined by DMAENGINE.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">dma_chan</span> <span class="pre">*dchan</span></code></dt><dd><p>DMA channel to configure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>target RapidIO device destination ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dma_data</span> <span class="pre">*data</span></code></dt><dd><p>RIO specific data descriptor</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">dma_transfer_direction</span> <span class="pre">direction</span></code></dt><dd><p>DMA data transfer direction (TO or FROM the device)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">flags</span></code></dt><dd><p>dmaengine defined flags</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Initializes RapidIO capable DMA channel for the specified data transfer.
Uses DMA channel private extension to pass information related to remote
target RIO device.</p>
<p><strong>Return</strong></p>
<dl class="simple">
<dt>pointer to DMA transaction descriptor if successful,</dt><dd><p>error-valued pointer or NULL if failed.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_dma_prep_slave_sg">
struct dma_async_tx_descriptor * <code class="sig-name descname">rio_dma_prep_slave_sg</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, struct dma_chan<em> *dchan</em>, struct rio_dma_data<em> *data</em>, enum dma_transfer_direction<em> direction</em>, unsigned long<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_dma_prep_slave_sg" title="Permalink to this definition">¶</a></dt>
<dd><p>RapidIO specific wrapper for device_prep_slave_sg callback defined by DMAENGINE.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device control structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">dma_chan</span> <span class="pre">*dchan</span></code></dt><dd><p>DMA channel to configure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dma_data</span> <span class="pre">*data</span></code></dt><dd><p>RIO specific data descriptor</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">dma_transfer_direction</span> <span class="pre">direction</span></code></dt><dd><p>DMA data transfer direction (TO or FROM the device)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">flags</span></code></dt><dd><p>dmaengine defined flags</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Initializes RapidIO capable DMA channel for the specified data transfer.
Uses DMA channel private extension to pass information related to remote
target RIO device.</p>
<p><strong>Return</strong></p>
<dl class="simple">
<dt>pointer to DMA transaction descriptor if successful,</dt><dd><p>error-valued pointer or NULL if failed.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_register_scan">
int <code class="sig-name descname">rio_register_scan</code><span class="sig-paren">(</span>int<em> mport_id</em>, struct <a class="reference internal" href="#c.rio_scan" title="rio_scan">rio_scan</a><em> *scan_ops</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_register_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>enumeration/discovery method registration interface</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mport_id</span></code></dt><dd><p>mport device ID for which fabric scan routine has to be set
(RIO_MPORT_ANY = set for all available mports)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_scan</span> <span class="pre">*scan_ops</span></code></dt><dd><p>enumeration/discovery operations structure</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Registers enumeration/discovery operations with RapidIO subsystem and
attaches it to the specified mport device (or all available mports
if RIO_MPORT_ANY is specified).</p>
<p>Returns error if the mport already has an enumerator attached to it.
In case of RIO_MPORT_ANY skips mports with valid scan routines (no error).</p>
</div>
<dl class="function">
<dt id="c.rio_unregister_scan">
int <code class="sig-name descname">rio_unregister_scan</code><span class="sig-paren">(</span>int<em> mport_id</em>, struct <a class="reference internal" href="#c.rio_scan" title="rio_scan">rio_scan</a><em> *scan_ops</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_unregister_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>removes enumeration/discovery method from mport</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mport_id</span></code></dt><dd><p>mport device ID for which fabric scan routine has to be
unregistered (RIO_MPORT_ANY = apply to all mports that use
the specified scan_ops)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_scan</span> <span class="pre">*scan_ops</span></code></dt><dd><p>enumeration/discovery operations structure</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Removes enumeration or discovery method assigned to the specified mport
device. If RIO_MPORT_ANY is specified, removes the specified operations from
all mports that have them attached.</p>
</div>
</section>
</section>
<section id="internals">
<h2>Internals<a class="headerlink" href="#internals" title="Permalink to this headline">¶</a></h2>
<p>This chapter contains the autogenerated documentation of the RapidIO
subsystem.</p>
<section id="structures">
<h3>Structures<a class="headerlink" href="#structures" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="c.rio_switch">
struct <code class="sig-name descname">rio_switch</code><a class="headerlink" href="#c.rio_switch" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO switch info</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_switch {
    struct list_head node;
    u8 *route_table;
    u32 port_ok;
    struct rio_switch_ops *ops;
    spinlock_t lock;
    struct rio_dev *nextdev[];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>Node in global list of switches</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">route_table</span></code></dt><dd><p>Copy of switch routing table</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">port_ok</span></code></dt><dd><p>Status of each port (one bit per port) - OK=1 or UNINIT=0</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ops</span></code></dt><dd><p>pointer to switch-specific operations</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lock</span></code></dt><dd><p>lock to serialize operations updates</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nextdev</span></code></dt><dd><p>Array of per-port pointers to the next attached device</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_switch_ops">
struct <code class="sig-name descname">rio_switch_ops</code><a class="headerlink" href="#c.rio_switch_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Per-switch operations</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_switch_ops {
    struct module *owner;
    int (*add_entry) (struct rio_mport *mport, u16 destid, u8 hopcount, u16 table, u16 route_destid, u8 route_port);
    int (*get_entry) (struct rio_mport *mport, u16 destid, u8 hopcount, u16 table, u16 route_destid, u8 *route_port);
    int (*clr_table) (struct rio_mport *mport, u16 destid, u8 hopcount, u16 table);
    int (*set_domain) (struct rio_mport *mport, u16 destid, u8 hopcount, u8 sw_domain);
    int (*get_domain) (struct rio_mport *mport, u16 destid, u8 hopcount, u8 *sw_domain);
    int (*em_init) (struct rio_dev *dev);
    int (*em_handle) (struct rio_dev *dev, u8 swport);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">owner</span></code></dt><dd><p>The module owner of this structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">add_entry</span></code></dt><dd><p>Callback for switch-specific route add function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_entry</span></code></dt><dd><p>Callback for switch-specific route get function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clr_table</span></code></dt><dd><p>Callback for switch-specific clear route table function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_domain</span></code></dt><dd><p>Callback for switch-specific domain setting function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_domain</span></code></dt><dd><p>Callback for switch-specific domain get function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">em_init</span></code></dt><dd><p>Callback for switch-specific error management init function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">em_handle</span></code></dt><dd><p>Callback for switch-specific error management handler function</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>Defines the operations that are necessary to initialize/control
a particular RIO switch device.</p>
<dl class="type">
<dt id="c.rio_dev">
struct <code class="sig-name descname">rio_dev</code><a class="headerlink" href="#c.rio_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO device info</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_dev {
    struct list_head global_list;
    struct list_head net_list;
    struct rio_net *net;
    bool do_enum;
    u16 did;
    u16 vid;
    u32 device_rev;
    u16 asm_did;
    u16 asm_vid;
    u16 asm_rev;
    u16 efptr;
    u32 pef;
    u32 swpinfo;
    u32 src_ops;
    u32 dst_ops;
    u32 comp_tag;
    u32 phys_efptr;
    u32 phys_rmap;
    u32 em_efptr;
    u64 dma_mask;
    struct rio_driver *driver;
    struct device dev;
    struct resource riores[RIO_MAX_DEV_RESOURCES];
    int (*pwcback) (struct rio_dev *rdev, union rio_pw_msg *msg, int step);
    u16 destid;
    u8 hopcount;
    struct rio_dev *prev;
    atomic_t state;
    struct rio_switch rswitch[];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">global_list</span></code></dt><dd><p>Node in list of all RIO devices</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">net_list</span></code></dt><dd><p>Node in list of RIO devices in a network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">net</span></code></dt><dd><p>Network this device is a part of</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">do_enum</span></code></dt><dd><p>Enumeration flag</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">did</span></code></dt><dd><p>Device ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vid</span></code></dt><dd><p>Vendor ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device_rev</span></code></dt><dd><p>Device revision</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">asm_did</span></code></dt><dd><p>Assembly device ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">asm_vid</span></code></dt><dd><p>Assembly vendor ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">asm_rev</span></code></dt><dd><p>Assembly revision</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">efptr</span></code></dt><dd><p>Extended feature pointer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pef</span></code></dt><dd><p>Processing element features</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swpinfo</span></code></dt><dd><p>Switch port info</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">src_ops</span></code></dt><dd><p>Source operation capabilities</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dst_ops</span></code></dt><dd><p>Destination operation capabilities</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">comp_tag</span></code></dt><dd><p>RIO component tag</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">phys_efptr</span></code></dt><dd><p>RIO device extended features pointer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">phys_rmap</span></code></dt><dd><p>LP-Serial Register Map Type (1 or 2)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">em_efptr</span></code></dt><dd><p>RIO Error Management features pointer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dma_mask</span></code></dt><dd><p>Mask of bits of RIO address this device implements</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code></dt><dd><p>Driver claiming this device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>Device model device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">riores</span></code></dt><dd><p>RIO resources this device owns</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwcback</span></code></dt><dd><p>port-write callback function for this device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">destid</span></code></dt><dd><p>Network destination ID (or associated destid for switch)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hopcount</span></code></dt><dd><p>Hopcount to this device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prev</span></code></dt><dd><p>Previous RIO device connected to the current one</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code></dt><dd><p>device state</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rswitch</span></code></dt><dd><p><a class="reference internal" href="#c.rio_switch" title="rio_switch"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_switch</span></code></a> (if valid for this device)</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_msg">
struct <code class="sig-name descname">rio_msg</code><a class="headerlink" href="#c.rio_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO message event</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_msg {
    struct resource *res;
    void (*mcback) (struct rio_mport * mport, void *dev_id, int mbox, int slot);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">res</span></code></dt><dd><p>Mailbox resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mcback</span></code></dt><dd><p>Message event callback</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_dbell">
struct <code class="sig-name descname">rio_dbell</code><a class="headerlink" href="#c.rio_dbell" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO doorbell event</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_dbell {
    struct list_head node;
    struct resource *res;
    void (*dinb) (struct rio_mport *mport, void *dev_id, u16 src, u16 dst, u16 info);
    void *dev_id;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>Node in list of doorbell events</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">res</span></code></dt><dd><p>Doorbell resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dinb</span></code></dt><dd><p>Doorbell event callback</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev_id</span></code></dt><dd><p>Device specific pointer to pass on event</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_mport">
struct <code class="sig-name descname">rio_mport</code><a class="headerlink" href="#c.rio_mport" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO master port info</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_mport {
    struct list_head dbells;
    struct list_head pwrites;
    struct list_head node;
    struct list_head nnode;
    struct rio_net *net;
    struct mutex lock;
    struct resource iores;
    struct resource riores[RIO_MAX_MPORT_RESOURCES];
    struct rio_msg inb_msg[RIO_MAX_MBOX];
    struct rio_msg outb_msg[RIO_MAX_MBOX];
    int host_deviceid;
    struct rio_ops *ops;
    unsigned char id;
    unsigned char index;
    unsigned int sys_size;
    u32 phys_efptr;
    u32 phys_rmap;
    unsigned char name[RIO_MAX_MPORT_NAME];
    struct device dev;
    void *priv;
#ifdef CONFIG_RAPIDIO_DMA_ENGINE;
    struct dma_device       dma;
#endif;
    struct rio_scan *nscan;
    atomic_t state;
    unsigned int pwe_refcnt;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">dbells</span></code></dt><dd><p>List of doorbell events</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwrites</span></code></dt><dd><p>List of portwrite events</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>Node in global list of master ports</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nnode</span></code></dt><dd><p>Node in network list of master ports</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">net</span></code></dt><dd><p>RIO net this mport is attached to</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lock</span></code></dt><dd><p>lock to synchronize lists manipulations</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iores</span></code></dt><dd><p>I/O mem resource that this master port interface owns</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">riores</span></code></dt><dd><p>RIO resources that this master port interfaces owns</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inb_msg</span></code></dt><dd><p>RIO inbound message event descriptors</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">outb_msg</span></code></dt><dd><p>RIO outbound message event descriptors</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">host_deviceid</span></code></dt><dd><p>Host device ID associated with this master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ops</span></code></dt><dd><p>configuration space functions</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code></dt><dd><p>Port ID, unique among all ports</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">index</span></code></dt><dd><p>Port index, unique among all port interfaces of the same type</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sys_size</span></code></dt><dd><p>RapidIO common transport system size</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">phys_efptr</span></code></dt><dd><p>RIO port extended features pointer</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">phys_rmap</span></code></dt><dd><p>LP-Serial EFB Register Mapping type (1 or 2).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Port name string</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>device structure associated with an mport</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt><dd><p>Master port private data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dma</span></code></dt><dd><p>DMA device associated with mport</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nscan</span></code></dt><dd><p>RapidIO network enumeration/discovery operations</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code></dt><dd><p>mport device state</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwe_refcnt</span></code></dt><dd><p>port-write enable ref counter to track enable/disable requests</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_net">
struct <code class="sig-name descname">rio_net</code><a class="headerlink" href="#c.rio_net" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO network info</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_net {
    struct list_head node;
    struct list_head devices;
    struct list_head switches;
    struct list_head mports;
    struct rio_mport *hport;
    unsigned char id;
    struct device dev;
    void *enum_data;
    void (*release)(struct rio_net *net);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>Node in global list of RIO networks</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">devices</span></code></dt><dd><p>List of devices in this network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">switches</span></code></dt><dd><p>List of switches in this network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mports</span></code></dt><dd><p>List of master ports accessing this network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hport</span></code></dt><dd><p>Default port for accessing this network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code></dt><dd><p>RIO network ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>Device object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum_data</span></code></dt><dd><p>private data specific to a network enumerator</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">release</span></code></dt><dd><p>enumerator-specific release callback</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_mport_attr">
struct <code class="sig-name descname">rio_mport_attr</code><a class="headerlink" href="#c.rio_mport_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO mport device attributes</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_mport_attr {
    int flags;
    int link_speed;
    int link_width;
    int dma_max_sge;
    int dma_max_size;
    int dma_align;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>mport device capability flags</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">link_speed</span></code></dt><dd><p>SRIO link speed value (as defined by RapidIO specification)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">link_width</span></code></dt><dd><p>SRIO link width value (as defined by RapidIO specification)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dma_max_sge</span></code></dt><dd><p>number of SG list entries that can be handled by DMA channel(s)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dma_max_size</span></code></dt><dd><p>max number of bytes in single DMA transfer (SG entry)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dma_align</span></code></dt><dd><p>alignment shift for DMA operations (as for other DMA operations)</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_ops">
struct <code class="sig-name descname">rio_ops</code><a class="headerlink" href="#c.rio_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Low-level RIO configuration space operations</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_ops {
    int (*lcread) (struct rio_mport *mport, int index, u32 offset, int len, u32 *data);
    int (*lcwrite) (struct rio_mport *mport, int index, u32 offset, int len, u32 data);
    int (*cread) (struct rio_mport *mport, int index, u16 destid, u8 hopcount, u32 offset, int len, u32 *data);
    int (*cwrite) (struct rio_mport *mport, int index, u16 destid, u8 hopcount, u32 offset, int len, u32 data);
    int (*dsend) (struct rio_mport *mport, int index, u16 destid, u16 data);
    int (*pwenable) (struct rio_mport *mport, int enable);
    int (*open_outb_mbox)(struct rio_mport *mport, void *dev_id, int mbox, int entries);
    void (*close_outb_mbox)(struct rio_mport *mport, int mbox);
    int (*open_inb_mbox)(struct rio_mport *mport, void *dev_id, int mbox, int entries);
    void (*close_inb_mbox)(struct rio_mport *mport, int mbox);
    int (*add_outb_message)(struct rio_mport *mport, struct rio_dev *rdev, int mbox, void *buffer, size_t len);
    int (*add_inb_buffer)(struct rio_mport *mport, int mbox, void *buf);
    void *(*get_inb_message)(struct rio_mport *mport, int mbox);
    int (*map_inb)(struct rio_mport *mport, dma_addr_t lstart, u64 rstart, u64 size, u32 flags);
    void (*unmap_inb)(struct rio_mport *mport, dma_addr_t lstart);
    int (*query_mport)(struct rio_mport *mport, struct rio_mport_attr *attr);
    int (*map_outb)(struct rio_mport *mport, u16 destid, u64 rstart, u32 size, u32 flags, dma_addr_t *laddr);
    void (*unmap_outb)(struct rio_mport *mport, u16 destid, u64 rstart);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">lcread</span></code></dt><dd><p>Callback to perform local (master port) read of config space.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lcwrite</span></code></dt><dd><p>Callback to perform local (master port) write of config space.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cread</span></code></dt><dd><p>Callback to perform network read of config space.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cwrite</span></code></dt><dd><p>Callback to perform network write of config space.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dsend</span></code></dt><dd><p>Callback to send a doorbell message.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pwenable</span></code></dt><dd><p>Callback to enable/disable port-write message handling.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">open_outb_mbox</span></code></dt><dd><p>Callback to initialize outbound mailbox.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">close_outb_mbox</span></code></dt><dd><p>Callback to shut down outbound mailbox.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">open_inb_mbox</span></code></dt><dd><p>Callback to initialize inbound mailbox.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">close_inb_mbox</span></code></dt><dd><p>Callback to shut down inbound mailbox.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">add_outb_message</span></code></dt><dd><p>Callback to add a message to an outbound mailbox queue.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">add_inb_buffer</span></code></dt><dd><p>Callback to add a buffer to an inbound mailbox queue.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_inb_message</span></code></dt><dd><p>Callback to get a message from an inbound mailbox queue.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">map_inb</span></code></dt><dd><p>Callback to map RapidIO address region into local memory space.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap_inb</span></code></dt><dd><p>Callback to unmap RapidIO address region mapped with map_inb().</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">query_mport</span></code></dt><dd><p>Callback to query mport device attributes.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">map_outb</span></code></dt><dd><p>Callback to map outbound address region into local memory space.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unmap_outb</span></code></dt><dd><p>Callback to unmap outbound RapidIO address region.</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_driver">
struct <code class="sig-name descname">rio_driver</code><a class="headerlink" href="#c.rio_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO driver info</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_driver {
    struct list_head node;
    char *name;
    const struct rio_device_id *id_table;
    int (*probe) (struct rio_dev * dev, const struct rio_device_id * id);
    void (*remove) (struct rio_dev * dev);
    void (*shutdown)(struct rio_dev *dev);
    int (*suspend) (struct rio_dev * dev, u32 state);
    int (*resume) (struct rio_dev * dev);
    int (*enable_wake) (struct rio_dev * dev, u32 state, int enable);
    struct device_driver driver;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>Node in list of drivers</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>RIO driver name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id_table</span></code></dt><dd><p>RIO device ids to be associated with this driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">probe</span></code></dt><dd><p>RIO device inserted</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">remove</span></code></dt><dd><p>RIO device removed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shutdown</span></code></dt><dd><p>shutdown notification callback</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">suspend</span></code></dt><dd><p>RIO device suspended</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">resume</span></code></dt><dd><p>RIO device awakened</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enable_wake</span></code></dt><dd><p>RIO device enable wake event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code></dt><dd><p>LDM driver struct</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>Provides info on a RIO device driver for insertion/removal and
power management purposes.</p>
<dl class="type">
<dt id="c.rio_scan">
struct <code class="sig-name descname">rio_scan</code><a class="headerlink" href="#c.rio_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>RIO enumeration and discovery operations</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_scan {
    struct module *owner;
    int (*enumerate)(struct rio_mport *mport, u32 flags);
    int (*discover)(struct rio_mport *mport, u32 flags);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">owner</span></code></dt><dd><p>The module owner of this structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enumerate</span></code></dt><dd><p>Callback to perform RapidIO fabric enumeration.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">discover</span></code></dt><dd><p>Callback to perform RapidIO fabric discovery.</p>
</dd>
</dl>
</div>
<dl class="type">
<dt id="c.rio_scan_node">
struct <code class="sig-name descname">rio_scan_node</code><a class="headerlink" href="#c.rio_scan_node" title="Permalink to this definition">¶</a></dt>
<dd><p>list node to register RapidIO enumeration and discovery methods with RapidIO core.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rio_scan_node {
    int mport_id;
    struct list_head node;
    struct rio_scan *ops;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mport_id</span></code></dt><dd><p>ID of an mport (net) serviced by this enumerator</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">node</span></code></dt><dd><p>node in global list of registered enumerators</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ops</span></code></dt><dd><p>RIO enumeration and discovery operations</p>
</dd>
</dl>
</div>
</section>
<section id="enumeration-and-discovery">
<h3>Enumeration and Discovery<a class="headerlink" href="#enumeration-and-discovery" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.rio_destid_alloc">
u16 <code class="sig-name descname">rio_destid_alloc</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_destid_alloc" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate next available destID for given network</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns next available device destination ID for the specified RIO network.
Marks allocated ID as one in use.
Returns RIO_INVALID_DESTID if new destID is not available.</p>
</div>
<dl class="function">
<dt id="c.rio_destid_reserve">
int <code class="sig-name descname">rio_destid_reserve</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em>, u16<em> destid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_destid_reserve" title="Permalink to this definition">¶</a></dt>
<dd><p>Reserve the specified destID</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>destID to reserve</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Tries to reserve the specified destID.
Returns 0 if successful.</p>
</div>
<dl class="function">
<dt id="c.rio_destid_free">
void <code class="sig-name descname">rio_destid_free</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em>, u16<em> destid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_destid_free" title="Permalink to this definition">¶</a></dt>
<dd><p>free a previously allocated destID</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>destID to free</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Makes the specified destID available for use.</p>
</div>
<dl class="function">
<dt id="c.rio_destid_first">
u16 <code class="sig-name descname">rio_destid_first</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_destid_first" title="Permalink to this definition">¶</a></dt>
<dd><p>return first destID in use</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_destid_next">
u16 <code class="sig-name descname">rio_destid_next</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em>, u16<em> from</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_destid_next" title="Permalink to this definition">¶</a></dt>
<dd><p>return next destID in use</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">from</span></code></dt><dd><p>destination ID from which search shall continue</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_get_device_id">
u16 <code class="sig-name descname">rio_get_device_id</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u16<em> destid</em>, u8<em> hopcount</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_get_device_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the base/extended device id for a device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>RIO master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Hopcount to device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads the base/extended device id from a device. Returns the
8/16-bit device ID.</p>
</div>
<dl class="function">
<dt id="c.rio_set_device_id">
void <code class="sig-name descname">rio_set_device_id</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u16<em> destid</em>, u8<em> hopcount</em>, u16<em> did</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_set_device_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the base/extended device id for a device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>RIO master port</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Hopcount to device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">did</span></code></dt><dd><p>Device ID value to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Writes the base/extended device id from a device.</p>
</div>
<dl class="function">
<dt id="c.rio_clear_locks">
int <code class="sig-name descname">rio_clear_locks</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_clear_locks" title="Permalink to this definition">¶</a></dt>
<dd><p>Release all host locks and signal enumeration complete</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network to run on</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Marks the component tag CSR on each device with the enumeration
complete flag. When complete, it then release the host locks on
each device. Returns 0 on success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_enum_host">
int <code class="sig-name descname">rio_enum_host</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_enum_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Set host lock and initialize host destination ID</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to issue transaction</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Sets the local host master port lock and destination ID register
with the host device ID value. The host device ID value is provided
by the platform. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on success or <code class="docutils literal notranslate"><span class="pre">-1</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_device_has_destid">
int <code class="sig-name descname">rio_device_has_destid</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, int<em> src_ops</em>, int<em> dst_ops</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_device_has_destid" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if a device contains a destination ID register</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to issue transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">src_ops</span></code></dt><dd><p>RIO device source operations</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">dst_ops</span></code></dt><dd><p>RIO device destination operations</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Checks the provided <strong>src_ops</strong> and <strong>dst_ops</strong> for the necessary transaction
capabilities that indicate whether or not a device will implement a
destination ID register. Returns 1 if true or 0 if false.</p>
</div>
<dl class="function">
<dt id="c.rio_release_dev">
void <code class="sig-name descname">rio_release_dev</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/infrastructure.html#c.device" title="device">device</a><em> *dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_release_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Frees a RIO device struct</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>LDM device associated with a RIO device struct</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Gets the RIO device struct associated a RIO device struct.
The RIO device struct is freed.</p>
</div>
<dl class="function">
<dt id="c.rio_is_switch">
int <code class="sig-name descname">rio_is_switch</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_is_switch" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if a RIO device has switch capabilities</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Gets the RIO device Processing Element Features register
contents and tests for switch capabilities. Returns 1 if
the device is a switch or 0 if it is not a switch.
The RIO device struct is freed.</p>
</div>
<dl class="function">
<dt id="c.rio_setup_device">
struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a> * <code class="sig-name descname">rio_setup_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em>, struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u16<em> destid</em>, u8<em> hopcount</em>, int<em> do_enum</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_setup_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocates and sets up a RIO device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to send transactions</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Current destination ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Current hopcount</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">do_enum</span></code></dt><dd><p>Enumeration/Discovery mode flag</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocates a RIO device and configures fields based on configuration
space contents. If device has a destination ID register, a destination
ID is either assigned in enumeration mode or read from configuration
space in discovery mode.  If the device has switch capabilities, then
a switch is allocated and configured appropriately. Returns a pointer
to a RIO device on success or NULL on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_sport_is_active">
int <code class="sig-name descname">rio_sport_is_active</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, int<em> sp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_sport_is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if a switch port has an active connection.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RapidIO device object</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">sp</span></code></dt><dd><p>Switch port number</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads the port error status CSR for a particular switch port to
determine if the port has an active link.  Returns
<code class="docutils literal notranslate"><span class="pre">RIO_PORT_N_ERR_STS_PORT_OK</span></code> if the port is active or <code class="docutils literal notranslate"><span class="pre">0</span></code> if it is
inactive.</p>
</div>
<dl class="function">
<dt id="c.rio_get_host_deviceid_lock">
u16 <code class="sig-name descname">rio_get_host_deviceid_lock</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u8<em> hopcount</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_get_host_deviceid_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the Host Device ID Lock CSR on a device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to send transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of hops to the device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Used during enumeration to read the Host Device ID Lock CSR on a
RIO device. Returns the value of the lock register.</p>
</div>
<dl class="function">
<dt id="c.rio_enum_peer">
int <code class="sig-name descname">rio_enum_peer</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em>, struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u8<em> hopcount</em>, struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *prev</em>, int<em> prev_port</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_enum_peer" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively enumerate a RIO network through a master port</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network being enumerated</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to send transactions</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of hops into the network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*prev</span></code></dt><dd><p>Previous RIO device connected to the enumerated one</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">prev_port</span></code></dt><dd><p>Port on previous RIO device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Recursively enumerates a RIO network.  Transactions are sent via the
master port passed in <strong>port</strong>.</p>
</div>
<dl class="function">
<dt id="c.rio_enum_complete">
int <code class="sig-name descname">rio_enum_complete</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_enum_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if enumeration of a network is complete</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to send transaction</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Tests the PGCCSR discovered bit for non-zero value (enumeration
complete flag). Return <code class="docutils literal notranslate"><span class="pre">1</span></code> if enumeration is complete or <code class="docutils literal notranslate"><span class="pre">0</span></code> if
enumeration is incomplete.</p>
</div>
<dl class="function">
<dt id="c.rio_disc_peer">
int <code class="sig-name descname">rio_disc_peer</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em>, struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em>, u16<em> destid</em>, u8<em> hopcount</em>, struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *prev</em>, int<em> prev_port</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_disc_peer" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively discovers a RIO network through a master port</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network being discovered</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to send transactions</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Current destination ID in network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of hops into the network</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*prev</span></code></dt><dd><p>previous rio_dev</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">prev_port</span></code></dt><dd><p>previous port number</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Recursively discovers a RIO network.  Transactions are sent via the
master port passed in <strong>port</strong>.</p>
</div>
<dl class="function">
<dt id="c.rio_mport_is_active">
int <code class="sig-name descname">rio_mport_is_active</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *port</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_mport_is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if master port link is active</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*port</span></code></dt><dd><p>Master port to test</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reads the port error status CSR for the master port to
determine if the port has an active link.  Returns
<code class="docutils literal notranslate"><span class="pre">RIO_PORT_N_ERR_STS_PORT_OK</span></code> if the  master port is active
or <code class="docutils literal notranslate"><span class="pre">0</span></code> if it is inactive.</p>
</div>
<dl class="function">
<dt id="c.rio_update_route_tables">
void <code class="sig-name descname">rio_update_route_tables</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_update_route_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates route tables in switches</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network to run update on</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>For each enumerated device, ensure that each switch in a system
has correct routing entries. Add routes for devices that where
unknown during the first enumeration pass through the switch.</p>
</div>
<dl class="function">
<dt id="c.rio_init_em">
void <code class="sig-name descname">rio_init_em</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_init_em" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes RIO Error Management (for switches)</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>For each enumerated switch, call device-specific error management
initialization routine (if supplied by the switch driver).</p>
</div>
<dl class="function">
<dt id="c.rio_enum_mport">
int <code class="sig-name descname">rio_enum_mport</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u32<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_enum_mport" title="Permalink to this definition">¶</a></dt>
<dd><p>Start enumeration through a master port</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port to send transactions</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">flags</span></code></dt><dd><p>Enumeration control flags</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Starts the enumeration process. If somebody has enumerated our
master port device, then give up. If not and we have an active
link, then start recursive peer enumeration. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> if
enumeration succeeds or <code class="docutils literal notranslate"><span class="pre">-EBUSY</span></code> if enumeration fails.</p>
</div>
<dl class="function">
<dt id="c.rio_build_route_tables">
void <code class="sig-name descname">rio_build_route_tables</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_net" title="rio_net">rio_net</a><em> *net</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_build_route_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate route tables from switch route entries</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_net</span> <span class="pre">*net</span></code></dt><dd><p>RIO network to run route tables scan on</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>For each switch device, generate a route table by copying existing
route entries from the switch.</p>
</div>
<dl class="function">
<dt id="c.rio_disc_mport">
int <code class="sig-name descname">rio_disc_mport</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u32<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_disc_mport" title="Permalink to this definition">¶</a></dt>
<dd><p>Start discovery through a master port</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port to send transactions</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">flags</span></code></dt><dd><p>discovery control flags</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Starts the discovery process. If we have an active link,
then wait for the signal that enumeration is complete (if wait
is allowed).
When enumeration completion is signaled, start recursive
peer discovery. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> if discovery succeeds or <code class="docutils literal notranslate"><span class="pre">-EBUSY</span></code>
on failure.</p>
</div>
<dl class="function">
<dt id="c.rio_basic_attach">
int <code class="sig-name descname">rio_basic_attach</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_basic_attach" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>When this enumeration/discovery method is loaded as a module this function
registers its specific enumeration and discover routines for all available
RapidIO mport devices. The “scan” command line parameter controls ability of
the module to start RapidIO enumeration/discovery automatically.</p>
<p>Returns 0 for success or -EIO if unable to register itself.</p>
<p>This enumeration/discovery method cannot be unloaded and therefore does not
provide a matching cleanup_module routine.</p>
</div>
</section>
<section id="driver-functionality">
<h3>Driver functionality<a class="headerlink" href="#driver-functionality" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.rio_setup_inb_dbell">
int <code class="sig-name descname">rio_setup_inb_dbell</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, void<em> *dev_id</em>, struct resource<em> *res</em>, void (<em>*dinb</em>)(struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a> * mport, void *dev_id, u16 src, u16 dst, u16 info)<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_setup_inb_dbell" title="Permalink to this definition">¶</a></dt>
<dd><p>bind inbound doorbell callback</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RIO master port to bind the doorbell callback</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*dev_id</span></code></dt><dd><p>Device specific pointer to pass on event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">resource</span> <span class="pre">*res</span></code></dt><dd><p>Doorbell message resource</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*dinb)</span> <span class="pre">(struct</span> <span class="pre">rio_mport</span> <span class="pre">*</span> <span class="pre">mport,</span> <span class="pre">void</span> <span class="pre">*dev_id,</span> <span class="pre">u16</span> <span class="pre">src,</span> <span class="pre">u16</span> <span class="pre">dst,</span> <span class="pre">u16</span> <span class="pre">info)</span></code></dt><dd><p>Callback to execute when doorbell is received</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Adds a doorbell resource/callback pair into a port’s
doorbell event list. Returns 0 if the request has been
satisfied.</p>
</div>
<dl class="function">
<dt id="c.rio_chk_dev_route">
int <code class="sig-name descname">rio_chk_dev_route</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> **nrdev</em>, int<em> *npnum</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_chk_dev_route" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate route to the specified device.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO device failed to respond</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">**nrdev</span></code></dt><dd><p>Last active device on the route to rdev</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*npnum</span></code></dt><dd><p>nrdev’s port number on the route to rdev</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Follows a route to the specified RIO device to determine the last available
device (and corresponding RIO port) on the route.</p>
</div>
<dl class="function">
<dt id="c.rio_chk_dev_access">
int <code class="sig-name descname">rio_chk_dev_access</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_chk_dev_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate access to the specified device.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>Pointer to RIO device control structure</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_get_input_status">
int <code class="sig-name descname">rio_get_input_status</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, int<em> pnum</em>, u32<em> *lnkresp</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_get_input_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a Link-Request/Input-Status control symbol and returns link-response (if requested).</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>RIO devive to issue Input-status command</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">pnum</span></code></dt><dd><p>Device port number to issue the command</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">*lnkresp</span></code></dt><dd><p>Response from a link partner</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_clr_err_stopped">
int <code class="sig-name descname">rio_clr_err_stopped</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em>, u32<em> pnum</em>, u32<em> err_status</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_clr_err_stopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears port Error-stopped states.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>Pointer to RIO device control structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">pnum</span></code></dt><dd><p>Switch port number to clear errors</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">err_status</span></code></dt><dd><p>port error status (if 0 reads register from device)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>TODO: Currently this routine is not compatible with recovery process
specified for idt_gen3 RapidIO switch devices. It has to be reviewed
to implement universal recovery process that is compatible full range
off available devices.
IDT gen3 switch driver now implements HW-specific error handler that
issues soft port reset to the port to reset ERR_STOP bits and ackIDs.</p>
</div>
<dl class="function">
<dt id="c.rio_std_route_add_entry">
int <code class="sig-name descname">rio_std_route_add_entry</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u16<em> destid</em>, u8<em> hopcount</em>, u16<em> table</em>, u16<em> route_destid</em>, u8<em> route_port</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_std_route_add_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Add switch route table entry using standard registers defined in RIO specification rev.1.3</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port to issue transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of switch hops to the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">table</span></code></dt><dd><p>routing table ID (global or port-specific)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">route_destid</span></code></dt><dd><p>destID entry in the RT</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">route_port</span></code></dt><dd><p>destination port for specified destID</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_std_route_get_entry">
int <code class="sig-name descname">rio_std_route_get_entry</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u16<em> destid</em>, u8<em> hopcount</em>, u16<em> table</em>, u16<em> route_destid</em>, u8<em> *route_port</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_std_route_get_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Read switch route table entry (port number) associated with specified destID using standard registers defined in RIO specification rev.1.3</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port to issue transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of switch hops to the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">table</span></code></dt><dd><p>routing table ID (global or port-specific)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">route_destid</span></code></dt><dd><p>destID entry in the RT</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*route_port</span></code></dt><dd><p>returned destination port for specified destID</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_std_route_clr_table">
int <code class="sig-name descname">rio_std_route_clr_table</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, u16<em> destid</em>, u8<em> hopcount</em>, u16<em> table</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_std_route_clr_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear swotch route table using standard registers defined in RIO specification rev.1.3.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>Master port to issue transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of switch hops to the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">table</span></code></dt><dd><p>routing table ID (global or port-specific)</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_find_mport">
struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a> * <code class="sig-name descname">rio_find_mport</code><span class="sig-paren">(</span>int<em> mport_id</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_find_mport" title="Permalink to this definition">¶</a></dt>
<dd><p>find RIO mport by its ID</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mport_id</span></code></dt><dd><p>number (ID) of mport device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Given a RIO mport number, the desired mport is located
in the global list of mports. If the mport is found, a pointer to its
data structure is returned.  If no mport is found, <code class="docutils literal notranslate"><span class="pre">NULL</span></code> is returned.</p>
</div>
<dl class="function">
<dt id="c.rio_mport_scan">
int <code class="sig-name descname">rio_mport_scan</code><span class="sig-paren">(</span>int<em> mport_id</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_mport_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>execute enumeration/discovery on the specified mport</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mport_id</span></code></dt><dd><p>number (ID) of mport device</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.RIO_LOP_READ">
<code class="sig-name descname">RIO_LOP_READ</code><span class="sig-paren">(</span><em>size</em>, <em>type</em>, <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.RIO_LOP_READ" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate rio_local_read_config_* functions</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code></dt><dd><p>Size of configuration space read (8, 16, 32 bits)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>C type of value argument</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code></dt><dd><p>Length of configuration space read (1, 2, 4 bytes)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generates rio_local_read_config_* functions used to access
configuration space registers on the local device.</p>
</div>
<dl class="function">
<dt id="c.RIO_LOP_WRITE">
<code class="sig-name descname">RIO_LOP_WRITE</code><span class="sig-paren">(</span><em>size</em>, <em>type</em>, <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.RIO_LOP_WRITE" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate rio_local_write_config_* functions</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code></dt><dd><p>Size of configuration space write (8, 16, 32 bits)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>C type of value argument</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code></dt><dd><p>Length of configuration space write (1, 2, 4 bytes)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generates rio_local_write_config_* functions used to access
configuration space registers on the local device.</p>
</div>
<dl class="function">
<dt id="c.RIO_OP_READ">
<code class="sig-name descname">RIO_OP_READ</code><span class="sig-paren">(</span><em>size</em>, <em>type</em>, <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.RIO_OP_READ" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate rio_mport_read_config_* functions</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code></dt><dd><p>Size of configuration space read (8, 16, 32 bits)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>C type of value argument</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code></dt><dd><p>Length of configuration space read (1, 2, 4 bytes)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generates rio_mport_read_config_* functions used to access
configuration space registers on the local device.</p>
</div>
<dl class="function">
<dt id="c.RIO_OP_WRITE">
<code class="sig-name descname">RIO_OP_WRITE</code><span class="sig-paren">(</span><em>size</em>, <em>type</em>, <em>len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.RIO_OP_WRITE" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate rio_mport_write_config_* functions</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code></dt><dd><p>Size of configuration space write (8, 16, 32 bits)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>C type of value argument</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code></dt><dd><p>Length of configuration space write (1, 2, 4 bytes)</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generates rio_mport_write_config_* functions used to access
configuration space registers on the local device.</p>
</div>
</section>
<section id="device-model-support">
<h3>Device model support<a class="headerlink" href="#device-model-support" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.rio_match_device">
const struct <a class="reference internal" href="../driver-api/basics.html#c.rio_device_id" title="rio_device_id">rio_device_id</a> * <code class="sig-name descname">rio_match_device</code><span class="sig-paren">(</span>const struct <a class="reference internal" href="../driver-api/basics.html#c.rio_device_id" title="rio_device_id">rio_device_id</a><em> *id</em>, const struct <a class="reference internal" href="#c.rio_dev" title="rio_dev">rio_dev</a><em> *rdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_match_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell if a RIO device has a matching RIO device id structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">rio_device_id</span> <span class="pre">*id</span></code></dt><dd><p>the RIO device id structure to match against</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">rio_dev</span> <span class="pre">*rdev</span></code></dt><dd><p>the RIO device structure to match against</p>
<p>Used from driver probe and bus matching to check whether a RIO device
matches a device id structure provided by a RIO driver. Returns the
matching <a class="reference internal" href="../driver-api/basics.html#c.rio_device_id" title="rio_device_id"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_device_id</span></code></a> or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if there is no match.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_device_probe">
int <code class="sig-name descname">rio_device_probe</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/infrastructure.html#c.device" title="device">device</a><em> *dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_device_probe" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell if a RIO device structure has a matching RIO device id structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>the RIO device structure to match against</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>return 0 and set rio_dev-&gt;driver when drv claims rio_dev, else error</p>
</div>
<dl class="function">
<dt id="c.rio_device_remove">
void <code class="sig-name descname">rio_device_remove</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/infrastructure.html#c.device" title="device">device</a><em> *dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_device_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a RIO device from the system</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>the RIO device structure to match against</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Remove a RIO device from the system. If it has an associated
driver, then run the driver remove() method.  Then update
the reference count.</p>
</div>
<dl class="function">
<dt id="c.rio_match_bus">
int <code class="sig-name descname">rio_match_bus</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/infrastructure.html#c.device" title="device">device</a><em> *dev</em>, struct device_driver<em> *drv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rio_match_bus" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell if a RIO device structure has a matching RIO driver device id structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>the standard device structure to match against</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device_driver</span> <span class="pre">*drv</span></code></dt><dd><p>the standard driver structure containing the ids to match against</p>
<p>Used by a driver to check whether a RIO device present in the
system is in its list of supported devices. Returns 1 if
there is a matching <a class="reference internal" href="../driver-api/basics.html#c.rio_device_id" title="rio_device_id"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_device_id</span></code></a> or 0 if there is
no match.</p>
</dd>
</dl>
</div>
<dl class="function">
<dt id="c.rio_bus_init">
int <code class="sig-name descname">rio_bus_init</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.rio_bus_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the RapidIO bus with the device model</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div><p>Registers the RIO mport device class and RIO bus type with the Linux
device model.</p>
</div></blockquote>
</div>
</section>
<section id="ppc32-support">
<h3>PPC32 support<a class="headerlink" href="#ppc32-support" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="c.fsl_local_config_read">
int <code class="sig-name descname">fsl_local_config_read</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> index</em>, u32<em> offset</em>, int<em> len</em>, u32<em> *data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fsl_local_config_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a MPC85xx local config space read</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RapidIO master port info</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">index</span></code></dt><dd><p>ID of RapdiIO interface</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">len</span></code></dt><dd><p>Length (in bytes) of the maintenance transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">*data</span></code></dt><dd><p>Value to be read into</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generates a MPC85xx local configuration space read. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on
success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.fsl_local_config_write">
int <code class="sig-name descname">fsl_local_config_write</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> index</em>, u32<em> offset</em>, int<em> len</em>, u32<em> data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fsl_local_config_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a MPC85xx local config space write</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RapidIO master port info</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">index</span></code></dt><dd><p>ID of RapdiIO interface</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">len</span></code></dt><dd><p>Length (in bytes) of the maintenance transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">data</span></code></dt><dd><p>Value to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generates a MPC85xx local configuration space write. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on
success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.fsl_rio_config_read">
int <code class="sig-name descname">fsl_rio_config_read</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> index</em>, u16<em> destid</em>, u8<em> hopcount</em>, u32<em> offset</em>, int<em> len</em>, u32<em> *val</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fsl_rio_config_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a MPC85xx read maintenance transaction</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RapidIO master port info</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">index</span></code></dt><dd><p>ID of RapdiIO interface</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of hops to target device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">len</span></code></dt><dd><p>Length (in bytes) of the maintenance transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">*val</span></code></dt><dd><p>Location to be read into</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generates a MPC85xx read maintenance transaction. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on
success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.fsl_rio_config_write">
int <code class="sig-name descname">fsl_rio_config_write</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rio_mport" title="rio_mport">rio_mport</a><em> *mport</em>, int<em> index</em>, u16<em> destid</em>, u8<em> hopcount</em>, u32<em> offset</em>, int<em> len</em>, u32<em> val</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fsl_rio_config_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a MPC85xx write maintenance transaction</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rio_mport</span> <span class="pre">*mport</span></code></dt><dd><p>RapidIO master port info</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">index</span></code></dt><dd><p>ID of RapdiIO interface</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">destid</span></code></dt><dd><p>Destination ID of transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">hopcount</span></code></dt><dd><p>Number of hops to target device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">offset</span></code></dt><dd><p>Offset into configuration space</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">len</span></code></dt><dd><p>Length (in bytes) of the maintenance transaction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">val</span></code></dt><dd><p>Value to be written</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Generates an MPC85xx write maintenance transaction. Returns <code class="docutils literal notranslate"><span class="pre">0</span></code> on
success or <code class="docutils literal notranslate"><span class="pre">-EINVAL</span></code> on failure.</p>
</div>
<dl class="function">
<dt id="c.fsl_rio_setup">
int <code class="sig-name descname">fsl_rio_setup</code><span class="sig-paren">(</span>struct platform_device<em> *dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.fsl_rio_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup Freescale PowerPC RapidIO interface</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">platform_device</span> <span class="pre">*dev</span></code></dt><dd><p>platform_device pointer</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Initializes MPC85xx RapidIO hardware interface, configures
master port with system-specific info, and registers the
master port with the RapidIO subsystem.</p>
</div>
</section>
</section>
<section id="credits">
<h2>Credits<a class="headerlink" href="#credits" title="Permalink to this headline">¶</a></h2>
<p>The following people have contributed to the RapidIO subsystem directly
or indirectly:</p>
<ol class="arabic simple">
<li><p>Matt Porter<a class="reference external" href="mailto:mporter&#37;&#52;&#48;kernel&#46;crashing&#46;org">mporter<span>&#64;</span>kernel<span>&#46;</span>crashing<span>&#46;</span>org</a></p></li>
<li><p>Randy Vinson<a class="reference external" href="mailto:rvinson&#37;&#52;&#48;mvista&#46;com">rvinson<span>&#64;</span>mvista<span>&#46;</span>com</a></p></li>
<li><p>Dan Malek<a class="reference external" href="mailto:dan&#37;&#52;&#48;embeddedalley&#46;com">dan<span>&#64;</span>embeddedalley<span>&#46;</span>com</a></p></li>
</ol>
<p>The following people have contributed to this document:</p>
<ol class="arabic simple">
<li><p>Matt Porter<a class="reference external" href="mailto:mporter&#37;&#52;&#48;kernel&#46;crashing&#46;org">mporter<span>&#64;</span>kernel<span>&#46;</span>crashing<span>&#46;</span>org</a></p></li>
</ol>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">RapidIO Subsystem Guide</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#known-bugs-and-limitations">Known Bugs and Limitations</a><ul>
<li><a class="reference internal" href="#bugs">Bugs</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rapidio-driver-interface">RapidIO driver interface</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#internals">Internals</a><ul>
<li><a class="reference internal" href="#structures">Structures</a></li>
<li><a class="reference internal" href="#enumeration-and-discovery">Enumeration and Discovery</a></li>
<li><a class="reference internal" href="#driver-functionality">Driver functionality</a></li>
<li><a class="reference internal" href="#device-model-support">Device model support</a></li>
<li><a class="reference internal" href="#ppc32-support">PPC32 support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credits">Credits</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/admin-guide/rapidio.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/admin-guide/rapidio.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>