
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Kernel driver for omap HDQ/1-wire module &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Kernel driver w1-gpio" href="w1-gpio.html" />
    <link rel="prev" title="Kernel driver mxc_w1" href="mxc-w1.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="kernel-driver-for-omap-hdq-1-wire-module">
<h1>Kernel driver for omap HDQ/1-wire module<a class="headerlink" href="#kernel-driver-for-omap-hdq-1-wire-module" title="Permalink to this headline">¶</a></h1>
<section id="supported-chips">
<h2>Supported chips:<a class="headerlink" href="#supported-chips" title="Permalink to this headline">¶</a></h2>
<p>HDQ/1-wire controller on the TI OMAP 2430/3430 platforms.</p>
</section>
<section id="a-useful-link-about-hdq-basics">
<h2>A useful link about HDQ basics:<a class="headerlink" href="#a-useful-link-about-hdq-basics" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://focus.ti.com/lit/an/slua408a/slua408a.pdf">http://focus.ti.com/lit/an/slua408a/slua408a.pdf</a></p>
</section>
<section id="description">
<h2>Description:<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The HDQ/1-Wire module of TI OMAP2430/3430 platforms implement the hardware
protocol of the master functions of the Benchmark HDQ and the Dallas
Semiconductor 1-Wire protocols. These protocols use a single wire for
communication between the master (HDQ/1-Wire controller) and the slave
(HDQ/1-Wire external compliant device).</p>
<p>A typical application of the HDQ/1-Wire module is the communication with battery
monitor (gas gauge) integrated circuits.</p>
<p>The controller supports operation in both HDQ and 1-wire mode. The essential
difference between the HDQ and 1-wire mode is how the slave device responds to
initialization pulse.In HDQ mode, the firmware does not require the host to
create an initialization pulse to the slave.However, the slave can be reset by
using an initialization pulse (also referred to as a break pulse).The slave
does not respond with a presence pulse as it does in the 1-Wire protocol.</p>
</section>
<section id="remarks">
<h2>Remarks:<a class="headerlink" href="#remarks" title="Permalink to this headline">¶</a></h2>
<p>The driver (drivers/w1/masters/omap_hdq.c) supports the HDQ mode of the
controller. In this mode, as we can not read the ID which obeys the W1
spec(family:id:crc), a module parameter can be passed to the driver which will
be used to calculate the CRC and pass back an appropriate slave ID to the W1
core.</p>
<p>By default the master driver and the BQ slave i/f
driver(drivers/w1/slaves/w1_bq27000.c) sets the ID to 1.
Please note to load both the modules with a different ID if required, but note
that the ID used should be same for both master and slave driver loading.</p>
<p>e.g:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>insmod omap_hdq.ko W1_ID=2
insmod w1_bq27000.ko F_ID=2
</pre></div>
</div>
<p>The driver also supports 1-wire mode. In this mode, there is no need to
pass slave ID as parameter. The driver will auto-detect slaves connected
to the bus using SEARCH_ROM procedure. 1-wire mode can be selected by
setting “ti,mode” property to “1w” in DT (see
Documentation/devicetree/bindings/w1/omap-hdq.txt for more details).
By default driver is in HDQ mode.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Kernel driver for omap HDQ/1-wire module</a><ul>
<li><a class="reference internal" href="#supported-chips">Supported chips:</a></li>
<li><a class="reference internal" href="#a-useful-link-about-hdq-basics">A useful link about HDQ basics:</a></li>
<li><a class="reference internal" href="#description">Description:</a></li>
<li><a class="reference internal" href="#remarks">Remarks:</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/w1/masters/omap-hdq.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/w1/masters/omap-hdq.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>