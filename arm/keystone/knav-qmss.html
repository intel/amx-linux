
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Texas Instruments Keystone Navigator Queue Management SubSystem driver &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="TI OMAP" href="../omap/index.html" />
    <link rel="prev" title="TI Keystone Linux Overview" href="overview.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="texas-instruments-keystone-navigator-queue-management-subsystem-driver">
<h1>Texas Instruments Keystone Navigator Queue Management SubSystem driver<a class="headerlink" href="#texas-instruments-keystone-navigator-queue-management-subsystem-driver" title="Permalink to this headline">¶</a></h1>
<dl class="simple">
<dt>Driver source code path</dt><dd><p>drivers/soc/ti/knav_qmss.c
drivers/soc/ti/knav_qmss_acc.c</p>
</dd>
</dl>
<p>The QMSS (Queue Manager Sub System) found on Keystone SOCs is one of
the main hardware sub system which forms the backbone of the Keystone
multi-core Navigator. QMSS consist of queue managers, packed-data structure
processors(PDSP), linking RAM, descriptor pools and infrastructure
Packet DMA.
The Queue Manager is a hardware module that is responsible for accelerating
management of the packet queues. Packets are queued/de-queued by writing or
reading descriptor address to a particular memory mapped location. The PDSPs
perform QMSS related functions like accumulation, QoS, or event management.
Linking RAM registers are used to link the descriptors which are stored in
descriptor RAM. Descriptor RAM is configurable as internal or external memory.
The QMSS driver manages the PDSP setups, linking RAM regions,
queue pool management (allocation, push, pop and notify) and descriptor
pool management.</p>
<p>knav qmss driver provides a set of APIs to drivers to open/close qmss queues,
allocate descriptor pools, map the descriptors, push/pop to queues etc. For
details of the available APIs, please refers to include/linux/soc/ti/knav_qmss.h</p>
<p>DT documentation is available at
Documentation/devicetree/bindings/soc/ti/keystone-navigator-qmss.txt</p>
<section id="accumulator-qmss-queues-using-pdsp-firmware">
<h2>Accumulator QMSS queues using PDSP firmware<a class="headerlink" href="#accumulator-qmss-queues-using-pdsp-firmware" title="Permalink to this headline">¶</a></h2>
<p>The QMSS PDSP firmware support accumulator channel that can monitor a single
queue or multiple contiguous queues. drivers/soc/ti/knav_qmss_acc.c is the
driver that interface with the accumulator PDSP. This configures
accumulator channels defined in DTS (example in DT documentation) to monitor
1 or 32 queues per channel. More description on the firmware is available in
CPPI/QMSS Low Level Driver document (docs/CPPI_QMSS_LLD_SDS.pdf) at</p>
<blockquote>
<div><p>git://git.ti.com/keystone-rtos/qmss-lld.git</p>
</div></blockquote>
<p>k2_qmss_pdsp_acc48_k2_le_1_0_0_9.bin firmware supports upto 48 accumulator
channels. This firmware is available under ti-keystone folder of
firmware.git at</p>
<blockquote>
<div><p>git://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git</p>
</div></blockquote>
<p>To use copy the firmware image to lib/firmware folder of the initramfs or
ubifs file system and provide a sym link to k2_qmss_pdsp_acc48_k2_le_1_0_0_9.bin
in the file system and boot up the kernel. User would see</p>
<blockquote>
<div><p>“firmware file ks2_qmss_pdsp_acc48.bin downloaded for PDSP”</p>
</div></blockquote>
<p>in the boot up log if loading of firmware to PDSP is successful.</p>
<p>Use of accumulated queues requires the firmware image to be present in the
file system. The driver doesn’t acc queues to the supported queue range if
PDSP is not running in the SoC. The API call fails if there is a queue open
request to an acc queue and PDSP is not running. So make sure to copy firmware
to file system before using these queue types.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Texas Instruments Keystone Navigator Queue Management SubSystem driver</a><ul>
<li><a class="reference internal" href="#accumulator-qmss-queues-using-pdsp-firmware">Accumulator QMSS queues using PDSP firmware</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/arm/keystone/knav-qmss.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/arm/keystone/knav-qmss.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>