
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>The Intel Assabet (SA-1110 evaluation) board &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="CerfBoard/Cube" href="cerf.html" />
    <link rel="prev" title="Intel StrongARM 1100" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="the-intel-assabet-sa-1110-evaluation-board">
<h1>The Intel Assabet (SA-1110 evaluation) board<a class="headerlink" href="#the-intel-assabet-sa-1110-evaluation-board" title="Permalink to this headline">¶</a></h1>
<p>Please see:
<a class="reference external" href="http://developer.intel.com">http://developer.intel.com</a></p>
<p>Also some notes from John G Dorsey &lt;<a class="reference external" href="mailto:jd5q&#37;&#52;&#48;andrew&#46;cmu&#46;edu">jd5q<span>&#64;</span>andrew<span>&#46;</span>cmu<span>&#46;</span>edu</a>&gt;:
<a class="reference external" href="http://www.cs.cmu.edu/~wearable/software/assabet.html">http://www.cs.cmu.edu/~wearable/software/assabet.html</a></p>
<section id="building-the-kernel">
<h2>Building the kernel<a class="headerlink" href="#building-the-kernel" title="Permalink to this headline">¶</a></h2>
<p>To build the kernel with current defaults:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make assabet_defconfig
make oldconfig
make zImage
</pre></div>
</div>
<p>The resulting kernel image should be available in linux/arch/arm/boot/zImage.</p>
</section>
<section id="installing-a-bootloader">
<h2>Installing a bootloader<a class="headerlink" href="#installing-a-bootloader" title="Permalink to this headline">¶</a></h2>
<p>A couple of bootloaders able to boot Linux on Assabet are available:</p>
<p>BLOB (<a class="reference external" href="http://www.lartmaker.nl/lartware/blob/">http://www.lartmaker.nl/lartware/blob/</a>)</p>
<blockquote>
<div><p>BLOB is a bootloader used within the LART project.  Some contributed
patches were merged into BLOB to add support for Assabet.</p>
</div></blockquote>
<p>Compaq’s Bootldr + John Dorsey’s patch for Assabet support
(<a class="reference external" href="http://www.handhelds.org/Compaq/bootldr.html">http://www.handhelds.org/Compaq/bootldr.html</a>)
(<a class="reference external" href="http://www.wearablegroup.org/software/bootldr/">http://www.wearablegroup.org/software/bootldr/</a>)</p>
<blockquote>
<div><p>Bootldr is the bootloader developed by Compaq for the iPAQ Pocket PC.
John Dorsey has produced add-on patches to add support for Assabet and
the JFFS filesystem.</p>
</div></blockquote>
<p>RedBoot (<a class="reference external" href="http://sources.redhat.com/redboot/">http://sources.redhat.com/redboot/</a>)</p>
<blockquote>
<div><p>RedBoot is a bootloader developed by Red Hat based on the eCos RTOS
hardware abstraction layer.  It supports Assabet amongst many other
hardware platforms.</p>
</div></blockquote>
<p>RedBoot is currently the recommended choice since it’s the only one to have
networking support, and is the most actively maintained.</p>
<p>Brief examples on how to boot Linux with RedBoot are shown below.  But first
you need to have RedBoot installed in your flash memory.  A known to work
precompiled RedBoot binary is available from the following location:</p>
<ul class="simple">
<li><p><a class="reference external" href="ftp://ftp.netwinder.org/users/n/nico/">ftp://ftp.netwinder.org/users/n/nico/</a></p></li>
<li><p><a class="reference external" href="ftp://ftp.arm.linux.org.uk/pub/linux/arm/people/nico/">ftp://ftp.arm.linux.org.uk/pub/linux/arm/people/nico/</a></p></li>
<li><p><a class="reference external" href="ftp://ftp.handhelds.org/pub/linux/arm/sa-1100-patches/">ftp://ftp.handhelds.org/pub/linux/arm/sa-1100-patches/</a></p></li>
</ul>
<p>Look for redboot-assabet*.tgz.  Some installation infos are provided in
redboot-assabet*.txt.</p>
</section>
<section id="initial-redboot-configuration">
<h2>Initial RedBoot configuration<a class="headerlink" href="#initial-redboot-configuration" title="Permalink to this headline">¶</a></h2>
<p>The commands used here are explained in The RedBoot User’s Guide available
on-line at <a class="reference external" href="http://sources.redhat.com/ecos/docs.html">http://sources.redhat.com/ecos/docs.html</a>.
Please refer to it for explanations.</p>
<p>If you have a CF network card (my Assabet kit contained a CF+ LP-E from
Socket Communications Inc.), you should strongly consider using it for TFTP
file transfers.  You must insert it before RedBoot runs since it can’t detect
it dynamically.</p>
<p>To initialize the flash directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis init -f
</pre></div>
</div>
<p>To initialize the non-volatile settings, like whether you want to use BOOTP or
a static IP address, etc, use this command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fconfig -i
</pre></div>
</div>
</section>
<section id="writing-a-kernel-image-into-flash">
<h2>Writing a kernel image into flash<a class="headerlink" href="#writing-a-kernel-image-into-flash" title="Permalink to this headline">¶</a></h2>
<p>First, the kernel image must be loaded into RAM.  If you have the zImage file
available on a TFTP server:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load zImage -r -b 0x100000
</pre></div>
</div>
<p>If you rather want to use Y-Modem upload over the serial port:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load -m ymodem -r -b 0x100000
</pre></div>
</div>
<p>To write it to flash:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis create &quot;Linux kernel&quot; -b 0x100000 -l 0xc0000
</pre></div>
</div>
</section>
<section id="booting-the-kernel">
<h2>Booting the kernel<a class="headerlink" href="#booting-the-kernel" title="Permalink to this headline">¶</a></h2>
<p>The kernel still requires a filesystem to boot.  A ramdisk image can be loaded
as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load ramdisk_image.gz -r -b 0x800000
</pre></div>
</div>
<p>Again, Y-Modem upload can be used instead of TFTP by replacing the file name
by ‘-y ymodem’.</p>
<p>Now the kernel can be retrieved from flash like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis load &quot;Linux kernel&quot;
</pre></div>
</div>
<p>or loaded as described previously.  To boot the kernel:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>exec -b 0x100000 -l 0xc0000
</pre></div>
</div>
<p>The ramdisk image could be stored into flash as well, but there are better
solutions for on-flash filesystems as mentioned below.</p>
</section>
<section id="using-jffs2">
<h2>Using JFFS2<a class="headerlink" href="#using-jffs2" title="Permalink to this headline">¶</a></h2>
<p>Using JFFS2 (the Second Journalling Flash File System) is probably the most
convenient way to store a writable filesystem into flash.  JFFS2 is used in
conjunction with the MTD layer which is responsible for low-level flash
management.  More information on the Linux MTD can be found on-line at:
<a class="reference external" href="http://www.linux-mtd.infradead.org/">http://www.linux-mtd.infradead.org/</a>.  A JFFS howto with some infos about
creating JFFS/JFFS2 images is available from the same site.</p>
<p>For instance, a sample JFFS2 image can be retrieved from the same FTP sites
mentioned below for the precompiled RedBoot image.</p>
<p>To load this file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>load sample_img.jffs2 -r -b 0x100000
</pre></div>
</div>
<p>The result should look like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RedBoot&gt; load sample_img.jffs2 -r -b 0x100000
Raw file loaded 0x00100000-0x00377424
</pre></div>
</div>
<p>Now we must know the size of the unallocated flash:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis free
</pre></div>
</div>
<p>Result:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RedBoot&gt; fis free
  0x500E0000 .. 0x503C0000
</pre></div>
</div>
<p>The values above may be different depending on the size of the filesystem and
the type of flash.  See their usage below as an example and take care of
substituting yours appropriately.</p>
<p>We must determine some values:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>size of unallocated flash:      0x503c0000 - 0x500e0000 = 0x2e0000
size of the filesystem image:   0x00377424 - 0x00100000 = 0x277424
</pre></div>
</div>
<p>We want to fit the filesystem image of course, but we also want to give it all
the remaining flash space as well.  To write it:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis unlock -f 0x500E0000 -l 0x2e0000
fis erase -f 0x500E0000 -l 0x2e0000
fis write -b 0x100000 -l 0x277424 -f 0x500E0000
fis create &quot;JFFS2&quot; -n -f 0x500E0000 -l 0x2e0000
</pre></div>
</div>
<p>Now the filesystem is associated to a MTD “partition” once Linux has discovered
what they are in the boot process.  From Redboot, the ‘fis list’ command
displays them:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RedBoot&gt; fis list
Name              FLASH addr  Mem addr    Length      Entry point
RedBoot           0x50000000  0x50000000  0x00020000  0x00000000
RedBoot config    0x503C0000  0x503C0000  0x00020000  0x00000000
FIS directory     0x503E0000  0x503E0000  0x00020000  0x00000000
Linux kernel      0x50020000  0x00100000  0x000C0000  0x00000000
JFFS2             0x500E0000  0x500E0000  0x002E0000  0x00000000
</pre></div>
</div>
<p>However Linux should display something like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SA1100 flash: probing 32-bit flash bus
SA1100 flash: Found 2 x16 devices at 0x0 in 32-bit mode
Using RedBoot partition definition
Creating 5 MTD partitions on &quot;SA1100 flash&quot;:
0x00000000-0x00020000 : &quot;RedBoot&quot;
0x00020000-0x000e0000 : &quot;Linux kernel&quot;
0x000e0000-0x003c0000 : &quot;JFFS2&quot;
0x003c0000-0x003e0000 : &quot;RedBoot config&quot;
0x003e0000-0x00400000 : &quot;FIS directory&quot;
</pre></div>
</div>
<p>What’s important here is the position of the partition we are interested in,
which is the third one.  Within Linux, this correspond to /dev/mtdblock2.
Therefore to boot Linux with the kernel and its root filesystem in flash, we
need this RedBoot command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fis load &quot;Linux kernel&quot;
exec -b 0x100000 -l 0xc0000 -c &quot;root=/dev/mtdblock2&quot;
</pre></div>
</div>
<p>Of course other filesystems than JFFS might be used, like cramfs for example.
You might want to boot with a root filesystem over NFS, etc.  It is also
possible, and sometimes more convenient, to flash a filesystem directly from
within Linux while booted from a ramdisk or NFS.  The Linux MTD repository has
many tools to deal with flash memory as well, to erase it for example.  JFFS2
can then be mounted directly on a freshly erased partition and files can be
copied over directly.  Etc…</p>
</section>
<section id="redboot-scripting">
<h2>RedBoot scripting<a class="headerlink" href="#redboot-scripting" title="Permalink to this headline">¶</a></h2>
<p>All the commands above aren’t so useful if they have to be typed in every
time the Assabet is rebooted.  Therefore it’s possible to automate the boot
process using RedBoot’s scripting capability.</p>
<p>For example, I use this to boot Linux with both the kernel and the ramdisk
images retrieved from a TFTP server on the network:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RedBoot&gt; fconfig
Run script at boot: false true
Boot script:
Enter script, terminate with empty line
&gt;&gt; load zImage -r -b 0x100000
&gt;&gt; load ramdisk_ks.gz -r -b 0x800000
&gt;&gt; exec -b 0x100000 -l 0xc0000
&gt;&gt;
Boot script timeout (1000ms resolution): 3
Use BOOTP for network configuration: true
GDB connection port: 9000
Network debug at boot time: false
Update RedBoot non-volatile configuration - are you sure (y/n)? y
</pre></div>
</div>
<p>Then, rebooting the Assabet is just a matter of waiting for the login prompt.</p>
<p>Nicolas Pitre
<a class="reference external" href="mailto:nico&#37;&#52;&#48;fluxnic&#46;net">nico<span>&#64;</span>fluxnic<span>&#46;</span>net</a></p>
<p>June 12, 2001</p>
</section>
<section id="status-of-peripherals-in-rmk-tree-updated-14-10-2001">
<h2>Status of peripherals in -rmk tree (updated 14/10/2001)<a class="headerlink" href="#status-of-peripherals-in-rmk-tree-updated-14-10-2001" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>Assabet:</dt><dd><dl>
<dt>Serial ports:</dt><dd><dl class="simple">
<dt>Radio:                TX, RX, CTS, DSR, DCD, RI</dt><dd><ul class="simple">
<li><p>PM:                Not tested.</p></li>
<li><p>COM:               TX, RX, CTS, DSR, DCD, RTS, DTR, PM</p></li>
<li><p>PM:                Not tested.</p></li>
<li><p>I2C:               Implemented, not fully tested.</p></li>
<li><p>L3:                Fully tested, pass.</p></li>
<li><p>PM:                Not tested.</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Video:</dt><dd><ul class="simple">
<li><p>LCD:                Fully tested.  PM</p></li>
</ul>
<blockquote>
<div><p>(LCD doesn’t like being blanked with neponset connected)</p>
</div></blockquote>
<ul class="simple">
<li><p>Video out:          Not fully</p></li>
</ul>
</dd>
<dt>Audio:</dt><dd><p>UDA1341:
-  Playback:          Fully tested, pass.
-  Record:            Implemented, not tested.
-  PM:                        Not tested.</p>
<p>UCB1200:
-  Audio play:        Implemented, not heavily tested.
-  Audio rec:         Implemented, not heavily tested.
-  Telco audio play:  Implemented, not heavily tested.
-  Telco audio rec:   Implemented, not heavily tested.
-  POTS control:      No
-  Touchscreen:       Yes
-  PM:                Not tested.</p>
</dd>
<dt>Other:</dt><dd><ul class="simple">
<li><p>PCMCIA:</p></li>
<li><p>LPE:                Fully tested, pass.</p></li>
<li><p>USB:                No</p></li>
<li><p>IRDA:</p></li>
<li><p>SIR:                Fully tested, pass.</p></li>
<li><p>FIR:                Fully tested, pass.</p></li>
<li><p>PM:                 Not tested.</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Neponset:</dt><dd><dl class="simple">
<dt>Serial ports:</dt><dd><ul class="simple">
<li><p>COM1,2:             TX, RX, CTS, DSR, DCD, RTS, DTR</p></li>
<li><p>PM:                 Not tested.</p></li>
<li><p>USB:                Implemented, not heavily tested.</p></li>
<li><p>PCMCIA:             Implemented, not heavily tested.</p></li>
<li><p>CF:                 Implemented, not heavily tested.</p></li>
<li><p>PM:                 Not tested.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
<p>More stuff can be found in the -np (Nicolas Pitre’s) tree.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The Intel Assabet (SA-1110 evaluation) board</a><ul>
<li><a class="reference internal" href="#building-the-kernel">Building the kernel</a></li>
<li><a class="reference internal" href="#installing-a-bootloader">Installing a bootloader</a></li>
<li><a class="reference internal" href="#initial-redboot-configuration">Initial RedBoot configuration</a></li>
<li><a class="reference internal" href="#writing-a-kernel-image-into-flash">Writing a kernel image into flash</a></li>
<li><a class="reference internal" href="#booting-the-kernel">Booting the kernel</a></li>
<li><a class="reference internal" href="#using-jffs2">Using JFFS2</a></li>
<li><a class="reference internal" href="#redboot-scripting">RedBoot scripting</a></li>
<li><a class="reference internal" href="#status-of-peripherals-in-rmk-tree-updated-14-10-2001">Status of peripherals in -rmk tree (updated 14/10/2001)</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/arm/sa1100/assabet.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/arm/sa1100/assabet.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>