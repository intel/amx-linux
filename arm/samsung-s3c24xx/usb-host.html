
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>S3C24XX USB Host support &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="S3C2412 ARM Linux Overview" href="s3c2412.html" />
    <link rel="prev" title="S3C24XX Suspend Support" href="suspend.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="s3c24xx-usb-host-support">
<h1>S3C24XX USB Host support<a class="headerlink" href="#s3c24xx-usb-host-support" title="Permalink to this headline">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This document details the S3C2410/S3C2440 in-built OHCI USB host support.</p>
</div></blockquote>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Enable at least the following kernel options:</p>
<p>menuconfig:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Device Drivers  ---&gt;
  USB support  ---&gt;
    &lt;*&gt; Support for Host-side USB
    &lt;*&gt;   OHCI HCD support
</pre></div>
</div>
<p>.config:</p>
<blockquote>
<div><ul class="simple">
<li><p>CONFIG_USB</p></li>
<li><p>CONFIG_USB_OHCI_HCD</p></li>
</ul>
</div></blockquote>
<p>Once these options are configured, the standard set of USB device
drivers can be configured and used.</p>
</div></blockquote>
</section>
<section id="board-support">
<h2>Board Support<a class="headerlink" href="#board-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The driver attaches to a platform device, which will need to be
added by the board specific support file in arch/arm/mach-s3c,
such as mach-bast.c or mach-smdk2410.c</p>
<p>The platform device’s platform_data field is only needed if the
board implements extra power control or over-current monitoring.</p>
<p>The OHCI driver does not ensure the state of the S3C2410’s MISCCTRL
register, so if both ports are to be used for the host, then it is
the board support file’s responsibility to ensure that the second
port is configured to be connected to the OHCI core.</p>
</div></blockquote>
</section>
<section id="platform-data">
<h2>Platform Data<a class="headerlink" href="#platform-data" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>See include/linux/platform_data/usb-ohci-s3c2410.h for the
descriptions of the platform device data. An implementation
can be found in arch/arm/mach-s3c/simtec-usb.c .</p>
<p>The <cite>struct s3c2410_hcd_info</cite> contains a pair of functions
that get called to enable over-current detection, and to
control the port power status.</p>
<p>The ports are numbered 0 and 1.</p>
<dl>
<dt>power_control:</dt><dd><p>Called to enable or disable the power on the port.</p>
</dd>
<dt>enable_oc:</dt><dd><p>Called to enable or disable the over-current monitoring.
This should claim or release the resources being used to
check the power condition on the port, such as an IRQ.</p>
</dd>
<dt>report_oc:</dt><dd><p>The OHCI driver fills this field in for the over-current code
to call when there is a change to the over-current state on
an port. The ports argument is a bitmask of 1 bit per port,
with bit X being 1 for an over-current on port X.</p>
<p>The function s3c2410_usb_report_oc() has been provided to
ensure this is called correctly.</p>
</dd>
<dt>port[x]:</dt><dd><p>This is struct describes each port, 0 or 1. The platform driver
should set the flags field of each port to S3C_HCDFLG_USED if
the port is enabled.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="document-author">
<h2>Document Author<a class="headerlink" href="#document-author" title="Permalink to this headline">¶</a></h2>
<p>Ben Dooks, Copyright 2005 Simtec Electronics</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">S3C24XX USB Host support</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#board-support">Board Support</a></li>
<li><a class="reference internal" href="#platform-data">Platform Data</a></li>
<li><a class="reference internal" href="#document-author">Document Author</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/arm/samsung-s3c24xx/usb-host.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/arm/samsung-s3c24xx/usb-host.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>