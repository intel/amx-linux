
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Deterministic Automata &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Deterministic Automata Monitor Synthesis" href="da_monitor_synthesis.html" />
    <link rel="prev" title="Runtime Verification" href="runtime-verification.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="deterministic-automata">
<h1>Deterministic Automata<a class="headerlink" href="#deterministic-automata" title="Permalink to this headline">¶</a></h1>
<p>Formally, a deterministic automaton, denoted by G, is defined as a quintuple:</p>
<blockquote>
<div><p><em>G</em> = { <em>X</em>, <em>E</em>, <em>f</em>, x<sub>0</sub>, X<sub>m</sub> }</p>
</div></blockquote>
<p>where:</p>
<ul class="simple">
<li><p><em>X</em> is the set of states;</p></li>
<li><p><em>E</em> is the finite set of events;</p></li>
<li><p>x<sub>0</sub> is the initial state;</p></li>
<li><p>X<sub>m</sub> (subset of <em>X</em>) is the set of marked (or final) states.</p></li>
<li><p><em>f</em> : <em>X</em> x <em>E</em> -&gt; <em>X</em> $ is the transition function. It defines the state
transition in the occurrence of an event from <em>E</em> in the state <em>X</em>. In the
special case of deterministic automata, the occurrence of the event in <em>E</em>
in a state in <em>X</em> has a deterministic next state from <em>X</em>.</p></li>
</ul>
<p>For example, a given automaton named ‘wip’ (wakeup in preemptive) can
be defined as:</p>
<ul class="simple">
<li><p><em>X</em> = { <code class="docutils literal notranslate"><span class="pre">preemptive</span></code>, <code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code>}</p></li>
<li><p><em>E</em> = { <code class="docutils literal notranslate"><span class="pre">preempt_enable</span></code>, <code class="docutils literal notranslate"><span class="pre">preempt_disable</span></code>, <code class="docutils literal notranslate"><span class="pre">sched_waking</span></code>}</p></li>
<li><p>x<sub>0</sub> = <code class="docutils literal notranslate"><span class="pre">preemptive</span></code></p></li>
<li><p>X<sub>m</sub> = {<code class="docutils literal notranslate"><span class="pre">preemptive</span></code>}</p></li>
<li><dl class="simple">
<dt><em>f</em> =</dt><dd><ul>
<li><p><em>f</em>(<code class="docutils literal notranslate"><span class="pre">preemptive</span></code>, <code class="docutils literal notranslate"><span class="pre">preempt_disable</span></code>) = <code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code></p></li>
<li><p><em>f</em>(<code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code>, <code class="docutils literal notranslate"><span class="pre">sched_waking</span></code>) = <code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code></p></li>
<li><p><em>f</em>(<code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code>, <code class="docutils literal notranslate"><span class="pre">preempt_enable</span></code>) = <code class="docutils literal notranslate"><span class="pre">preemptive</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>One of the benefits of this formal definition is that it can be presented
in multiple formats. For example, using a <em>graphical representation</em>, using
vertices (nodes) and edges, which is very intuitive for <em>operating system</em>
practitioners, without any loss.</p>
<p>The previous ‘wip’ automaton can also be represented as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                   preempt_enable
      +---------------------------------+
      v                                 |
    #============#  preempt_disable   +------------------+
--&gt; H preemptive H -----------------&gt; |  non_preemptive  |
    #============#                    +------------------+
                                        ^              |
                                        | sched_waking |
                                        +--------------+
</pre></div>
</div>
<section id="deterministic-automaton-in-c">
<h2>Deterministic Automaton in C<a class="headerlink" href="#deterministic-automaton-in-c" title="Permalink to this headline">¶</a></h2>
<p>In the paper “Efficient formal verification for the Linux kernel”,
the authors present a simple way to represent an automaton in C that can
be used as regular code in the Linux kernel.</p>
<p>For example, the ‘wip’ automata can be presented as (augmented with comments):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/* enum representation of X (set of states) to be used as index */
enum states {
      preemptive = 0,
      non_preemptive,
      state_max
};

#define INVALID_STATE state_max

/* enum representation of E (set of events) to be used as index */
enum events {
      preempt_disable = 0,
      preempt_enable,
      sched_waking,
      event_max
};

struct automaton {
      char *state_names[state_max];                   // X: the set of states
      char *event_names[event_max];                   // E: the finite set of events
      unsigned char function[state_max][event_max];   // f: transition function
      unsigned char initial_state;                    // x_0: the initial state
      bool final_states[state_max];                   // X_m: the set of marked states
};

struct automaton aut = {
      .state_names = {
              &quot;preemptive&quot;,
              &quot;non_preemptive&quot;
      },
      .event_names = {
              &quot;preempt_disable&quot;,
              &quot;preempt_enable&quot;,
              &quot;sched_waking&quot;
      },
      .function = {
              { non_preemptive,  INVALID_STATE,  INVALID_STATE },
              {  INVALID_STATE,     preemptive, non_preemptive },
      },
      .initial_state = preemptive,
      .final_states = { 1, 0 },
};
</pre></div>
</div>
<p>The <em>transition function</em> is represented as a matrix of states (lines) and
events (columns), and so the function <em>f</em> : <em>X</em> x <em>E</em> -&gt; <em>X</em> can be solved
in O(1). For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>next_state = automaton_wip.function[curr_state][event];
</pre></div>
</div>
</section>
<section id="graphviz-dot-format">
<h2>Graphviz .dot format<a class="headerlink" href="#graphviz-dot-format" title="Permalink to this headline">¶</a></h2>
<p>The Graphviz open-source tool can produce the graphical representation
of an automaton using the (textual) DOT language as the source code.
The DOT format is widely used and can be converted to many other formats.</p>
<p>For example, this is the ‘wip’ model in DOT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>digraph state_automaton {
      {node [shape = circle] &quot;non_preemptive&quot;};
      {node [shape = plaintext, style=invis, label=&quot;&quot;] &quot;__init_preemptive&quot;};
      {node [shape = doublecircle] &quot;preemptive&quot;};
      {node [shape = circle] &quot;preemptive&quot;};
      &quot;__init_preemptive&quot; -&gt; &quot;preemptive&quot;;
      &quot;non_preemptive&quot; [label = &quot;non_preemptive&quot;];
      &quot;non_preemptive&quot; -&gt; &quot;non_preemptive&quot; [ label = &quot;sched_waking&quot; ];
      &quot;non_preemptive&quot; -&gt; &quot;preemptive&quot; [ label = &quot;preempt_enable&quot; ];
      &quot;preemptive&quot; [label = &quot;preemptive&quot;];
      &quot;preemptive&quot; -&gt; &quot;non_preemptive&quot; [ label = &quot;preempt_disable&quot; ];
      { rank = min ;
              &quot;__init_preemptive&quot;;
              &quot;preemptive&quot;;
      }
}
</pre></div>
</div>
<p>This DOT format can be transformed into a bitmap or vectorial image
using the dot utility, or into an ASCII art using graph-easy. For
instance:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ dot -Tsvg -o wip.svg wip.dot
$ graph-easy wip.dot &gt; wip.txt
</pre></div>
</div>
</section>
<section id="dot2c">
<h2>dot2c<a class="headerlink" href="#dot2c" title="Permalink to this headline">¶</a></h2>
<p>dot2c is a utility that can parse a .dot file containing an automaton as
in the example above and automatically convert it to the C representation
presented in [3].</p>
<p>For example, having the previous ‘wip’ model into a file named ‘wip.dot’,
the following command will transform the .dot file into the C
representation (previously shown) in the ‘wip.h’ file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ dot2c wip.dot &gt; wip.h
</pre></div>
</div>
<p>The ‘wip.h’ content is the code sample in section ‘Deterministic Automaton
in C’.</p>
</section>
<section id="remarks">
<h2>Remarks<a class="headerlink" href="#remarks" title="Permalink to this headline">¶</a></h2>
<p>The automata formalism allows modeling discrete event systems (DES) in
multiple formats, suitable for different applications/users.</p>
<p>For example, the formal description using set theory is better suitable
for automata operations, while the graphical format for human interpretation;
and computer languages for machine execution.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p>Many textbooks cover automata formalism. For a brief introduction see:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>O&#39;Regan, Gerard. Concise guide to software engineering. Springer,
Cham, 2017.
</pre></div>
</div>
<p>For a detailed description, including operations, and application on Discrete
Event Systems (DES), see:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Cassandras, Christos G., and Stephane Lafortune, eds. Introduction to discrete
event systems. Boston, MA: Springer US, 2008.
</pre></div>
</div>
<p>For the C representation in kernel, see:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>De Oliveira, Daniel Bristot; Cucinotta, Tommaso; De Oliveira, Romulo
Silva. Efficient formal verification for the Linux kernel. In:
International Conference on Software Engineering and Formal Methods.
Springer, Cham, 2019. p. 315-332.
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Deterministic Automata</a><ul>
<li><a class="reference internal" href="#deterministic-automaton-in-c">Deterministic Automaton in C</a></li>
<li><a class="reference internal" href="#graphviz-dot-format">Graphviz .dot format</a></li>
<li><a class="reference internal" href="#dot2c">dot2c</a></li>
<li><a class="reference internal" href="#remarks">Remarks</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/trace/rv/deterministic_automata.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/trace/rv/deterministic_automata.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>