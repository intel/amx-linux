
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Kernel driver w83627ehf &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Kernel driver w83627hf" href="w83627hf.html" />
    <link rel="prev" title="Kernel driver vt1211" href="vt1211.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="kernel-driver-w83627ehf">
<h1>Kernel driver w83627ehf<a class="headerlink" href="#kernel-driver-w83627ehf" title="Permalink to this headline">¶</a></h1>
<p>Supported chips:</p>
<blockquote>
<div><ul>
<li><p>Winbond W83627EHF/EHG (ISA access ONLY)</p>
<p>Prefix: ‘w83627ehf’</p>
<p>Addresses scanned: ISA address retrieved from Super I/O registers</p>
<p>Datasheet: not available</p>
</li>
<li><p>Winbond W83627DHG</p>
<p>Prefix: ‘w83627dhg’</p>
<p>Addresses scanned: ISA address retrieved from Super I/O registers</p>
<p>Datasheet: not available</p>
</li>
<li><p>Winbond W83627DHG-P</p>
<p>Prefix: ‘w83627dhg’</p>
<p>Addresses scanned: ISA address retrieved from Super I/O registers</p>
<p>Datasheet: not available</p>
</li>
<li><p>Winbond W83627UHG</p>
<p>Prefix: ‘w83627uhg’</p>
<p>Addresses scanned: ISA address retrieved from Super I/O registers</p>
<p>Datasheet: available from www.nuvoton.com</p>
</li>
<li><p>Winbond W83667HG</p>
<p>Prefix: ‘w83667hg’</p>
<p>Addresses scanned: ISA address retrieved from Super I/O registers</p>
<p>Datasheet: not available</p>
</li>
<li><p>Winbond W83667HG-B</p>
<p>Prefix: ‘w83667hg’</p>
<p>Addresses scanned: ISA address retrieved from Super I/O registers</p>
<p>Datasheet: Available from Nuvoton upon request</p>
</li>
<li><p>Nuvoton NCT6775F/W83667HG-I</p>
<p>Prefix: ‘nct6775’</p>
<p>Addresses scanned: ISA address retrieved from Super I/O registers</p>
<p>Datasheet: Available from Nuvoton upon request</p>
</li>
<li><p>Nuvoton NCT6776F</p>
<p>Prefix: ‘nct6776’</p>
<p>Addresses scanned: ISA address retrieved from Super I/O registers</p>
<p>Datasheet: Available from Nuvoton upon request</p>
</li>
</ul>
</div></blockquote>
<p>Authors:</p>
<blockquote>
<div><ul class="simple">
<li><p>Jean Delvare &lt;<a class="reference external" href="mailto:jdelvare&#37;&#52;&#48;suse&#46;de">jdelvare<span>&#64;</span>suse<span>&#46;</span>de</a>&gt;</p></li>
<li><p>Yuan Mu (Winbond)</p></li>
<li><p>Rudolf Marek &lt;<a class="reference external" href="mailto:r&#46;marek&#37;&#52;&#48;assembler&#46;cz">r<span>&#46;</span>marek<span>&#64;</span>assembler<span>&#46;</span>cz</a>&gt;</p></li>
<li><p>David Hubbard &lt;<a class="reference external" href="mailto:david&#46;c&#46;hubbard&#37;&#52;&#48;gmail&#46;com">david<span>&#46;</span>c<span>&#46;</span>hubbard<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</p></li>
<li><p>Gong Jun &lt;<a class="reference external" href="mailto:JGong&#37;&#52;&#48;nuvoton&#46;com">JGong<span>&#64;</span>nuvoton<span>&#46;</span>com</a>&gt;</p></li>
</ul>
</div></blockquote>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This driver implements support for the Winbond W83627EHF, W83627EHG,
W83627DHG, W83627DHG-P, W83627UHG, W83667HG, W83667HG-B, W83667HG-I
(NCT6775F), and NCT6776F super I/O chips. We will refer to them collectively
as Winbond chips.</p>
<p>The chips implement 3 to 4 temperature sensors (9 for NCT6775F and NCT6776F),
2 to 5 fan rotation speed sensors, 8 to 10 analog voltage sensors, one VID
(except for 627UHG), alarms with beep warnings (control unimplemented),
and some automatic fan regulation strategies (plus manual fan control mode).</p>
<p>The temperature sensor sources on W82677HG-B, NCT6775F, and NCT6776F are
configurable. temp4 and higher attributes are only reported if its temperature
source differs from the temperature sources of the already reported temperature
sensors. The configured source for each of the temperature sensors is provided
in tempX_label.</p>
<p>Temperatures are measured in degrees Celsius and measurement resolution is 1
degC for temp1 and 0.5 degC for temp2 and temp3. For temp4 and higher,
resolution is 1 degC for W83667HG-B and 0.0 degC for NCT6775F and NCT6776F.
An alarm is triggered when the temperature gets higher than high limit;
it stays on until the temperature falls below the hysteresis value.
Alarms are only supported for temp1, temp2, and temp3.</p>
<p>Fan rotation speeds are reported in RPM (rotations per minute). An alarm is
triggered if the rotation speed has dropped below a programmable limit. Fan
readings can be divided by a programmable divider (1, 2, 4, 8, 16, 32, 64 or
128) to give the readings more range or accuracy. The driver sets the most
suitable fan divisor itself. Some fans might not be present because they
share pins with other functions.</p>
<p>Voltage sensors (also known as IN sensors) report their values in millivolts.
An alarm is triggered if the voltage has crossed a programmable minimum
or maximum limit.</p>
<p>The driver supports automatic fan control mode known as Thermal Cruise.
In this mode, the chip attempts to keep the measured temperature in a
predefined temperature range. If the temperature goes out of range, fan
is driven slower/faster to reach the predefined range again.</p>
<p>The mode works for fan1-fan4. Mapping of temperatures to pwm outputs is as
follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>temp1 -&gt; pwm1
temp2 -&gt; pwm2
temp3 -&gt; pwm3 (not on 627UHG)
prog  -&gt; pwm4 (not on 667HG and 667HG-B; the programmable setting is not
               supported by the driver)
</pre></div>
</div>
</section>
<section id="sys-files">
<h2>/sys files<a class="headerlink" href="#sys-files" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>name</dt><dd><p>this is a standard hwmon device entry, it contains the name of
the device (see the prefix in the list of supported devices at
the top of this file)</p>
</dd>
<dt>pwm[1-4]</dt><dd><p>this file stores PWM duty cycle or DC value (fan speed) in range:</p>
<blockquote>
<div><p>0 (stop) to 255 (full)</p>
</div></blockquote>
</dd>
<dt>pwm[1-4]_enable</dt><dd><p>this file controls mode of fan/temperature control:</p>
<ul class="simple">
<li><p>1 Manual mode, write to pwm file any value 0-255 (full speed)</p></li>
<li><p>2 “Thermal Cruise” mode</p></li>
<li><p>3 “Fan Speed Cruise” mode</p></li>
<li><p>4 “Smart Fan III” mode</p></li>
<li><p>5 “Smart Fan IV” mode</p></li>
</ul>
<p>SmartFan III mode is not supported on NCT6776F.</p>
<p>SmartFan IV mode is configurable only if it was configured at system
startup, and is only supported for W83677HG-B, NCT6775F, and NCT6776F.
SmartFan IV operational parameters can not be configured at this time,
and the various pwm attributes are not used in SmartFan IV mode.
The attributes can be written to, which is useful if you plan to
configure the system for a different pwm mode. However, the information
returned when reading pwm attributes is unrelated to SmartFan IV
operation.</p>
</dd>
<dt>pwm[1-4]_mode</dt><dd><p>controls if output is PWM or DC level</p>
<ul class="simple">
<li><p>0 DC output (0 - 12v)</p></li>
<li><p>1 PWM output</p></li>
</ul>
</dd>
</dl>
</section>
<section id="thermal-cruise-mode">
<h2>Thermal Cruise mode<a class="headerlink" href="#thermal-cruise-mode" title="Permalink to this headline">¶</a></h2>
<p>If the temperature is in the range defined by:</p>
<dl class="simple">
<dt>pwm[1-4]_target</dt><dd><p>set target temperature, unit millidegree Celsius
(range 0 - 127000)</p>
</dd>
<dt>pwm[1-4]_tolerance</dt><dd><p>tolerance, unit millidegree Celsius (range 0 - 15000)</p>
</dd>
</dl>
<p>there are no changes to fan speed. Once the temperature leaves the interval,
fan speed increases (temp is higher) or decreases if lower than desired.
There are defined steps and times, but not exported by the driver yet.</p>
<dl class="simple">
<dt>pwm[1-4]_min_output</dt><dd><p>minimum fan speed (range 1 - 255), when the temperature
is below defined range.</p>
</dd>
<dt>pwm[1-4]_stop_time</dt><dd><p>how many milliseconds [ms] must elapse to switch
corresponding fan off. (when the temperature was below
defined range).</p>
</dd>
<dt>pwm[1-4]_start_output</dt><dd><p>minimum fan speed (range 1 - 255) when spinning up</p>
</dd>
<dt>pwm[1-4]_step_output</dt><dd><p>rate of fan speed change (1 - 255)</p>
</dd>
<dt>pwm[1-4]_stop_output</dt><dd><p>minimum fan speed (range 1 - 255) when spinning down</p>
</dd>
<dt>pwm[1-4]_max_output</dt><dd><p>maximum fan speed (range 1 - 255), when the temperature
is above defined range.</p>
</dd>
<dt>Note: last six functions are influenced by other control bits, not yet exported</dt><dd><p>by the driver, so a change might not have any effect.</p>
</dd>
</dl>
</section>
<section id="implementation-details">
<h2>Implementation Details<a class="headerlink" href="#implementation-details" title="Permalink to this headline">¶</a></h2>
<p>Future driver development should bear in mind that the following registers have
different functions on the 627EHF and the 627DHG. Some registers also have
different power-on default values, but BIOS should already be loading
appropriate defaults. Note that bank selection must be performed as is currently
done in the driver for all register addresses.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Register(s)</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x49</p></td>
<td><p>only on DHG, selects temperature source for AUX fan,
CPU fan0</p></td>
</tr>
<tr class="row-odd"><td><p>0x4a</p></td>
<td><p>not completely documented for the EHF and the DHG
documentation assigns different behavior to bits 7
and 6, including extending the temperature input
selection to SmartFan I, not just SmartFan III.
Testing on the EHF will reveal whether they are
compatible or not.</p></td>
</tr>
<tr class="row-even"><td><p>0x58</p></td>
<td><p>Chip ID: 0xa1=EHF 0xc1=DHG</p></td>
</tr>
<tr class="row-odd"><td><p>0x5e</p></td>
<td><p>only on DHG, has bits to enable “current mode”
temperature detection and critical temperature
protection</p></td>
</tr>
<tr class="row-even"><td><p>0x45b</p></td>
<td><p>only on EHF, bit 3, vin4 alarm (EHF supports 10
inputs, only 9 on DHG)</p></td>
</tr>
<tr class="row-odd"><td><p>0x552</p></td>
<td><p>only on EHF, vin4</p></td>
</tr>
<tr class="row-even"><td><p>0x558</p></td>
<td><p>only on EHF, vin4 high limit</p></td>
</tr>
<tr class="row-odd"><td><p>0x559</p></td>
<td><p>only on EHF, vin4 low limit</p></td>
</tr>
<tr class="row-even"><td><p>0x6b</p></td>
<td><p>only on DHG, SYS fan critical temperature</p></td>
</tr>
<tr class="row-odd"><td><p>0x6c</p></td>
<td><p>only on DHG, CPU fan0 critical temperature</p></td>
</tr>
<tr class="row-even"><td><p>0x6d</p></td>
<td><p>only on DHG, AUX fan critical temperature</p></td>
</tr>
<tr class="row-odd"><td><p>0x6e</p></td>
<td><p>only on DHG, CPU fan1 critical temperature</p></td>
</tr>
<tr class="row-even"><td><p>0x50-0x55 and 0x650-0x657</p></td>
<td><p>marked as:</p>
<blockquote>
<div><ul class="simple">
<li><p>“Test Register” for the EHF</p></li>
<li><p>“Reserved Register” for the DHG</p></li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>The DHG also supports PECI, where the DHG queries Intel CPU temperatures, and
the ICH8 southbridge gets that data via PECI from the DHG, so that the
southbridge drives the fans. And the DHG supports SST, a one-wire serial bus.</p>
<p>The DHG-P has an additional automatic fan speed control mode named Smart Fan
(TM) III+. This mode is not yet supported by the driver.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Kernel driver w83627ehf</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#sys-files">/sys files</a></li>
<li><a class="reference internal" href="#thermal-cruise-mode">Thermal Cruise mode</a></li>
<li><a class="reference internal" href="#implementation-details">Implementation Details</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/hwmon/w83627ehf.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/hwmon/w83627ehf.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>