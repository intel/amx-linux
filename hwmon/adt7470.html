
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Kernel driver adt7470 &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Kernel driver adt7475" href="adt7475.html" />
    <link rel="prev" title="Kernel driver adt7462" href="adt7462.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="kernel-driver-adt7470">
<h1>Kernel driver adt7470<a class="headerlink" href="#kernel-driver-adt7470" title="Permalink to this headline">¶</a></h1>
<p>Supported chips:</p>
<blockquote>
<div><ul>
<li><p>Analog Devices ADT7470</p>
<p>Prefix: ‘adt7470’</p>
<p>Addresses scanned: I2C 0x2C, 0x2E, 0x2F</p>
<p>Datasheet: Publicly available at the Analog Devices website</p>
</li>
</ul>
</div></blockquote>
<p>Author: Darrick J. Wong</p>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This driver implements support for the Analog Devices ADT7470 chip.  There may
be other chips that implement this interface.</p>
<p>The ADT7470 uses the 2-wire interface compatible with the SMBus 2.0
specification. Using an analog to digital converter it measures up to ten (10)
external temperatures. It has four (4) 16-bit counters for measuring fan speed.
There are four (4) PWM outputs that can be used to control fan speed.</p>
<p>A sophisticated control system for the PWM outputs is designed into the ADT7470
that allows fan speed to be adjusted automatically based on any of the ten
temperature sensors. Each PWM output is individually adjustable and
programmable. Once configured, the ADT7470 will adjust the PWM outputs in
response to the measured temperatures with further host intervention.  This
feature can also be disabled for manual control of the PWM’s.</p>
<p>Each of the measured inputs (temperature, fan speed) has corresponding high/low
limit values. The ADT7470 will signal an ALARM if any measured value exceeds
either limit.</p>
<p>The ADT7470 samples all inputs continuously.  A kernel thread is started up for
the purpose of periodically querying the temperature sensors, thus allowing the
automatic fan pwm control to set the fan speed.  The driver will not read the
registers more often than once every 5 seconds.  Further, configuration data is
only read once per minute.</p>
</section>
<section id="special-features">
<h2>Special Features<a class="headerlink" href="#special-features" title="Permalink to this headline">¶</a></h2>
<p>The ADT7470 has a 8-bit ADC and is capable of measuring temperatures with 1
degC resolution.</p>
<p>The Analog Devices datasheet is very detailed and describes a procedure for
determining an optimal configuration for the automatic PWM control.</p>
</section>
<section id="configuration-notes">
<h2>Configuration Notes<a class="headerlink" href="#configuration-notes" title="Permalink to this headline">¶</a></h2>
<p>Besides standard interfaces driver adds the following:</p>
<ul class="simple">
<li><p>PWM Control</p></li>
<li><p>pwm#_auto_point1_pwm and pwm#_auto_point1_temp and</p></li>
<li><p>pwm#_auto_point2_pwm and pwm#_auto_point2_temp -</p>
<ul>
<li><p>point1: Set the pwm speed at a lower temperature bound.</p></li>
<li><p>point2: Set the pwm speed at a higher temperature bound.</p></li>
</ul>
</li>
</ul>
<p>The ADT7470 will scale the pwm between the lower and higher pwm speed when
the temperature is between the two temperature boundaries.  PWM values range
from 0 (off) to 255 (full speed).  Fan speed will be set to maximum when the
temperature sensor associated with the PWM control exceeds
pwm#_auto_point2_temp.</p>
<p>The driver also allows control of the PWM frequency:</p>
<ul class="simple">
<li><p>pwm1_freq</p></li>
</ul>
<p>The PWM frequency is rounded to the nearest one of:</p>
<ul class="simple">
<li><p>11.0 Hz</p></li>
<li><p>14.7 Hz</p></li>
<li><p>22.1 Hz</p></li>
<li><p>29.4 Hz</p></li>
<li><p>35.3 Hz</p></li>
<li><p>44.1 Hz</p></li>
<li><p>58.8 Hz</p></li>
<li><p>88.2 Hz</p></li>
<li><p>1.4 kHz</p></li>
<li><p>22.5 kHz</p></li>
</ul>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<p>The temperature inputs no longer need to be read periodically from userspace in
order for the automatic pwm algorithm to run.  This was the case for earlier
versions of the driver.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Kernel driver adt7470</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#special-features">Special Features</a></li>
<li><a class="reference internal" href="#configuration-notes">Configuration Notes</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/hwmon/adt7470.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/hwmon/adt7470.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>