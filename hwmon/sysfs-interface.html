
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Naming and data format standards for sysfs files &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Userspace tools" href="userspace-tools.html" />
    <link rel="prev" title="How to Get Your Patch Accepted Into the Hwmon Subsystem" href="submitting-patches.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="naming-and-data-format-standards-for-sysfs-files">
<h1>Naming and data format standards for sysfs files<a class="headerlink" href="#naming-and-data-format-standards-for-sysfs-files" title="Permalink to this headline">¶</a></h1>
<p>The libsensors library offers an interface to the raw sensors data
through the sysfs interface. Since lm-sensors 3.0.0, libsensors is
completely chip-independent. It assumes that all the kernel drivers
implement the standard sysfs interface described in this document.
This makes adding or updating support for any given chip very easy, as
libsensors, and applications using it, do not need to be modified.
This is a major improvement compared to lm-sensors 2.</p>
<p>Note that motherboards vary widely in the connections to sensor chips.
There is no standard that ensures, for example, that the second
temperature sensor is connected to the CPU, or that the second fan is on
the CPU. Also, some values reported by the chips need some computation
before they make full sense. For example, most chips can only measure
voltages between 0 and +4V. Other voltages are scaled back into that
range using external resistors. Since the values of these resistors
can change from motherboard to motherboard, the conversions cannot be
hard coded into the driver and have to be done in user space.</p>
<p>For this reason, even if we aim at a chip-independent libsensors, it will
still require a configuration file (e.g. /etc/sensors.conf) for proper
values conversion, labeling of inputs and hiding of unused inputs.</p>
<p>An alternative method that some programs use is to access the sysfs
files directly. This document briefly describes the standards that the
drivers follow, so that an application program can scan for entries and
access this data in a simple and consistent way. That said, such programs
will have to implement conversion, labeling and hiding of inputs. For
this reason, it is still not recommended to bypass the library.</p>
<p>Each chip gets its own directory in the sysfs /sys/devices tree.  To
find all sensor chips, it is easier to follow the device symlinks from
<cite>/sys/class/hwmon/hwmon*</cite>.</p>
<p>Up to lm-sensors 3.0.0, libsensors looks for hardware monitoring attributes
in the “physical” device directory. Since lm-sensors 3.0.1, attributes found
in the hwmon “class” device directory are also supported. Complex drivers
(e.g. drivers for multifunction chips) may want to use this possibility to
avoid namespace pollution. The only drawback will be that older versions of
libsensors won’t support the driver in question.</p>
<p>All sysfs values are fixed point numbers.</p>
<p>There is only one value per file, unlike the older /proc specification.
The common scheme for files naming is: &lt;type&gt;&lt;number&gt;_&lt;item&gt;. Usual
types for sensor chips are “in” (voltage), “temp” (temperature) and
“fan” (fan). Usual items are “input” (measured value), “max” (high
threshold, “min” (low threshold). Numbering usually starts from 1,
except for voltages which start from 0 (because most data sheets use
this). A number is always used for elements that can be present more
than once, even if there is a single element of the given type on the
specific chip. Other files do not refer to a specific element, so
they have a simple name, and no number.</p>
<p>Alarms are direct indications read from the chips. The drivers do NOT
make comparisons of readings to thresholds. This allows violations
between readings to be caught and alarmed. The exact definition of an
alarm (for example, whether a threshold must be met or must be exceeded
to cause an alarm) is chip-dependent.</p>
<p>When setting values of hwmon sysfs attributes, the string representation of
the desired value must be written, note that strings which are not a number
are interpreted as 0! For more on how written strings are interpreted see the
“sysfs attribute writes interpretation” section at the end of this file.</p>
<section id="attribute-access">
<h2>Attribute access<a class="headerlink" href="#attribute-access" title="Permalink to this headline">¶</a></h2>
<p>Hardware monitoring sysfs attributes are displayed by unrestricted userspace
applications. For this reason, all standard ABI attributes shall be world
readable. Writeable standard ABI attributes shall be writeable only for
privileged users.</p>
<hr class="docutils" />
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><cite>[0-*]</cite></p></td>
<td><p>denotes any positive number starting from 0</p></td>
</tr>
<tr class="row-even"><td><p><cite>[1-*]</cite></p></td>
<td><p>denotes any positive number starting from 1</p></td>
</tr>
<tr class="row-odd"><td><p>RO</p></td>
<td><p>read only value</p></td>
</tr>
<tr class="row-even"><td><p>WO</p></td>
<td><p>write only value</p></td>
</tr>
<tr class="row-odd"><td><p>RW</p></td>
<td><p>read/write value</p></td>
</tr>
</tbody>
</table>
<p>Read/write values may be read-only for some chips, depending on the
hardware implementation.</p>
<p>All entries (except name) are optional, and should only be created in a
given driver if the chip has the feature.</p>
<p>See Documentation/ABI/testing/sysfs-class-hwmon for a complete description
of the attributes.</p>
<section id="global-attributes">
<h3>Global attributes<a class="headerlink" href="#global-attributes" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><cite>name</cite></dt><dd><p>The chip name.</p>
</dd>
<dt><cite>label</cite></dt><dd><p>A descriptive label that allows to uniquely identify a device
within the system.</p>
</dd>
<dt><cite>update_interval</cite></dt><dd><p>The interval at which the chip will update readings.</p>
</dd>
</dl>
</section>
<section id="voltages">
<h3>Voltages<a class="headerlink" href="#voltages" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><cite>in[0-*]_min</cite></dt><dd><p>Voltage min value.</p>
</dd>
<dt><cite>in[0-*]_lcrit</cite></dt><dd><p>Voltage critical min value.</p>
</dd>
<dt><cite>in[0-*]_max</cite></dt><dd><p>Voltage max value.</p>
</dd>
<dt><cite>in[0-*]_crit</cite></dt><dd><p>Voltage critical max value.</p>
</dd>
<dt><cite>in[0-*]_input</cite></dt><dd><p>Voltage input value.</p>
</dd>
<dt><cite>in[0-*]_average</cite></dt><dd><p>Average voltage</p>
</dd>
<dt><cite>in[0-*]_lowest</cite></dt><dd><p>Historical minimum voltage</p>
</dd>
<dt><cite>in[0-*]_highest</cite></dt><dd><p>Historical maximum voltage</p>
</dd>
<dt><cite>in[0-*]_reset_history</cite></dt><dd><p>Reset inX_lowest and inX_highest</p>
</dd>
<dt><cite>in_reset_history</cite></dt><dd><p>Reset inX_lowest and inX_highest for all sensors</p>
</dd>
<dt><cite>in[0-*]_label</cite></dt><dd><p>Suggested voltage channel label.</p>
</dd>
<dt><cite>in[0-*]_enable</cite></dt><dd><p>Enable or disable the sensors.</p>
</dd>
<dt><cite>cpu[0-*]_vid</cite></dt><dd><p>CPU core reference voltage.</p>
</dd>
<dt><cite>vrm</cite></dt><dd><p>Voltage Regulator Module version number.</p>
</dd>
<dt><cite>in[0-*]_rated_min</cite></dt><dd><p>Minimum rated voltage.</p>
</dd>
<dt><cite>in[0-*]_rated_max</cite></dt><dd><p>Maximum rated voltage.</p>
</dd>
</dl>
<p>Also see the Alarms section for status flags associated with voltages.</p>
</section>
<section id="fans">
<h3>Fans<a class="headerlink" href="#fans" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><cite>fan[1-*]_min</cite></dt><dd><p>Fan minimum value</p>
</dd>
<dt><cite>fan[1-*]_max</cite></dt><dd><p>Fan maximum value</p>
</dd>
<dt><cite>fan[1-*]_input</cite></dt><dd><p>Fan input value.</p>
</dd>
<dt><cite>fan[1-*]_div</cite></dt><dd><p>Fan divisor.</p>
</dd>
<dt><cite>fan[1-*]_pulses</cite></dt><dd><p>Number of tachometer pulses per fan revolution.</p>
</dd>
<dt><cite>fan[1-*]_target</cite></dt><dd><p>Desired fan speed</p>
</dd>
<dt><cite>fan[1-*]_label</cite></dt><dd><p>Suggested fan channel label.</p>
</dd>
<dt><cite>fan[1-*]_enable</cite></dt><dd><p>Enable or disable the sensors.</p>
</dd>
</dl>
<p>Also see the Alarms section for status flags associated with fans.</p>
</section>
<section id="pwm">
<h3>PWM<a class="headerlink" href="#pwm" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><cite>pwm[1-*]</cite></dt><dd><p>Pulse width modulation fan control.</p>
</dd>
<dt><cite>pwm[1-*]_enable</cite></dt><dd><p>Fan speed control method:</p>
</dd>
<dt><cite>pwm[1-*]_mode</cite></dt><dd><p>direct current or pulse-width modulation.</p>
</dd>
<dt><cite>pwm[1-*]_freq</cite></dt><dd><p>Base PWM frequency in Hz.</p>
</dd>
<dt><cite>pwm[1-*]_auto_channels_temp</cite></dt><dd><p>Select which temperature channels affect this PWM output in
auto mode.</p>
</dd>
<dt><cite>pwm[1-*]_auto_point[1-*]_pwm</cite> / <cite>pwm[1-*]_auto_point[1-*]_temp</cite> / <cite>pwm[1-*]_auto_point[1-*]_temp_hyst</cite></dt><dd><p>Define the PWM vs temperature curve.</p>
</dd>
<dt><cite>temp[1-*]_auto_point[1-*]_pwm</cite> / <cite>temp[1-*]_auto_point[1-*]_temp</cite> / <cite>temp[1-*]_auto_point[1-*]_temp_hyst</cite></dt><dd><p>Define the PWM vs temperature curve.</p>
</dd>
</dl>
<p>There is a third case where trip points are associated to both PWM output
channels and temperature channels: the PWM values are associated to PWM
output channels while the temperature values are associated to temperature
channels. In that case, the result is determined by the mapping between
temperature inputs and PWM outputs. When several temperature inputs are
mapped to a given PWM output, this leads to several candidate PWM values.
The actual result is up to the chip, but in general the highest candidate
value (fastest fan speed) wins.</p>
</section>
<section id="temperatures">
<h3>Temperatures<a class="headerlink" href="#temperatures" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><cite>temp[1-*]_type</cite></dt><dd><p>Sensor type selection.</p>
</dd>
<dt><cite>temp[1-*]_max</cite></dt><dd><p>Temperature max value.</p>
</dd>
<dt><cite>temp[1-*]_min</cite></dt><dd><p>Temperature min value.</p>
</dd>
<dt><cite>temp[1-*]_max_hyst</cite></dt><dd><p>Temperature hysteresis value for max limit.</p>
</dd>
<dt><cite>temp[1-*]_min_hyst</cite></dt><dd><p>Temperature hysteresis value for min limit.</p>
</dd>
<dt><cite>temp[1-*]_input</cite></dt><dd><p>Temperature input value.</p>
</dd>
<dt><cite>temp[1-*]_crit</cite></dt><dd><p>Temperature critical max value, typically greater than
corresponding temp_max values.</p>
</dd>
<dt><cite>temp[1-*]_crit_hyst</cite></dt><dd><p>Temperature hysteresis value for critical limit.</p>
</dd>
<dt><cite>temp[1-*]_emergency</cite></dt><dd><p>Temperature emergency max value, for chips supporting more than
two upper temperature limits.</p>
</dd>
<dt><cite>temp[1-*]_emergency_hyst</cite></dt><dd><p>Temperature hysteresis value for emergency limit.</p>
</dd>
<dt><cite>temp[1-*]_lcrit</cite></dt><dd><p>Temperature critical min value, typically lower than
corresponding temp_min values.</p>
</dd>
<dt><cite>temp[1-*]_lcrit_hyst</cite></dt><dd><p>Temperature hysteresis value for critical min limit.</p>
</dd>
<dt><cite>temp[1-*]_offset</cite></dt><dd><p>Temperature offset which is added to the temperature reading
by the chip.</p>
</dd>
<dt><cite>temp[1-*]_label</cite></dt><dd><p>Suggested temperature channel label.</p>
</dd>
<dt><cite>temp[1-*]_lowest</cite></dt><dd><p>Historical minimum temperature</p>
</dd>
<dt><cite>temp[1-*]_highest</cite></dt><dd><p>Historical maximum temperature</p>
</dd>
<dt><cite>temp[1-*]_reset_history</cite></dt><dd><p>Reset temp_lowest and temp_highest</p>
</dd>
<dt><cite>temp_reset_history</cite></dt><dd><p>Reset temp_lowest and temp_highest for all sensors</p>
</dd>
<dt><cite>temp[1-*]_enable</cite></dt><dd><p>Enable or disable the sensors.</p>
</dd>
<dt><cite>temp[1-*]_rated_min</cite></dt><dd><p>Minimum rated temperature.</p>
</dd>
<dt><cite>temp[1-*]_rated_max</cite></dt><dd><p>Maximum rated temperature.</p>
</dd>
</dl>
<p>Some chips measure temperature using external thermistors and an ADC, and
report the temperature measurement as a voltage. Converting this voltage
back to a temperature (or the other way around for limits) requires
mathematical functions not available in the kernel, so the conversion
must occur in user space. For these chips, all temp* files described
above should contain values expressed in millivolt instead of millidegree
Celsius. In other words, such temperature channels are handled as voltage
channels by the driver.</p>
<p>Also see the Alarms section for status flags associated with temperatures.</p>
</section>
<section id="currents">
<h3>Currents<a class="headerlink" href="#currents" title="Permalink to this headline">¶</a></h3>
<dl>
<dt><cite>curr[1-*]_max</cite></dt><dd><p>Current max value.</p>
</dd>
<dt><cite>curr[1-*]_min</cite></dt><dd><p>Current min value.</p>
</dd>
<dt><cite>curr[1-*]_lcrit</cite></dt><dd><p>Current critical low value</p>
</dd>
<dt><cite>curr[1-*]_crit</cite></dt><dd><p>Current critical high value.</p>
</dd>
<dt><cite>curr[1-*]_input</cite></dt><dd><p>Current input value.</p>
</dd>
<dt><cite>curr[1-*]_average</cite></dt><dd><p>Average current use.</p>
</dd>
<dt><cite>curr[1-*]_lowest</cite></dt><dd><p>Historical minimum current.</p>
</dd>
<dt><cite>curr[1-*]_highest</cite></dt><dd><p>Historical maximum current.</p>
</dd>
<dt><cite>curr[1-*]_reset_history</cite></dt><dd><p>Reset currX_lowest and currX_highest</p>
<p>WO</p>
</dd>
<dt><cite>curr_reset_history</cite></dt><dd><p>Reset currX_lowest and currX_highest for all sensors.</p>
</dd>
<dt><cite>curr[1-*]_enable</cite></dt><dd><p>Enable or disable the sensors.</p>
</dd>
<dt><cite>curr[1-*]_rated_min</cite></dt><dd><p>Minimum rated current.</p>
</dd>
<dt><cite>curr[1-*]_rated_max</cite></dt><dd><p>Maximum rated current.</p>
</dd>
</dl>
<p>Also see the Alarms section for status flags associated with currents.</p>
</section>
<section id="power">
<h3>Power<a class="headerlink" href="#power" title="Permalink to this headline">¶</a></h3>
<dl>
<dt><cite>power[1-*]_average</cite></dt><dd><p>Average power use.</p>
</dd>
<dt><cite>power[1-*]_average_interval</cite></dt><dd><p>Power use averaging interval.</p>
</dd>
<dt><cite>power[1-*]_average_interval_max</cite></dt><dd><p>Maximum power use averaging interval.</p>
</dd>
<dt><cite>power[1-*]_average_interval_min</cite></dt><dd><p>Minimum power use averaging interval.</p>
</dd>
<dt><cite>power[1-*]_average_highest</cite></dt><dd><p>Historical average maximum power use</p>
</dd>
<dt><cite>power[1-*]_average_lowest</cite></dt><dd><p>Historical average minimum power use</p>
</dd>
<dt><cite>power[1-*]_average_max</cite></dt><dd><p>A poll notification is sent to <cite>power[1-*]_average</cite> when
power use rises above this value.</p>
</dd>
<dt><cite>power[1-*]_average_min</cite></dt><dd><p>A poll notification is sent to <cite>power[1-*]_average</cite> when
power use sinks below this value.</p>
</dd>
<dt><cite>power[1-*]_input</cite></dt><dd><p>Instantaneous power use.</p>
</dd>
<dt><cite>power[1-*]_input_highest</cite></dt><dd><p>Historical maximum power use</p>
</dd>
<dt><cite>power[1-*]_input_lowest</cite></dt><dd><p>Historical minimum power use.</p>
</dd>
<dt><cite>power[1-*]_reset_history</cite></dt><dd><p>Reset input_highest, input_lowest, average_highest and
average_lowest.</p>
</dd>
<dt><cite>power[1-*]_accuracy</cite></dt><dd><p>Accuracy of the power meter.</p>
</dd>
<dt><cite>power[1-*]_cap</cite></dt><dd><p>If power use rises above this limit, the
system should take action to reduce power use.</p>
</dd>
<dt><cite>power[1-*]_cap_hyst</cite></dt><dd><p>Margin of hysteresis built around capping and notification.</p>
</dd>
<dt><cite>power[1-*]_cap_max</cite></dt><dd><p>Maximum cap that can be set.</p>
</dd>
<dt><cite>power[1-*]_cap_min</cite></dt><dd><p>Minimum cap that can be set.</p>
</dd>
<dt><cite>power[1-*]_max</cite></dt><dd><p>Maximum power.</p>
</dd>
<dt><cite>power[1-*]_crit</cite></dt><dd><p>Critical maximum power.</p>
<p>If power rises to or above this limit, the
system is expected take drastic action to reduce
power consumption, such as a system shutdown or
a forced powerdown of some devices.</p>
<p>Unit: microWatt</p>
<p>RW</p>
</dd>
<dt><cite>power[1-*]_enable</cite></dt><dd><p>Enable or disable the sensors.</p>
<p>When disabled the sensor read will return
-ENODATA.</p>
<ul class="simple">
<li><p>1: Enable</p></li>
<li><p>0: Disable</p></li>
</ul>
<p>RW</p>
</dd>
<dt><cite>power[1-*]_rated_min</cite></dt><dd><p>Minimum rated power.</p>
<p>Unit: microWatt</p>
<p>RO</p>
</dd>
<dt><cite>power[1-*]_rated_max</cite></dt><dd><p>Maximum rated power.</p>
<p>Unit: microWatt</p>
<p>RO</p>
</dd>
</dl>
<p>Also see the Alarms section for status flags associated with power readings.</p>
</section>
<section id="energy">
<h3>Energy<a class="headerlink" href="#energy" title="Permalink to this headline">¶</a></h3>
<dl>
<dt><cite>energy[1-*]_input</cite></dt><dd><p>Cumulative energy use</p>
<p>Unit: microJoule</p>
<p>RO</p>
</dd>
<dt><cite>energy[1-*]_enable</cite></dt><dd><p>Enable or disable the sensors.</p>
<p>When disabled the sensor read will return
-ENODATA.</p>
<ul class="simple">
<li><p>1: Enable</p></li>
<li><p>0: Disable</p></li>
</ul>
<p>RW</p>
</dd>
</dl>
</section>
<section id="humidity">
<h3>Humidity<a class="headerlink" href="#humidity" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><cite>humidity[1-*]_input</cite></dt><dd><p>Humidity.</p>
</dd>
<dt><cite>humidity[1-*]_enable</cite></dt><dd><p>Enable or disable the sensors.</p>
</dd>
<dt><cite>humidity[1-*]_rated_min</cite></dt><dd><p>Minimum rated humidity.</p>
</dd>
<dt><cite>humidity[1-*]_rated_max</cite></dt><dd><p>Maximum rated humidity.</p>
</dd>
</dl>
</section>
<section id="alarms">
<h3>Alarms<a class="headerlink" href="#alarms" title="Permalink to this headline">¶</a></h3>
<p>Each channel or limit may have an associated alarm file, containing a
boolean value. 1 means than an alarm condition exists, 0 means no alarm.</p>
<p>Usually a given chip will either use channel-related alarms, or
limit-related alarms, not both. The driver should just reflect the hardware
implementation.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 57%" />
<col style="width: 43%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>`in[0-*]_alarm`,
`curr[1-*]_alarm`,
`power[1-*]_alarm`,
`fan[1-*]_alarm`,
`temp[1-*]_alarm`</strong></p></td>
<td><p>Channel alarm</p>
<blockquote>
<div><ul class="simple">
<li><p>0: no alarm</p></li>
<li><p>1: alarm</p></li>
</ul>
<p>RO</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p><strong>OR</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 57%" />
<col style="width: 43%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>`in[0-*]_min_alarm`,
`in[0-*]_max_alarm`,
`in[0-*]_lcrit_alarm`,
`in[0-*]_crit_alarm`,
`curr[1-*]_min_alarm`,
`curr[1-*]_max_alarm`,
`curr[1-*]_lcrit_alarm`,
`curr[1-*]_crit_alarm`,
`power[1-*]_cap_alarm`,
`power[1-*]_max_alarm`,
`power[1-*]_crit_alarm`,
`fan[1-*]_min_alarm`,
`fan[1-*]_max_alarm`,
`temp[1-*]_min_alarm`,
`temp[1-*]_max_alarm`,
`temp[1-*]_lcrit_alarm`,
`temp[1-*]_crit_alarm`,
`temp[1-*]_emergency_alarm`</strong></p></td>
<td><p>Limit alarm</p>
<blockquote>
<div><ul class="simple">
<li><p>0: no alarm</p></li>
<li><p>1: alarm</p></li>
</ul>
</div></blockquote>
<p>RO</p>
</td>
</tr>
</tbody>
</table>
<p>Each input channel may have an associated fault file. This can be used
to notify open diodes, unconnected fans etc. where the hardware
supports it. When this boolean has value 1, the measurement for that
channel should not be trusted.</p>
<dl class="simple">
<dt><cite>fan[1-*]_fault</cite> / <cite>temp[1-*]_fault</cite></dt><dd><p>Input fault condition.</p>
</dd>
</dl>
<p>Some chips also offer the possibility to get beeped when an alarm occurs:</p>
<dl class="simple">
<dt><cite>beep_enable</cite></dt><dd><p>Master beep enable.</p>
</dd>
<dt><cite>in[0-*]_beep</cite>, <cite>curr[1-*]_beep</cite>, <cite>fan[1-*]_beep</cite>, <cite>temp[1-*]_beep</cite>,</dt><dd><p>Channel beep.</p>
</dd>
</dl>
<p>In theory, a chip could provide per-limit beep masking, but no such chip
was seen so far.</p>
<p>Old drivers provided a different, non-standard interface to alarms and
beeps. These interface files are deprecated, but will be kept around
for compatibility reasons:</p>
<dl class="simple">
<dt><cite>alarms</cite></dt><dd><p>Alarm bitmask.</p>
</dd>
<dt><cite>beep_mask</cite></dt><dd><p>Bitmask for beep.</p>
</dd>
</dl>
</section>
<section id="intrusion-detection">
<h3>Intrusion detection<a class="headerlink" href="#intrusion-detection" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><cite>intrusion[0-*]_alarm</cite></dt><dd><p>Chassis intrusion detection.</p>
</dd>
<dt><cite>intrusion[0-*]_beep</cite></dt><dd><p>Chassis intrusion beep.</p>
</dd>
</dl>
</section>
<section id="average-sample-configuration">
<h3>Average sample configuration<a class="headerlink" href="#average-sample-configuration" title="Permalink to this headline">¶</a></h3>
<p>Devices allowing for reading {in,power,curr,temp}_average values may export
attributes for controlling number of samples used to compute average.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>samples</p></td>
<td><p>Sets number of average samples for all types of measurements.</p>
<p>RW</p>
</td>
</tr>
<tr class="row-even"><td><p>in_samples
power_samples
curr_samples
temp_samples</p></td>
<td><p>Sets number of average samples for specific type of
measurements.</p>
<p>Note that on some devices it won’t be possible to set all of
them to different values so changing one might also change
some others.</p>
<p>RW</p>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="sysfs-attribute-writes-interpretation">
<h2>sysfs attribute writes interpretation<a class="headerlink" href="#sysfs-attribute-writes-interpretation" title="Permalink to this headline">¶</a></h2>
<p>hwmon sysfs attributes always contain numbers, so the first thing to do is to
convert the input to a number, there are 2 ways todo this depending whether
the number can be negative or not:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unsigned long u = simple_strtoul(buf, NULL, 10);
long s = simple_strtol(buf, NULL, 10);
</pre></div>
</div>
<p>With buf being the buffer with the user input being passed by the kernel.
Notice that we do not use the second argument of strto[u]l, and thus cannot
tell when 0 is returned, if this was really 0 or is caused by invalid input.
This is done deliberately as checking this everywhere would add a lot of
code to the kernel.</p>
<p>Notice that it is important to always store the converted value in an
unsigned long or long, so that no wrap around can happen before any further
checking.</p>
<p>After the input string is converted to an (unsigned) long, the value should be
checked if its acceptable. Be careful with further conversions on the value
before checking it for validity, as these conversions could still cause a wrap
around before the check. For example do not multiply the result, and only
add/subtract if it has been divided before the add/subtract.</p>
<p>What to do if a value is found to be invalid, depends on the type of the
sysfs attribute that is being set. If it is a continuous setting like a
tempX_max or inX_max attribute, then the value should be clamped to its
limits using clamp_val(value, min_limit, max_limit). If it is not continuous
like for example a tempX_type, then when an invalid value is written,
-EINVAL should be returned.</p>
<p>Example1, temp1_max, register is a signed 8 bit value (-128 - 127 degrees):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>long v = simple_strtol(buf, NULL, 10) / 1000;
v = clamp_val(v, -128, 127);
/* write v to register */
</pre></div>
</div>
<p>Example2, fan divider setting, valid values 2, 4 and 8:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unsigned long v = simple_strtoul(buf, NULL, 10);

switch (v) {
case 2: v = 1; break;
case 4: v = 2; break;
case 8: v = 3; break;
default:
        return -EINVAL;
}
/* write v to register */
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Naming and data format standards for sysfs files</a><ul>
<li><a class="reference internal" href="#attribute-access">Attribute access</a><ul>
<li><a class="reference internal" href="#global-attributes">Global attributes</a></li>
<li><a class="reference internal" href="#voltages">Voltages</a></li>
<li><a class="reference internal" href="#fans">Fans</a></li>
<li><a class="reference internal" href="#pwm">PWM</a></li>
<li><a class="reference internal" href="#temperatures">Temperatures</a></li>
<li><a class="reference internal" href="#currents">Currents</a></li>
<li><a class="reference internal" href="#power">Power</a></li>
<li><a class="reference internal" href="#energy">Energy</a></li>
<li><a class="reference internal" href="#humidity">Humidity</a></li>
<li><a class="reference internal" href="#alarms">Alarms</a></li>
<li><a class="reference internal" href="#intrusion-detection">Intrusion detection</a></li>
<li><a class="reference internal" href="#average-sample-configuration">Average sample configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sysfs-attribute-writes-interpretation">sysfs attribute writes interpretation</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/hwmon/sysfs-interface.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/hwmon/sysfs-interface.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>