
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>7.37. ioctl VIDIOC_G_PARM, VIDIOC_S_PARM &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="7.38. ioctl VIDIOC_G_PRIORITY, VIDIOC_S_PRIORITY" href="vidioc-g-priority.html" />
    <link rel="prev" title="7.36. ioctl VIDIOC_G_OUTPUT, VIDIOC_S_OUTPUT" href="vidioc-g-output.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ioctl-vidioc-g-parm-vidioc-s-parm">
<span id="vidioc-g-parm"></span><h1><span class="section-number">7.37. </span>ioctl VIDIOC_G_PARM, VIDIOC_S_PARM<a class="headerlink" href="#ioctl-vidioc-g-parm-vidioc-s-parm" title="Permalink to this headline">¶</a></h1>
<section id="name">
<h2><span class="section-number">7.37.1. </span>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p>VIDIOC_G_PARM - VIDIOC_S_PARM - Get or set streaming parameters</p>
</section>
<section id="synopsis">
<h2><span class="section-number">7.37.2. </span>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<dl class="macro">
<dt id="c.V4L.VIDIOC_G_PARM">
<code class="sig-name descname">VIDIOC_G_PARM</code><a class="headerlink" href="#c.V4L.VIDIOC_G_PARM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ioctl(int</span> <span class="pre">fd,</span> <span class="pre">VIDIOC_G_PARM,</span> <span class="pre">v4l2_streamparm</span> <span class="pre">*argp)</span></code></p>
<dl class="macro">
<dt id="c.V4L.VIDIOC_S_PARM">
<code class="sig-name descname">VIDIOC_S_PARM</code><a class="headerlink" href="#c.V4L.VIDIOC_S_PARM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ioctl(int</span> <span class="pre">fd,</span> <span class="pre">VIDIOC_S_PARM,</span> <span class="pre">v4l2_streamparm</span> <span class="pre">*argp)</span></code></p>
</section>
<section id="arguments">
<h2><span class="section-number">7.37.3. </span>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fd</span></code></dt><dd><p>File descriptor returned by <code class="xref c c-func docutils literal notranslate"><span class="pre">open()</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">argp</span></code></dt><dd><p>Pointer to struct <code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_streamparm</span></code>.</p>
</dd>
</dl>
</section>
<section id="description">
<h2><span class="section-number">7.37.4. </span>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Applications can request a different frame interval. The capture or
output device will be reconfigured to support the requested frame
interval if possible. Optionally drivers may choose to skip or
repeat frames to achieve the requested frame interval.</p>
<p>For stateful encoders (see <a class="reference internal" href="dev-encoder.html#encoder"><span class="std std-ref">Memory-to-Memory Stateful Video Encoder Interface</span></a>) this represents the
frame interval that is typically embedded in the encoded video stream.</p>
<p>Changing the frame interval shall never change the format. Changing the
format, on the other hand, may change the frame interval.</p>
<p>Further these ioctls can be used to determine the number of buffers used
internally by a driver in read/write mode. For implications see the
section discussing the <code class="xref c c-func docutils literal notranslate"><span class="pre">read()</span></code> function.</p>
<p>To get and set the streaming parameters applications call the
<a class="reference internal" href="#vidioc-g-parm"><span class="std std-ref">VIDIOC_G_PARM</span></a> and
<a class="reference internal" href="#vidioc-g-parm"><span class="std std-ref">VIDIOC_S_PARM</span></a> ioctl, respectively. They take a
pointer to a struct <code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_streamparm</span></code> which contains a
union holding separate parameters for input and output devices.</p>
<dl class="type">
<dt id="c.V4L.v4l2_streamparm">
<code class="sig-name descname">v4l2_streamparm</code><a class="headerlink" href="#c.V4L.v4l2_streamparm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<table class="docutils align-default" id="id1">
<caption><span class="caption-text">struct v4l2_streamparm</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>The buffer (stream) type, same as struct
<code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_format</span></code> <code class="docutils literal notranslate"><span class="pre">type</span></code>, set by the
application. See <code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_buf_type</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>union {</p></td>
<td colspan="2"><p><code class="docutils literal notranslate"><span class="pre">parm</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>struct <code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_captureparm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">capture</span></code></p></td>
<td><p>Parameters for capture devices, used when <code class="docutils literal notranslate"><span class="pre">type</span></code> is
<code class="docutils literal notranslate"><span class="pre">V4L2_BUF_TYPE_VIDEO_CAPTURE</span></code> or
<code class="docutils literal notranslate"><span class="pre">V4L2_BUF_TYPE_VIDEO_CAPTURE_MPLANE</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>struct <code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_outputparm</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">output</span></code></p></td>
<td><p>Parameters for output devices, used when <code class="docutils literal notranslate"><span class="pre">type</span></code> is
<code class="docutils literal notranslate"><span class="pre">V4L2_BUF_TYPE_VIDEO_OUTPUT</span></code> or <code class="docutils literal notranslate"><span class="pre">V4L2_BUF_TYPE_VIDEO_OUTPUT_MPLANE</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>__u8</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">raw_data</span></code>[200]</p></td>
<td><p>A place holder for future extensions.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>}</p></td>
</tr>
</tbody>
</table>
<dl class="type">
<dt id="c.V4L.v4l2_captureparm">
<code class="sig-name descname">v4l2_captureparm</code><a class="headerlink" href="#c.V4L.v4l2_captureparm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<table class="docutils align-default" id="id2">
<caption><span class="caption-text">struct v4l2_captureparm</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">capability</span></code></p></td>
<td><p>See <a class="reference internal" href="#parm-caps"><span class="std std-ref">Streaming Parameters Capabilities</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">capturemode</span></code></p></td>
<td><p>Set by drivers and applications, see <a class="reference internal" href="#parm-flags"><span class="std std-ref">Capture Parameters Flags</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>struct <code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_fract</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">timeperframe</span></code></p></td>
<td><p>This is the desired period between successive frames captured by
the driver, in seconds.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p></p>
<p>This will configure the speed at which the video source (e.g. a sensor)
generates video frames. If the speed is fixed, then the driver may
choose to skip or repeat frames in order to achieve the requested
frame rate.</p>
<p>For stateful encoders (see <a class="reference internal" href="dev-encoder.html#encoder"><span class="std std-ref">Memory-to-Memory Stateful Video Encoder Interface</span></a>) this represents the
frame interval that is typically embedded in the encoded video stream.</p>
<p>Applications store here the desired frame period, drivers return
the actual frame period.</p>
<p>Changing the video standard (also implicitly by switching
the video input) may reset this parameter to the nominal frame
period. To reset manually applications can just set this field to
zero.</p>
<p>Drivers support this function only when they set the
<code class="docutils literal notranslate"><span class="pre">V4L2_CAP_TIMEPERFRAME</span></code> flag in the <code class="docutils literal notranslate"><span class="pre">capability</span></code> field.</p>
</td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">extendedmode</span></code></p></td>
<td><p>Custom (driver specific) streaming parameters. When unused,
applications and drivers must set this field to zero. Applications
using this field should check the driver name and version, see
<a class="reference internal" href="querycap.html#querycap"><span class="std std-ref">Querying Capabilities</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">readbuffers</span></code></p></td>
<td><p>Applications set this field to the desired number of buffers used
internally by the driver in <code class="xref c c-func docutils literal notranslate"><span class="pre">read()</span></code> mode.
Drivers return the actual number of buffers. When an application
requests zero buffers, drivers should just return the current
setting rather than the minimum or an error code. For details see
<a class="reference internal" href="rw.html#rw"><span class="std std-ref">Read/Write</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">reserved</span></code>[4]</p></td>
<td><p>Reserved for future extensions. Drivers and applications must set
the array to zero.</p></td>
</tr>
</tbody>
</table>
<dl class="type">
<dt id="c.V4L.v4l2_outputparm">
<code class="sig-name descname">v4l2_outputparm</code><a class="headerlink" href="#c.V4L.v4l2_outputparm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<table class="docutils align-default" id="id3">
<caption><span class="caption-text">struct v4l2_outputparm</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">capability</span></code></p></td>
<td><p>See <a class="reference internal" href="#parm-caps"><span class="std std-ref">Streaming Parameters Capabilities</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">outputmode</span></code></p></td>
<td><p>Set by drivers and applications, see <a class="reference internal" href="#parm-flags"><span class="std std-ref">Capture Parameters Flags</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>struct <code class="xref c c-type docutils literal notranslate"><span class="pre">v4l2_fract</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">timeperframe</span></code></p></td>
<td><p>This is the desired period between successive frames output by the
driver, in seconds.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p></p>
<p>The field is intended to repeat frames on the driver side in
<code class="xref c c-func docutils literal notranslate"><span class="pre">write()</span></code> mode (in streaming mode timestamps
can be used to throttle the output), saving I/O bandwidth.</p>
<p>For stateful encoders (see <a class="reference internal" href="dev-encoder.html#encoder"><span class="std std-ref">Memory-to-Memory Stateful Video Encoder Interface</span></a>) this represents the
frame interval that is typically embedded in the encoded video stream
and it provides a hint to the encoder of the speed at which raw
frames are queued up to the encoder.</p>
<p>Applications store here the desired frame period, drivers return
the actual frame period.</p>
<p>Changing the video standard (also implicitly by switching
the video output) may reset this parameter to the nominal frame
period. To reset manually applications can just set this field to
zero.</p>
<p>Drivers support this function only when they set the
<code class="docutils literal notranslate"><span class="pre">V4L2_CAP_TIMEPERFRAME</span></code> flag in the <code class="docutils literal notranslate"><span class="pre">capability</span></code> field.</p>
</td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">extendedmode</span></code></p></td>
<td><p>Custom (driver specific) streaming parameters. When unused,
applications and drivers must set this field to zero. Applications
using this field should check the driver name and version, see
<a class="reference internal" href="querycap.html#querycap"><span class="std std-ref">Querying Capabilities</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">writebuffers</span></code></p></td>
<td><p>Applications set this field to the desired number of buffers used
internally by the driver in <code class="xref c c-func docutils literal notranslate"><span class="pre">write()</span></code> mode. Drivers
return the actual number of buffers. When an application requests
zero buffers, drivers should just return the current setting
rather than the minimum or an error code. For details see
<a class="reference internal" href="rw.html#rw"><span class="std std-ref">Read/Write</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>__u32</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">reserved</span></code>[4]</p></td>
<td><p>Reserved for future extensions. Drivers and applications must set
the array to zero.</p></td>
</tr>
</tbody>
</table>
<span id="parm-caps"></span><table class="docutils align-default" id="id4">
<caption><span class="caption-text">Streaming Parameters Capabilities</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 38%" />
<col style="width: 13%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">V4L2_CAP_TIMEPERFRAME</span></code></p></td>
<td><p>0x1000</p></td>
<td><p>The frame period can be modified by setting the <code class="docutils literal notranslate"><span class="pre">timeperframe</span></code>
field.</p></td>
</tr>
</tbody>
</table>
<span id="parm-flags"></span><table class="docutils align-default" id="id5">
<caption><span class="caption-text">Capture Parameters Flags</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 38%" />
<col style="width: 13%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">V4L2_MODE_HIGHQUALITY</span></code></p></td>
<td><p>0x0001</p></td>
<td><p>High quality imaging mode. High quality mode is intended for still
imaging applications. The idea is to get the best possible image
quality that the hardware can deliver. It is not defined how the
driver writer may achieve that; it will depend on the hardware and
the ingenuity of the driver writer. High quality mode is a
different mode from the regular motion video capture modes. In
high quality mode:</p>
<ul class="simple">
<li><p>The driver may be able to capture higher resolutions than for
motion capture.</p></li>
<li><p>The driver may support fewer pixel formats than motion capture
(eg; true color).</p></li>
<li><p>The driver may capture and arithmetically combine multiple
successive fields or frames to remove color edge artifacts and
reduce the noise in the video data.</p></li>
<li><p>The driver may capture images in slices like a scanner in order
to handle larger format images than would otherwise be
possible.</p></li>
<li><p>An image capture operation may be significantly slower than
motion capture.</p></li>
<li><p>Moving objects in the image might have excessive motion blur.</p></li>
<li><p>Capture might only work through the <code class="xref c c-func docutils literal notranslate"><span class="pre">read()</span></code> call.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="return-value">
<h2><span class="section-number">7.37.5. </span>Return Value<a class="headerlink" href="#return-value" title="Permalink to this headline">¶</a></h2>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.37. ioctl VIDIOC_G_PARM, VIDIOC_S_PARM</a><ul>
<li><a class="reference internal" href="#name">7.37.1. Name</a></li>
<li><a class="reference internal" href="#synopsis">7.37.2. Synopsis</a></li>
<li><a class="reference internal" href="#arguments">7.37.3. Arguments</a></li>
<li><a class="reference internal" href="#description">7.37.4. Description</a></li>
<li><a class="reference internal" href="#return-value">7.37.5. Return Value</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/userspace-api/media/v4l/vidioc-g-parm.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/userspace-api/media/v4l/vidioc-g-parm.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>