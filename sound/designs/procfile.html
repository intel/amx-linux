
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Proc Files of ALSA Drivers &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Notes on Power-Saving Mode" href="powersave.html" />
    <link rel="prev" title="Tracepoints in ALSA" href="tracepoints.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="proc-files-of-alsa-drivers">
<h1>Proc Files of ALSA Drivers<a class="headerlink" href="#proc-files-of-alsa-drivers" title="Permalink to this headline">¶</a></h1>
<p>Takashi Iwai &lt;<a class="reference external" href="mailto:tiwai&#37;&#52;&#48;suse&#46;de">tiwai<span>&#64;</span>suse<span>&#46;</span>de</a>&gt;</p>
<section id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<p>ALSA has its own proc tree, /proc/asound.  Many useful information are
found in this tree.  When you encounter a problem and need debugging,
check the files listed in the following sections.</p>
<p>Each card has its subtree cardX, where X is from 0 to 7. The
card-specific files are stored in the <code class="docutils literal notranslate"><span class="pre">card*</span></code> subdirectories.</p>
</section>
<section id="global-information">
<h2>Global Information<a class="headerlink" href="#global-information" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>cards</dt><dd><p>Shows the list of currently configured ALSA drivers,
index, the id string, short and long descriptions.</p>
</dd>
<dt>version</dt><dd><p>Shows the version string and compile date.</p>
</dd>
<dt>modules</dt><dd><p>Lists the module of each card</p>
</dd>
<dt>devices</dt><dd><p>Lists the ALSA native device mappings.</p>
</dd>
<dt>meminfo</dt><dd><p>Shows the status of allocated pages via ALSA drivers.
Appears only when <code class="docutils literal notranslate"><span class="pre">CONFIG_SND_DEBUG=y</span></code>.</p>
</dd>
<dt>hwdep</dt><dd><p>Lists the currently available hwdep devices in format of
<code class="docutils literal notranslate"><span class="pre">&lt;card&gt;-&lt;device&gt;:</span> <span class="pre">&lt;name&gt;</span></code></p>
</dd>
<dt>pcm</dt><dd><p>Lists the currently available PCM devices in format of
<code class="docutils literal notranslate"><span class="pre">&lt;card&gt;-&lt;device&gt;:</span> <span class="pre">&lt;id&gt;:</span> <span class="pre">&lt;name&gt;</span> <span class="pre">:</span> <span class="pre">&lt;sub-streams&gt;</span></code></p>
</dd>
<dt>timer</dt><dd><p>Lists the currently available timer devices</p>
</dd>
<dt>oss/devices</dt><dd><p>Lists the OSS device mappings.</p>
</dd>
<dt>oss/sndstat</dt><dd><p>Provides the output compatible with /dev/sndstat.
You can symlink this to /dev/sndstat.</p>
</dd>
</dl>
</section>
<section id="card-specific-files">
<h2>Card Specific Files<a class="headerlink" href="#card-specific-files" title="Permalink to this headline">¶</a></h2>
<p>The card-specific files are found in <code class="docutils literal notranslate"><span class="pre">/proc/asound/card*</span></code> directories.
Some drivers (e.g. cmipci) have their own proc entries for the
register dump, etc (e.g. <code class="docutils literal notranslate"><span class="pre">/proc/asound/card*/cmipci</span></code> shows the register
dump).  These files would be really helpful for debugging.</p>
<p>When PCM devices are available on this card, you can see directories
like pcm0p or pcm1c.  They hold the PCM information for each PCM
stream.  The number after <code class="docutils literal notranslate"><span class="pre">pcm</span></code> is the PCM device number from 0, and
the last <code class="docutils literal notranslate"><span class="pre">p</span></code> or <code class="docutils literal notranslate"><span class="pre">c</span></code> means playback or capture direction.  The files in
this subtree is described later.</p>
<p>The status of MIDI I/O is found in <code class="docutils literal notranslate"><span class="pre">midi*</span></code> files.  It shows the device
name and the received/transmitted bytes through the MIDI device.</p>
<p>When the card is equipped with AC97 codecs, there are <code class="docutils literal notranslate"><span class="pre">codec97#*</span></code>
subdirectories (described later).</p>
<p>When the OSS mixer emulation is enabled (and the module is loaded),
oss_mixer file appears here, too.  This shows the current mapping of
OSS mixer elements to the ALSA control elements.  You can change the
mapping by writing to this device.  Read OSS-Emulation.txt for
details.</p>
</section>
<section id="pcm-proc-files">
<h2>PCM Proc Files<a class="headerlink" href="#pcm-proc-files" title="Permalink to this headline">¶</a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">card*/pcm*/info</span></code></dt><dd><p>The general information of this PCM device: card #, device #,
substreams, etc.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/pcm*/xrun_debug</span></code></dt><dd><p>This file appears when <code class="docutils literal notranslate"><span class="pre">CONFIG_SND_DEBUG=y</span></code> and
<code class="docutils literal notranslate"><span class="pre">CONFIG_SND_PCM_XRUN_DEBUG=y</span></code>.
This shows the status of xrun (= buffer overrun/xrun) and
invalid PCM position debug/check of ALSA PCM middle layer.
It takes an integer value, can be changed by writing to this
file, such as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># echo 5 &gt; /proc/asound/card0/pcm0p/xrun_debug
</pre></div>
</div>
<p>The value consists of the following bit flags:</p>
<ul class="simple">
<li><p>bit 0 = Enable XRUN/jiffies debug messages</p></li>
<li><p>bit 1 = Show stack trace at XRUN / jiffies check</p></li>
<li><p>bit 2 = Enable additional jiffies check</p></li>
</ul>
<p>When the bit 0 is set, the driver will show the messages to
kernel log when an xrun is detected.  The debug message is
shown also when the invalid H/W pointer is detected at the
update of periods (usually called from the interrupt
handler).</p>
<p>When the bit 1 is set, the driver will show the stack trace
additionally.  This may help the debugging.</p>
<p>Since 2.6.30, this option can enable the hwptr check using
jiffies.  This detects spontaneous invalid pointer callback
values, but can be lead to too much corrections for a (mostly
buggy) hardware that doesn’t give smooth pointer updates.
This feature is enabled via the bit 2.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/pcm*/sub*/info</span></code></dt><dd><p>The general information of this PCM sub-stream.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/pcm*/sub*/status</span></code></dt><dd><p>The current status of this PCM sub-stream, elapsed time,
H/W position, etc.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/pcm*/sub*/hw_params</span></code></dt><dd><p>The hardware parameters set for this sub-stream.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/pcm*/sub*/sw_params</span></code></dt><dd><p>The soft parameters set for this sub-stream.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/pcm*/sub*/prealloc</span></code></dt><dd><p>The buffer pre-allocation information.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/pcm*/sub*/xrun_injection</span></code></dt><dd><p>Triggers an XRUN to the running stream when any value is
written to this proc file.  Used for fault injection.
This entry is write-only.</p>
</dd>
</dl>
</section>
<section id="ac97-codec-information">
<h2>AC97 Codec Information<a class="headerlink" href="#ac97-codec-information" title="Permalink to this headline">¶</a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">card*/codec97#*/ac97#?-?</span></code></dt><dd><p>Shows the general information of this AC97 codec chip, such as
name, capabilities, set up.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/codec97#0/ac97#?-?+regs</span></code></dt><dd><p>Shows the AC97 register dump.  Useful for debugging.</p>
<p>When CONFIG_SND_DEBUG is enabled, you can write to this file for
changing an AC97 register directly.  Pass two hex numbers.
For example,</p>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># echo 02 9f1f &gt; /proc/asound/card0/codec97#0/ac97#0-0+regs
</pre></div>
</div>
</section>
<section id="usb-audio-streams">
<h2>USB Audio Streams<a class="headerlink" href="#usb-audio-streams" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">card*/stream*</span></code></dt><dd><p>Shows the assignment and the current status of each audio stream
of the given card.  This information is very useful for debugging.</p>
</dd>
</dl>
</section>
<section id="hd-audio-codecs">
<h2>HD-Audio Codecs<a class="headerlink" href="#hd-audio-codecs" title="Permalink to this headline">¶</a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">card*/codec#*</span></code></dt><dd><p>Shows the general codec information and the attribute of each
widget node.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">card*/eld#*</span></code></dt><dd><p>Available for HDMI or DisplayPort interfaces.
Shows ELD(EDID Like Data) info retrieved from the attached HDMI sink,
and describes its audio capabilities and configurations.</p>
<p>Some ELD fields may be modified by doing <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">name</span> <span class="pre">hex_value</span> <span class="pre">&gt;</span> <span class="pre">eld#*</span></code>.
Only do this if you are sure the HDMI sink provided value is wrong.
And if that makes your HDMI audio work, please report to us so that we
can fix it in future kernel releases.</p>
</dd>
</dl>
</section>
<section id="sequencer-information">
<h2>Sequencer Information<a class="headerlink" href="#sequencer-information" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>seq/drivers</dt><dd><p>Lists the currently available ALSA sequencer drivers.</p>
</dd>
<dt>seq/clients</dt><dd><p>Shows the list of currently available sequencer clients and
ports.  The connection status and the running status are shown
in this file, too.</p>
</dd>
<dt>seq/queues</dt><dd><p>Lists the currently allocated/running sequencer queues.</p>
</dd>
<dt>seq/timer</dt><dd><p>Lists the currently allocated/running sequencer timers.</p>
</dd>
<dt>seq/oss</dt><dd><p>Lists the OSS-compatible sequencer stuffs.</p>
</dd>
</dl>
</section>
<section id="help-for-debugging">
<h2>Help For Debugging?<a class="headerlink" href="#help-for-debugging" title="Permalink to this headline">¶</a></h2>
<p>When the problem is related with PCM, first try to turn on xrun_debug
mode.  This will give you the kernel messages when and where xrun
happened.</p>
<p>If it’s really a bug, report it with the following information:</p>
<ul class="simple">
<li><p>the name of the driver/card, show in <code class="docutils literal notranslate"><span class="pre">/proc/asound/cards</span></code></p></li>
<li><p>the register dump, if available (e.g. <code class="docutils literal notranslate"><span class="pre">card*/cmipci</span></code>)</p></li>
</ul>
<p>when it’s a PCM problem,</p>
<ul class="simple">
<li><p>set-up of PCM, shown in hw_parms, sw_params, and status in the PCM
sub-stream directory</p></li>
</ul>
<p>when it’s a mixer problem,</p>
<ul class="simple">
<li><p>AC97 proc files, <code class="docutils literal notranslate"><span class="pre">codec97#*/*</span></code> files</p></li>
</ul>
<p>for USB audio/midi,</p>
<ul class="simple">
<li><p>output of <code class="docutils literal notranslate"><span class="pre">lsusb</span> <span class="pre">-v</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stream*</span></code> files in card directory</p></li>
</ul>
<p>The ALSA bug-tracking system is found at:
<a class="reference external" href="https://bugtrack.alsa-project.org/alsa-bug/">https://bugtrack.alsa-project.org/alsa-bug/</a></p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Proc Files of ALSA Drivers</a><ul>
<li><a class="reference internal" href="#general">General</a></li>
<li><a class="reference internal" href="#global-information">Global Information</a></li>
<li><a class="reference internal" href="#card-specific-files">Card Specific Files</a></li>
<li><a class="reference internal" href="#pcm-proc-files">PCM Proc Files</a></li>
<li><a class="reference internal" href="#ac97-codec-information">AC97 Codec Information</a></li>
<li><a class="reference internal" href="#usb-audio-streams">USB Audio Streams</a></li>
<li><a class="reference internal" href="#hd-audio-codecs">HD-Audio Codecs</a></li>
<li><a class="reference internal" href="#sequencer-information">Sequencer Information</a></li>
<li><a class="reference internal" href="#help-for-debugging">Help For Debugging?</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/sound/designs/procfile.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/sound/designs/procfile.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>