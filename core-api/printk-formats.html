
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>How to get printk format specifiers right &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Printk Index" href="printk-index.html" />
    <link rel="prev" title="Message logging with printk" href="printk-basics.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="how-to-get-printk-format-specifiers-right">
<h1>How to get printk format specifiers right<a class="headerlink" href="#how-to-get-printk-format-specifiers-right" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple" id="printk-specifiers">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Randy Dunlap &lt;<a class="reference external" href="mailto:rdunlap&#37;&#52;&#48;infradead&#46;org">rdunlap<span>&#64;</span>infradead<span>&#46;</span>org</a>&gt;</p>
</dd>
<dt class="field-even">Author</dt>
<dd class="field-even"><p>Andrew Murray &lt;<a class="reference external" href="mailto:amurray&#37;&#52;&#48;mpc-data&#46;co&#46;uk">amurray<span>&#64;</span>mpc-data<span>&#46;</span>co<span>&#46;</span>uk</a>&gt;</p>
</dd>
</dl>
<section id="integer-types">
<h2>Integer types<a class="headerlink" href="#integer-types" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>If variable is of Type,         use printk format specifier:
------------------------------------------------------------
        char                    %d or %x
        unsigned char           %u or %x
        short int               %d or %x
        unsigned short int      %u or %x
        int                     %d or %x
        unsigned int            %u or %x
        long                    %ld or %lx
        unsigned long           %lu or %lx
        long long               %lld or %llx
        unsigned long long      %llu or %llx
        size_t                  %zu or %zx
        ssize_t                 %zd or %zx
        s8                      %d or %x
        u8                      %u or %x
        s16                     %d or %x
        u16                     %u or %x
        s32                     %d or %x
        u32                     %u or %x
        s64                     %lld or %llx
        u64                     %llu or %llx
</pre></div>
</div>
<p>If &lt;type&gt; is architecture-dependent for its size (e.g., cycles_t, tcflag_t) or
is dependent on a config option for its size (e.g., blk_status_t), use a format
specifier of its largest possible type and explicitly cast to it.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>printk(&quot;test: latency: %llu cycles\n&quot;, (unsigned long long)time);
</pre></div>
</div>
<p>Reminder: sizeof() returns type size_t.</p>
<p>The kernel’s printf does not support %n. Floating point formats (%e, %f,
%g, %a) are also not recognized, for obvious reasons. Use of any
unsupported specifier or length qualifier results in a WARN and early
return from <a class="reference internal" href="kernel-api.html#c.vsnprintf" title="vsnprintf"><code class="xref c c-func docutils literal notranslate"><span class="pre">vsnprintf()</span></code></a>.</p>
</section>
<section id="pointer-types">
<h2>Pointer types<a class="headerlink" href="#pointer-types" title="Permalink to this headline">¶</a></h2>
<p>A raw pointer value may be printed with %p which will hash the address
before printing. The kernel also supports extended specifiers for printing
pointers of different types.</p>
<p>Some of the extended specifiers print the data on the given address instead
of printing the address itself. In this case, the following error messages
might be printed instead of the unreachable information:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(null)   data on plain NULL address
(efault) data on invalid address
(einval) invalid data on a valid address
</pre></div>
</div>
<section id="plain-pointers">
<h3>Plain Pointers<a class="headerlink" href="#plain-pointers" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%p      abcdef12 or 00000000abcdef12
</pre></div>
</div>
<p>Pointers printed without a specifier extension (i.e unadorned %p) are
hashed to prevent leaking information about the kernel memory layout. This
has the added benefit of providing a unique identifier. On 64-bit machines
the first 32 bits are zeroed. The kernel will print <code class="docutils literal notranslate"><span class="pre">(ptrval)</span></code> until it
gathers enough entropy.</p>
<p>When possible, use specialised modifiers such as %pS or %pB (described below)
to avoid the need of providing an unhashed address that has to be interpreted
post-hoc. If not possible, and the aim of printing the address is to provide
more information for debugging, use %p and boot the kernel with the
<code class="docutils literal notranslate"><span class="pre">no_hash_pointers</span></code> parameter during debugging, which will print all %p
addresses unmodified. If you <em>really</em> always want the unmodified address, see
%px below.</p>
<p>If (and only if) you are printing addresses as a content of a virtual file in
e.g. procfs or sysfs (using e.g. seq_printf(), not <a class="reference internal" href="printk-basics.html#c.printk" title="printk"><code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code></a>) read by a
userspace process, use the %pK modifier described below instead of %p or %px.</p>
</section>
<section id="error-pointers">
<h3>Error Pointers<a class="headerlink" href="#error-pointers" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pe     -ENOSPC
</pre></div>
</div>
<p>For printing error pointers (i.e. a pointer for which IS_ERR() is true)
as a symbolic error name. Error values for which no symbolic name is
known are printed in decimal, while a non-ERR_PTR passed as the
argument to %pe gets treated as ordinary %p.</p>
</section>
<section id="symbols-function-pointers">
<h3>Symbols/Function Pointers<a class="headerlink" href="#symbols-function-pointers" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pS     versatile_init+0x0/0x110
%ps     versatile_init
%pSR    versatile_init+0x9/0x110
        (with __builtin_extract_return_addr() translation)
%pB     prev_fn_of_versatile_init+0x88/0x88
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">S</span></code> and <code class="docutils literal notranslate"><span class="pre">s</span></code> specifiers are used for printing a pointer in symbolic
format. They result in the symbol name with (S) or without (s)
offsets. If KALLSYMS are disabled then the symbol address is printed instead.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">B</span></code> specifier results in the symbol name with offsets and should be
used when printing stack backtraces. The specifier takes into
consideration the effect of compiler optimisations which may occur
when tail-calls are used and marked with the noreturn GCC attribute.</p>
<p>If the pointer is within a module, the module name and optionally build ID is
printed after the symbol name with an extra <code class="docutils literal notranslate"><span class="pre">b</span></code> appended to the end of the
specifier.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pS     versatile_init+0x0/0x110 [module_name]
%pSb    versatile_init+0x0/0x110 [module_name ed5019fdf5e53be37cb1ba7899292d7e143b259e]
%pSRb   versatile_init+0x9/0x110 [module_name ed5019fdf5e53be37cb1ba7899292d7e143b259e]
        (with __builtin_extract_return_addr() translation)
%pBb    prev_fn_of_versatile_init+0x88/0x88 [module_name ed5019fdf5e53be37cb1ba7899292d7e143b259e]
</pre></div>
</div>
</section>
<section id="probed-pointers-from-bpf-tracing">
<h3>Probed Pointers from BPF / tracing<a class="headerlink" href="#probed-pointers-from-bpf-tracing" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pks    kernel string
%pus    user string
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">k</span></code> and <code class="docutils literal notranslate"><span class="pre">u</span></code> specifiers are used for printing prior probed memory from
either kernel memory (k) or user memory (u). The subsequent <code class="docutils literal notranslate"><span class="pre">s</span></code> specifier
results in printing a string. For direct use in regular <a class="reference internal" href="kernel-api.html#c.vsnprintf" title="vsnprintf"><code class="xref c c-func docutils literal notranslate"><span class="pre">vsnprintf()</span></code></a> the (k)
and (u) annotation is ignored, however, when used out of BPF’s bpf_trace_printk(),
for example, it reads the memory it is pointing to without faulting.</p>
</section>
<section id="kernel-pointers">
<h3>Kernel Pointers<a class="headerlink" href="#kernel-pointers" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pK     01234567 or 0123456789abcdef
</pre></div>
</div>
<p>For printing kernel pointers which should be hidden from unprivileged
users. The behaviour of %pK depends on the kptr_restrict sysctl - see
<a class="reference internal" href="../admin-guide/sysctl/kernel.html"><span class="doc">Documentation for /proc/sys/kernel/</span></a> for more details.</p>
<p>This modifier is <em>only</em> intended when producing content of a file read by
userspace from e.g. procfs or sysfs, not for dmesg. Please refer to the
section about %p above for discussion about how to manage hashing pointers
in <a class="reference internal" href="printk-basics.html#c.printk" title="printk"><code class="xref c c-func docutils literal notranslate"><span class="pre">printk()</span></code></a>.</p>
</section>
<section id="unmodified-addresses">
<h3>Unmodified Addresses<a class="headerlink" href="#unmodified-addresses" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%px     01234567 or 0123456789abcdef
</pre></div>
</div>
<p>For printing pointers when you <em>really</em> want to print the address. Please
consider whether or not you are leaking sensitive information about the
kernel memory layout before printing pointers with %px. %px is functionally
equivalent to %lx (or %lu). %px is preferred because it is more uniquely
grep’able. If in the future we need to modify the way the kernel handles
printing pointers we will be better equipped to find the call sites.</p>
<p>Before using %px, consider if using %p is sufficient together with enabling the
<code class="docutils literal notranslate"><span class="pre">no_hash_pointers</span></code> kernel parameter during debugging sessions (see the %p
description above). One valid scenario for %px might be printing information
immediately before a panic, which prevents any sensitive information to be
exploited anyway, and with %px there would be no need to reproduce the panic
with no_hash_pointers.</p>
</section>
<section id="pointer-differences">
<h3>Pointer Differences<a class="headerlink" href="#pointer-differences" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%td     2560
%tx     a00
</pre></div>
</div>
<p>For printing the pointer differences, use the %t modifier for ptrdiff_t.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>printk(&quot;test: difference between pointers: %td\n&quot;, ptr2 - ptr1);
</pre></div>
</div>
</section>
<section id="struct-resources">
<h3>Struct Resources<a class="headerlink" href="#struct-resources" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pr     [mem 0x60000000-0x6fffffff flags 0x2200] or
        [mem 0x0000000060000000-0x000000006fffffff flags 0x2200]
%pR     [mem 0x60000000-0x6fffffff pref] or
        [mem 0x0000000060000000-0x000000006fffffff pref]
</pre></div>
</div>
<p>For printing struct resources. The <code class="docutils literal notranslate"><span class="pre">R</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span></code> specifiers result in a
printed resource with (R) or without (r) a decoded flags member.</p>
<p>Passed by reference.</p>
</section>
<section id="physical-address-types-phys-addr-t">
<h3>Physical address types phys_addr_t<a class="headerlink" href="#physical-address-types-phys-addr-t" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pa[p]  0x01234567 or 0x0123456789abcdef
</pre></div>
</div>
<p>For printing a phys_addr_t type (and its derivatives, such as
resource_size_t) which can vary based on build options, regardless of the
width of the CPU data path.</p>
<p>Passed by reference.</p>
</section>
<section id="dma-address-types-dma-addr-t">
<h3>DMA address types dma_addr_t<a class="headerlink" href="#dma-address-types-dma-addr-t" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pad    0x01234567 or 0x0123456789abcdef
</pre></div>
</div>
<p>For printing a dma_addr_t type which can vary based on build options,
regardless of the width of the CPU data path.</p>
<p>Passed by reference.</p>
</section>
<section id="raw-buffer-as-an-escaped-string">
<h3>Raw buffer as an escaped string<a class="headerlink" href="#raw-buffer-as-an-escaped-string" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%*pE[achnops]
</pre></div>
</div>
<p>For printing raw buffer as an escaped string. For the following buffer:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1b 62 20 5c 43 07 22 90 0d 5d
</pre></div>
</div>
<p>A few examples show how the conversion would be done (excluding surrounding
quotes):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%*pE            &quot;\eb \C\a&quot;\220\r]&quot;
%*pEhp          &quot;\x1bb \C\x07&quot;\x90\x0d]&quot;
%*pEa           &quot;\e\142\040\\\103\a\042\220\r\135&quot;
</pre></div>
</div>
<p>The conversion rules are applied according to an optional combination
of flags (see <a class="reference internal" href="kernel-api.html#c.string_escape_mem" title="string_escape_mem"><code class="xref c c-func docutils literal notranslate"><span class="pre">string_escape_mem()</span></code></a> kernel documentation for the
details):</p>
<blockquote>
<div><ul class="simple">
<li><p>a - ESCAPE_ANY</p></li>
<li><p>c - ESCAPE_SPECIAL</p></li>
<li><p>h - ESCAPE_HEX</p></li>
<li><p>n - ESCAPE_NULL</p></li>
<li><p>o - ESCAPE_OCTAL</p></li>
<li><p>p - ESCAPE_NP</p></li>
<li><p>s - ESCAPE_SPACE</p></li>
</ul>
</div></blockquote>
<p>By default ESCAPE_ANY_NP is used.</p>
<p>ESCAPE_ANY_NP is the sane choice for many cases, in particularly for
printing SSIDs.</p>
<p>If field width is omitted then 1 byte only will be escaped.</p>
</section>
<section id="raw-buffer-as-a-hex-string">
<h3>Raw buffer as a hex string<a class="headerlink" href="#raw-buffer-as-a-hex-string" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%*ph    00 01 02  ...  3f
%*phC   00:01:02: ... :3f
%*phD   00-01-02- ... -3f
%*phN   000102 ... 3f
</pre></div>
</div>
<p>For printing small buffers (up to 64 bytes long) as a hex string with a
certain separator. For larger buffers consider using
<code class="xref c c-func docutils literal notranslate"><span class="pre">print_hex_dump()</span></code>.</p>
</section>
<section id="mac-fddi-addresses">
<h3>MAC/FDDI addresses<a class="headerlink" href="#mac-fddi-addresses" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pM     00:01:02:03:04:05
%pMR    05:04:03:02:01:00
%pMF    00-01-02-03-04-05
%pm     000102030405
%pmR    050403020100
</pre></div>
</div>
<p>For printing 6-byte MAC/FDDI addresses in hex notation. The <code class="docutils literal notranslate"><span class="pre">M</span></code> and <code class="docutils literal notranslate"><span class="pre">m</span></code>
specifiers result in a printed address with (M) or without (m) byte
separators. The default byte separator is the colon (:).</p>
<p>Where FDDI addresses are concerned the <code class="docutils literal notranslate"><span class="pre">F</span></code> specifier can be used after
the <code class="docutils literal notranslate"><span class="pre">M</span></code> specifier to use dash (-) separators instead of the default
separator.</p>
<p>For Bluetooth addresses the <code class="docutils literal notranslate"><span class="pre">R</span></code> specifier shall be used after the <code class="docutils literal notranslate"><span class="pre">M</span></code>
specifier to use reversed byte order suitable for visual interpretation
of Bluetooth addresses which are in the little endian order.</p>
<p>Passed by reference.</p>
</section>
<section id="ipv4-addresses">
<h3>IPv4 addresses<a class="headerlink" href="#ipv4-addresses" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pI4    1.2.3.4
%pi4    001.002.003.004
%p[Ii]4[hnbl]
</pre></div>
</div>
<p>For printing IPv4 dot-separated decimal addresses. The <code class="docutils literal notranslate"><span class="pre">I4</span></code> and <code class="docutils literal notranslate"><span class="pre">i4</span></code>
specifiers result in a printed address with (i4) or without (I4) leading
zeros.</p>
<p>The additional <code class="docutils literal notranslate"><span class="pre">h</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">l</span></code> specifiers are used to specify
host, network, big or little endian order addresses respectively. Where
no specifier is provided the default network/big endian order is used.</p>
<p>Passed by reference.</p>
</section>
<section id="ipv6-addresses">
<h3>IPv6 addresses<a class="headerlink" href="#ipv6-addresses" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pI6    0001:0002:0003:0004:0005:0006:0007:0008
%pi6    00010002000300040005000600070008
%pI6c   1:2:3:4:5:6:7:8
</pre></div>
</div>
<p>For printing IPv6 network-order 16-bit hex addresses. The <code class="docutils literal notranslate"><span class="pre">I6</span></code> and <code class="docutils literal notranslate"><span class="pre">i6</span></code>
specifiers result in a printed address with (I6) or without (i6)
colon-separators. Leading zeros are always used.</p>
<p>The additional <code class="docutils literal notranslate"><span class="pre">c</span></code> specifier can be used with the <code class="docutils literal notranslate"><span class="pre">I</span></code> specifier to
print a compressed IPv6 address as described by
<a class="reference external" href="https://tools.ietf.org/html/rfc5952">https://tools.ietf.org/html/rfc5952</a></p>
<p>Passed by reference.</p>
</section>
<section id="ipv4-ipv6-addresses-generic-with-port-flowinfo-scope">
<h3>IPv4/IPv6 addresses (generic, with port, flowinfo, scope)<a class="headerlink" href="#ipv4-ipv6-addresses-generic-with-port-flowinfo-scope" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pIS    1.2.3.4         or 0001:0002:0003:0004:0005:0006:0007:0008
%piS    001.002.003.004 or 00010002000300040005000600070008
%pISc   1.2.3.4         or 1:2:3:4:5:6:7:8
%pISpc  1.2.3.4:12345   or [1:2:3:4:5:6:7:8]:12345
%p[Ii]S[pfschnbl]
</pre></div>
</div>
<p>For printing an IP address without the need to distinguish whether it’s of
type AF_INET or AF_INET6. A pointer to a valid struct sockaddr,
specified through <code class="docutils literal notranslate"><span class="pre">IS</span></code> or <code class="docutils literal notranslate"><span class="pre">iS</span></code>, can be passed to this format specifier.</p>
<p>The additional <code class="docutils literal notranslate"><span class="pre">p</span></code>, <code class="docutils literal notranslate"><span class="pre">f</span></code>, and <code class="docutils literal notranslate"><span class="pre">s</span></code> specifiers are used to specify port
(IPv4, IPv6), flowinfo (IPv6) and scope (IPv6). Ports have a <code class="docutils literal notranslate"><span class="pre">:</span></code> prefix,
flowinfo a <code class="docutils literal notranslate"><span class="pre">/</span></code> and scope a <code class="docutils literal notranslate"><span class="pre">%</span></code>, each followed by the actual value.</p>
<p>In case of an IPv6 address the compressed IPv6 address as described by
<a class="reference external" href="https://tools.ietf.org/html/rfc5952">https://tools.ietf.org/html/rfc5952</a> is being used if the additional
specifier <code class="docutils literal notranslate"><span class="pre">c</span></code> is given. The IPv6 address is surrounded by <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">]</span></code> in
case of additional specifiers <code class="docutils literal notranslate"><span class="pre">p</span></code>, <code class="docutils literal notranslate"><span class="pre">f</span></code> or <code class="docutils literal notranslate"><span class="pre">s</span></code> as suggested by
<a class="reference external" href="https://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-07">https://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-07</a></p>
<p>In case of IPv4 addresses, the additional <code class="docutils literal notranslate"><span class="pre">h</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">l</span></code>
specifiers can be used as well and are ignored in case of an IPv6
address.</p>
<p>Passed by reference.</p>
<p>Further examples:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pISfc          1.2.3.4         or [1:2:3:4:5:6:7:8]/123456789
%pISsc          1.2.3.4         or [1:2:3:4:5:6:7:8]%1234567890
%pISpfc         1.2.3.4:12345   or [1:2:3:4:5:6:7:8]:12345/123456789
</pre></div>
</div>
</section>
<section id="uuid-guid-addresses">
<h3>UUID/GUID addresses<a class="headerlink" href="#uuid-guid-addresses" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pUb    00010203-0405-0607-0809-0a0b0c0d0e0f
%pUB    00010203-0405-0607-0809-0A0B0C0D0E0F
%pUl    03020100-0504-0706-0809-0a0b0c0e0e0f
%pUL    03020100-0504-0706-0809-0A0B0C0E0E0F
</pre></div>
</div>
<p>For printing 16-byte UUID/GUIDs addresses. The additional <code class="docutils literal notranslate"><span class="pre">l</span></code>, <code class="docutils literal notranslate"><span class="pre">L</span></code>,
<code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">B</span></code> specifiers are used to specify a little endian order in
lower (l) or upper case (L) hex notation - and big endian order in lower (b)
or upper case (B) hex notation.</p>
<p>Where no additional specifiers are used the default big endian
order with lower case hex notation will be printed.</p>
<p>Passed by reference.</p>
</section>
<section id="dentry-names">
<h3>dentry names<a class="headerlink" href="#dentry-names" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pd{,2,3,4}
%pD{,2,3,4}
</pre></div>
</div>
<p>For printing dentry name; if we race with <code class="xref c c-func docutils literal notranslate"><span class="pre">d_move()</span></code>, the name might
be a mix of old and new ones, but it won’t oops.  %pd dentry is a safer
equivalent of %s dentry-&gt;d_name.name we used to use, %pd&lt;n&gt; prints <code class="docutils literal notranslate"><span class="pre">n</span></code>
last components.  %pD does the same thing for struct file.</p>
<p>Passed by reference.</p>
</section>
<section id="block-device-names">
<h3>block_device names<a class="headerlink" href="#block-device-names" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pg     sda, sda1 or loop0p1
</pre></div>
</div>
<p>For printing name of block_device pointers.</p>
</section>
<section id="struct-va-format">
<h3>struct va_format<a class="headerlink" href="#struct-va-format" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pV
</pre></div>
</div>
<p>For printing struct va_format structures. These contain a format string
and va_list as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct va_format {
        const char *fmt;
        va_list *va;
};
</pre></div>
</div>
<p>Implements a “recursive vsnprintf”.</p>
<p>Do not use this feature without some mechanism to verify the
correctness of the format string and va_list arguments.</p>
<p>Passed by reference.</p>
</section>
<section id="device-tree-nodes">
<h3>Device tree nodes<a class="headerlink" href="#device-tree-nodes" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pOF[fnpPcCF]
</pre></div>
</div>
<p>For printing device tree node structures. Default behaviour is
equivalent to %pOFf.</p>
<blockquote>
<div><ul class="simple">
<li><p>f - device node full_name</p></li>
<li><p>n - device node name</p></li>
<li><p>p - device node phandle</p></li>
<li><p>P - device node path spec (name + &#64;unit)</p></li>
<li><p>F - device node flags</p></li>
<li><p>c - major compatible string</p></li>
<li><p>C - full compatible string</p></li>
</ul>
</div></blockquote>
<p>The separator when using multiple arguments is ‘:’</p>
<p>Examples:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pOF    /foo/bar@0                      - Node full name
%pOFf   /foo/bar@0                      - Same as above
%pOFfp  /foo/bar@0:10                   - Node full name + phandle
%pOFfcF /foo/bar@0:foo,device:--P-      - Node full name +
                                          major compatible string +
                                          node flags
                                                D - dynamic
                                                d - detached
                                                P - Populated
                                                B - Populated bus
</pre></div>
</div>
<p>Passed by reference.</p>
</section>
<section id="fwnode-handles">
<h3>Fwnode handles<a class="headerlink" href="#fwnode-handles" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pfw[fP]
</pre></div>
</div>
<p>For printing information on fwnode handles. The default is to print the full
node name, including the path. The modifiers are functionally equivalent to
%pOF above.</p>
<blockquote>
<div><ul class="simple">
<li><p>f - full name of the node, including the path</p></li>
<li><p>P - the name of the node including an address (if there is one)</p></li>
</ul>
</div></blockquote>
<p>Examples (ACPI):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pfwf   \_SB.PCI0.CIO2.port@1.endpoint@0        - Full node name
%pfwP   endpoint@0                              - Node name
</pre></div>
</div>
<p>Examples (OF):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pfwf   /ocp@68000000/i2c@48072000/camera@10/port/endpoint - Full name
%pfwP   endpoint                                - Node name
</pre></div>
</div>
</section>
<section id="time-and-date">
<h3>Time and date<a class="headerlink" href="#time-and-date" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pt[RT]                 YYYY-mm-ddTHH:MM:SS
%pt[RT]s                YYYY-mm-dd HH:MM:SS
%pt[RT]d                YYYY-mm-dd
%pt[RT]t                HH:MM:SS
%pt[RT][dt][r][s]
</pre></div>
</div>
<p>For printing date and time as represented by:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>R  struct rtc_time structure
T  time64_t type
</pre></div>
</div>
<p>in human readable format.</p>
<p>By default year will be incremented by 1900 and month by 1.
Use %pt[RT]r (raw) to suppress this behaviour.</p>
<p>The %pt[RT]s (space) will override ISO 8601 separator by using ‘ ‘ (space)
instead of ‘T’ (Capital T) between date and time. It won’t have any effect
when date or time is omitted.</p>
<p>Passed by reference.</p>
</section>
<section id="struct-clk">
<h3>struct clk<a class="headerlink" href="#struct-clk" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pC     pll1
%pCn    pll1
</pre></div>
</div>
<p>For printing struct clk structures. %pC and %pCn print the name of the clock
(Common Clock Framework) or a unique 32-bit ID (legacy clock framework).</p>
<p>Passed by reference.</p>
</section>
<section id="bitmap-and-its-derivatives-such-as-cpumask-and-nodemask">
<h3>bitmap and its derivatives such as cpumask and nodemask<a class="headerlink" href="#bitmap-and-its-derivatives-such-as-cpumask-and-nodemask" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%*pb    0779
%*pbl   0,3-6,8-10
</pre></div>
</div>
<p>For printing bitmap and its derivatives such as cpumask and nodemask,
%*pb outputs the bitmap with field width as the number of bits and %*pbl
output the bitmap as range list with field width as the number of bits.</p>
<p>The field width is passed by value, the bitmap is passed by reference.
Helper macros cpumask_pr_args() and nodemask_pr_args() are available to ease
printing cpumask and nodemask.</p>
</section>
<section id="flags-bitfields-such-as-page-flags-gfp-flags">
<h3>Flags bitfields such as page flags, gfp_flags<a class="headerlink" href="#flags-bitfields-such-as-page-flags-gfp-flags" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pGp    0x17ffffc0002036(referenced|uptodate|lru|active|private|node=0|zone=2|lastcpupid=0x1fffff)
%pGg    GFP_USER|GFP_DMA32|GFP_NOWARN
%pGv    read|exec|mayread|maywrite|mayexec|denywrite
</pre></div>
</div>
<p>For printing flags bitfields as a collection of symbolic constants that
would construct the value. The type of flags is given by the third
character. Currently supported are [p]age flags, [v]ma_flags (both
expect <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">*</span></code>) and [g]fp_flags (expects <code class="docutils literal notranslate"><span class="pre">gfp_t</span> <span class="pre">*</span></code>). The flag
names and print order depends on the particular type.</p>
<p>Note that this format should not be used directly in the
<code class="xref c c-func docutils literal notranslate"><span class="pre">TP_printk()</span></code> part of a tracepoint. Instead, use the show_*_flags()
functions from &lt;trace/events/mmflags.h&gt;.</p>
<p>Passed by reference.</p>
</section>
<section id="network-device-features">
<h3>Network device features<a class="headerlink" href="#network-device-features" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pNF    0x000000000000c000
</pre></div>
</div>
<p>For printing netdev_features_t.</p>
<p>Passed by reference.</p>
</section>
<section id="v4l2-and-drm-fourcc-code-pixel-format">
<h3>V4L2 and DRM FourCC code (pixel format)<a class="headerlink" href="#v4l2-and-drm-fourcc-code-pixel-format" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%p4cc
</pre></div>
</div>
<p>Print a FourCC code used by V4L2 or DRM, including format endianness and
its numerical value as hexadecimal.</p>
<p>Passed by reference.</p>
<p>Examples:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%p4cc   BG12 little-endian (0x32314742)
%p4cc   Y10  little-endian (0x20303159)
%p4cc   NV12 big-endian (0xb231564e)
</pre></div>
</div>
</section>
<section id="rust">
<h3>Rust<a class="headerlink" href="#rust" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%pA
</pre></div>
</div>
<p>Only intended to be used from Rust code to format <code class="docutils literal notranslate"><span class="pre">core::fmt::Arguments</span></code>.
Do <em>not</em> use it from C.</p>
</section>
</section>
<section id="thanks">
<h2>Thanks<a class="headerlink" href="#thanks" title="Permalink to this headline">¶</a></h2>
<p>If you add other %p extensions, please extend &lt;lib/test_printf.c&gt; with
one or more test cases, if at all feasible.</p>
<p>Thank you for your cooperation and attention.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to get printk format specifiers right</a><ul>
<li><a class="reference internal" href="#integer-types">Integer types</a></li>
<li><a class="reference internal" href="#pointer-types">Pointer types</a><ul>
<li><a class="reference internal" href="#plain-pointers">Plain Pointers</a></li>
<li><a class="reference internal" href="#error-pointers">Error Pointers</a></li>
<li><a class="reference internal" href="#symbols-function-pointers">Symbols/Function Pointers</a></li>
<li><a class="reference internal" href="#probed-pointers-from-bpf-tracing">Probed Pointers from BPF / tracing</a></li>
<li><a class="reference internal" href="#kernel-pointers">Kernel Pointers</a></li>
<li><a class="reference internal" href="#unmodified-addresses">Unmodified Addresses</a></li>
<li><a class="reference internal" href="#pointer-differences">Pointer Differences</a></li>
<li><a class="reference internal" href="#struct-resources">Struct Resources</a></li>
<li><a class="reference internal" href="#physical-address-types-phys-addr-t">Physical address types phys_addr_t</a></li>
<li><a class="reference internal" href="#dma-address-types-dma-addr-t">DMA address types dma_addr_t</a></li>
<li><a class="reference internal" href="#raw-buffer-as-an-escaped-string">Raw buffer as an escaped string</a></li>
<li><a class="reference internal" href="#raw-buffer-as-a-hex-string">Raw buffer as a hex string</a></li>
<li><a class="reference internal" href="#mac-fddi-addresses">MAC/FDDI addresses</a></li>
<li><a class="reference internal" href="#ipv4-addresses">IPv4 addresses</a></li>
<li><a class="reference internal" href="#ipv6-addresses">IPv6 addresses</a></li>
<li><a class="reference internal" href="#ipv4-ipv6-addresses-generic-with-port-flowinfo-scope">IPv4/IPv6 addresses (generic, with port, flowinfo, scope)</a></li>
<li><a class="reference internal" href="#uuid-guid-addresses">UUID/GUID addresses</a></li>
<li><a class="reference internal" href="#dentry-names">dentry names</a></li>
<li><a class="reference internal" href="#block-device-names">block_device names</a></li>
<li><a class="reference internal" href="#struct-va-format">struct va_format</a></li>
<li><a class="reference internal" href="#device-tree-nodes">Device tree nodes</a></li>
<li><a class="reference internal" href="#fwnode-handles">Fwnode handles</a></li>
<li><a class="reference internal" href="#time-and-date">Time and date</a></li>
<li><a class="reference internal" href="#struct-clk">struct clk</a></li>
<li><a class="reference internal" href="#bitmap-and-its-derivatives-such-as-cpumask-and-nodemask">bitmap and its derivatives such as cpumask and nodemask</a></li>
<li><a class="reference internal" href="#flags-bitfields-such-as-page-flags-gfp-flags">Flags bitfields such as page flags, gfp_flags</a></li>
<li><a class="reference internal" href="#network-device-features">Network device features</a></li>
<li><a class="reference internal" href="#v4l2-and-drm-fourcc-code-pixel-format">V4L2 and DRM FourCC code (pixel format)</a></li>
<li><a class="reference internal" href="#rust">Rust</a></li>
</ul>
</li>
<li><a class="reference internal" href="#thanks">Thanks</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/core-api/printk-formats.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/core-api/printk-formats.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>