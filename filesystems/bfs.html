
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BFS Filesystem for Linux &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="BTRFS" href="btrfs.html" />
    <link rel="prev" title="BeOS filesystem for Linux" href="befs.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="bfs-filesystem-for-linux">
<h1>BFS Filesystem for Linux<a class="headerlink" href="#bfs-filesystem-for-linux" title="Permalink to this headline">¶</a></h1>
<p>The BFS filesystem is used by SCO UnixWare OS for the /stand slice, which
usually contains the kernel image and a few other files required for the
boot process.</p>
<p>In order to access /stand partition under Linux you obviously need to
know the partition number and the kernel must support UnixWare disk slices
(CONFIG_UNIXWARE_DISKLABEL config option). However BFS support does not
depend on having UnixWare disklabel support because one can also mount
BFS filesystem via loopback:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># losetup /dev/loop0 stand.img
# mount -t bfs /dev/loop0 /mnt/stand
</pre></div>
</div>
<p>where stand.img is a file containing the image of BFS filesystem.
When you have finished using it and umounted you need to also deallocate
/dev/loop0 device by:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># losetup -d /dev/loop0
</pre></div>
</div>
<p>You can simplify mounting by just typing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># mount -t bfs -o loop stand.img /mnt/stand
</pre></div>
</div>
<p>this will allocate the first available loopback device (and load loop.o
kernel module if necessary) automatically. If the loopback driver is not
loaded automatically, make sure that you have compiled the module and
that modprobe is functioning. Beware that umount will not deallocate
/dev/loopN device if /etc/mtab file on your system is a symbolic link to
/proc/mounts. You will need to do it manually using “-d” switch of
losetup(8). Read losetup(8) manpage for more info.</p>
<p>To create the BFS image under UnixWare you need to find out first which
slice contains it. The command prtvtoc(1M) is your friend:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># prtvtoc /dev/rdsk/c0b0t0d0s0
</pre></div>
</div>
<p>(assuming your root disk is on target=0, lun=0, bus=0, controller=0). Then you
look for the slice with tag “STAND”, which is usually slice 10. With this
information you can use dd(1) to create the BFS image:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># umount /stand
# dd if=/dev/rdsk/c0b0t0d0sa of=stand.img bs=512
</pre></div>
</div>
<p>Just in case, you can verify that you have done the right thing by checking
the magic number:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># od -Ad -tx4 stand.img | more
</pre></div>
</div>
<p>The first 4 bytes should be 0x1badface.</p>
<p>If you have any patches, questions or suggestions regarding this BFS
implementation please contact the author:</p>
<p>Tigran Aivazian &lt;<a class="reference external" href="mailto:aivazian&#46;tigran&#37;&#52;&#48;gmail&#46;com">aivazian<span>&#46;</span>tigran<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/filesystems/bfs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/filesystems/bfs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>