
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Super Block &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="super-block">
<h1>Super Block<a class="headerlink" href="#super-block" title="Permalink to this headline">¶</a></h1>
<p>The superblock records various information about the enclosing
filesystem, such as block counts, inode counts, supported features,
maintenance information, and more.</p>
<p>If the sparse_super feature flag is set, redundant copies of the
superblock and group descriptors are kept only in the groups whose group
number is either 0 or a power of 3, 5, or 7. If the flag is not set,
redundant copies are kept in all groups.</p>
<p>The superblock checksum is calculated against the superblock structure,
which includes the FS UUID.</p>
<p>The ext4 superblock is laid out as follows in
<code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ext4_super_block</span></code>:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Offset</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x0</p></td>
<td><p>__le32</p></td>
<td><p>s_inodes_count</p></td>
<td><p>Total inode count.</p></td>
</tr>
<tr class="row-odd"><td><p>0x4</p></td>
<td><p>__le32</p></td>
<td><p>s_blocks_count_lo</p></td>
<td><p>Total block count.</p></td>
</tr>
<tr class="row-even"><td><p>0x8</p></td>
<td><p>__le32</p></td>
<td><p>s_r_blocks_count_lo</p></td>
<td><p>This number of blocks can only be allocated by the super-user.</p></td>
</tr>
<tr class="row-odd"><td><p>0xC</p></td>
<td><p>__le32</p></td>
<td><p>s_free_blocks_count_lo</p></td>
<td><p>Free block count.</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>__le32</p></td>
<td><p>s_free_inodes_count</p></td>
<td><p>Free inode count.</p></td>
</tr>
<tr class="row-odd"><td><p>0x14</p></td>
<td><p>__le32</p></td>
<td><p>s_first_data_block</p></td>
<td><p>First data block. This must be at least 1 for 1k-block filesystems and
is typically 0 for all other block sizes.</p></td>
</tr>
<tr class="row-even"><td><p>0x18</p></td>
<td><p>__le32</p></td>
<td><p>s_log_block_size</p></td>
<td><p>Block size is 2 ^ (10 + s_log_block_size).</p></td>
</tr>
<tr class="row-odd"><td><p>0x1C</p></td>
<td><p>__le32</p></td>
<td><p>s_log_cluster_size</p></td>
<td><p>Cluster size is 2 ^ (10 + s_log_cluster_size) blocks if bigalloc is
enabled. Otherwise s_log_cluster_size must equal s_log_block_size.</p></td>
</tr>
<tr class="row-even"><td><p>0x20</p></td>
<td><p>__le32</p></td>
<td><p>s_blocks_per_group</p></td>
<td><p>Blocks per group.</p></td>
</tr>
<tr class="row-odd"><td><p>0x24</p></td>
<td><p>__le32</p></td>
<td><p>s_clusters_per_group</p></td>
<td><p>Clusters per group, if bigalloc is enabled. Otherwise
s_clusters_per_group must equal s_blocks_per_group.</p></td>
</tr>
<tr class="row-even"><td><p>0x28</p></td>
<td><p>__le32</p></td>
<td><p>s_inodes_per_group</p></td>
<td><p>Inodes per group.</p></td>
</tr>
<tr class="row-odd"><td><p>0x2C</p></td>
<td><p>__le32</p></td>
<td><p>s_mtime</p></td>
<td><p>Mount time, in seconds since the epoch.</p></td>
</tr>
<tr class="row-even"><td><p>0x30</p></td>
<td><p>__le32</p></td>
<td><p>s_wtime</p></td>
<td><p>Write time, in seconds since the epoch.</p></td>
</tr>
<tr class="row-odd"><td><p>0x34</p></td>
<td><p>__le16</p></td>
<td><p>s_mnt_count</p></td>
<td><p>Number of mounts since the last fsck.</p></td>
</tr>
<tr class="row-even"><td><p>0x36</p></td>
<td><p>__le16</p></td>
<td><p>s_max_mnt_count</p></td>
<td><p>Number of mounts beyond which a fsck is needed.</p></td>
</tr>
<tr class="row-odd"><td><p>0x38</p></td>
<td><p>__le16</p></td>
<td><p>s_magic</p></td>
<td><p>Magic signature, 0xEF53</p></td>
</tr>
<tr class="row-even"><td><p>0x3A</p></td>
<td><p>__le16</p></td>
<td><p>s_state</p></td>
<td><p>File system state. See <a class="reference internal" href="#super-state">super_state</a> for more info.</p></td>
</tr>
<tr class="row-odd"><td><p>0x3C</p></td>
<td><p>__le16</p></td>
<td><p>s_errors</p></td>
<td><p>Behaviour when detecting errors. See <a class="reference internal" href="#super-errors">super_errors</a> for more info.</p></td>
</tr>
<tr class="row-even"><td><p>0x3E</p></td>
<td><p>__le16</p></td>
<td><p>s_minor_rev_level</p></td>
<td><p>Minor revision level.</p></td>
</tr>
<tr class="row-odd"><td><p>0x40</p></td>
<td><p>__le32</p></td>
<td><p>s_lastcheck</p></td>
<td><p>Time of last check, in seconds since the epoch.</p></td>
</tr>
<tr class="row-even"><td><p>0x44</p></td>
<td><p>__le32</p></td>
<td><p>s_checkinterval</p></td>
<td><p>Maximum time between checks, in seconds.</p></td>
</tr>
<tr class="row-odd"><td><p>0x48</p></td>
<td><p>__le32</p></td>
<td><p>s_creator_os</p></td>
<td><p>Creator OS. See the table <a class="reference internal" href="#super-creator">super_creator</a> for more info.</p></td>
</tr>
<tr class="row-even"><td><p>0x4C</p></td>
<td><p>__le32</p></td>
<td><p>s_rev_level</p></td>
<td><p>Revision level. See the table <a class="reference internal" href="#super-revision">super_revision</a> for more info.</p></td>
</tr>
<tr class="row-odd"><td><p>0x50</p></td>
<td><p>__le16</p></td>
<td><p>s_def_resuid</p></td>
<td><p>Default uid for reserved blocks.</p></td>
</tr>
<tr class="row-even"><td><p>0x52</p></td>
<td><p>__le16</p></td>
<td><p>s_def_resgid</p></td>
<td><p>Default gid for reserved blocks.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>These fields are for EXT4_DYNAMIC_REV superblocks only.</p>
<p>Note: the difference between the compatible feature set and the
incompatible feature set is that if there is a bit set in the
incompatible feature set that the kernel doesn’t know about, it should
refuse to mount the filesystem.</p>
<p>e2fsck’s requirements are more strict; if it doesn’t know
about a feature in either the compatible or incompatible feature set, it
must abort and not try to meddle with things it doesn’t understand…</p>
</td>
</tr>
<tr class="row-even"><td><p>0x54</p></td>
<td><p>__le32</p></td>
<td><p>s_first_ino</p></td>
<td><p>First non-reserved inode.</p></td>
</tr>
<tr class="row-odd"><td><p>0x58</p></td>
<td><p>__le16</p></td>
<td><p>s_inode_size</p></td>
<td><p>Size of inode structure, in bytes.</p></td>
</tr>
<tr class="row-even"><td><p>0x5A</p></td>
<td><p>__le16</p></td>
<td><p>s_block_group_nr</p></td>
<td><p>Block group # of this superblock.</p></td>
</tr>
<tr class="row-odd"><td><p>0x5C</p></td>
<td><p>__le32</p></td>
<td><p>s_feature_compat</p></td>
<td><p>Compatible feature set flags. Kernel can still read/write this fs even
if it doesn’t understand a flag; fsck should not do that. See the
<a class="reference internal" href="#super-compat">super_compat</a> table for more info.</p></td>
</tr>
<tr class="row-even"><td><p>0x60</p></td>
<td><p>__le32</p></td>
<td><p>s_feature_incompat</p></td>
<td><p>Incompatible feature set. If the kernel or fsck doesn’t understand one
of these bits, it should stop. See the <a class="reference internal" href="#super-incompat">super_incompat</a> table for more
info.</p></td>
</tr>
<tr class="row-odd"><td><p>0x64</p></td>
<td><p>__le32</p></td>
<td><p>s_feature_ro_compat</p></td>
<td><p>Readonly-compatible feature set. If the kernel doesn’t understand one of
these bits, it can still mount read-only. See the <a class="reference internal" href="#super-rocompat">super_rocompat</a> table
for more info.</p></td>
</tr>
<tr class="row-even"><td><p>0x68</p></td>
<td><p>__u8</p></td>
<td><p>s_uuid[16]</p></td>
<td><p>128-bit UUID for volume.</p></td>
</tr>
<tr class="row-odd"><td><p>0x78</p></td>
<td><p>char</p></td>
<td><p>s_volume_name[16]</p></td>
<td><p>Volume label.</p></td>
</tr>
<tr class="row-even"><td><p>0x88</p></td>
<td><p>char</p></td>
<td><p>s_last_mounted[64]</p></td>
<td><p>Directory where filesystem was last mounted.</p></td>
</tr>
<tr class="row-odd"><td><p>0xC8</p></td>
<td><p>__le32</p></td>
<td><p>s_algorithm_usage_bitmap</p></td>
<td><p>For compression (Not used in e2fsprogs/Linux)</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>Performance hints.  Directory preallocation should only happen if the
EXT4_FEATURE_COMPAT_DIR_PREALLOC flag is on.</p></td>
</tr>
<tr class="row-odd"><td><p>0xCC</p></td>
<td><p>__u8</p></td>
<td><p>s_prealloc_blocks</p></td>
<td><p>#. of blocks to try to preallocate for … files? (Not used in
e2fsprogs/Linux)</p></td>
</tr>
<tr class="row-even"><td><p>0xCD</p></td>
<td><p>__u8</p></td>
<td><p>s_prealloc_dir_blocks</p></td>
<td><p>#. of blocks to preallocate for directories. (Not used in
e2fsprogs/Linux)</p></td>
</tr>
<tr class="row-odd"><td><p>0xCE</p></td>
<td><p>__le16</p></td>
<td><p>s_reserved_gdt_blocks</p></td>
<td><p>Number of reserved GDT entries for future filesystem expansion.</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>Journalling support is valid only if EXT4_FEATURE_COMPAT_HAS_JOURNAL is
set.</p></td>
</tr>
<tr class="row-odd"><td><p>0xD0</p></td>
<td><p>__u8</p></td>
<td><p>s_journal_uuid[16]</p></td>
<td><p>UUID of journal superblock</p></td>
</tr>
<tr class="row-even"><td><p>0xE0</p></td>
<td><p>__le32</p></td>
<td><p>s_journal_inum</p></td>
<td><p>inode number of journal file.</p></td>
</tr>
<tr class="row-odd"><td><p>0xE4</p></td>
<td><p>__le32</p></td>
<td><p>s_journal_dev</p></td>
<td><p>Device number of journal file, if the external journal feature flag is
set.</p></td>
</tr>
<tr class="row-even"><td><p>0xE8</p></td>
<td><p>__le32</p></td>
<td><p>s_last_orphan</p></td>
<td><p>Start of list of orphaned inodes to delete.</p></td>
</tr>
<tr class="row-odd"><td><p>0xEC</p></td>
<td><p>__le32</p></td>
<td><p>s_hash_seed[4]</p></td>
<td><p>HTREE hash seed.</p></td>
</tr>
<tr class="row-even"><td><p>0xFC</p></td>
<td><p>__u8</p></td>
<td><p>s_def_hash_version</p></td>
<td><p>Default hash algorithm to use for directory hashes. See <a class="reference internal" href="#super-def-hash">super_def_hash</a>
for more info.</p></td>
</tr>
<tr class="row-odd"><td><p>0xFD</p></td>
<td><p>__u8</p></td>
<td><p>s_jnl_backup_type</p></td>
<td><p>If this value is 0 or EXT3_JNL_BACKUP_BLOCKS (1), then the
<code class="docutils literal notranslate"><span class="pre">s_jnl_blocks</span></code> field contains a duplicate copy of the inode’s
<code class="docutils literal notranslate"><span class="pre">i_block[]</span></code> array and <code class="docutils literal notranslate"><span class="pre">i_size</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>0xFE</p></td>
<td><p>__le16</p></td>
<td><p>s_desc_size</p></td>
<td><p>Size of group descriptors, in bytes, if the 64bit incompat feature flag
is set.</p></td>
</tr>
<tr class="row-odd"><td><p>0x100</p></td>
<td><p>__le32</p></td>
<td><p>s_default_mount_opts</p></td>
<td><p>Default mount options. See the <a class="reference internal" href="#super-mountopts">super_mountopts</a> table for more info.</p></td>
</tr>
<tr class="row-even"><td><p>0x104</p></td>
<td><p>__le32</p></td>
<td><p>s_first_meta_bg</p></td>
<td><p>First metablock block group, if the meta_bg feature is enabled.</p></td>
</tr>
<tr class="row-odd"><td><p>0x108</p></td>
<td><p>__le32</p></td>
<td><p>s_mkfs_time</p></td>
<td><p>When the filesystem was created, in seconds since the epoch.</p></td>
</tr>
<tr class="row-even"><td><p>0x10C</p></td>
<td><p>__le32</p></td>
<td><p>s_jnl_blocks[17]</p></td>
<td><p>Backup copy of the journal inode’s <code class="docutils literal notranslate"><span class="pre">i_block[]</span></code> array in the first 15
elements and i_size_high and i_size in the 16th and 17th elements,
respectively.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>64bit support is valid only if EXT4_FEATURE_COMPAT_64BIT is set.</p></td>
</tr>
<tr class="row-even"><td><p>0x150</p></td>
<td><p>__le32</p></td>
<td><p>s_blocks_count_hi</p></td>
<td><p>High 32-bits of the block count.</p></td>
</tr>
<tr class="row-odd"><td><p>0x154</p></td>
<td><p>__le32</p></td>
<td><p>s_r_blocks_count_hi</p></td>
<td><p>High 32-bits of the reserved block count.</p></td>
</tr>
<tr class="row-even"><td><p>0x158</p></td>
<td><p>__le32</p></td>
<td><p>s_free_blocks_count_hi</p></td>
<td><p>High 32-bits of the free block count.</p></td>
</tr>
<tr class="row-odd"><td><p>0x15C</p></td>
<td><p>__le16</p></td>
<td><p>s_min_extra_isize</p></td>
<td><p>All inodes have at least # bytes.</p></td>
</tr>
<tr class="row-even"><td><p>0x15E</p></td>
<td><p>__le16</p></td>
<td><p>s_want_extra_isize</p></td>
<td><p>New inodes should reserve # bytes.</p></td>
</tr>
<tr class="row-odd"><td><p>0x160</p></td>
<td><p>__le32</p></td>
<td><p>s_flags</p></td>
<td><p>Miscellaneous flags. See the <a class="reference internal" href="#super-flags">super_flags</a> table for more info.</p></td>
</tr>
<tr class="row-even"><td><p>0x164</p></td>
<td><p>__le16</p></td>
<td><p>s_raid_stride</p></td>
<td><p>RAID stride. This is the number of logical blocks read from or written
to the disk before moving to the next disk. This affects the placement
of filesystem metadata, which will hopefully make RAID storage faster.</p></td>
</tr>
<tr class="row-odd"><td><p>0x166</p></td>
<td><p>__le16</p></td>
<td><p>s_mmp_interval</p></td>
<td><p>#. seconds to wait in multi-mount prevention (MMP) checking. In theory,
MMP is a mechanism to record in the superblock which host and device
have mounted the filesystem, in order to prevent multiple mounts. This
feature does not seem to be implemented…</p></td>
</tr>
<tr class="row-even"><td><p>0x168</p></td>
<td><p>__le64</p></td>
<td><p>s_mmp_block</p></td>
<td><p>Block # for multi-mount protection data.</p></td>
</tr>
<tr class="row-odd"><td><p>0x170</p></td>
<td><p>__le32</p></td>
<td><p>s_raid_stripe_width</p></td>
<td><p>RAID stripe width. This is the number of logical blocks read from or
written to the disk before coming back to the current disk. This is used
by the block allocator to try to reduce the number of read-modify-write
operations in a RAID5/6.</p></td>
</tr>
<tr class="row-even"><td><p>0x174</p></td>
<td><p>__u8</p></td>
<td><p>s_log_groups_per_flex</p></td>
<td><p>Size of a flexible block group is 2 ^ <code class="docutils literal notranslate"><span class="pre">s_log_groups_per_flex</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>0x175</p></td>
<td><p>__u8</p></td>
<td><p>s_checksum_type</p></td>
<td><p>Metadata checksum algorithm type. The only valid value is 1 (crc32c).</p></td>
</tr>
<tr class="row-even"><td><p>0x176</p></td>
<td><p>__le16</p></td>
<td><p>s_reserved_pad</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x178</p></td>
<td><p>__le64</p></td>
<td><p>s_kbytes_written</p></td>
<td><p>Number of KiB written to this filesystem over its lifetime.</p></td>
</tr>
<tr class="row-even"><td><p>0x180</p></td>
<td><p>__le32</p></td>
<td><p>s_snapshot_inum</p></td>
<td><p>inode number of active snapshot. (Not used in e2fsprogs/Linux.)</p></td>
</tr>
<tr class="row-odd"><td><p>0x184</p></td>
<td><p>__le32</p></td>
<td><p>s_snapshot_id</p></td>
<td><p>Sequential ID of active snapshot. (Not used in e2fsprogs/Linux.)</p></td>
</tr>
<tr class="row-even"><td><p>0x188</p></td>
<td><p>__le64</p></td>
<td><p>s_snapshot_r_blocks_count</p></td>
<td><p>Number of blocks reserved for active snapshot’s future use. (Not used in
e2fsprogs/Linux.)</p></td>
</tr>
<tr class="row-odd"><td><p>0x190</p></td>
<td><p>__le32</p></td>
<td><p>s_snapshot_list</p></td>
<td><p>inode number of the head of the on-disk snapshot list. (Not used in
e2fsprogs/Linux.)</p></td>
</tr>
<tr class="row-even"><td><p>0x194</p></td>
<td><p>__le32</p></td>
<td><p>s_error_count</p></td>
<td><p>Number of errors seen.</p></td>
</tr>
<tr class="row-odd"><td><p>0x198</p></td>
<td><p>__le32</p></td>
<td><p>s_first_error_time</p></td>
<td><p>First time an error happened, in seconds since the epoch.</p></td>
</tr>
<tr class="row-even"><td><p>0x19C</p></td>
<td><p>__le32</p></td>
<td><p>s_first_error_ino</p></td>
<td><p>inode involved in first error.</p></td>
</tr>
<tr class="row-odd"><td><p>0x1A0</p></td>
<td><p>__le64</p></td>
<td><p>s_first_error_block</p></td>
<td><p>Number of block involved of first error.</p></td>
</tr>
<tr class="row-even"><td><p>0x1A8</p></td>
<td><p>__u8</p></td>
<td><p>s_first_error_func[32]</p></td>
<td><p>Name of function where the error happened.</p></td>
</tr>
<tr class="row-odd"><td><p>0x1C8</p></td>
<td><p>__le32</p></td>
<td><p>s_first_error_line</p></td>
<td><p>Line number where error happened.</p></td>
</tr>
<tr class="row-even"><td><p>0x1CC</p></td>
<td><p>__le32</p></td>
<td><p>s_last_error_time</p></td>
<td><p>Time of most recent error, in seconds since the epoch.</p></td>
</tr>
<tr class="row-odd"><td><p>0x1D0</p></td>
<td><p>__le32</p></td>
<td><p>s_last_error_ino</p></td>
<td><p>inode involved in most recent error.</p></td>
</tr>
<tr class="row-even"><td><p>0x1D4</p></td>
<td><p>__le32</p></td>
<td><p>s_last_error_line</p></td>
<td><p>Line number where most recent error happened.</p></td>
</tr>
<tr class="row-odd"><td><p>0x1D8</p></td>
<td><p>__le64</p></td>
<td><p>s_last_error_block</p></td>
<td><p>Number of block involved in most recent error.</p></td>
</tr>
<tr class="row-even"><td><p>0x1E0</p></td>
<td><p>__u8</p></td>
<td><p>s_last_error_func[32]</p></td>
<td><p>Name of function where the most recent error happened.</p></td>
</tr>
<tr class="row-odd"><td><p>0x200</p></td>
<td><p>__u8</p></td>
<td><p>s_mount_opts[64]</p></td>
<td><p>ASCIIZ string of mount options.</p></td>
</tr>
<tr class="row-even"><td><p>0x240</p></td>
<td><p>__le32</p></td>
<td><p>s_usr_quota_inum</p></td>
<td><p>Inode number of user <a class="reference external" href="quota">quota</a> file.</p></td>
</tr>
<tr class="row-odd"><td><p>0x244</p></td>
<td><p>__le32</p></td>
<td><p>s_grp_quota_inum</p></td>
<td><p>Inode number of group <a class="reference external" href="quota">quota</a> file.</p></td>
</tr>
<tr class="row-even"><td><p>0x248</p></td>
<td><p>__le32</p></td>
<td><p>s_overhead_blocks</p></td>
<td><p>Overhead blocks/clusters in fs. (Huh? This field is always zero, which
means that the kernel calculates it dynamically.)</p></td>
</tr>
<tr class="row-odd"><td><p>0x24C</p></td>
<td><p>__le32</p></td>
<td><p>s_backup_bgs[2]</p></td>
<td><p>Block groups containing superblock backups (if sparse_super2)</p></td>
</tr>
<tr class="row-even"><td><p>0x254</p></td>
<td><p>__u8</p></td>
<td><p>s_encrypt_algos[4]</p></td>
<td><p>Encryption algorithms in use. There can be up to four algorithms in use
at any time; valid algorithm codes are given in the <a class="reference internal" href="#super-encrypt">super_encrypt</a> table
below.</p></td>
</tr>
<tr class="row-odd"><td><p>0x258</p></td>
<td><p>__u8</p></td>
<td><p>s_encrypt_pw_salt[16]</p></td>
<td><p>Salt for the string2key algorithm for encryption.</p></td>
</tr>
<tr class="row-even"><td><p>0x268</p></td>
<td><p>__le32</p></td>
<td><p>s_lpf_ino</p></td>
<td><p>Inode number of lost+found</p></td>
</tr>
<tr class="row-odd"><td><p>0x26C</p></td>
<td><p>__le32</p></td>
<td><p>s_prj_quota_inum</p></td>
<td><p>Inode that tracks project quotas.</p></td>
</tr>
<tr class="row-even"><td><p>0x270</p></td>
<td><p>__le32</p></td>
<td><p>s_checksum_seed</p></td>
<td><p>Checksum seed used for metadata_csum calculations. This value is
crc32c(~0, $orig_fs_uuid).</p></td>
</tr>
<tr class="row-odd"><td><p>0x274</p></td>
<td><p>__u8</p></td>
<td><p>s_wtime_hi</p></td>
<td><p>Upper 8 bits of the s_wtime field.</p></td>
</tr>
<tr class="row-even"><td><p>0x275</p></td>
<td><p>__u8</p></td>
<td><p>s_mtime_hi</p></td>
<td><p>Upper 8 bits of the s_mtime field.</p></td>
</tr>
<tr class="row-odd"><td><p>0x276</p></td>
<td><p>__u8</p></td>
<td><p>s_mkfs_time_hi</p></td>
<td><p>Upper 8 bits of the s_mkfs_time field.</p></td>
</tr>
<tr class="row-even"><td><p>0x277</p></td>
<td><p>__u8</p></td>
<td><p>s_lastcheck_hi</p></td>
<td><p>Upper 8 bits of the s_lastcheck field.</p></td>
</tr>
<tr class="row-odd"><td><p>0x278</p></td>
<td><p>__u8</p></td>
<td><p>s_first_error_time_hi</p></td>
<td><p>Upper 8 bits of the s_first_error_time field.</p></td>
</tr>
<tr class="row-even"><td><p>0x279</p></td>
<td><p>__u8</p></td>
<td><p>s_last_error_time_hi</p></td>
<td><p>Upper 8 bits of the s_last_error_time field.</p></td>
</tr>
<tr class="row-odd"><td><p>0x27A</p></td>
<td><p>__u8</p></td>
<td><p>s_pad[2]</p></td>
<td><p>Zero padding.</p></td>
</tr>
<tr class="row-even"><td><p>0x27C</p></td>
<td><p>__le16</p></td>
<td><p>s_encoding</p></td>
<td><p>Filename charset encoding.</p></td>
</tr>
<tr class="row-odd"><td><p>0x27E</p></td>
<td><p>__le16</p></td>
<td><p>s_encoding_flags</p></td>
<td><p>Filename charset encoding flags.</p></td>
</tr>
<tr class="row-even"><td><p>0x280</p></td>
<td><p>__le32</p></td>
<td><p>s_orphan_file_inum</p></td>
<td><p>Orphan file inode number.</p></td>
</tr>
<tr class="row-odd"><td><p>0x284</p></td>
<td><p>__le32</p></td>
<td><p>s_reserved[94]</p></td>
<td><p>Padding to the end of the block.</p></td>
</tr>
<tr class="row-even"><td><p>0x3FC</p></td>
<td><p>__le32</p></td>
<td><p>s_checksum</p></td>
<td><p>Superblock checksum.</p></td>
</tr>
</tbody>
</table>
<p id="super-state">The superblock state is some combination of the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x0001</p></td>
<td><p>Cleanly umounted</p></td>
</tr>
<tr class="row-odd"><td><p>0x0002</p></td>
<td><p>Errors detected</p></td>
</tr>
<tr class="row-even"><td><p>0x0004</p></td>
<td><p>Orphans being recovered</p></td>
</tr>
</tbody>
</table>
<p id="super-errors">The superblock error policy is one of the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Continue</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Remount read-only</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Panic</p></td>
</tr>
</tbody>
</table>
<p id="super-creator">The filesystem creator is one of the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Linux</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Hurd</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Masix</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>FreeBSD</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Lites</p></td>
</tr>
</tbody>
</table>
<p id="super-revision">The superblock revision is one of the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Original format</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>v2 format w/ dynamic inode sizes</p></td>
</tr>
</tbody>
</table>
<p>Note that <code class="docutils literal notranslate"><span class="pre">EXT4_DYNAMIC_REV</span></code> refers to a revision 1 or newer filesystem.</p>
<p id="super-compat">The superblock compatible features field is a combination of any of the
following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x1</p></td>
<td><p>Directory preallocation (COMPAT_DIR_PREALLOC).</p></td>
</tr>
<tr class="row-odd"><td><p>0x2</p></td>
<td><p>“imagic inodes”. Not clear from the code what this does
(COMPAT_IMAGIC_INODES).</p></td>
</tr>
<tr class="row-even"><td><p>0x4</p></td>
<td><p>Has a journal (COMPAT_HAS_JOURNAL).</p></td>
</tr>
<tr class="row-odd"><td><p>0x8</p></td>
<td><p>Supports extended attributes (COMPAT_EXT_ATTR).</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>Has reserved GDT blocks for filesystem expansion
(COMPAT_RESIZE_INODE). Requires RO_COMPAT_SPARSE_SUPER.</p></td>
</tr>
<tr class="row-odd"><td><p>0x20</p></td>
<td><p>Has directory indices (COMPAT_DIR_INDEX).</p></td>
</tr>
<tr class="row-even"><td><p>0x40</p></td>
<td><p>“Lazy BG”. Not in Linux kernel, seems to have been for uninitialized
block groups? (COMPAT_LAZY_BG)</p></td>
</tr>
<tr class="row-odd"><td><p>0x80</p></td>
<td><p>“Exclude inode”. Not used. (COMPAT_EXCLUDE_INODE).</p></td>
</tr>
<tr class="row-even"><td><p>0x100</p></td>
<td><p>“Exclude bitmap”. Seems to be used to indicate the presence of
snapshot-related exclude bitmaps? Not defined in kernel or used in
e2fsprogs (COMPAT_EXCLUDE_BITMAP).</p></td>
</tr>
<tr class="row-odd"><td><p>0x200</p></td>
<td><p>Sparse Super Block, v2. If this flag is set, the SB field s_backup_bgs
points to the two block groups that contain backup superblocks
(COMPAT_SPARSE_SUPER2).</p></td>
</tr>
<tr class="row-even"><td><p>0x400</p></td>
<td><p>Fast commits supported. Although fast commits blocks are
backward incompatible, fast commit blocks are not always
present in the journal. If fast commit blocks are present in
the journal, JBD2 incompat feature
(JBD2_FEATURE_INCOMPAT_FAST_COMMIT) gets
set (COMPAT_FAST_COMMIT).</p></td>
</tr>
<tr class="row-odd"><td><p>0x1000</p></td>
<td><p>Orphan file allocated. This is the special file for more efficient
tracking of unlinked but still open inodes. When there may be any
entries in the file, we additionally set proper rocompat feature
(RO_COMPAT_ORPHAN_PRESENT).</p></td>
</tr>
</tbody>
</table>
<p id="super-incompat">The superblock incompatible features field is a combination of any of the
following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x1</p></td>
<td><p>Compression (INCOMPAT_COMPRESSION).</p></td>
</tr>
<tr class="row-odd"><td><p>0x2</p></td>
<td><p>Directory entries record the file type. See ext4_dir_entry_2 below
(INCOMPAT_FILETYPE).</p></td>
</tr>
<tr class="row-even"><td><p>0x4</p></td>
<td><p>Filesystem needs recovery (INCOMPAT_RECOVER).</p></td>
</tr>
<tr class="row-odd"><td><p>0x8</p></td>
<td><p>Filesystem has a separate journal device (INCOMPAT_JOURNAL_DEV).</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>Meta block groups. See the earlier discussion of this feature
(INCOMPAT_META_BG).</p></td>
</tr>
<tr class="row-odd"><td><p>0x40</p></td>
<td><p>Files in this filesystem use extents (INCOMPAT_EXTENTS).</p></td>
</tr>
<tr class="row-even"><td><p>0x80</p></td>
<td><p>Enable a filesystem size of 2^64 blocks (INCOMPAT_64BIT).</p></td>
</tr>
<tr class="row-odd"><td><p>0x100</p></td>
<td><p>Multiple mount protection (INCOMPAT_MMP).</p></td>
</tr>
<tr class="row-even"><td><p>0x200</p></td>
<td><p>Flexible block groups. See the earlier discussion of this feature
(INCOMPAT_FLEX_BG).</p></td>
</tr>
<tr class="row-odd"><td><p>0x400</p></td>
<td><p>Inodes can be used to store large extended attribute values
(INCOMPAT_EA_INODE).</p></td>
</tr>
<tr class="row-even"><td><p>0x1000</p></td>
<td><p>Data in directory entry (INCOMPAT_DIRDATA). (Not implemented?)</p></td>
</tr>
<tr class="row-odd"><td><p>0x2000</p></td>
<td><p>Metadata checksum seed is stored in the superblock. This feature enables
the administrator to change the UUID of a metadata_csum filesystem
while the filesystem is mounted; without it, the checksum definition
requires all metadata blocks to be rewritten (INCOMPAT_CSUM_SEED).</p></td>
</tr>
<tr class="row-even"><td><p>0x4000</p></td>
<td><p>Large directory &gt;2GB or 3-level htree (INCOMPAT_LARGEDIR). Prior to
this feature, directories could not be larger than 4GiB and could not
have an htree more than 2 levels deep. If this feature is enabled,
directories can be larger than 4GiB and have a maximum htree depth of 3.</p></td>
</tr>
<tr class="row-odd"><td><p>0x8000</p></td>
<td><p>Data in inode (INCOMPAT_INLINE_DATA).</p></td>
</tr>
<tr class="row-even"><td><p>0x10000</p></td>
<td><p>Encrypted inodes are present on the filesystem. (INCOMPAT_ENCRYPT).</p></td>
</tr>
</tbody>
</table>
<p id="super-rocompat">The superblock read-only compatible features field is a combination of any of
the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x1</p></td>
<td><p>Sparse superblocks. See the earlier discussion of this feature
(RO_COMPAT_SPARSE_SUPER).</p></td>
</tr>
<tr class="row-odd"><td><p>0x2</p></td>
<td><p>This filesystem has been used to store a file greater than 2GiB
(RO_COMPAT_LARGE_FILE).</p></td>
</tr>
<tr class="row-even"><td><p>0x4</p></td>
<td><p>Not used in kernel or e2fsprogs (RO_COMPAT_BTREE_DIR).</p></td>
</tr>
<tr class="row-odd"><td><p>0x8</p></td>
<td><p>This filesystem has files whose sizes are represented in units of
logical blocks, not 512-byte sectors. This implies a very large file
indeed! (RO_COMPAT_HUGE_FILE)</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>Group descriptors have checksums. In addition to detecting corruption,
this is useful for lazy formatting with uninitialized groups
(RO_COMPAT_GDT_CSUM).</p></td>
</tr>
<tr class="row-odd"><td><p>0x20</p></td>
<td><p>Indicates that the old ext3 32,000 subdirectory limit no longer applies
(RO_COMPAT_DIR_NLINK). A directory’s i_links_count will be set to 1
if it is incremented past 64,999.</p></td>
</tr>
<tr class="row-even"><td><p>0x40</p></td>
<td><p>Indicates that large inodes exist on this filesystem
(RO_COMPAT_EXTRA_ISIZE).</p></td>
</tr>
<tr class="row-odd"><td><p>0x80</p></td>
<td><p>This filesystem has a snapshot (RO_COMPAT_HAS_SNAPSHOT).</p></td>
</tr>
<tr class="row-even"><td><p>0x100</p></td>
<td><p><a class="reference external" href="Quota">Quota</a> (RO_COMPAT_QUOTA).</p></td>
</tr>
<tr class="row-odd"><td><p>0x200</p></td>
<td><p>This filesystem supports “bigalloc”, which means that file extents are
tracked in units of clusters (of blocks) instead of blocks
(RO_COMPAT_BIGALLOC).</p></td>
</tr>
<tr class="row-even"><td><p>0x400</p></td>
<td><p>This filesystem supports metadata checksumming.
(RO_COMPAT_METADATA_CSUM; implies RO_COMPAT_GDT_CSUM, though
GDT_CSUM must not be set)</p></td>
</tr>
<tr class="row-odd"><td><p>0x800</p></td>
<td><p>Filesystem supports replicas. This feature is neither in the kernel nor
e2fsprogs. (RO_COMPAT_REPLICA)</p></td>
</tr>
<tr class="row-even"><td><p>0x1000</p></td>
<td><p>Read-only filesystem image; the kernel will not mount this image
read-write and most tools will refuse to write to the image.
(RO_COMPAT_READONLY)</p></td>
</tr>
<tr class="row-odd"><td><p>0x2000</p></td>
<td><p>Filesystem tracks project quotas. (RO_COMPAT_PROJECT)</p></td>
</tr>
<tr class="row-even"><td><p>0x8000</p></td>
<td><p>Verity inodes may be present on the filesystem. (RO_COMPAT_VERITY)</p></td>
</tr>
<tr class="row-odd"><td><p>0x10000</p></td>
<td><p>Indicates orphan file may have valid orphan entries and thus we need
to clean them up when mounting the filesystem
(RO_COMPAT_ORPHAN_PRESENT).</p></td>
</tr>
</tbody>
</table>
<p id="super-def-hash">The <code class="docutils literal notranslate"><span class="pre">s_def_hash_version</span></code> field is one of the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x0</p></td>
<td><p>Legacy.</p></td>
</tr>
<tr class="row-odd"><td><p>0x1</p></td>
<td><p>Half MD4.</p></td>
</tr>
<tr class="row-even"><td><p>0x2</p></td>
<td><p>Tea.</p></td>
</tr>
<tr class="row-odd"><td><p>0x3</p></td>
<td><p>Legacy, unsigned.</p></td>
</tr>
<tr class="row-even"><td><p>0x4</p></td>
<td><p>Half MD4, unsigned.</p></td>
</tr>
<tr class="row-odd"><td><p>0x5</p></td>
<td><p>Tea, unsigned.</p></td>
</tr>
</tbody>
</table>
<p id="super-mountopts">The <code class="docutils literal notranslate"><span class="pre">s_default_mount_opts</span></code> field is any combination of the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x0001</p></td>
<td><p>Print debugging info upon (re)mount. (EXT4_DEFM_DEBUG)</p></td>
</tr>
<tr class="row-odd"><td><p>0x0002</p></td>
<td><p>New files take the gid of the containing directory (instead of the fsgid
of the current process). (EXT4_DEFM_BSDGROUPS)</p></td>
</tr>
<tr class="row-even"><td><p>0x0004</p></td>
<td><p>Support userspace-provided extended attributes. (EXT4_DEFM_XATTR_USER)</p></td>
</tr>
<tr class="row-odd"><td><p>0x0008</p></td>
<td><p>Support POSIX access control lists (ACLs). (EXT4_DEFM_ACL)</p></td>
</tr>
<tr class="row-even"><td><p>0x0010</p></td>
<td><p>Do not support 32-bit UIDs. (EXT4_DEFM_UID16)</p></td>
</tr>
<tr class="row-odd"><td><p>0x0020</p></td>
<td><p>All data and metadata are commited to the journal.
(EXT4_DEFM_JMODE_DATA)</p></td>
</tr>
<tr class="row-even"><td><p>0x0040</p></td>
<td><p>All data are flushed to the disk before metadata are committed to the
journal. (EXT4_DEFM_JMODE_ORDERED)</p></td>
</tr>
<tr class="row-odd"><td><p>0x0060</p></td>
<td><p>Data ordering is not preserved; data may be written after the metadata
has been written. (EXT4_DEFM_JMODE_WBACK)</p></td>
</tr>
<tr class="row-even"><td><p>0x0100</p></td>
<td><p>Disable write flushes. (EXT4_DEFM_NOBARRIER)</p></td>
</tr>
<tr class="row-odd"><td><p>0x0200</p></td>
<td><p>Track which blocks in a filesystem are metadata and therefore should not
be used as data blocks. This option will be enabled by default on 3.18,
hopefully. (EXT4_DEFM_BLOCK_VALIDITY)</p></td>
</tr>
<tr class="row-even"><td><p>0x0400</p></td>
<td><p>Enable DISCARD support, where the storage device is told about blocks
becoming unused. (EXT4_DEFM_DISCARD)</p></td>
</tr>
<tr class="row-odd"><td><p>0x0800</p></td>
<td><p>Disable delayed allocation. (EXT4_DEFM_NODELALLOC)</p></td>
</tr>
</tbody>
</table>
<p id="super-flags">The <code class="docutils literal notranslate"><span class="pre">s_flags</span></code> field is any combination of the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x0001</p></td>
<td><p>Signed directory hash in use.</p></td>
</tr>
<tr class="row-odd"><td><p>0x0002</p></td>
<td><p>Unsigned directory hash in use.</p></td>
</tr>
<tr class="row-even"><td><p>0x0004</p></td>
<td><p>To test development code.</p></td>
</tr>
</tbody>
</table>
<p id="super-encrypt">The <code class="docutils literal notranslate"><span class="pre">s_encrypt_algos</span></code> list can contain any of the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Invalid algorithm (ENCRYPTION_MODE_INVALID).</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>256-bit AES in XTS mode (ENCRYPTION_MODE_AES_256_XTS).</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>256-bit AES in GCM mode (ENCRYPTION_MODE_AES_256_GCM).</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>256-bit AES in CBC mode (ENCRYPTION_MODE_AES_256_CBC).</p></td>
</tr>
</tbody>
</table>
<p>Total size of the superblock is 1024 bytes.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/filesystems/ext4/super.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/filesystems/ext4/super.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>