
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Acorn Disc Filing System - ADFS &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overview of Amiga Filesystems" href="affs.html" />
    <link rel="prev" title="v9fs: Plan 9 Resource Sharing for Linux" href="9p.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="acorn-disc-filing-system-adfs">
<h1>Acorn Disc Filing System - ADFS<a class="headerlink" href="#acorn-disc-filing-system-adfs" title="Permalink to this headline">¶</a></h1>
<section id="filesystems-supported-by-adfs">
<h2>Filesystems supported by ADFS<a class="headerlink" href="#filesystems-supported-by-adfs" title="Permalink to this headline">¶</a></h2>
<p>The ADFS module supports the following Filecore formats which have:</p>
<ul class="simple">
<li><p>new maps</p></li>
<li><p>new directories or big directories</p></li>
</ul>
<p>In terms of the named formats, this means we support:</p>
<ul class="simple">
<li><p>E and E+, with or without boot block</p></li>
<li><p>F and F+</p></li>
</ul>
<p>We fully support reading files from these filesystems, and writing to
existing files within their existing allocation.  Essentially, we do
not support changing any of the filesystem metadata.</p>
<p>This is intended to support loopback mounted Linux native filesystems
on a RISC OS Filecore filesystem, but will allow the data within files
to be changed.</p>
<p>If write support (ADFS_FS_RW) is configured, we allow rudimentary
directory updates, specifically updating the access mode and timestamp.</p>
</section>
<section id="mount-options-for-adfs">
<h2>Mount options for ADFS<a class="headerlink" href="#mount-options-for-adfs" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>uid=nnn</p></td>
<td><p>All files in the partition will be owned by
user id nnn.  Default 0 (root).</p></td>
</tr>
<tr class="row-even"><td><p>gid=nnn</p></td>
<td><p>All files in the partition will be in group
nnn.  Default 0 (root).</p></td>
</tr>
<tr class="row-odd"><td><p>ownmask=nnn</p></td>
<td><p>The permission mask for ADFS ‘owner’ permissions
will be nnn.  Default 0700.</p></td>
</tr>
<tr class="row-even"><td><p>othmask=nnn</p></td>
<td><p>The permission mask for ADFS ‘other’ permissions
will be nnn.  Default 0077.</p></td>
</tr>
<tr class="row-odd"><td><p>ftsuffix=n</p></td>
<td><p>When ftsuffix=0, no file type suffix will be applied.
When ftsuffix=1, a hexadecimal suffix corresponding to
the RISC OS file type will be added.  Default 0.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="mapping-of-adfs-permissions-to-linux-permissions">
<h2>Mapping of ADFS permissions to Linux permissions<a class="headerlink" href="#mapping-of-adfs-permissions-to-linux-permissions" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>ADFS permissions consist of the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>Owner read</p></li>
<li><p>Owner write</p></li>
<li><p>Other read</p></li>
<li><p>Other write</p></li>
</ul>
</div></blockquote>
<p>(In older versions, an ‘execute’ permission did exist, but this
does not hold the same meaning as the Linux ‘execute’ permission
and is now obsolete).</p>
<p>The mapping is performed as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    Owner read                              -&gt; -r--r--r--
    Owner write                             -&gt; --w--w---w
    Owner read and filetype UnixExec        -&gt; ---x--x--x
These are then masked by ownmask, eg 700    -&gt; -rwx------
    Possible owner mode permissions         -&gt; -rwx------

    Other read                              -&gt; -r--r--r--
    Other write                             -&gt; --w--w--w-
    Other read and filetype UnixExec        -&gt; ---x--x--x
These are then masked by othmask, eg 077    -&gt; ----rwxrwx
    Possible other mode permissions         -&gt; ----rwxrwx
</pre></div>
</div>
<p>Hence, with the default masks, if a file is owner read/write, and
not a UnixExec filetype, then the permissions will be:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-rw-------
</pre></div>
</div>
<p>However, if the masks were ownmask=0770,othmask=0007, then this would
be modified to:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-rw-rw----
</pre></div>
</div>
<p>There is no restriction on what you can do with these masks.  You may
wish that either read bits give read access to the file for all, but
keep the default write protection (ownmask=0755,othmask=0577):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-rw-r--r--
</pre></div>
</div>
<p>You can therefore tailor the permission translation to whatever you
desire the permissions should be under Linux.</p>
</div></blockquote>
</section>
<section id="risc-os-file-type-suffix">
<h2>RISC OS file type suffix<a class="headerlink" href="#risc-os-file-type-suffix" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>RISC OS file types are stored in bits 19..8 of the file load address.</p>
<p>To enable non-RISC OS systems to be used to store files without losing
file type information, a file naming convention was devised (initially
for use with NFS) such that a hexadecimal suffix of the form ,xyz
denoted the file type: e.g. BasicFile,ffb is a BASIC (0xffb) file.  This
naming convention is now also used by RISC OS emulators such as RPCEmu.</p>
<p>Mounting an ADFS disc with option ftsuffix=1 will cause appropriate file
type suffixes to be appended to file names read from a directory.  If the
ftsuffix option is zero or omitted, no file type suffixes will be added.</p>
</div></blockquote>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Acorn Disc Filing System - ADFS</a><ul>
<li><a class="reference internal" href="#filesystems-supported-by-adfs">Filesystems supported by ADFS</a></li>
<li><a class="reference internal" href="#mount-options-for-adfs">Mount options for ADFS</a></li>
<li><a class="reference internal" href="#mapping-of-adfs-permissions-to-linux-permissions">Mapping of ADFS permissions to Linux permissions</a></li>
<li><a class="reference internal" href="#risc-os-file-type-suffix">RISC OS file type suffix</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/filesystems/adfs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/filesystems/adfs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>