
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>TDX Guest API Documentation &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Hyper-V Enlightenments" href="../hyperv/index.html" />
    <link rel="prev" title="The Definitive SEV Guest API Documentation" href="sev-guest.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tdx-guest-api-documentation">
<h1>TDX Guest API Documentation<a class="headerlink" href="#tdx-guest-api-documentation" title="Permalink to this headline">¶</a></h1>
<section id="general-description">
<h2>1. General description<a class="headerlink" href="#general-description" title="Permalink to this headline">¶</a></h2>
<p>The TDX guest driver exposes IOCTL interfaces via the /dev/tdx-guest misc
device to allow userspace to get certain TDX guest-specific details.</p>
</section>
<section id="api-description">
<h2>2. API description<a class="headerlink" href="#api-description" title="Permalink to this headline">¶</a></h2>
<p>In this section, for each supported IOCTL, the following information is
provided along with a generic description.</p>
<dl class="field-list simple">
<dt class="field-odd">Input parameters</dt>
<dd class="field-odd"><p>Parameters passed to the IOCTL and related details.</p>
</dd>
<dt class="field-even">Output</dt>
<dd class="field-even"><p>Details about output data and return value (with details about
the non common error values).</p>
</dd>
</dl>
<section id="tdx-cmd-get-report0">
<h3>2.1 TDX_CMD_GET_REPORT0<a class="headerlink" href="#tdx-cmd-get-report0" title="Permalink to this headline">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">Input parameters</dt>
<dd class="field-odd"><p>struct tdx_report_req</p>
</dd>
<dt class="field-even">Output</dt>
<dd class="field-even"><p>Upon successful execution, TDREPORT data is copied to
tdx_report_req.tdreport and return 0. Return -EINVAL for invalid
operands, -EIO on TDCALL failure or standard error number on other
common failures.</p>
</dd>
</dl>
<p>The TDX_CMD_GET_REPORT0 IOCTL can be used by the attestation software to get
the TDREPORT0 (a.k.a. TDREPORT subtype 0) from the TDX module using
TDCALL[TDG.MR.REPORT].</p>
<p>A subtype index is added at the end of this IOCTL CMD to uniquely identify the
subtype-specific TDREPORT request. Although the subtype option is mentioned in
the TDX Module v1.0 specification, section titled “TDG.MR.REPORT”, it is not
currently used, and it expects this value to be 0. So to keep the IOCTL
implementation simple, the subtype option was not included as part of the input
ABI. However, in the future, if the TDX Module supports more than one subtype,
a new IOCTL CMD will be created to handle it. To keep the IOCTL naming
consistent, a subtype index is added as part of the IOCTL CMD.</p>
</section>
<section id="reference">
<h3>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h3>
<p>TDX reference material is collected here:</p>
<p><a class="reference external" href="https://www.intel.com/content/www/us/en/developer/articles/technical/intel-trust-domain-extensions.html">https://www.intel.com/content/www/us/en/developer/articles/technical/intel-trust-domain-extensions.html</a></p>
<p>The driver is based on TDX module specification v1.0 and TDX GHCI specification v1.0.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">TDX Guest API Documentation</a><ul>
<li><a class="reference internal" href="#general-description">1. General description</a></li>
<li><a class="reference internal" href="#api-description">2. API description</a><ul>
<li><a class="reference internal" href="#tdx-cmd-get-report0">2.1 TDX_CMD_GET_REPORT0</a></li>
<li><a class="reference internal" href="#reference">Reference</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/virt/coco/tdx-guest.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/virt/coco/tdx-guest.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>