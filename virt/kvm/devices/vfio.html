
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>VFIO virtual device &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Generic vm interface" href="vm.html" />
    <link rel="prev" title="Generic vcpu interface" href="vcpu.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="vfio-virtual-device">
<h1>VFIO virtual device<a class="headerlink" href="#vfio-virtual-device" title="Permalink to this headline">Â¶</a></h1>
<p>Device types supported:</p>
<blockquote>
<div><ul class="simple">
<li><p>KVM_DEV_TYPE_VFIO</p></li>
</ul>
</div></blockquote>
<p>Only one VFIO instance may be created per VM.  The created device
tracks VFIO groups in use by the VM and features of those groups
important to the correctness and acceleration of the VM.  As groups
are enabled and disabled for use by the VM, KVM should be updated
about their presence.  When registered with KVM, a reference to the
VFIO-group is held by KVM.</p>
<dl>
<dt>Groups:</dt><dd><p>KVM_DEV_VFIO_GROUP</p>
</dd>
<dt>KVM_DEV_VFIO_GROUP attributes:</dt><dd><dl>
<dt>KVM_DEV_VFIO_GROUP_ADD: Add a VFIO group to VFIO-KVM device tracking</dt><dd><p>kvm_device_attr.addr points to an int32_t file descriptor
for the VFIO group.</p>
</dd>
<dt>KVM_DEV_VFIO_GROUP_DEL: Remove a VFIO group from VFIO-KVM device tracking</dt><dd><p>kvm_device_attr.addr points to an int32_t file descriptor
for the VFIO group.</p>
</dd>
<dt>KVM_DEV_VFIO_GROUP_SET_SPAPR_TCE: attaches a guest visible TCE table</dt><dd><p>allocated by sPAPR KVM.
kvm_device_attr.addr points to a struct:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct kvm_vfio_spapr_tce {
        __s32   groupfd;
        __s32   tablefd;
};
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p>&#64;groupfd is a file descriptor for a VFIO group;</p></li>
<li><p>&#64;tablefd is a file descriptor for a TCE table allocated via
KVM_CREATE_SPAPR_TCE.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/virt/kvm/devices/vfio.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/virt/kvm/devices/vfio.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>