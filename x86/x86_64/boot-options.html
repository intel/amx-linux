
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>28.1. AMD64 Specific Boot Options &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="28.2. General note on [U]EFI x86_64 support" href="uefi.html" />
    <link rel="prev" title="28. x86_64 Support" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="amd64-specific-boot-options">
<h1><span class="section-number">28.1. </span>AMD64 Specific Boot Options<a class="headerlink" href="#amd64-specific-boot-options" title="Permalink to this headline">¶</a></h1>
<p>There are many others (usually documented in driver documentation), but
only the AMD64 specific ones are listed here.</p>
<section id="machine-check">
<h2><span class="section-number">28.1.1. </span>Machine check<a class="headerlink" href="#machine-check" title="Permalink to this headline">¶</a></h2>
<p>Please see <a class="reference internal" href="machinecheck.html"><span class="doc">Configurable sysfs parameters for the x86-64 machine check code</span></a> for sysfs runtime tunables.</p>
<blockquote>
<div><dl class="simple">
<dt>mce=off</dt><dd><p>Disable machine check</p>
</dd>
<dt>mce=no_cmci</dt><dd><p>Disable CMCI(Corrected Machine Check Interrupt) that
Intel processor supports.  Usually this disablement is
not recommended, but it might be handy if your hardware
is misbehaving.
Note that you’ll get more problems without CMCI than with
due to the shared banks, i.e. you might get duplicated
error logs.</p>
</dd>
<dt>mce=dont_log_ce</dt><dd><p>Don’t make logs for corrected errors.  All events reported
as corrected are silently cleared by OS.
This option will be useful if you have no interest in any
of corrected errors.</p>
</dd>
<dt>mce=ignore_ce</dt><dd><p>Disable features for corrected errors, e.g. polling timer
and CMCI.  All events reported as corrected are not cleared
by OS and remained in its error banks.
Usually this disablement is not recommended, however if
there is an agent checking/clearing corrected errors
(e.g. BIOS or hardware monitoring applications), conflicting
with OS’s error handling, and you cannot deactivate the agent,
then this option will be a help.</p>
</dd>
<dt>mce=no_lmce</dt><dd><p>Do not opt-in to Local MCE delivery. Use legacy method
to broadcast MCEs.</p>
</dd>
<dt>mce=bootlog</dt><dd><p>Enable logging of machine checks left over from booting.
Disabled by default on AMD Fam10h and older because some BIOS
leave bogus ones.
If your BIOS doesn’t do that it’s a good idea to enable though
to make sure you log even machine check events that result
in a reboot. On Intel systems it is enabled by default.</p>
</dd>
<dt>mce=nobootlog</dt><dd><p>Disable boot machine check logging.</p>
</dd>
<dt>mce=monarchtimeout (number)</dt><dd><p>monarchtimeout:
Sets the time in us to wait for other CPUs on machine checks. 0
to disable.</p>
</dd>
<dt>mce=bios_cmci_threshold</dt><dd><p>Don’t overwrite the bios-set CMCI threshold. This boot option
prevents Linux from overwriting the CMCI threshold set by the
bios. Without this option, Linux always sets the CMCI
threshold to 1. Enabling this may make memory predictive failure
analysis less effective if the bios sets thresholds for memory
errors since we will not see details for all errors.</p>
</dd>
<dt>mce=recovery</dt><dd><p>Force-enable recoverable machine check code paths</p>
</dd>
<dt>nomce (for compatibility with i386)</dt><dd><p>same as mce=off</p>
</dd>
</dl>
<p>Everything else is in sysfs now.</p>
</div></blockquote>
</section>
<section id="apics">
<h2><span class="section-number">28.1.2. </span>APICs<a class="headerlink" href="#apics" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt>apic</dt><dd><p>Use IO-APIC. Default</p>
</dd>
<dt>noapic</dt><dd><p>Don’t use the IO-APIC.</p>
</dd>
<dt>disableapic</dt><dd><p>Don’t use the local APIC</p>
</dd>
<dt>nolapic</dt><dd><p>Don’t use the local APIC (alias for i386 compatibility)</p>
</dd>
<dt>pirq=…</dt><dd><p>See <a class="reference internal" href="../i386/IO-APIC.html"><span class="doc">IO-APIC</span></a></p>
</dd>
<dt>noapictimer</dt><dd><p>Don’t set up the APIC timer</p>
</dd>
<dt>no_timer_check</dt><dd><p>Don’t check the IO-APIC timer. This can work around
problems with incorrect timer initialization on some boards.</p>
</dd>
<dt>apicpmtimer</dt><dd><p>Do APIC timer calibration using the pmtimer. Implies
apicmaintimer. Useful when your PIT timer is totally broken.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="timing">
<h2><span class="section-number">28.1.3. </span>Timing<a class="headerlink" href="#timing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt>notsc</dt><dd><p>Deprecated, use tsc=unstable instead.</p>
</dd>
<dt>nohpet</dt><dd><p>Don’t use the HPET timer.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="idle-loop">
<h2><span class="section-number">28.1.4. </span>Idle loop<a class="headerlink" href="#idle-loop" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt>idle=poll</dt><dd><p>Don’t do power saving in the idle loop using HLT, but poll for rescheduling
event. This will make the CPUs eat a lot more power, but may be useful
to get slightly better performance in multiprocessor benchmarks. It also
makes some profiling using performance counters more accurate.
Please note that on systems with MONITOR/MWAIT support (like Intel EM64T
CPUs) this option has no performance advantage over the normal idle loop.
It may also interact badly with hyperthreading.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="rebooting">
<h2><span class="section-number">28.1.5. </span>Rebooting<a class="headerlink" href="#rebooting" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt>reboot=b[ios] | t[riple] | k[bd] | a[cpi] | e[fi] | p[ci] [, [w]arm | [c]old]</dt><dd><dl class="simple">
<dt>bios</dt><dd><p>Use the CPU reboot vector for warm reset</p>
</dd>
<dt>warm</dt><dd><p>Don’t set the cold reboot flag</p>
</dd>
<dt>cold</dt><dd><p>Set the cold reboot flag</p>
</dd>
<dt>triple</dt><dd><p>Force a triple fault (init)</p>
</dd>
<dt>kbd</dt><dd><p>Use the keyboard controller. cold reset (default)</p>
</dd>
<dt>acpi</dt><dd><p>Use the ACPI RESET_REG in the FADT. If ACPI is not configured or
the ACPI reset does not work, the reboot path attempts the reset
using the keyboard controller.</p>
</dd>
<dt>efi</dt><dd><p>Use efi reset_system runtime service. If EFI is not configured or
the EFI reset does not work, the reboot path attempts the reset using
the keyboard controller.</p>
</dd>
<dt>pci</dt><dd><p>Use a write to the PCI config space register 0xcf9 to trigger reboot.</p>
</dd>
</dl>
</dd>
</dl>
<p>Using warm reset will be much faster especially on big memory
systems because the BIOS will not go through the memory check.
Disadvantage is that not all hardware will be completely reinitialized
on reboot so there may be boot problems on some systems.</p>
<dl class="simple">
<dt>reboot=force</dt><dd><p>Don’t stop other CPUs on reboot. This can make reboot more reliable
in some cases.</p>
</dd>
<dt>reboot=default</dt><dd><p>There are some built-in platform specific “quirks” - you may see:
“reboot: &lt;name&gt; series board detected. Selecting &lt;type&gt; for reboots.”
In the case where you think the quirk is in error (e.g. you have
newer BIOS, or newer board) using this option will ignore the built-in
quirk table, and use the generic default reboot actions.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="numa">
<h2><span class="section-number">28.1.6. </span>NUMA<a class="headerlink" href="#numa" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt>numa=off</dt><dd><p>Only set up a single NUMA node spanning all memory.</p>
</dd>
<dt>numa=noacpi</dt><dd><p>Don’t parse the SRAT table for NUMA setup</p>
</dd>
<dt>numa=nohmat</dt><dd><p>Don’t parse the HMAT table for NUMA setup, or soft-reserved memory
partitioning.</p>
</dd>
<dt>numa=fake=&lt;size&gt;[MG]</dt><dd><p>If given as a memory unit, fills all system RAM with nodes of
size interleaved over physical nodes.</p>
</dd>
<dt>numa=fake=&lt;N&gt;</dt><dd><p>If given as an integer, fills all system RAM with N fake nodes
interleaved over physical nodes.</p>
</dd>
<dt>numa=fake=&lt;N&gt;U</dt><dd><p>If given as an integer followed by ‘U’, it will divide each
physical node into N emulated nodes.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="acpi">
<h2><span class="section-number">28.1.7. </span>ACPI<a class="headerlink" href="#acpi" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt>acpi=off</dt><dd><p>Don’t enable ACPI</p>
</dd>
<dt>acpi=ht</dt><dd><p>Use ACPI boot table parsing, but don’t enable ACPI interpreter</p>
</dd>
<dt>acpi=force</dt><dd><p>Force ACPI on (currently not needed)</p>
</dd>
<dt>acpi=strict</dt><dd><p>Disable out of spec ACPI workarounds.</p>
</dd>
<dt>acpi_sci={edge,level,high,low}</dt><dd><p>Set up ACPI SCI interrupt.</p>
</dd>
<dt>acpi=noirq</dt><dd><p>Don’t route interrupts</p>
</dd>
<dt>acpi=nocmcff</dt><dd><p>Disable firmware first mode for corrected errors. This
disables parsing the HEST CMC error source to check if
firmware has set the FF flag. This may result in
duplicate corrected error reports.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="pci">
<h2><span class="section-number">28.1.8. </span>PCI<a class="headerlink" href="#pci" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt>pci=off</dt><dd><p>Don’t use PCI</p>
</dd>
<dt>pci=conf1</dt><dd><p>Use conf1 access.</p>
</dd>
<dt>pci=conf2</dt><dd><p>Use conf2 access.</p>
</dd>
<dt>pci=rom</dt><dd><p>Assign ROMs.</p>
</dd>
<dt>pci=assign-busses</dt><dd><p>Assign busses</p>
</dd>
<dt>pci=irqmask=MASK</dt><dd><p>Set PCI interrupt mask to MASK</p>
</dd>
<dt>pci=lastbus=NUMBER</dt><dd><p>Scan up to NUMBER busses, no matter what the mptable says.</p>
</dd>
<dt>pci=noacpi</dt><dd><p>Don’t use ACPI to set up PCI interrupt routing.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="iommu-input-output-memory-management-unit">
<h2><span class="section-number">28.1.9. </span>IOMMU (input/output memory management unit)<a class="headerlink" href="#iommu-input-output-memory-management-unit" title="Permalink to this headline">¶</a></h2>
<p>Multiple x86-64 PCI-DMA mapping implementations exist, for example:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>&lt;kernel/dma/direct.c&gt;: use no hardware/software IOMMU at all
(e.g. because you have &lt; 3 GB memory).
Kernel boot message: “PCI-DMA: Disabling IOMMU”</p></li>
<li><p>&lt;arch/x86/kernel/amd_gart_64.c&gt;: AMD GART based hardware IOMMU.
Kernel boot message: “PCI-DMA: using GART IOMMU”</p></li>
<li><p>&lt;arch/x86_64/kernel/pci-swiotlb.c&gt; : Software IOMMU implementation. Used
e.g. if there is no hardware IOMMU in the system and it is need because
you have &gt;3GB memory or told the kernel to us it (iommu=soft))
Kernel boot message: “PCI-DMA: Using software bounce buffering
for IO (SWIOTLB)”</p></li>
</ol>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>iommu=[&lt;size&gt;][,noagp][,off][,force][,noforce]
[,memaper[=&lt;order&gt;]][,merge][,fullflush][,nomerge]
[,noaperture]
</pre></div>
</div>
<p>General iommu options:</p>
<blockquote>
<div><dl class="simple">
<dt>off</dt><dd><p>Don’t initialize and use any kind of IOMMU.</p>
</dd>
<dt>noforce</dt><dd><p>Don’t force hardware IOMMU usage when it is not needed. (default).</p>
</dd>
<dt>force</dt><dd><p>Force the use of the hardware IOMMU even when it is
not actually needed (e.g. because &lt; 3 GB memory).</p>
</dd>
<dt>soft</dt><dd><p>Use software bounce buffering (SWIOTLB) (default for
Intel machines). This can be used to prevent the usage
of an available hardware IOMMU.</p>
</dd>
</dl>
</div></blockquote>
<p>iommu options only relevant to the AMD GART hardware IOMMU:</p>
<blockquote>
<div><dl class="simple">
<dt>&lt;size&gt;</dt><dd><p>Set the size of the remapping area in bytes.</p>
</dd>
<dt>allowed</dt><dd><p>Overwrite iommu off workarounds for specific chipsets.</p>
</dd>
<dt>fullflush</dt><dd><p>Flush IOMMU on each allocation (default).</p>
</dd>
<dt>nofullflush</dt><dd><p>Don’t use IOMMU fullflush.</p>
</dd>
<dt>memaper[=&lt;order&gt;]</dt><dd><p>Allocate an own aperture over RAM with size 32MB&lt;&lt;order.
(default: order=1, i.e. 64MB)</p>
</dd>
<dt>merge</dt><dd><p>Do scatter-gather (SG) merging. Implies “force” (experimental).</p>
</dd>
<dt>nomerge</dt><dd><p>Don’t do scatter-gather (SG) merging.</p>
</dd>
<dt>noaperture</dt><dd><p>Ask the IOMMU not to touch the aperture for AGP.</p>
</dd>
<dt>noagp</dt><dd><p>Don’t initialize the AGP driver and use full aperture.</p>
</dd>
<dt>panic</dt><dd><p>Always panic when IOMMU overflows.</p>
</dd>
</dl>
</div></blockquote>
<p>iommu options only relevant to the software bounce buffering (SWIOTLB) IOMMU
implementation:</p>
<blockquote>
<div><dl class="simple">
<dt>swiotlb=&lt;slots&gt;[,force,noforce]</dt><dd><dl class="simple">
<dt>&lt;slots&gt;</dt><dd><p>Prereserve that many 2K slots for the software IO bounce buffering.</p>
</dd>
<dt>force</dt><dd><p>Force all IO through the software TLB.</p>
</dd>
<dt>noforce</dt><dd><p>Do not initialize the software TLB.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</section>
<section id="miscellaneous">
<h2><span class="section-number">28.1.10. </span>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="simple">
<dt>nogbpages</dt><dd><p>Do not use GB pages for kernel direct mappings.</p>
</dd>
<dt>gbpages</dt><dd><p>Use GB pages for kernel direct mappings.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="amd-sev-secure-encrypted-virtualization">
<h2><span class="section-number">28.1.11. </span>AMD SEV (Secure Encrypted Virtualization)<a class="headerlink" href="#amd-sev-secure-encrypted-virtualization" title="Permalink to this headline">¶</a></h2>
<p>Options relating to AMD SEV, specified via the following format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sev=option1[,option2]
</pre></div>
</div>
<p>The available options are:</p>
<blockquote>
<div><dl class="simple">
<dt>debug</dt><dd><p>Enable debug messages.</p>
</dd>
</dl>
</div></blockquote>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">28.1. AMD64 Specific Boot Options</a><ul>
<li><a class="reference internal" href="#machine-check">28.1.1. Machine check</a></li>
<li><a class="reference internal" href="#apics">28.1.2. APICs</a></li>
<li><a class="reference internal" href="#timing">28.1.3. Timing</a></li>
<li><a class="reference internal" href="#idle-loop">28.1.4. Idle loop</a></li>
<li><a class="reference internal" href="#rebooting">28.1.5. Rebooting</a></li>
<li><a class="reference internal" href="#numa">28.1.6. NUMA</a></li>
<li><a class="reference internal" href="#acpi">28.1.7. ACPI</a></li>
<li><a class="reference internal" href="#pci">28.1.8. PCI</a></li>
<li><a class="reference internal" href="#iommu-input-output-memory-management-unit">28.1.9. IOMMU (input/output memory management unit)</a></li>
<li><a class="reference internal" href="#miscellaneous">28.1.10. Miscellaneous</a></li>
<li><a class="reference internal" href="#amd-sev-secure-encrypted-virtualization">28.1.11. AMD SEV (Secure Encrypted Virtualization)</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/x86/x86_64/boot-options.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/x86/x86_64/boot-options.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>