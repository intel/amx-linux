
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Generic Block Device Capability &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Embedded device command line partition parsing" href="cmdline-partition.html" />
    <link rel="prev" title="Multi-Queue Block IO Queueing Mechanism (blk-mq)" href="blk-mq.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="generic-block-device-capability">
<h1>Generic Block Device Capability<a class="headerlink" href="#generic-block-device-capability" title="Permalink to this headline">¶</a></h1>
<p>This file documents the sysfs file <code class="docutils literal notranslate"><span class="pre">block/&lt;disk&gt;/capability</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">capability</span></code> is a bitfield, printed in hexadecimal, indicating which
capabilities a specific block device supports:</p>
<p id="genhd-capability-flags"><strong>genhd capability flags</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">GENHD_FL_REMOVABLE</span></code>: indicates that the block device gives access to
removable media.  When set, the device remains present even when media is not
inserted.  Shall not be set for devices which are removed entirely when the
media is removed.</p>
<p><code class="docutils literal notranslate"><span class="pre">GENHD_FL_HIDDEN</span></code>: the block device is hidden; it doesn’t produce events,
doesn’t appear in sysfs, and can’t be opened from userspace or using
blkdev_get*. Used for the underlying components of multipath devices.</p>
<p><code class="docutils literal notranslate"><span class="pre">GENHD_FL_NO_PART</span></code>: partition support is disabled.  The kernel will not
scan for partitions from add_disk, and users can’t add partitions manually.</p>
<dl class="function">
<dt id="c.disk_openers">
unsigned int <code class="sig-name descname">disk_openers</code><span class="sig-paren">(</span>struct gendisk<em> *disk</em><span class="sig-paren">)</span><a class="headerlink" href="#c.disk_openers" title="Permalink to this definition">¶</a></dt>
<dd><p>returns how many openers are there for a disk</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">gendisk</span> <span class="pre">*disk</span></code></dt><dd><p>disk to check</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This returns the number of openers for a disk.  Note that this value is only
stable if disk-&gt;open_mutex is held.</p>
<p><strong>Note</strong></p>
<p>Due to a quirk in the block layer open code, each open partition is
only counted once even if there are multiple openers.</p>
</div>
<dl class="function">
<dt id="c.blk_alloc_disk">
<code class="sig-name descname">blk_alloc_disk</code><span class="sig-paren">(</span><em>node_id</em><span class="sig-paren">)</span><a class="headerlink" href="#c.blk_alloc_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>allocate a gendisk structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">node_id</span></code></dt><dd><p>numa node to allocate on</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocate and pre-initialize a gendisk structure for use with BIO based
drivers.</p>
<p><strong>Context</strong></p>
<p>can sleep</p>
</div>
<dl class="function">
<dt id="c.bio_end_io_acct">
void <code class="sig-name descname">bio_end_io_acct</code><span class="sig-paren">(</span>struct bio<em> *bio</em>, unsigned long<em> start_time</em><span class="sig-paren">)</span><a class="headerlink" href="#c.bio_end_io_acct" title="Permalink to this definition">¶</a></dt>
<dd><p>end I/O accounting for bio based drivers</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">bio</span> <span class="pre">*bio</span></code></dt><dd><p>bio to end account for</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">start_time</span></code></dt><dd><p>start time returned by <a class="reference internal" href="../core-api/kernel-api.html#c.bio_start_io_acct" title="bio_start_io_acct"><code class="xref c c-func docutils literal notranslate"><span class="pre">bio_start_io_acct()</span></code></a></p>
</dd>
</dl>
</div>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/block/capability.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/block/capability.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>