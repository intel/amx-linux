
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>PA-RISC Debugging &#8212; The Linux Kernel 6.2.0-rc4+ documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Register Usage for Linux/PA-RISC" href="registers.html" />
    <link rel="prev" title="PA-RISC Architecture" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pa-risc-debugging">
<h1>PA-RISC Debugging<a class="headerlink" href="#pa-risc-debugging" title="Permalink to this headline">¶</a></h1>
<p>okay, here are some hints for debugging the lower-level parts of
linux/parisc.</p>
<section id="absolute-addresses">
<h2>1. Absolute addresses<a class="headerlink" href="#absolute-addresses" title="Permalink to this headline">¶</a></h2>
<p>A lot of the assembly code currently runs in real mode, which means
absolute addresses are used instead of virtual addresses as in the
rest of the kernel.  To translate an absolute address to a virtual
address you can lookup in System.map, add __PAGE_OFFSET (0x10000000
currently).</p>
</section>
<section id="hpmcs">
<h2>2. HPMCs<a class="headerlink" href="#hpmcs" title="Permalink to this headline">¶</a></h2>
<p>When real-mode code tries to access non-existent memory, you’ll get
an HPMC instead of a kernel oops.  To debug an HPMC, try to find
the System Responder/Requestor addresses.  The System Requestor
address should match (one of the) processor HPAs (high addresses in
the I/O range); the System Responder address is the address real-mode
code tried to access.</p>
<p>Typical values for the System Responder address are addresses larger
than __PAGE_OFFSET (0x10000000) which mean a virtual address didn’t
get translated to a physical address before real-mode code tried to
access it.</p>
</section>
<section id="q-bit-fun">
<h2>3. Q bit fun<a class="headerlink" href="#q-bit-fun" title="Permalink to this headline">¶</a></h2>
<p>Certain, very critical code has to clear the Q bit in the PSW.  What
happens when the Q bit is cleared is the CPU does not update the
registers interruption handlers read to find out where the machine
was interrupted - so if you get an interruption between the instruction
that clears the Q bit and the RFI that sets it again you don’t know
where exactly it happened.  If you’re lucky the IAOQ will point to the
instruction that cleared the Q bit, if you’re not it points anywhere
at all.  Usually Q bit problems will show themselves in unexplainable
system hangs or running off the end of physical memory.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.2.0-rc4-6.2.0-rc4+</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PA-RISC Debugging</a><ul>
<li><a class="reference internal" href="#absolute-addresses">1. Absolute addresses</a></li>
<li><a class="reference internal" href="#hpmcs">2. HPMCs</a></li>
<li><a class="reference internal" href="#q-bit-fun">3. Q bit fun</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/parisc/debugging.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/parisc/debugging.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>